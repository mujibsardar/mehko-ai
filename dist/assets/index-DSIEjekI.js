(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function mk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cx={exports:{}},Eh={},Ix={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),yk=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),wk=Symbol.for("react.strict_mode"),Ek=Symbol.for("react.profiler"),Sk=Symbol.for("react.provider"),xk=Symbol.for("react.context"),Tk=Symbol.for("react.forward_ref"),Ck=Symbol.for("react.suspense"),Ik=Symbol.for("react.memo"),bk=Symbol.for("react.lazy"),Cw=Symbol.iterator;function Rk(t){return t===null||typeof t!="object"?null:(t=Cw&&t[Cw]||t["@@iterator"],typeof t=="function"?t:null)}var bx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rx=Object.assign,Ax={};function el(t,e,n){this.props=t,this.context=e,this.refs=Ax,this.updater=n||bx}el.prototype.isReactComponent={};el.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};el.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Px(){}Px.prototype=el.prototype;function Um(t,e,n){this.props=t,this.context=e,this.refs=Ax,this.updater=n||bx}var $m=Um.prototype=new Px;$m.constructor=Um;Rx($m,el.prototype);$m.isPureReactComponent=!0;var Iw=Array.isArray,kx=Object.prototype.hasOwnProperty,Gm={current:null},Dx={key:!0,ref:!0,__self:!0,__source:!0};function Nx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kx.call(e,r)&&!Dx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sc,type:t,key:s,ref:o,props:i,_owner:Gm.current}}function Ak(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Hm(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function Pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bw=/\/+/g;function zp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Pk(""+t.key):e.toString(36)}function Fd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sc:case yk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+zp(o,0):r,Iw(i)?(n="",t!=null&&(n=t.replace(bw,"$&/")+"/"),Fd(i,e,n,"",function(u){return u})):i!=null&&(Hm(i)&&(i=Ak(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Iw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+zp(s,a);o+=Fd(s,e,n,l,i)}else if(l=Rk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+zp(s,a++),o+=Fd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xc(t,e,n){if(t==null)return t;var r=[],i=0;return Fd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},zd={transition:null},Dk={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:zd,ReactCurrentOwner:Gm};function Ox(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!Hm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Be.Component=el;Be.Fragment=_k;Be.Profiler=Ek;Be.PureComponent=Um;Be.StrictMode=wk;Be.Suspense=Ck;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;Be.act=Ox;Be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kx.call(e,l)&&!Dx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:sc,type:t.type,key:i,ref:s,props:r,_owner:o}};Be.createContext=function(t){return t={$$typeof:xk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Sk,_context:t},t.Consumer=t};Be.createElement=Nx;Be.createFactory=function(t){var e=Nx.bind(null,t);return e.type=t,e};Be.createRef=function(){return{current:null}};Be.forwardRef=function(t){return{$$typeof:Tk,render:t}};Be.isValidElement=Hm;Be.lazy=function(t){return{$$typeof:bk,_payload:{_status:-1,_result:t},_init:kk}};Be.memo=function(t,e){return{$$typeof:Ik,type:t,compare:e===void 0?null:e}};Be.startTransition=function(t){var e=zd.transition;zd.transition={};try{t()}finally{zd.transition=e}};Be.unstable_act=Ox;Be.useCallback=function(t,e){return jn.current.useCallback(t,e)};Be.useContext=function(t){return jn.current.useContext(t)};Be.useDebugValue=function(){};Be.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};Be.useEffect=function(t,e){return jn.current.useEffect(t,e)};Be.useId=function(){return jn.current.useId()};Be.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};Be.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};Be.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};Be.useMemo=function(t,e){return jn.current.useMemo(t,e)};Be.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};Be.useRef=function(t){return jn.current.useRef(t)};Be.useState=function(t){return jn.current.useState(t)};Be.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};Be.useTransition=function(){return jn.current.useTransition()};Be.version="18.3.1";Ix.exports=Be;var D=Ix.exports;const Nt=mk(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=D,Ok=Symbol.for("react.element"),Mk=Symbol.for("react.fragment"),Lk=Object.prototype.hasOwnProperty,jk=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vk={key:!0,ref:!0,__self:!0,__source:!0};function Mx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Lk.call(e,r)&&!Vk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ok,type:t,key:s,ref:o,props:i,_owner:jk.current}}Eh.Fragment=Mk;Eh.jsx=Mx;Eh.jsxs=Mx;Cx.exports=Eh;var g=Cx.exports,Lx={exports:{}},lr={},jx={exports:{}},Vx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,j){var z=L.length;L.push(j);e:for(;0<z;){var $=z-1>>>1,K=L[$];if(0<i(K,j))L[$]=j,L[z]=K,z=$;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var j=L[0],z=L.pop();if(z!==j){L[0]=z;e:for(var $=0,K=L.length,J=K>>>1;$<J;){var te=2*($+1)-1,ie=L[te],X=te+1,ue=L[X];if(0>i(ie,z))X<K&&0>i(ue,ie)?(L[$]=ue,L[X]=z,$=X):(L[$]=ie,L[te]=z,$=te);else if(X<K&&0>i(ue,z))L[$]=ue,L[X]=z,$=X;else break e}}return j}function i(L,j){var z=L.sortIndex-j.sortIndex;return z!==0?z:L.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,v=!1,m=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=L)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function b(L){if(m=!1,S(L),!v)if(n(l)!==null)v=!0,q(N);else{var j=n(u);j!==null&&H(b,j.startTime-L)}}function N(L,j){v=!1,m&&(m=!1,y(w),w=-1),p=!0;var z=f;try{for(S(j),d=n(l);d!==null&&(!(d.expirationTime>j)||L&&!A());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var K=$(d.expirationTime<=j);j=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),S(j)}else r(l);d=n(l)}if(d!==null)var J=!0;else{var te=n(u);te!==null&&H(b,te.startTime-j),J=!1}return J}finally{d=null,f=z,p=!1}}var R=!1,x=null,w=-1,C=5,I=-1;function A(){return!(t.unstable_now()-I<C)}function O(){if(x!==null){var L=t.unstable_now();I=L;var j=!0;try{j=x(!0,L)}finally{j?P():(R=!1,x=null)}}else R=!1}var P;if(typeof _=="function")P=function(){_(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,U=F.port2;F.port1.onmessage=O,P=function(){U.postMessage(null)}}else P=function(){E(O,0)};function q(L){x=L,R||(R=!0,P())}function H(L,j){w=E(function(){L(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,q(N))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var z=f;f=j;try{return L()}finally{f=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,j){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=f;f=L;try{return j()}finally{f=z}},t.unstable_scheduleCallback=function(L,j,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,L){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=z+K,L={id:c++,callback:j,priorityLevel:L,startTime:z,expirationTime:K,sortIndex:-1},z>$?(L.sortIndex=z,e(u,L),n(l)===null&&L===n(u)&&(m?(y(w),w=-1):m=!0,H(b,z-$))):(L.sortIndex=K,e(l,L),v||p||(v=!0,q(N))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var j=f;return function(){var z=f;f=j;try{return L.apply(this,arguments)}finally{f=z}}}})(Vx);jx.exports=Vx;var Fk=jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=D,sr=Fk;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Fx=new Set,Tu={};function Mo(t,e){Da(t,e),Da(t+"Capture",e)}function Da(t,e){for(Tu[t]=e,t=0;t<e.length;t++)Fx.add(e[t])}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yg=Object.prototype.hasOwnProperty,Bk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rw={},Aw={};function Uk(t){return Yg.call(Aw,t)?!0:Yg.call(Rw,t)?!1:Bk.test(t)?Aw[t]=!0:(Rw[t]=!0,!1)}function $k(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gk(t,e,n,r){if(e===null||typeof e>"u"||$k(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function qm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,qm);fn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,qm);fn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,qm);fn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ym(t,e,n,r){var i=fn.hasOwnProperty(e)?fn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gk(e,n,i,r)&&(n=null),r||i===null?Uk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ui=zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qc=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),Kg=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),Bx=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),Xg=Symbol.for("react.suspense"),Qg=Symbol.for("react.suspense_list"),Qm=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),Ux=Symbol.for("react.offscreen"),Pw=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=Pw&&t[Pw]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,Bp;function Bl(t){if(Bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Bp=e&&e[1]||""}return`
`+Bp+t}var Up=!1;function $p(t,e){if(!t||Up)return"";Up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bl(t):""}function Hk(t){switch(t.tag){case 5:return Bl(t.type);case 16:return Bl("Lazy");case 13:return Bl("Suspense");case 19:return Bl("SuspenseList");case 0:case 2:case 15:return t=$p(t.type,!1),t;case 11:return t=$p(t.type.render,!1),t;case 1:return t=$p(t.type,!0),t;default:return""}}function Jg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case Kg:return"Profiler";case Km:return"StrictMode";case Xg:return"Suspense";case Qg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Bx:return(t.displayName||"Context")+".Consumer";case zx:return(t._context.displayName||"Context")+".Provider";case Xm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qm:return e=t.displayName||null,e!==null?e:Jg(t.type)||"Memo";case Zi:e=t._payload,t=t._init;try{return Jg(t(e))}catch{}}return null}function Wk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jg(e);case 8:return e===Km?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $x(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qk(t){var e=$x(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jc(t){t._valueTracker||(t._valueTracker=qk(t))}function Gx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$x(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ff(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zg(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hx(t,e){e=e.checked,e!=null&&Ym(t,"checked",e,!1)}function ev(t,e){Hx(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tv(t,e.type,n):e.hasOwnProperty("defaultValue")&&tv(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tv(t,e,n){(e!=="number"||ff(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ul=Array.isArray;function _a(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Ul(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function Wx(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ow(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zc,Yx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zc=Zc||document.createElement("div"),Zc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yk=["Webkit","ms","Moz","O"];Object.keys(eu).forEach(function(t){Yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),eu[e]=eu[t]})});function Kx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||eu.hasOwnProperty(t)&&eu[t]?(""+e).trim():e+"px"}function Xx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Kx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Kk=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iv(t,e){if(e){if(Kk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function sv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ov=null;function Jm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var av=null,wa=null,Ea=null;function Mw(t){if(t=lc(t)){if(typeof av!="function")throw Error(le(280));var e=t.stateNode;e&&(e=Ih(e),av(t.stateNode,t.type,e))}}function Qx(t){wa?Ea?Ea.push(t):Ea=[t]:wa=t}function Jx(){if(wa){var t=wa,e=Ea;if(Ea=wa=null,Mw(t),e)for(t=0;t<e.length;t++)Mw(e[t])}}function Zx(t,e){return t(e)}function eT(){}var Gp=!1;function tT(t,e,n){if(Gp)return t(e,n);Gp=!0;try{return Zx(t,e,n)}finally{Gp=!1,(wa!==null||Ea!==null)&&(eT(),Jx())}}function Iu(t,e){var n=t.stateNode;if(n===null)return null;var r=Ih(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var lv=!1;if(Ai)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){lv=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{lv=!1}function Xk(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var tu=!1,hf=null,pf=!1,uv=null,Qk={onError:function(t){tu=!0,hf=t}};function Jk(t,e,n,r,i,s,o,a,l){tu=!1,hf=null,Xk.apply(Qk,arguments)}function Zk(t,e,n,r,i,s,o,a,l){if(Jk.apply(this,arguments),tu){if(tu){var u=hf;tu=!1,hf=null}else throw Error(le(198));pf||(pf=!0,uv=u)}}function Lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lw(t){if(Lo(t)!==t)throw Error(le(188))}function eD(t){var e=t.alternate;if(!e){if(e=Lo(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lw(i),t;if(s===r)return Lw(i),e;s=s.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function rT(t){return t=eD(t),t!==null?iT(t):null}function iT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iT(t);if(e!==null)return e;t=t.sibling}return null}var sT=sr.unstable_scheduleCallback,jw=sr.unstable_cancelCallback,tD=sr.unstable_shouldYield,nD=sr.unstable_requestPaint,Ot=sr.unstable_now,rD=sr.unstable_getCurrentPriorityLevel,Zm=sr.unstable_ImmediatePriority,oT=sr.unstable_UserBlockingPriority,gf=sr.unstable_NormalPriority,iD=sr.unstable_LowPriority,aT=sr.unstable_IdlePriority,Sh=null,Qr=null;function sD(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Sh,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:lD,oD=Math.log,aD=Math.LN2;function lD(t){return t>>>=0,t===0?32:31-(oD(t)/aD|0)|0}var ed=64,td=4194304;function $l(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$l(a):(s&=o,s!==0&&(r=$l(s)))}else o=n&~i,o!==0?r=$l(o):s!==0&&(r=$l(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Or(e),i=1<<n,r|=t[n],e&=~i;return r}function uD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Or(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=uD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function cv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lT(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function Hp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=n}function dD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function e0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var it=0;function uT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cT,t0,dT,fT,hT,dv=!1,nd=[],hs=null,ps=null,gs=null,bu=new Map,Ru=new Map,ns=[],fD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vw(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(e.pointerId)}}function Dl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lc(e),e!==null&&t0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hD(t,e,n,r,i){switch(e){case"focusin":return hs=Dl(hs,t,e,n,r,i),!0;case"dragenter":return ps=Dl(ps,t,e,n,r,i),!0;case"mouseover":return gs=Dl(gs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bu.set(s,Dl(bu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ru.set(s,Dl(Ru.get(s)||null,t,e,n,r,i)),!0}return!1}function pT(t){var e=uo(t.target);if(e!==null){var n=Lo(e);if(n!==null){if(e=n.tag,e===13){if(e=nT(n),e!==null){t.blockedOn=e,hT(t.priority,function(){dT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ov=r,n.target.dispatchEvent(r),ov=null}else return e=lc(n),e!==null&&t0(e),t.blockedOn=n,!1;e.shift()}return!0}function Fw(t,e,n){Bd(t)&&n.delete(e)}function pD(){dv=!1,hs!==null&&Bd(hs)&&(hs=null),ps!==null&&Bd(ps)&&(ps=null),gs!==null&&Bd(gs)&&(gs=null),bu.forEach(Fw),Ru.forEach(Fw)}function Nl(t,e){t.blockedOn===e&&(t.blockedOn=null,dv||(dv=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,pD)))}function Au(t){function e(i){return Nl(i,t)}if(0<nd.length){Nl(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&Nl(hs,t),ps!==null&&Nl(ps,t),gs!==null&&Nl(gs,t),bu.forEach(e),Ru.forEach(e),n=0;n<ns.length;n++)r=ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)pT(n),n.blockedOn===null&&ns.shift()}var Sa=Ui.ReactCurrentBatchConfig,mf=!0;function gD(t,e,n,r){var i=it,s=Sa.transition;Sa.transition=null;try{it=1,n0(t,e,n,r)}finally{it=i,Sa.transition=s}}function vD(t,e,n,r){var i=it,s=Sa.transition;Sa.transition=null;try{it=4,n0(t,e,n,r)}finally{it=i,Sa.transition=s}}function n0(t,e,n,r){if(mf){var i=fv(t,e,n,r);if(i===null)tg(t,e,r,yf,n),Vw(t,r);else if(hD(i,t,e,n,r))r.stopPropagation();else if(Vw(t,r),e&4&&-1<fD.indexOf(t)){for(;i!==null;){var s=lc(i);if(s!==null&&cT(s),s=fv(t,e,n,r),s===null&&tg(t,e,r,yf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else tg(t,e,r,null,n)}}var yf=null;function fv(t,e,n,r){if(yf=null,t=Jm(r),t=uo(t),t!==null)if(e=Lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yf=t,null}function gT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rD()){case Zm:return 1;case oT:return 4;case gf:case iD:return 16;case aT:return 536870912;default:return 16}default:return 16}}var ls=null,r0=null,Ud=null;function vT(){if(Ud)return Ud;var t,e=r0,n=e.length,r,i="value"in ls?ls.value:ls.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ud=i.slice(t,1<r?1-r:void 0)}function $d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function zw(){return!1}function ur(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rd:zw,this.isPropagationStopped=zw,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i0=ur(tl),ac=It({},tl,{view:0,detail:0}),mD=ur(ac),Wp,qp,Ol,xh=It({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ol&&(Ol&&t.type==="mousemove"?(Wp=t.screenX-Ol.screenX,qp=t.screenY-Ol.screenY):qp=Wp=0,Ol=t),Wp)},movementY:function(t){return"movementY"in t?t.movementY:qp}}),Bw=ur(xh),yD=It({},xh,{dataTransfer:0}),_D=ur(yD),wD=It({},ac,{relatedTarget:0}),Yp=ur(wD),ED=It({},tl,{animationName:0,elapsedTime:0,pseudoElement:0}),SD=ur(ED),xD=It({},tl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TD=ur(xD),CD=It({},tl,{data:0}),Uw=ur(CD),ID={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RD[t])?!!e[t]:!1}function s0(){return AD}var PD=It({},ac,{key:function(t){if(t.key){var e=ID[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s0,charCode:function(t){return t.type==="keypress"?$d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kD=ur(PD),DD=It({},xh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$w=ur(DD),ND=It({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s0}),OD=ur(ND),MD=It({},tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),LD=ur(MD),jD=It({},xh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VD=ur(jD),FD=[9,13,27,32],o0=Ai&&"CompositionEvent"in window,nu=null;Ai&&"documentMode"in document&&(nu=document.documentMode);var zD=Ai&&"TextEvent"in window&&!nu,mT=Ai&&(!o0||nu&&8<nu&&11>=nu),Gw=" ",Hw=!1;function yT(t,e){switch(t){case"keyup":return FD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _T(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function BD(t,e){switch(t){case"compositionend":return _T(e);case"keypress":return e.which!==32?null:(Hw=!0,Gw);case"textInput":return t=e.data,t===Gw&&Hw?null:t;default:return null}}function UD(t,e){if(na)return t==="compositionend"||!o0&&yT(t,e)?(t=vT(),Ud=r0=ls=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mT&&e.locale!=="ko"?null:e.data;default:return null}}var $D={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ww(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$D[t.type]:e==="textarea"}function wT(t,e,n,r){Qx(r),e=_f(e,"onChange"),0<e.length&&(n=new i0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ru=null,Pu=null;function GD(t){kT(t,0)}function Th(t){var e=sa(t);if(Gx(e))return t}function HD(t,e){if(t==="change")return e}var ET=!1;if(Ai){var Kp;if(Ai){var Xp="oninput"in document;if(!Xp){var qw=document.createElement("div");qw.setAttribute("oninput","return;"),Xp=typeof qw.oninput=="function"}Kp=Xp}else Kp=!1;ET=Kp&&(!document.documentMode||9<document.documentMode)}function Yw(){ru&&(ru.detachEvent("onpropertychange",ST),Pu=ru=null)}function ST(t){if(t.propertyName==="value"&&Th(Pu)){var e=[];wT(e,Pu,t,Jm(t)),tT(GD,e)}}function WD(t,e,n){t==="focusin"?(Yw(),ru=e,Pu=n,ru.attachEvent("onpropertychange",ST)):t==="focusout"&&Yw()}function qD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Th(Pu)}function YD(t,e){if(t==="click")return Th(e)}function KD(t,e){if(t==="input"||t==="change")return Th(e)}function XD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jr=typeof Object.is=="function"?Object.is:XD;function ku(t,e){if(jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yg.call(e,i)||!jr(t[i],e[i]))return!1}return!0}function Kw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xw(t,e){var n=Kw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kw(n)}}function xT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function TT(){for(var t=window,e=ff();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ff(t.document)}return e}function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QD(t){var e=TT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xT(n.ownerDocument.documentElement,n)){if(r!==null&&a0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Xw(n,s);var o=Xw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JD=Ai&&"documentMode"in document&&11>=document.documentMode,ra=null,hv=null,iu=null,pv=!1;function Qw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pv||ra==null||ra!==ff(r)||(r=ra,"selectionStart"in r&&a0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),iu&&ku(iu,r)||(iu=r,r=_f(hv,"onSelect"),0<r.length&&(e=new i0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ra)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Qp={},CT={};Ai&&(CT=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Ch(t){if(Qp[t])return Qp[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CT)return Qp[t]=e[n];return t}var IT=Ch("animationend"),bT=Ch("animationiteration"),RT=Ch("animationstart"),AT=Ch("transitionend"),PT=new Map,Jw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(t,e){PT.set(t,e),Mo(e,[t])}for(var Jp=0;Jp<Jw.length;Jp++){var Zp=Jw[Jp],ZD=Zp.toLowerCase(),eN=Zp[0].toUpperCase()+Zp.slice(1);Fs(ZD,"on"+eN)}Fs(IT,"onAnimationEnd");Fs(bT,"onAnimationIteration");Fs(RT,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(AT,"onTransitionEnd");Da("onMouseEnter",["mouseout","mouseover"]);Da("onMouseLeave",["mouseout","mouseover"]);Da("onPointerEnter",["pointerout","pointerover"]);Da("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gl));function Zw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Zk(r,e,void 0,t),t.currentTarget=null}function kT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Zw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Zw(i,a,u),s=l}}}if(pf)throw t=uv,pf=!1,uv=null,t}function pt(t,e){var n=e[_v];n===void 0&&(n=e[_v]=new Set);var r=t+"__bubble";n.has(r)||(DT(e,t,2,!1),n.add(r))}function eg(t,e,n){var r=0;e&&(r|=4),DT(n,t,r,e)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Du(t){if(!t[sd]){t[sd]=!0,Fx.forEach(function(n){n!=="selectionchange"&&(tN.has(n)||eg(n,!1,t),eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sd]||(e[sd]=!0,eg("selectionchange",!1,e))}}function DT(t,e,n,r){switch(gT(e)){case 1:var i=gD;break;case 4:i=vD;break;default:i=n0}n=i.bind(null,e,n,t),i=void 0,!lv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=uo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}tT(function(){var u=s,c=Jm(n),d=[];e:{var f=PT.get(t);if(f!==void 0){var p=i0,v=t;switch(t){case"keypress":if($d(n)===0)break e;case"keydown":case"keyup":p=kD;break;case"focusin":v="focus",p=Yp;break;case"focusout":v="blur",p=Yp;break;case"beforeblur":case"afterblur":p=Yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Bw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_D;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=OD;break;case IT:case bT:case RT:p=SD;break;case AT:p=LD;break;case"scroll":p=mD;break;case"wheel":p=VD;break;case"copy":case"cut":case"paste":p=TD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=$w}var m=(e&4)!==0,E=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var _=u,S;_!==null;){S=_;var b=S.stateNode;if(S.tag===5&&b!==null&&(S=b,y!==null&&(b=Iu(_,y),b!=null&&m.push(Nu(_,b,S)))),E)break;_=_.return}0<m.length&&(f=new p(f,v,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==ov&&(v=n.relatedTarget||n.fromElement)&&(uo(v)||v[Pi]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?uo(v):null,v!==null&&(E=Lo(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(m=Bw,b="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(m=$w,b="onPointerLeave",y="onPointerEnter",_="pointer"),E=p==null?f:sa(p),S=v==null?f:sa(v),f=new m(b,_+"leave",p,n,c),f.target=E,f.relatedTarget=S,b=null,uo(c)===u&&(m=new m(y,_+"enter",v,n,c),m.target=S,m.relatedTarget=E,b=m),E=b,p&&v)t:{for(m=p,y=v,_=0,S=m;S;S=Ho(S))_++;for(S=0,b=y;b;b=Ho(b))S++;for(;0<_-S;)m=Ho(m),_--;for(;0<S-_;)y=Ho(y),S--;for(;_--;){if(m===y||y!==null&&m===y.alternate)break t;m=Ho(m),y=Ho(y)}m=null}else m=null;p!==null&&e1(d,f,p,m,!1),v!==null&&E!==null&&e1(d,E,v,m,!0)}}e:{if(f=u?sa(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=HD;else if(Ww(f))if(ET)N=KD;else{N=qD;var R=WD}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=YD);if(N&&(N=N(t,u))){wT(d,N,n,c);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&tv(f,"number",f.value)}switch(R=u?sa(u):window,t){case"focusin":(Ww(R)||R.contentEditable==="true")&&(ra=R,hv=u,iu=null);break;case"focusout":iu=hv=ra=null;break;case"mousedown":pv=!0;break;case"contextmenu":case"mouseup":case"dragend":pv=!1,Qw(d,n,c);break;case"selectionchange":if(JD)break;case"keydown":case"keyup":Qw(d,n,c)}var x;if(o0)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else na?yT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(mT&&n.locale!=="ko"&&(na||w!=="onCompositionStart"?w==="onCompositionEnd"&&na&&(x=vT()):(ls=c,r0="value"in ls?ls.value:ls.textContent,na=!0)),R=_f(u,w),0<R.length&&(w=new Uw(w,t,null,n,c),d.push({event:w,listeners:R}),x?w.data=x:(x=_T(n),x!==null&&(w.data=x)))),(x=zD?BD(t,n):UD(t,n))&&(u=_f(u,"onBeforeInput"),0<u.length&&(c=new Uw("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=x))}kT(d,e)})}function Nu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _f(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Iu(t,n),s!=null&&r.unshift(Nu(t,s,i)),s=Iu(t,e),s!=null&&r.push(Nu(t,s,i))),t=t.return}return r}function Ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Iu(n,s),l!=null&&o.unshift(Nu(n,l,a))):i||(l=Iu(n,s),l!=null&&o.push(Nu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nN=/\r\n?/g,rN=/\u0000|\uFFFD/g;function t1(t){return(typeof t=="string"?t:""+t).replace(nN,`
`).replace(rN,"")}function od(t,e,n){if(e=t1(e),t1(t)!==e&&n)throw Error(le(425))}function wf(){}var gv=null,vv=null;function mv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yv=typeof setTimeout=="function"?setTimeout:void 0,iN=typeof clearTimeout=="function"?clearTimeout:void 0,n1=typeof Promise=="function"?Promise:void 0,sN=typeof queueMicrotask=="function"?queueMicrotask:typeof n1<"u"?function(t){return n1.resolve(null).then(t).catch(oN)}:yv;function oN(t){setTimeout(function(){throw t})}function ng(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Au(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Au(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nl=Math.random().toString(36).slice(2),Xr="__reactFiber$"+nl,Ou="__reactProps$"+nl,Pi="__reactContainer$"+nl,_v="__reactEvents$"+nl,aN="__reactListeners$"+nl,lN="__reactHandles$"+nl;function uo(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pi]||n[Xr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r1(t);t!==null;){if(n=t[Xr])return n;t=r1(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[Xr]||t[Pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function Ih(t){return t[Ou]||null}var wv=[],oa=-1;function zs(t){return{current:t}}function mt(t){0>oa||(t.current=wv[oa],wv[oa]=null,oa--)}function ft(t,e){oa++,wv[oa]=t.current,t.current=e}var Rs={},Tn=zs(Rs),qn=zs(!1),wo=Rs;function Na(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(t){return t=t.childContextTypes,t!=null}function Ef(){mt(qn),mt(Tn)}function i1(t,e,n){if(Tn.current!==Rs)throw Error(le(168));ft(Tn,e),ft(qn,n)}function NT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(le(108,Wk(t)||"Unknown",i));return It({},n,r)}function Sf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,wo=Tn.current,ft(Tn,t),ft(qn,qn.current),!0}function s1(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=NT(t,e,wo),r.__reactInternalMemoizedMergedChildContext=t,mt(qn),mt(Tn),ft(Tn,t)):mt(qn),ft(qn,n)}var yi=null,bh=!1,rg=!1;function OT(t){yi===null?yi=[t]:yi.push(t)}function uN(t){bh=!0,OT(t)}function Bs(){if(!rg&&yi!==null){rg=!0;var t=0,e=it;try{var n=yi;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yi=null,bh=!1}catch(i){throw yi!==null&&(yi=yi.slice(t+1)),sT(Zm,Bs),i}finally{it=e,rg=!1}}return null}var aa=[],la=0,xf=null,Tf=0,hr=[],pr=0,Eo=null,_i=1,wi="";function no(t,e){aa[la++]=Tf,aa[la++]=xf,xf=t,Tf=e}function MT(t,e,n){hr[pr++]=_i,hr[pr++]=wi,hr[pr++]=Eo,Eo=t;var r=_i;t=wi;var i=32-Or(r)-1;r&=~(1<<i),n+=1;var s=32-Or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_i=1<<32-Or(e)+i|n<<i|r,wi=s+t}else _i=1<<s|n<<i|r,wi=t}function l0(t){t.return!==null&&(no(t,1),MT(t,1,0))}function u0(t){for(;t===xf;)xf=aa[--la],aa[la]=null,Tf=aa[--la],aa[la]=null;for(;t===Eo;)Eo=hr[--pr],hr[pr]=null,wi=hr[--pr],hr[pr]=null,_i=hr[--pr],hr[pr]=null}var ir=null,nr=null,Et=!1,Dr=null;function LT(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function o1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ir=t,nr=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ir=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eo!==null?{id:_i,overflow:wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ir=t,nr=null,!0):!1;default:return!1}}function Ev(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sv(t){if(Et){var e=nr;if(e){var n=e;if(!o1(t,e)){if(Ev(t))throw Error(le(418));e=vs(n.nextSibling);var r=ir;e&&o1(t,e)?LT(r,n):(t.flags=t.flags&-4097|2,Et=!1,ir=t)}}else{if(Ev(t))throw Error(le(418));t.flags=t.flags&-4097|2,Et=!1,ir=t}}}function a1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function ad(t){if(t!==ir)return!1;if(!Et)return a1(t),Et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mv(t.type,t.memoizedProps)),e&&(e=nr)){if(Ev(t))throw jT(),Error(le(418));for(;e;)LT(t,e),e=vs(e.nextSibling)}if(a1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=ir?vs(t.stateNode.nextSibling):null;return!0}function jT(){for(var t=nr;t;)t=vs(t.nextSibling)}function Oa(){nr=ir=null,Et=!1}function c0(t){Dr===null?Dr=[t]:Dr.push(t)}var cN=Ui.ReactCurrentBatchConfig;function Ml(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function ld(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l1(t){var e=t._init;return e(t._payload)}function VT(t){function e(y,_){if(t){var S=y.deletions;S===null?(y.deletions=[_],y.flags|=16):S.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=ws(y,_),y.index=0,y.sibling=null,y}function s(y,_,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<_?(y.flags|=2,_):S):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,_,S,b){return _===null||_.tag!==6?(_=cg(S,y.mode,b),_.return=y,_):(_=i(_,S),_.return=y,_)}function l(y,_,S,b){var N=S.type;return N===ta?c(y,_,S.props.children,b,S.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zi&&l1(N)===_.type)?(b=i(_,S.props),b.ref=Ml(y,_,S),b.return=y,b):(b=Xd(S.type,S.key,S.props,null,y.mode,b),b.ref=Ml(y,_,S),b.return=y,b)}function u(y,_,S,b){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=dg(S,y.mode,b),_.return=y,_):(_=i(_,S.children||[]),_.return=y,_)}function c(y,_,S,b,N){return _===null||_.tag!==7?(_=vo(S,y.mode,b,N),_.return=y,_):(_=i(_,S),_.return=y,_)}function d(y,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=cg(""+_,y.mode,S),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qc:return S=Xd(_.type,_.key,_.props,null,y.mode,S),S.ref=Ml(y,null,_),S.return=y,S;case ea:return _=dg(_,y.mode,S),_.return=y,_;case Zi:var b=_._init;return d(y,b(_._payload),S)}if(Ul(_)||Pl(_))return _=vo(_,y.mode,S,null),_.return=y,_;ld(y,_)}return null}function f(y,_,S,b){var N=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(y,_,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:return S.key===N?l(y,_,S,b):null;case ea:return S.key===N?u(y,_,S,b):null;case Zi:return N=S._init,f(y,_,N(S._payload),b)}if(Ul(S)||Pl(S))return N!==null?null:c(y,_,S,b,null);ld(y,S)}return null}function p(y,_,S,b,N){if(typeof b=="string"&&b!==""||typeof b=="number")return y=y.get(S)||null,a(_,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qc:return y=y.get(b.key===null?S:b.key)||null,l(_,y,b,N);case ea:return y=y.get(b.key===null?S:b.key)||null,u(_,y,b,N);case Zi:var R=b._init;return p(y,_,S,R(b._payload),N)}if(Ul(b)||Pl(b))return y=y.get(S)||null,c(_,y,b,N,null);ld(_,b)}return null}function v(y,_,S,b){for(var N=null,R=null,x=_,w=_=0,C=null;x!==null&&w<S.length;w++){x.index>w?(C=x,x=null):C=x.sibling;var I=f(y,x,S[w],b);if(I===null){x===null&&(x=C);break}t&&x&&I.alternate===null&&e(y,x),_=s(I,_,w),R===null?N=I:R.sibling=I,R=I,x=C}if(w===S.length)return n(y,x),Et&&no(y,w),N;if(x===null){for(;w<S.length;w++)x=d(y,S[w],b),x!==null&&(_=s(x,_,w),R===null?N=x:R.sibling=x,R=x);return Et&&no(y,w),N}for(x=r(y,x);w<S.length;w++)C=p(x,y,w,S[w],b),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?w:C.key),_=s(C,_,w),R===null?N=C:R.sibling=C,R=C);return t&&x.forEach(function(A){return e(y,A)}),Et&&no(y,w),N}function m(y,_,S,b){var N=Pl(S);if(typeof N!="function")throw Error(le(150));if(S=N.call(S),S==null)throw Error(le(151));for(var R=N=null,x=_,w=_=0,C=null,I=S.next();x!==null&&!I.done;w++,I=S.next()){x.index>w?(C=x,x=null):C=x.sibling;var A=f(y,x,I.value,b);if(A===null){x===null&&(x=C);break}t&&x&&A.alternate===null&&e(y,x),_=s(A,_,w),R===null?N=A:R.sibling=A,R=A,x=C}if(I.done)return n(y,x),Et&&no(y,w),N;if(x===null){for(;!I.done;w++,I=S.next())I=d(y,I.value,b),I!==null&&(_=s(I,_,w),R===null?N=I:R.sibling=I,R=I);return Et&&no(y,w),N}for(x=r(y,x);!I.done;w++,I=S.next())I=p(x,y,w,I.value,b),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?w:I.key),_=s(I,_,w),R===null?N=I:R.sibling=I,R=I);return t&&x.forEach(function(O){return e(y,O)}),Et&&no(y,w),N}function E(y,_,S,b){if(typeof S=="object"&&S!==null&&S.type===ta&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Qc:e:{for(var N=S.key,R=_;R!==null;){if(R.key===N){if(N=S.type,N===ta){if(R.tag===7){n(y,R.sibling),_=i(R,S.props.children),_.return=y,y=_;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zi&&l1(N)===R.type){n(y,R.sibling),_=i(R,S.props),_.ref=Ml(y,R,S),_.return=y,y=_;break e}n(y,R);break}else e(y,R);R=R.sibling}S.type===ta?(_=vo(S.props.children,y.mode,b,S.key),_.return=y,y=_):(b=Xd(S.type,S.key,S.props,null,y.mode,b),b.ref=Ml(y,_,S),b.return=y,y=b)}return o(y);case ea:e:{for(R=S.key;_!==null;){if(_.key===R)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(y,_.sibling),_=i(_,S.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=dg(S,y.mode,b),_.return=y,y=_}return o(y);case Zi:return R=S._init,E(y,_,R(S._payload),b)}if(Ul(S))return v(y,_,S,b);if(Pl(S))return m(y,_,S,b);ld(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(y,_.sibling),_=i(_,S),_.return=y,y=_):(n(y,_),_=cg(S,y.mode,b),_.return=y,y=_),o(y)):n(y,_)}return E}var Ma=VT(!0),FT=VT(!1),Cf=zs(null),If=null,ua=null,d0=null;function f0(){d0=ua=If=null}function h0(t){var e=Cf.current;mt(Cf),t._currentValue=e}function xv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xa(t,e){If=t,d0=ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(d0!==t)if(t={context:t,memoizedValue:e,next:null},ua===null){if(If===null)throw Error(le(308));ua=t,If.dependencies={lanes:0,firstContext:t}}else ua=ua.next=t;return e}var co=null;function p0(t){co===null?co=[t]:co.push(t)}function zT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,p0(e)):(n.next=i.next,i.next=n),e.interleaved=n,ki(t,r)}function ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function g0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ki(t,n)}return i=r.interleaved,i===null?(e.next=e,p0(r)):(e.next=i.next,i.next=e),r.interleaved=e,ki(t,n)}function Gd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,e0(t,n)}}function u1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bf(t,e,n,r){var i=t.updateQueue;es=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,m=a;switch(f=e,p=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){d=v.call(p,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(p,d,f):v,f==null)break e;d=It({},d,f);break e;case 2:es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);xo|=o,t.lanes=o,t.memoizedState=d}}function c1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var uc={},Jr=zs(uc),Mu=zs(uc),Lu=zs(uc);function fo(t){if(t===uc)throw Error(le(174));return t}function v0(t,e){switch(ft(Lu,e),ft(Mu,t),ft(Jr,uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rv(e,t)}mt(Jr),ft(Jr,e)}function La(){mt(Jr),mt(Mu),mt(Lu)}function UT(t){fo(Lu.current);var e=fo(Jr.current),n=rv(e,t.type);e!==n&&(ft(Mu,t),ft(Jr,n))}function m0(t){Mu.current===t&&(mt(Jr),mt(Mu))}var xt=zs(0);function Rf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ig=[];function y0(){for(var t=0;t<ig.length;t++)ig[t]._workInProgressVersionPrimary=null;ig.length=0}var Hd=Ui.ReactCurrentDispatcher,sg=Ui.ReactCurrentBatchConfig,So=0,Ct=null,Ht=null,en=null,Af=!1,su=!1,ju=0,dN=0;function mn(){throw Error(le(321))}function _0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function w0(t,e,n,r,i,s){if(So=s,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hd.current=t===null||t.memoizedState===null?gN:vN,t=n(r,i),su){s=0;do{if(su=!1,ju=0,25<=s)throw Error(le(301));s+=1,en=Ht=null,e.updateQueue=null,Hd.current=mN,t=n(r,i)}while(su)}if(Hd.current=Pf,e=Ht!==null&&Ht.next!==null,So=0,en=Ht=Ct=null,Af=!1,e)throw Error(le(300));return t}function E0(){var t=ju!==0;return ju=0,t}function Yr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Ct.memoizedState=en=t:en=en.next=t,en}function Sr(){if(Ht===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=en===null?Ct.memoizedState:en.next;if(e!==null)en=e,Ht=t;else{if(t===null)throw Error(le(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},en===null?Ct.memoizedState=en=t:en=en.next=t}return en}function Vu(t,e){return typeof e=="function"?e(t):e}function og(t){var e=Sr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=Ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((So&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ct.lanes|=c,xo|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,jr(r,e.memoizedState)||(Wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ct.lanes|=s,xo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ag(t){var e=Sr(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jr(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function $T(){}function GT(t,e){var n=Ct,r=Sr(),i=e(),s=!jr(r.memoizedState,i);if(s&&(r.memoizedState=i,Wn=!0),r=r.queue,S0(qT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,Fu(9,WT.bind(null,n,r,i,e),void 0,null),nn===null)throw Error(le(349));So&30||HT(n,e,i)}return i}function HT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function WT(t,e,n,r){e.value=n,e.getSnapshot=r,YT(e)&&KT(t)}function qT(t,e,n){return n(function(){YT(e)&&KT(t)})}function YT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jr(t,n)}catch{return!0}}function KT(t){var e=ki(t,1);e!==null&&Mr(e,t,1,-1)}function d1(t){var e=Yr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:t},e.queue=t,t=t.dispatch=pN.bind(null,Ct,t),[e.memoizedState,t]}function Fu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function XT(){return Sr().memoizedState}function Wd(t,e,n,r){var i=Yr();Ct.flags|=t,i.memoizedState=Fu(1|e,n,void 0,r===void 0?null:r)}function Rh(t,e,n,r){var i=Sr();r=r===void 0?null:r;var s=void 0;if(Ht!==null){var o=Ht.memoizedState;if(s=o.destroy,r!==null&&_0(r,o.deps)){i.memoizedState=Fu(e,n,s,r);return}}Ct.flags|=t,i.memoizedState=Fu(1|e,n,s,r)}function f1(t,e){return Wd(8390656,8,t,e)}function S0(t,e){return Rh(2048,8,t,e)}function QT(t,e){return Rh(4,2,t,e)}function JT(t,e){return Rh(4,4,t,e)}function ZT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eC(t,e,n){return n=n!=null?n.concat([t]):null,Rh(4,4,ZT.bind(null,e,t),n)}function x0(){}function tC(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nC(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rC(t,e,n){return So&21?(jr(n,e)||(n=lT(),Ct.lanes|=n,xo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=n)}function fN(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=sg.transition;sg.transition={};try{t(!1),e()}finally{it=n,sg.transition=r}}function iC(){return Sr().memoizedState}function hN(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sC(t))oC(e,n);else if(n=zT(t,e,n,r),n!==null){var i=Mn();Mr(n,t,r,i),aC(n,e,r)}}function pN(t,e,n){var r=_s(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sC(t))oC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,jr(a,o)){var l=e.interleaved;l===null?(i.next=i,p0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=zT(t,e,i,r),n!==null&&(i=Mn(),Mr(n,t,r,i),aC(n,e,r))}}function sC(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function oC(t,e){su=Af=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,e0(t,n)}}var Pf={readContext:Er,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},gN={readContext:Er,useCallback:function(t,e){return Yr().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:f1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wd(4194308,4,ZT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wd(4,2,t,e)},useMemo:function(t,e){var n=Yr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hN.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=Yr();return t={current:t},e.memoizedState=t},useState:d1,useDebugValue:x0,useDeferredValue:function(t){return Yr().memoizedState=t},useTransition:function(){var t=d1(!1),e=t[0];return t=fN.bind(null,t[1]),Yr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ct,i=Yr();if(Et){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),nn===null)throw Error(le(349));So&30||HT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,f1(qT.bind(null,r,s,t),[t]),r.flags|=2048,Fu(9,WT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Yr(),e=nn.identifierPrefix;if(Et){var n=wi,r=_i;n=(r&~(1<<32-Or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ju++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vN={readContext:Er,useCallback:tC,useContext:Er,useEffect:S0,useImperativeHandle:eC,useInsertionEffect:QT,useLayoutEffect:JT,useMemo:nC,useReducer:og,useRef:XT,useState:function(){return og(Vu)},useDebugValue:x0,useDeferredValue:function(t){var e=Sr();return rC(e,Ht.memoizedState,t)},useTransition:function(){var t=og(Vu)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:$T,useSyncExternalStore:GT,useId:iC,unstable_isNewReconciler:!1},mN={readContext:Er,useCallback:tC,useContext:Er,useEffect:S0,useImperativeHandle:eC,useInsertionEffect:QT,useLayoutEffect:JT,useMemo:nC,useReducer:ag,useRef:XT,useState:function(){return ag(Vu)},useDebugValue:x0,useDeferredValue:function(t){var e=Sr();return Ht===null?e.memoizedState=t:rC(e,Ht.memoizedState,t)},useTransition:function(){var t=ag(Vu)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:$T,useSyncExternalStore:GT,useId:iC,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Tv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ah={isMounted:function(t){return(t=t._reactInternals)?Lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=_s(t),s=xi(r,i);s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,i),e!==null&&(Mr(e,t,i,r),Gd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=_s(t),s=xi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,i),e!==null&&(Mr(e,t,i,r),Gd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=_s(t),i=xi(n,r);i.tag=2,e!=null&&(i.callback=e),e=ms(t,i,r),e!==null&&(Mr(e,t,r,n),Gd(e,t,r))}};function h1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ku(n,r)||!ku(i,s):!0}function lC(t,e,n){var r=!1,i=Rs,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(i=Yn(e)?wo:Tn.current,r=e.contextTypes,s=(r=r!=null)?Na(t,i):Rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ah,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function p1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ah.enqueueReplaceState(e,e.state,null)}function Cv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},g0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Er(s):(s=Yn(e)?wo:Tn.current,i.context=Na(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Tv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ah.enqueueReplaceState(i,i.state,null),bf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ja(t,e){try{var n="",r=e;do n+=Hk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function lg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Iv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yN=typeof WeakMap=="function"?WeakMap:Map;function uC(t,e,n){n=xi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Df||(Df=!0,Lv=r),Iv(t,e)},n}function cC(t,e,n){n=xi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Iv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Iv(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function g1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=DN.bind(null,t,e,n),e.then(t,t))}function v1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xi(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var _N=Ui.ReactCurrentOwner,Wn=!1;function kn(t,e,n,r){e.child=t===null?FT(e,null,n,r):Ma(e,t.child,n,r)}function y1(t,e,n,r,i){n=n.render;var s=e.ref;return xa(e,i),r=w0(t,e,n,r,s,i),n=E0(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Et&&n&&l0(e),e.flags|=1,kn(t,e,r,i),e.child)}function _1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!k0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dC(t,e,s,r,i)):(t=Xd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&t.ref===e.ref)return Di(t,e,i)}return e.flags|=1,t=ws(s,r),t.ref=e.ref,t.return=e,e.child=t}function dC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ku(s,r)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,Di(t,e,i)}return bv(t,e,n,r,i)}function fC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(da,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(da,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ft(da,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ft(da,tr),tr|=r;return kn(t,e,i,n),e.child}function hC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bv(t,e,n,r,i){var s=Yn(n)?wo:Tn.current;return s=Na(e,s),xa(e,i),n=w0(t,e,n,r,s,i),r=E0(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Di(t,e,i)):(Et&&r&&l0(e),e.flags|=1,kn(t,e,n,i),e.child)}function w1(t,e,n,r,i){if(Yn(n)){var s=!0;Sf(e)}else s=!1;if(xa(e,i),e.stateNode===null)qd(t,e),lC(e,n,r),Cv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Er(u):(u=Yn(n)?wo:Tn.current,u=Na(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&p1(e,o,r,u),es=!1;var f=e.memoizedState;o.state=f,bf(e,r,o,i),l=e.memoizedState,a!==r||f!==l||qn.current||es?(typeof c=="function"&&(Tv(e,n,c,r),l=e.memoizedState),(a=es||h1(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ar(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=Yn(n)?wo:Tn.current,l=Na(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&p1(e,o,r,l),es=!1,f=e.memoizedState,o.state=f,bf(e,r,o,i);var v=e.memoizedState;a!==d||f!==v||qn.current||es?(typeof p=="function"&&(Tv(e,n,p,r),v=e.memoizedState),(u=es||h1(e,n,u,r,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Rv(t,e,n,r,s,i)}function Rv(t,e,n,r,i,s){hC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&s1(e,n,!1),Di(t,e,s);r=e.stateNode,_N.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ma(e,t.child,null,s),e.child=Ma(e,null,a,s)):kn(t,e,a,s),e.memoizedState=r.state,i&&s1(e,n,!0),e.child}function pC(t){var e=t.stateNode;e.pendingContext?i1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i1(t,e.context,!1),v0(t,e.containerInfo)}function E1(t,e,n,r,i){return Oa(),c0(i),e.flags|=256,kn(t,e,n,r),e.child}var Av={dehydrated:null,treeContext:null,retryLane:0};function Pv(t){return{baseLanes:t,cachePool:null,transitions:null}}function gC(t,e,n){var r=e.pendingProps,i=xt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ft(xt,i&1),t===null)return Sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dh(o,r,0,null),t=vo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Pv(n),e.memoizedState=Av,t):T0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ws(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ws(a,s):(s=vo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Pv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Av,r}return s=t.child,t=s.sibling,r=ws(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function T0(t,e){return e=Dh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,r){return r!==null&&c0(r),Ma(e,t.child,null,n),t=T0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=lg(Error(le(422))),ud(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dh({mode:"visible",children:r.children},i,0,null),s=vo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ma(e,t.child,null,o),e.child.memoizedState=Pv(o),e.memoizedState=Av,s);if(!(e.mode&1))return ud(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(le(419)),r=lg(s,r,void 0),ud(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wn||a){if(r=nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ki(t,i),Mr(r,t,i,-1))}return P0(),r=lg(Error(le(421))),ud(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nr=vs(i.nextSibling),ir=e,Et=!0,Dr=null,t!==null&&(hr[pr++]=_i,hr[pr++]=wi,hr[pr++]=Eo,_i=t.id,wi=t.overflow,Eo=e),e=T0(e,r.children),e.flags|=4096,e)}function S1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xv(t.return,e,n)}function ug(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S1(t,n,e);else if(t.tag===19)S1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ft(xt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ug(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ug(e,!0,n,null,s);break;case"together":ug(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Di(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EN(t,e,n){switch(e.tag){case 3:pC(e),Oa();break;case 5:UT(e);break;case 1:Yn(e.type)&&Sf(e);break;case 4:v0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ft(Cf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ft(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?gC(t,e,n):(ft(xt,xt.current&1),t=Di(t,e,n),t!==null?t.sibling:null);ft(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ft(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,fC(t,e,n)}return Di(t,e,n)}var mC,kv,yC,_C;mC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kv=function(){};yC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,fo(Jr.current);var s=null;switch(n){case"input":i=Zg(t,i),r=Zg(t,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=nv(t,i),r=nv(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wf)}iv(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Tu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Tu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};_C=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ll(t,e){if(!Et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SN(t,e,n){var r=e.pendingProps;switch(u0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(e),null;case 1:return Yn(e.type)&&Ef(),yn(e),null;case 3:return r=e.stateNode,La(),mt(qn),mt(Tn),y0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(Fv(Dr),Dr=null))),kv(t,e),yn(e),null;case 5:m0(e);var i=fo(Lu.current);if(n=e.type,t!==null&&e.stateNode!=null)yC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return yn(e),null}if(t=fo(Jr.current),ad(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xr]=e,r[Ou]=s,t=(e.mode&1)!==0,n){case"dialog":pt("cancel",r),pt("close",r);break;case"iframe":case"object":case"embed":pt("load",r);break;case"video":case"audio":for(i=0;i<Gl.length;i++)pt(Gl[i],r);break;case"source":pt("error",r);break;case"img":case"image":case"link":pt("error",r),pt("load",r);break;case"details":pt("toggle",r);break;case"input":kw(r,s),pt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pt("invalid",r);break;case"textarea":Nw(r,s),pt("invalid",r)}iv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&od(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&od(r.textContent,a,t),i=["children",""+a]):Tu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&pt("scroll",r)}switch(n){case"input":Jc(r),Dw(r,s,!0);break;case"textarea":Jc(r),Ow(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xr]=e,t[Ou]=r,mC(t,e,!1,!1),e.stateNode=t;e:{switch(o=sv(n,r),n){case"dialog":pt("cancel",t),pt("close",t),i=r;break;case"iframe":case"object":case"embed":pt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gl.length;i++)pt(Gl[i],t);i=r;break;case"source":pt("error",t),i=r;break;case"img":case"image":case"link":pt("error",t),pt("load",t),i=r;break;case"details":pt("toggle",t),i=r;break;case"input":kw(t,r),i=Zg(t,r),pt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),pt("invalid",t);break;case"textarea":Nw(t,r),i=nv(t,r),pt("invalid",t);break;default:i=r}iv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Xx(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Yx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Cu(t,l):typeof l=="number"&&Cu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&pt("scroll",t):l!=null&&Ym(t,s,l,o))}switch(n){case"input":Jc(t),Dw(t,r,!1);break;case"textarea":Jc(t),Ow(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_a(t,!!r.multiple,s,!1):r.defaultValue!=null&&_a(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yn(e),null;case 6:if(t&&e.stateNode!=null)_C(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=fo(Lu.current),fo(Jr.current),ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,(s=r.nodeValue!==n)&&(t=ir,t!==null))switch(t.tag){case 3:od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xr]=e,e.stateNode=r}return yn(e),null;case 13:if(mt(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Et&&nr!==null&&e.mode&1&&!(e.flags&128))jT(),Oa(),e.flags|=98560,s=!1;else if(s=ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[Xr]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yn(e),s=!1}else Dr!==null&&(Fv(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Kt===0&&(Kt=3):P0())),e.updateQueue!==null&&(e.flags|=4),yn(e),null);case 4:return La(),kv(t,e),t===null&&Du(e.stateNode.containerInfo),yn(e),null;case 10:return h0(e.type._context),yn(e),null;case 17:return Yn(e.type)&&Ef(),yn(e),null;case 19:if(mt(xt),s=e.memoizedState,s===null)return yn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ll(s,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rf(t),o!==null){for(e.flags|=128,Ll(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(xt,xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ot()>Va&&(e.flags|=128,r=!0,Ll(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Et)return yn(e),null}else 2*Ot()-s.renderingStartTime>Va&&n!==1073741824&&(e.flags|=128,r=!0,Ll(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ot(),e.sibling=null,n=xt.current,ft(xt,r?n&1|2:n&1),e):(yn(e),null);case 22:case 23:return A0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(yn(e),e.subtreeFlags&6&&(e.flags|=8192)):yn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function xN(t,e){switch(u0(e),e.tag){case 1:return Yn(e.type)&&Ef(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return La(),mt(qn),mt(Tn),y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return m0(e),null;case 13:if(mt(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mt(xt),null;case 4:return La(),null;case 10:return h0(e.type._context),null;case 22:case 23:return A0(),null;case 24:return null;default:return null}}var cd=!1,Sn=!1,TN=typeof WeakSet=="function"?WeakSet:Set,we=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function Dv(t,e,n){try{n()}catch(r){At(t,e,r)}}var x1=!1;function CN(t,e){if(gv=mf,t=TT(),a0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vv={focusedElem:t,selectionRange:n},mf=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,E=v.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ar(e.type,m),E);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(b){At(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return v=x1,x1=!1,v}function ou(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dv(e,n,s)}i=i.next}while(i!==r)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wC(t){var e=t.alternate;e!==null&&(t.alternate=null,wC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xr],delete e[Ou],delete e[_v],delete e[aN],delete e[lN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EC(t){return t.tag===5||t.tag===3||t.tag===4}function T1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ov(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(r!==4&&(t=t.child,t!==null))for(Ov(t,e,n),t=t.sibling;t!==null;)Ov(t,e,n),t=t.sibling}function Mv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mv(t,e,n),t=t.sibling;t!==null;)Mv(t,e,n),t=t.sibling}var an=null,Pr=!1;function Ki(t,e,n){for(n=n.child;n!==null;)SC(t,e,n),n=n.sibling}function SC(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Sh,n)}catch{}switch(n.tag){case 5:Sn||ca(n,e);case 6:var r=an,i=Pr;an=null,Ki(t,e,n),an=r,Pr=i,an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):an.removeChild(n.stateNode));break;case 18:an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?ng(t.parentNode,n):t.nodeType===1&&ng(t,n),Au(t)):ng(an,n.stateNode));break;case 4:r=an,i=Pr,an=n.stateNode.containerInfo,Pr=!0,Ki(t,e,n),an=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Dv(n,e,o),i=i.next}while(i!==r)}Ki(t,e,n);break;case 1:if(!Sn&&(ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}Ki(t,e,n);break;case 21:Ki(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,Ki(t,e,n),Sn=r):Ki(t,e,n);break;default:Ki(t,e,n)}}function C1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new TN),e.forEach(function(r){var i=ON.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,Pr=!1;break e;case 3:an=a.stateNode.containerInfo,Pr=!0;break e;case 4:an=a.stateNode.containerInfo,Pr=!0;break e}a=a.return}if(an===null)throw Error(le(160));SC(s,o,i),an=null,Pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){At(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xC(e,t),e=e.sibling}function xC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),qr(t),r&4){try{ou(3,t,t.return),Ph(3,t)}catch(m){At(t,t.return,m)}try{ou(5,t,t.return)}catch(m){At(t,t.return,m)}}break;case 1:Rr(e,t),qr(t),r&512&&n!==null&&ca(n,n.return);break;case 5:if(Rr(e,t),qr(t),r&512&&n!==null&&ca(n,n.return),t.flags&32){var i=t.stateNode;try{Cu(i,"")}catch(m){At(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Hx(i,s),sv(a,o);var u=sv(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Xx(i,d):c==="dangerouslySetInnerHTML"?Yx(i,d):c==="children"?Cu(i,d):Ym(i,c,d,u)}switch(a){case"input":ev(i,s);break;case"textarea":Wx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?_a(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?_a(i,!!s.multiple,s.defaultValue,!0):_a(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ou]=s}catch(m){At(t,t.return,m)}}break;case 6:if(Rr(e,t),qr(t),r&4){if(t.stateNode===null)throw Error(le(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){At(t,t.return,m)}}break;case 3:if(Rr(e,t),qr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(m){At(t,t.return,m)}break;case 4:Rr(e,t),qr(t);break;case 13:Rr(e,t),qr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(b0=Ot())),r&4&&C1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(u=Sn)||c,Rr(e,t),Sn=u):Rr(e,t),qr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(we=t,c=t.child;c!==null;){for(d=we=c;we!==null;){switch(f=we,p=f.child,f.tag){case 0:case 11:case 14:case 15:ou(4,f,f.return);break;case 1:ca(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){At(r,n,m)}}break;case 5:ca(f,f.return);break;case 22:if(f.memoizedState!==null){b1(d);continue}}p!==null?(p.return=f,we=p):b1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Kx("display",o))}catch(m){At(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){At(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rr(e,t),qr(t),r&4&&C1(t);break;case 21:break;default:Rr(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EC(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cu(i,""),r.flags&=-33);var s=T1(t);Mv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=T1(t);Ov(t,a,o);break;default:throw Error(le(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function IN(t,e,n){we=t,TC(t)}function TC(t,e,n){for(var r=(t.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Sn;a=cd;var u=Sn;if(cd=o,(Sn=l)&&!u)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?R1(i):l!==null?(l.return=o,we=l):R1(i);for(;s!==null;)we=s,TC(s),s=s.sibling;we=i,cd=a,Sn=u}I1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):I1(t)}}function I1(t){for(;we!==null;){var e=we;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||Ph(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&c1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}c1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Au(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Sn||e.flags&512&&Nv(e)}catch(f){At(e,e.return,f)}}if(e===t){we=null;break}if(n=e.sibling,n!==null){n.return=e.return,we=n;break}we=e.return}}function b1(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var n=e.sibling;if(n!==null){n.return=e.return,we=n;break}we=e.return}}function R1(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){At(e,i,l)}}var s=e.return;try{Nv(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{Nv(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var bN=Math.ceil,kf=Ui.ReactCurrentDispatcher,C0=Ui.ReactCurrentOwner,yr=Ui.ReactCurrentBatchConfig,qe=0,nn=null,Ft=null,dn=0,tr=0,da=zs(0),Kt=0,zu=null,xo=0,kh=0,I0=0,au=null,Gn=null,b0=0,Va=1/0,mi=null,Df=!1,Lv=null,ys=null,dd=!1,us=null,Nf=0,lu=0,jv=null,Yd=-1,Kd=0;function Mn(){return qe&6?Ot():Yd!==-1?Yd:Yd=Ot()}function _s(t){return t.mode&1?qe&2&&dn!==0?dn&-dn:cN.transition!==null?(Kd===0&&(Kd=lT()),Kd):(t=it,t!==0||(t=window.event,t=t===void 0?16:gT(t.type)),t):1}function Mr(t,e,n,r){if(50<lu)throw lu=0,jv=null,Error(le(185));oc(t,n,r),(!(qe&2)||t!==nn)&&(t===nn&&(!(qe&2)&&(kh|=n),Kt===4&&rs(t,dn)),Kn(t,r),n===1&&qe===0&&!(e.mode&1)&&(Va=Ot()+500,bh&&Bs()))}function Kn(t,e){var n=t.callbackNode;cD(t,e);var r=vf(t,t===nn?dn:0);if(r===0)n!==null&&jw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jw(n),e===1)t.tag===0?uN(A1.bind(null,t)):OT(A1.bind(null,t)),sN(function(){!(qe&6)&&Bs()}),n=null;else{switch(uT(r)){case 1:n=Zm;break;case 4:n=oT;break;case 16:n=gf;break;case 536870912:n=aT;break;default:n=gf}n=DC(n,CC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function CC(t,e){if(Yd=-1,Kd=0,qe&6)throw Error(le(327));var n=t.callbackNode;if(Ta()&&t.callbackNode!==n)return null;var r=vf(t,t===nn?dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Of(t,r);else{e=r;var i=qe;qe|=2;var s=bC();(nn!==t||dn!==e)&&(mi=null,Va=Ot()+500,go(t,e));do try{PN();break}catch(a){IC(t,a)}while(!0);f0(),kf.current=s,qe=i,Ft!==null?e=0:(nn=null,dn=0,e=Kt)}if(e!==0){if(e===2&&(i=cv(t),i!==0&&(r=i,e=Vv(t,i))),e===1)throw n=zu,go(t,0),rs(t,r),Kn(t,Ot()),n;if(e===6)rs(t,r);else{if(i=t.current.alternate,!(r&30)&&!RN(i)&&(e=Of(t,r),e===2&&(s=cv(t),s!==0&&(r=s,e=Vv(t,s))),e===1))throw n=zu,go(t,0),rs(t,r),Kn(t,Ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:ro(t,Gn,mi);break;case 3:if(rs(t,r),(r&130023424)===r&&(e=b0+500-Ot(),10<e)){if(vf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yv(ro.bind(null,t,Gn,mi),e);break}ro(t,Gn,mi);break;case 4:if(rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bN(r/1960))-r,10<r){t.timeoutHandle=yv(ro.bind(null,t,Gn,mi),r);break}ro(t,Gn,mi);break;case 5:ro(t,Gn,mi);break;default:throw Error(le(329))}}}return Kn(t,Ot()),t.callbackNode===n?CC.bind(null,t):null}function Vv(t,e){var n=au;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=Of(t,e),t!==2&&(e=Gn,Gn=n,e!==null&&Fv(e)),t}function Fv(t){Gn===null?Gn=t:Gn.push.apply(Gn,t)}function RN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~I0,e&=~kh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Or(e),r=1<<n;t[n]=-1,e&=~r}}function A1(t){if(qe&6)throw Error(le(327));Ta();var e=vf(t,0);if(!(e&1))return Kn(t,Ot()),null;var n=Of(t,e);if(t.tag!==0&&n===2){var r=cv(t);r!==0&&(e=r,n=Vv(t,r))}if(n===1)throw n=zu,go(t,0),rs(t,e),Kn(t,Ot()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,Gn,mi),Kn(t,Ot()),null}function R0(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(Va=Ot()+500,bh&&Bs())}}function To(t){us!==null&&us.tag===0&&!(qe&6)&&Ta();var e=qe;qe|=1;var n=yr.transition,r=it;try{if(yr.transition=null,it=1,t)return t()}finally{it=r,yr.transition=n,qe=e,!(qe&6)&&Bs()}}function A0(){tr=da.current,mt(da)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iN(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(u0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ef();break;case 3:La(),mt(qn),mt(Tn),y0();break;case 5:m0(r);break;case 4:La();break;case 13:mt(xt);break;case 19:mt(xt);break;case 10:h0(r.type._context);break;case 22:case 23:A0()}n=n.return}if(nn=t,Ft=t=ws(t.current,null),dn=tr=e,Kt=0,zu=null,I0=kh=xo=0,Gn=au=null,co!==null){for(e=0;e<co.length;e++)if(n=co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}co=null}return t}function IC(t,e){do{var n=Ft;try{if(f0(),Hd.current=Pf,Af){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Af=!1}if(So=0,en=Ht=Ct=null,su=!1,ju=0,C0.current=null,n===null||n.return===null){Kt=1,zu=e,Ft=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=v1(o);if(p!==null){p.flags&=-257,m1(p,o,a,s,e),p.mode&1&&g1(s,u,e),e=p,l=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(l),e.updateQueue=m}else v.add(l);break e}else{if(!(e&1)){g1(s,u,e),P0();break e}l=Error(le(426))}}else if(Et&&a.mode&1){var E=v1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),m1(E,o,a,s,e),c0(ja(l,a));break e}}s=l=ja(l,a),Kt!==4&&(Kt=2),au===null?au=[s]:au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=uC(s,l,e);u1(s,y);break e;case 1:a=l;var _=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ys===null||!ys.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=cC(s,a,e);u1(s,b);break e}}s=s.return}while(s!==null)}AC(n)}catch(N){e=N,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(!0)}function bC(){var t=kf.current;return kf.current=Pf,t===null?Pf:t}function P0(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),nn===null||!(xo&268435455)&&!(kh&268435455)||rs(nn,dn)}function Of(t,e){var n=qe;qe|=2;var r=bC();(nn!==t||dn!==e)&&(mi=null,go(t,e));do try{AN();break}catch(i){IC(t,i)}while(!0);if(f0(),qe=n,kf.current=r,Ft!==null)throw Error(le(261));return nn=null,dn=0,Kt}function AN(){for(;Ft!==null;)RC(Ft)}function PN(){for(;Ft!==null&&!tD();)RC(Ft)}function RC(t){var e=kC(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?AC(t):Ft=e,C0.current=null}function AC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xN(n,e),n!==null){n.flags&=32767,Ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,Ft=null;return}}else if(n=SN(n,e,tr),n!==null){Ft=n;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);Kt===0&&(Kt=5)}function ro(t,e,n){var r=it,i=yr.transition;try{yr.transition=null,it=1,kN(t,e,n,r)}finally{yr.transition=i,it=r}return null}function kN(t,e,n,r){do Ta();while(us!==null);if(qe&6)throw Error(le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(dD(t,s),t===nn&&(Ft=nn=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dd||(dd=!0,DC(gf,function(){return Ta(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yr.transition,yr.transition=null;var o=it;it=1;var a=qe;qe|=4,C0.current=null,CN(t,n),xC(n,t),QD(vv),mf=!!gv,vv=gv=null,t.current=n,IN(n),nD(),qe=a,it=o,yr.transition=s}else t.current=n;if(dd&&(dd=!1,us=t,Nf=i),s=t.pendingLanes,s===0&&(ys=null),sD(n.stateNode),Kn(t,Ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Df)throw Df=!1,t=Lv,Lv=null,t;return Nf&1&&t.tag!==0&&Ta(),s=t.pendingLanes,s&1?t===jv?lu++:(lu=0,jv=t):lu=0,Bs(),null}function Ta(){if(us!==null){var t=uT(Nf),e=yr.transition,n=it;try{if(yr.transition=null,it=16>t?16:t,us===null)var r=!1;else{if(t=us,us=null,Nf=0,qe&6)throw Error(le(331));var i=qe;for(qe|=4,we=t.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(we=u;we!==null;){var c=we;switch(c.tag){case 0:case 11:case 15:ou(8,c,s)}var d=c.child;if(d!==null)d.return=c,we=d;else for(;we!==null;){c=we;var f=c.sibling,p=c.return;if(wC(c),c===u){we=null;break}if(f!==null){f.return=p,we=f;break}we=p}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var E=m.sibling;m.sibling=null,m=E}while(m!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ou(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,we=y;break e}we=s.return}}var _=t.current;for(we=_;we!==null;){o=we;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,we=S;else e:for(o=_;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ph(9,a)}}catch(N){At(a,a.return,N)}if(a===o){we=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,we=b;break e}we=a.return}}if(qe=i,Bs(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Sh,t)}catch{}r=!0}return r}finally{it=n,yr.transition=e}}return!1}function P1(t,e,n){e=ja(n,e),e=uC(t,e,1),t=ms(t,e,1),e=Mn(),t!==null&&(oc(t,1,e),Kn(t,e))}function At(t,e,n){if(t.tag===3)P1(t,t,n);else for(;e!==null;){if(e.tag===3){P1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=ja(n,t),t=cC(e,t,1),e=ms(e,t,1),t=Mn(),e!==null&&(oc(e,1,t),Kn(e,t));break}}e=e.return}}function DN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(dn&n)===n&&(Kt===4||Kt===3&&(dn&130023424)===dn&&500>Ot()-b0?go(t,0):I0|=n),Kn(t,e)}function PC(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=Mn();t=ki(t,e),t!==null&&(oc(t,e,n),Kn(t,n))}function NN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PC(t,n)}function ON(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),PC(t,n)}var kC;kC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qn.current)Wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wn=!1,EN(t,e,n);Wn=!!(t.flags&131072)}else Wn=!1,Et&&e.flags&1048576&&MT(e,Tf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qd(t,e),t=e.pendingProps;var i=Na(e,Tn.current);xa(e,n),i=w0(null,e,r,t,i,n);var s=E0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(s=!0,Sf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,g0(e),i.updater=Ah,e.stateNode=i,i._reactInternals=e,Cv(e,r,t,n),e=Rv(null,e,r,!0,s,n)):(e.tag=0,Et&&s&&l0(e),kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=LN(r),t=Ar(r,t),i){case 0:e=bv(null,e,r,t,n);break e;case 1:e=w1(null,e,r,t,n);break e;case 11:e=y1(null,e,r,t,n);break e;case 14:e=_1(null,e,r,Ar(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),bv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),w1(t,e,r,i,n);case 3:e:{if(pC(e),t===null)throw Error(le(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BT(t,e),bf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ja(Error(le(423)),e),e=E1(t,e,r,n,i);break e}else if(r!==i){i=ja(Error(le(424)),e),e=E1(t,e,r,n,i);break e}else for(nr=vs(e.stateNode.containerInfo.firstChild),ir=e,Et=!0,Dr=null,n=FT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),r===i){e=Di(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return UT(e),t===null&&Sv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,mv(r,i)?o=null:s!==null&&mv(r,s)&&(e.flags|=32),hC(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&Sv(e),null;case 13:return gC(t,e,n);case 4:return v0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ma(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),y1(t,e,r,i,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ft(Cf,r._currentValue),r._currentValue=o,s!==null)if(jr(s.value,o)){if(s.children===i.children&&!qn.current){e=Di(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=xi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),xv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),xv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xa(e,n),i=Er(i),r=r(i),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,i=Ar(r,e.pendingProps),i=Ar(r.type,i),_1(t,e,r,i,n);case 15:return dC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),qd(t,e),e.tag=1,Yn(r)?(t=!0,Sf(e)):t=!1,xa(e,n),lC(e,r,i),Cv(e,r,i,n),Rv(null,e,r,!0,t,n);case 19:return vC(t,e,n);case 22:return fC(t,e,n)}throw Error(le(156,e.tag))};function DC(t,e){return sT(t,e)}function MN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new MN(t,e,n,r)}function k0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LN(t){if(typeof t=="function")return k0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xm)return 11;if(t===Qm)return 14}return 2}function ws(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")k0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return vo(n.children,i,s,e);case Km:o=8,i|=8;break;case Kg:return t=mr(12,n,e,i|2),t.elementType=Kg,t.lanes=s,t;case Xg:return t=mr(13,n,e,i),t.elementType=Xg,t.lanes=s,t;case Qg:return t=mr(19,n,e,i),t.elementType=Qg,t.lanes=s,t;case Ux:return Dh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zx:o=10;break e;case Bx:o=9;break e;case Xm:o=11;break e;case Qm:o=14;break e;case Zi:o=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function vo(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function Dh(t,e,n,r){return t=mr(22,t,r,e),t.elementType=Ux,t.lanes=n,t.stateNode={isHidden:!1},t}function cg(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function dg(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hp(0),this.expirationTimes=Hp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function D0(t,e,n,r,i,s,o,a,l){return t=new jN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},g0(s),t}function VN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NC(t){if(!t)return Rs;t=t._reactInternals;e:{if(Lo(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(Yn(n))return NT(t,n,e)}return e}function OC(t,e,n,r,i,s,o,a,l){return t=D0(n,r,!0,t,i,s,o,a,l),t.context=NC(null),n=t.current,r=Mn(),i=_s(n),s=xi(r,i),s.callback=e??null,ms(n,s,i),t.current.lanes=i,oc(t,i,r),Kn(t,r),t}function Nh(t,e,n,r){var i=e.current,s=Mn(),o=_s(i);return n=NC(n),e.context===null?e.context=n:e.pendingContext=n,e=xi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ms(i,e,o),t!==null&&(Mr(t,i,o,s),Gd(t,i,o)),o}function Mf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function N0(t,e){k1(t,e),(t=t.alternate)&&k1(t,e)}function FN(){return null}var MC=typeof reportError=="function"?reportError:function(t){console.error(t)};function O0(t){this._internalRoot=t}Oh.prototype.render=O0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));Nh(t,e,null,null)};Oh.prototype.unmount=O0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;To(function(){Nh(null,t,null,null)}),e[Pi]=null}};function Oh(t){this._internalRoot=t}Oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=fT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ns.length&&e!==0&&e<ns[n].priority;n++);ns.splice(n,0,t),n===0&&pT(t)}};function M0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function D1(){}function zN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Mf(o);s.call(u)}}var o=OC(e,r,t,0,null,!1,!1,"",D1);return t._reactRootContainer=o,t[Pi]=o.current,Du(t.nodeType===8?t.parentNode:t),To(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Mf(l);a.call(u)}}var l=D0(t,0,!1,null,null,!1,!1,"",D1);return t._reactRootContainer=l,t[Pi]=l.current,Du(t.nodeType===8?t.parentNode:t),To(function(){Nh(e,l,n,r)}),l}function Lh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Mf(o);a.call(l)}}Nh(e,o,t,i)}else o=zN(n,e,t,i,r);return Mf(o)}cT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$l(e.pendingLanes);n!==0&&(e0(e,n|1),Kn(e,Ot()),!(qe&6)&&(Va=Ot()+500,Bs()))}break;case 13:To(function(){var r=ki(t,1);if(r!==null){var i=Mn();Mr(r,t,1,i)}}),N0(t,1)}};t0=function(t){if(t.tag===13){var e=ki(t,134217728);if(e!==null){var n=Mn();Mr(e,t,134217728,n)}N0(t,134217728)}};dT=function(t){if(t.tag===13){var e=_s(t),n=ki(t,e);if(n!==null){var r=Mn();Mr(n,t,e,r)}N0(t,e)}};fT=function(){return it};hT=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};av=function(t,e,n){switch(e){case"input":if(ev(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ih(r);if(!i)throw Error(le(90));Gx(r),ev(r,i)}}}break;case"textarea":Wx(t,n);break;case"select":e=n.value,e!=null&&_a(t,!!n.multiple,e,!1)}};Zx=R0;eT=To;var BN={usingClientEntryPoint:!1,Events:[lc,sa,Ih,Qx,Jx,R0]},jl={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UN={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ui.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rT(t),t===null?null:t.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||FN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Sh=fd.inject(UN),Qr=fd}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BN;lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M0(e))throw Error(le(200));return VN(t,e,null,n)};lr.createRoot=function(t,e){if(!M0(t))throw Error(le(299));var n=!1,r="",i=MC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=D0(t,1,!1,null,null,n,!1,r,i),t[Pi]=e.current,Du(t.nodeType===8?t.parentNode:t),new O0(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=rT(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return To(t)};lr.hydrate=function(t,e,n){if(!Mh(e))throw Error(le(200));return Lh(null,t,e,!0,n)};lr.hydrateRoot=function(t,e,n){if(!M0(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=MC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=OC(e,null,t,1,n??null,i,!1,s,o),t[Pi]=e.current,Du(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Oh(e)};lr.render=function(t,e,n){if(!Mh(e))throw Error(le(200));return Lh(null,t,e,!1,n)};lr.unmountComponentAtNode=function(t){if(!Mh(t))throw Error(le(40));return t._reactRootContainer?(To(function(){Lh(null,null,t,!1,function(){t._reactRootContainer=null,t[Pi]=null})}),!0):!1};lr.unstable_batchedUpdates=R0;lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mh(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return Lh(t,e,n,!1,r)};lr.version="18.3.1-next-f1338f8080-20240426";function LC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LC)}catch(t){console.error(t)}}LC(),Lx.exports=lr;var fa=Lx.exports,jC,N1=fa;jC=N1.createRoot,N1.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var O1="popstate";function $N(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Bu(i)}return HN(e,n,null,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GN(){return Math.random().toString(36).substring(2,10)}function M1(t,e){return{usr:t.state,key:t.key,idx:e}}function zv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:n,key:e&&e.key||r||GN()}}function Bu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function rl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function HN(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let E=c(),y=E==null?null:E-u;u=E,l&&l({action:a,location:m.location,delta:y})}function f(E,y){a="PUSH";let _=zv(m.location,E,y);u=c()+1;let S=M1(_,u),b=m.createHref(_);try{o.pushState(S,"",b)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(b)}s&&l&&l({action:a,location:m.location,delta:1})}function p(E,y){a="REPLACE";let _=zv(m.location,E,y);u=c();let S=M1(_,u),b=m.createHref(_);o.replaceState(S,"",b),s&&l&&l({action:a,location:m.location,delta:0})}function v(E){return WN(E)}let m={get action(){return a},get location(){return t(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(O1,d),l=E,()=>{i.removeEventListener(O1,d),l=null}},createHref(E){return e(i,E)},createURL:v,encodeLocation(E){let y=v(E);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(E){return o.go(E)}};return m}function WN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),St(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Bu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function VC(t,e,n="/"){return qN(t,e,n,!1)}function qN(t,e,n,r){let i=typeof e=="string"?rl(e):e,s=Ni(i.pathname||"/",n);if(s==null)return null;let o=FC(t);YN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=s2(s);a=r2(o[l],u,r)}return a}function FC(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;St(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=Ti([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(St(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),FC(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:t2(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of zC(o.path))s(o,a,!0,u)}),e}function zC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=zC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:n2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var KN=/^:[\w-]+$/,XN=3,QN=2,JN=1,ZN=10,e2=-2,L1=t=>t==="*";function t2(t,e){let n=t.split("/"),r=n.length;return n.some(L1)&&(r+=e2),e&&(r+=QN),n.filter(i=>!L1(i)).reduce((i,s)=>i+(KN.test(s)?XN:s===""?JN:ZN),r)}function n2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function r2(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Lf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ti([s,d.pathname]),pathnameBase:u2(Ti([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ti([s,d.pathnameBase]))}return o}function Lf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=i2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function i2(t,e=!1,n=!0){Vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function s2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ni(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function o2(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?rl(t):t;return{pathname:n?n.startsWith("/")?n:a2(n,e):e,search:c2(r),hash:d2(i)}}function a2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function l2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L0(t){let e=l2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function j0(t,e,n,r=!1){let i;typeof t=="string"?i=rl(t):(i={...t},St(!i.pathname||!i.pathname.includes("?"),fg("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),fg("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),fg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=o2(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Ti=t=>t.join("/").replace(/\/\/+/g,"/"),u2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function f2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var BC=["POST","PUT","PATCH","DELETE"];new Set(BC);var h2=["GET",...BC];new Set(h2);var il=D.createContext(null);il.displayName="DataRouter";var jh=D.createContext(null);jh.displayName="DataRouterState";D.createContext(!1);var UC=D.createContext({isTransitioning:!1});UC.displayName="ViewTransition";var p2=D.createContext(new Map);p2.displayName="Fetchers";var g2=D.createContext(null);g2.displayName="Await";var Gr=D.createContext(null);Gr.displayName="Navigation";var cc=D.createContext(null);cc.displayName="Location";var Hr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Hr.displayName="Route";var V0=D.createContext(null);V0.displayName="RouteError";function v2(t,{relative:e}={}){St(sl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Gr),{hash:i,pathname:s,search:o}=dc(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Ti([n,s])),r.createHref({pathname:a,search:o,hash:i})}function sl(){return D.useContext(cc)!=null}function ci(){return St(sl(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(cc).location}var $C="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GC(t){D.useContext(Gr).static||D.useLayoutEffect(t)}function HC(){let{isDataRoute:t}=D.useContext(Hr);return t?A2():m2()}function m2(){St(sl(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(il),{basename:e,navigator:n}=D.useContext(Gr),{matches:r}=D.useContext(Hr),{pathname:i}=ci(),s=JSON.stringify(L0(r)),o=D.useRef(!1);return GC(()=>{o.current=!0}),D.useCallback((l,u={})=>{if(Vr(o.current,$C),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=j0(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ti([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}D.createContext(null);function WC(){let{matches:t}=D.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function dc(t,{relative:e}={}){let{matches:n}=D.useContext(Hr),{pathname:r}=ci(),i=JSON.stringify(L0(n));return D.useMemo(()=>j0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function y2(t,e){return qC(t,e)}function qC(t,e,n,r){var y;St(sl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=D.useContext(Gr),{matches:s}=D.useContext(Hr),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let _=c&&c.path||"";YC(l,!c||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=ci(),f;if(e){let _=typeof e=="string"?rl(e):e;St(u==="/"||((y=_.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=d;let p=f.pathname||"/",v=p;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let m=VC(t,{pathname:v});Vr(c||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Vr(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=x2(m&&m.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Ti([u,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Ti([u,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&E?D.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},E):E}function _2(){let t=R2(),e=f2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,o)}var w2=D.createElement(_2,null),E2=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement(Hr.Provider,{value:this.props.routeContext},D.createElement(V0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function S2({routeContext:t,match:e,children:n}){let r=D.useContext(il);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Hr.Provider,{value:t},n)}function x2(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);St(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:d}=n,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,f=!1,p=null,v=null;n&&(d=s&&u.route.id?s[u.route.id]:void 0,p=u.route.errorElement||w2,o&&(a<0&&c===0?(YC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):a===c&&(f=!0,v=u.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,c+1)),E=()=>{let y;return d?y=p:f?y=v:u.route.Component?y=D.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=l,D.createElement(S2,{match:u,routeContext:{outlet:l,matches:m,isDataRoute:n!=null},children:y})};return n&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?D.createElement(E2,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:E(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):E()},null)}function F0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T2(t){let e=D.useContext(il);return St(e,F0(t)),e}function C2(t){let e=D.useContext(jh);return St(e,F0(t)),e}function I2(t){let e=D.useContext(Hr);return St(e,F0(t)),e}function z0(t){let e=I2(t),n=e.matches[e.matches.length-1];return St(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function b2(){return z0("useRouteId")}function R2(){var r;let t=D.useContext(V0),e=C2("useRouteError"),n=z0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function A2(){let{router:t}=T2("useNavigate"),e=z0("useNavigate"),n=D.useRef(!1);return GC(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{Vr(n.current,$C),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var j1={};function YC(t,e,n){!e&&!j1[t]&&(j1[t]=!0,Vr(!1,n))}D.memo(P2);function P2({routes:t,future:e,state:n}){return qC(t,void 0,n,e)}function KC({to:t,replace:e,state:n,relative:r}){St(sl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(Gr);Vr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(Hr),{pathname:o}=ci(),a=HC(),l=j0(t,L0(s),o,r==="path"),u=JSON.stringify(l);return D.useEffect(()=>{a(JSON.parse(u),{replace:e,state:n,relative:r})},[a,u,r,e,n]),null}function Yo(t){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){St(!sl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=rl(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:f="default"}=n,p=D.useMemo(()=>{let v=Ni(l,o);return v==null?null:{location:{pathname:v,search:u,hash:c,state:d,key:f},navigationType:r}},[o,l,u,c,d,f,r]);return Vr(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:D.createElement(Gr.Provider,{value:a},D.createElement(cc.Provider,{children:e,value:p}))}function D2({children:t,location:e}){return y2(Bv(t),e)}function Bv(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Bv(r.props.children,s));return}St(r.type===Yo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bv(r.props.children,s)),n.push(o)}),n}var Qd="get",Jd="application/x-www-form-urlencoded";function Vh(t){return t!=null&&typeof t.tagName=="string"}function N2(t){return Vh(t)&&t.tagName.toLowerCase()==="button"}function O2(t){return Vh(t)&&t.tagName.toLowerCase()==="form"}function M2(t){return Vh(t)&&t.tagName.toLowerCase()==="input"}function L2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function j2(t,e){return t.button===0&&(!e||e==="_self")&&!L2(t)}var hd=null;function V2(){if(hd===null)try{new FormData(document.createElement("form"),0),hd=!1}catch{hd=!0}return hd}var F2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hg(t){return t!=null&&!F2.has(t)?(Vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jd}"`),null):t}function z2(t,e){let n,r,i,s,o;if(O2(t)){let a=t.getAttribute("action");r=a?Ni(a,e):null,n=t.getAttribute("method")||Qd,i=hg(t.getAttribute("enctype"))||Jd,s=new FormData(t)}else if(N2(t)||M2(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Ni(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Qd,i=hg(t.getAttribute("formenctype"))||hg(a.getAttribute("enctype"))||Jd,s=new FormData(a,t),!V2()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(Vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qd,r=null,i=Jd,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function B0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function B2(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Ni(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function U2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function G2(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await U2(s,n);return o.links?o.links():[]}return[]}));return Y2(r.flat(1).filter($2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function V1(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function H2(t,e,{includeHydrateFallback:n}={}){return W2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function W2(t){return[...new Set(t)]}function q2(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function Y2(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(q2(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function XC(){let t=D.useContext(il);return B0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function K2(){let t=D.useContext(jh);return B0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var U0=D.createContext(void 0);U0.displayName="FrameworkContext";function QC(){let t=D.useContext(U0);return B0(t,"You must render this element inside a <HydratedRouter> element"),t}function X2(t,e){let n=D.useContext(U0),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=D.useRef(null);D.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=y=>{y.forEach(_=>{o(_.isIntersecting)})},E=new IntersectionObserver(m,{threshold:.5});return f.current&&E.observe(f.current),()=>{E.disconnect()}}},[t]),D.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let p=()=>{i(!0)},v=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Vl(a,p),onBlur:Vl(l,v),onMouseEnter:Vl(u,p),onMouseLeave:Vl(c,v),onTouchStart:Vl(d,p)}]:[!1,f,{}]}function Vl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Q2({page:t,...e}){let{router:n}=XC(),r=D.useMemo(()=>VC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(Z2,{page:t,matches:r,...e}):null}function J2(t){let{manifest:e,routeModules:n}=QC(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return G2(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function Z2({page:t,matches:e,...n}){let r=ci(),{manifest:i,routeModules:s}=QC(),{basename:o}=XC(),{loaderData:a,matches:l}=K2(),u=D.useMemo(()=>V1(t,e,l,i,r,"data"),[t,e,l,i,r]),c=D.useMemo(()=>V1(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,m=!1;if(e.forEach(y=>{var S;let _=i.routes[y.route.id];!_||!_.hasLoader||(!u.some(b=>b.route.id===y.route.id)&&y.route.id in a&&((S=s[y.route.id])!=null&&S.shouldRevalidate)||_.hasClientLoader?m=!0:v.add(y.route.id))}),v.size===0)return[];let E=B2(t,o,"data");return m&&v.size>0&&E.searchParams.set("_routes",e.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[E.pathname+E.search]},[o,a,r,i,u,e,t,s]),f=D.useMemo(()=>H2(c,i),[c,i]),p=J2(c);return D.createElement(D.Fragment,null,d.map(v=>D.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),f.map(v=>D.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),p.map(({key:v,link:m})=>D.createElement("link",{key:v,nonce:n.nonce,...m})))}function eO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var JC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JC&&(window.__reactRouterVersion="7.8.1")}catch{}function tO({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=$N({window:n,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(k2,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var ZC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uu=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},p){let{basename:v}=D.useContext(Gr),m=typeof u=="string"&&ZC.test(u),E,y=!1;if(typeof u=="string"&&m&&(E=u,JC))try{let C=new URL(window.location.href),I=u.startsWith("//")?new URL(C.protocol+u):new URL(u),A=Ni(I.pathname,v);I.origin===C.origin&&A!=null?u=A+I.search+I.hash:y=!0}catch{Vr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=v2(u,{relative:i}),[S,b,N]=X2(r,f),R=sO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function x(C){e&&e(C),C.defaultPrevented||R(C)}let w=D.createElement("a",{...f,...N,href:E||_,onClick:y||s?e:x,ref:eO(p,b),target:l,"data-discover":!m&&n==="render"?"true":void 0});return S&&!m?D.createElement(D.Fragment,null,w,D.createElement(Q2,{page:_})):w});Uu.displayName="Link";var nO=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=dc(o,{relative:u.relative}),f=ci(),p=D.useContext(jh),{navigator:v,basename:m}=D.useContext(Gr),E=p!=null&&cO(d)&&a===!0,y=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,_=f.pathname,S=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(_=_.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&m&&(S=Ni(S,m)||S);const b=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let N=_===y||!i&&_.startsWith(y)&&_.charAt(b)==="/",R=S!=null&&(S===y||!i&&S.startsWith(y)&&S.charAt(y.length)==="/"),x={isActive:N,isPending:R,isTransitioning:E},w=N?e:void 0,C;typeof r=="function"?C=r(x):C=[r,N?"active":null,R?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(x):s;return D.createElement(Uu,{...u,"aria-current":w,className:C,ref:c,style:I,to:o,viewTransition:a},typeof l=="function"?l(x):l)});nO.displayName="NavLink";var rO=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Qd,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},p)=>{let v=lO(),m=uO(a,{relative:u}),E=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&ZC.test(a),_=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let b=S.nativeEvent.submitter,N=(b==null?void 0:b.getAttribute("formmethod"))||o;v(b||S.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d})};return D.createElement("form",{ref:p,method:E,action:m,onSubmit:r?l:_,...f,"data-discover":!y&&t==="render"?"true":void 0})});rO.displayName="Form";function iO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eI(t){let e=D.useContext(il);return St(e,iO(t)),e}function sO(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=HC(),l=ci(),u=dc(t,{relative:s});return D.useCallback(c=>{if(j2(c,e)){c.preventDefault();let d=n!==void 0?n:Bu(l)===Bu(u);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,e,t,i,s,o])}var oO=0,aO=()=>`__${String(++oO)}__`;function lO(){let{router:t}=eI("useSubmit"),{basename:e}=D.useContext(Gr),n=b2();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=z2(r,e);if(i.navigate===!1){let c=i.fetcherKey||aO();await t.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function uO(t,{relative:e}={}){let{basename:n}=D.useContext(Gr),r=D.useContext(Hr);St(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...dc(t||".",{relative:e})},o=ci();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Ti([n,s.pathname])),Bu(s)}function cO(t,{relative:e}={}){let n=D.useContext(UC);St(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=eI("useViewTransitionState"),i=dc(t,{relative:e});if(!n.isTransitioning)return!1;let s=Ni(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Ni(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Lf(i.pathname,o)!=null||Lf(i.pathname,s)!=null}const Fh=()=>{const t="/".replace(/\/$/,""),e=["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(197,176,255)","rgb(142, 227, 197)","rgb(238, 183, 154)","rgb(164,205,253)","rgb(246,169,255)","rgb(171, 235, 198)","rgb(255, 201, 214)","rgb(209, 247, 200)","rgb(235, 214, 169)","rgb(174, 229, 248)","rgb(246, 224, 196)","rgb(255, 217, 232)"],n=A=>{document.body.classList.add(A)},r=A=>{document.body.classList.remove(A)},i=(A,O,P)=>Math.min(Math.max(A,O),P),s=A=>{const O=document.documentElement;return getComputedStyle(O).getPropertyValue("--bs-"+A).trim()},o=A=>{const O=document.documentElement;return getComputedStyle(O).getPropertyValue("--"+A).trim()},a=A=>A?(A.charAt(0)!=="/"&&(A="/"+A),t+A):null,l=(A,O)=>A?O:"",u=A=>A+new Date().getTime()+"-r-"+Math.random().toFixed(3).replace(".",""),c=(A,O)=>{if(O=O||0,!A)return!0;const P=A.getBoundingClientRect();return P?P.bottom+O<0||P.right+O<0||P.left-O>window.innerWidth||P.top-O>window.innerHeight:!0},d=()=>{const A=window.navigator.userAgent.toLowerCase();return/android/.test(A)},f=()=>{const A=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(A)},p=()=>{const A=window.navigator.userAgent.toLowerCase();return/ipad/.test(A)},v=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,m=()=>{const A=navigator.userAgent||navigator.vendor||window.opera;return/CriOS/.test(A)},E=()=>{const A=navigator.userAgent||navigator.vendor||window.opera;return/Firefox/.test(A)},y=()=>{const A=navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(A)},_=A=>{if(typeof A!="string")return A;let O=A;return O=O.replace(/\*\*(.*?)\*\*/g,'<span class="text-highlight">$1</span>'),O},S=(A,O)=>A.length<=O?A:A.substring(0,O-5)+"(...)",b=A=>{const O=document.querySelectorAll(A||"img");let P=!0;return O.forEach(F=>{(!F.complete||F.naturalHeight===0)&&(P=!1)}),P},N=(A,O,P,F)=>{if(!A||A==="")return"";if(!A.includes("/"))return A;const U={year:"numeric",month:P?"short":"numeric",day:F?void 0:"numeric"},q=new Date(A);q.setDate(q.getDate()+1);let H=q.toLocaleString(O,U);return H=H.charAt(0).toUpperCase()+H.slice(1),H};return{addClassToBody:n,removeClassFromBody:r,clamp:i,getBootstrapColor:s,getRootSCSSVariable:o,resolvePath:a,strIf:l,randomTag:u,isElementOutsideBounds:c,isAndroid:d,isIOS:f,isIPad:p,isTouchDevice:v,isChrome:m,isFirefox:E,isSafari:y,parseJsonText:_,limitTextSize:S,didLoadAllImages:b,formatDate:N,formatDateInterval:(A,O,P,F,U)=>{let q="";const H=N(A,P,F,U),L=N(O,P,F,U);return H!==""&&(q+=H),L!==""&&(q.length!==0&&(q+="  "),q+=L),q},getYearsPassedSince:A=>{if(!A)return 0;const O=new Date(A),F=new Date-O,U=365.25*24*60*60*1e3;return F/U},isUrlExternal:A=>{const O=document.createElement("a");return O.href=A,O.hostname!==window.location.hostname},setPageScrollingEnabled:A=>{const O=document.body;A?(O.classList.remove("body-no-scroll"),O.classList.remove("position-fixed"),window.savedScrollY&&(window.scrollTo(0,window.savedScrollY),window.savedScrollY=null)):(window.savedScrollY=window.scrollY,O.classList.add("body-no-scroll"),f()&&O.classList.add("position-fixed"))},getColorForChart:A=>e[A]}};class fc{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const dO=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},un={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:dO()},$0=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},fO=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=$0(t);un.publicKey=n.publicKey,un.blockHeadless=n.blockHeadless,un.storageProvider=n.storageProvider,un.blockList=n.blockList,un.limitRate=n.limitRate,un.origin=n.origin||e},tI=async(t,e,n={})=>{const r=await fetch(un.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),s=new fc(r.status,i);if(r.ok)return s;throw s},nI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},hO=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},rI=t=>t.webdriver||!t.languages||t.languages.length===0,iI=()=>new fc(451,"Unavailable For Headless Browser"),pO=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},gO=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},vO=(t,e)=>t instanceof FormData?t.get(e):t[e],sI=(t,e)=>{if(gO(t))return!1;pO(t.list,t.watchVariable);const n=vO(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},oI=()=>new fc(403,"Forbidden"),mO=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},yO=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},aI=async(t,e,n)=>{if(!e.throttle||!n)return!1;mO(e.throttle,e.id);const r=e.id||t;return await yO(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},lI=()=>new fc(429,"Too Many Requests"),_O=async(t,e,n,r)=>{const i=$0(r),s=i.publicKey||un.publicKey,o=i.blockHeadless||un.blockHeadless,a=i.storageProvider||un.storageProvider,l={...un.blockList,...i.blockList},u={...un.limitRate,...i.limitRate};return o&&rI(navigator)?Promise.reject(iI()):(nI(s,t,e),hO(n),n&&sI(l,n)?Promise.reject(oI()):await aI(location.pathname,u,a)?Promise.reject(lI()):tI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},wO=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},EO=t=>typeof t=="string"?document.querySelector(t):t,SO=async(t,e,n,r)=>{const i=$0(r),s=i.publicKey||un.publicKey,o=i.blockHeadless||un.blockHeadless,a=un.storageProvider||i.storageProvider,l={...un.blockList,...i.blockList},u={...un.limitRate,...i.limitRate};if(o&&rI(navigator))return Promise.reject(iI());const c=EO(n);nI(s,t,e),wO(c);const d=new FormData(c);return sI(l,d)?Promise.reject(oI()):await aI(location.pathname,u,a)?Promise.reject(lI()):(d.append("lib_version","4.4.1"),d.append("service_id",t),d.append("template_id",e),d.append("user_id",s),tI("/api/v1.0/email/send-form",d))},F1={init:fO,send:_O,sendForm:SO,EmailJSResponseStatus:fc},Fl={didInit:!1,config:null},xO=()=>{const t=r=>{F1.init(r.publicKey),Fl.config=r,Fl.didInit=!0},e=()=>Fl.didInit;return{init:t,isInitialized:e,sendContactEmail:async(r,i,s,o)=>{if(!e())return;const a={from_name:r,from_email:i,custom_subject:s,message:o};try{const l=await F1.send(Fl.config.serviceId,Fl.config.templateId,a);return!0}catch{return!1}}}},uI=D.createContext(null),TO=()=>D.useContext(uI),z1={NOT_LOADED:0,LOADED:1},CO=({children:t})=>{const e=Fh(),n=xO(),[r,i]=D.useState(z1.NOT_LOADED),[s,o]=D.useState({settings:{},strings:{},sections:[],categories:[]}),[a,l]=D.useState(!1);D.useEffect(()=>{u().then(_=>{})},[]),D.useEffect(()=>{s.settings&&(a||c(),s.settings.emailjs&&n.init(s.settings.emailjs))},[s]);const u=async()=>{const _=await d("/data/settings.json"),S=await d("/data/strings.json"),b=await d("/data/structure.json"),N=b.categories,R=b.sections;for(const w of R){const C=N.find(I=>I.id===w.categoryId);if(!C)throw new Error(`[DataProvider] The section with id "${w.id}" has an invalid categoryId "${w.categoryId}". There's no such category.`);w.category=C,w.content=await d(w.jsonPath)}const x=N.filter(w=>R.find(C=>C.categoryId===w.id));o(w=>({...w,settings:_,strings:S,categories:x,sections:b.sections})),i(z1.LOADED)},c=()=>{s.sections.length&&l(!0)},d=async _=>{const S=e.resolvePath(_);return(await fetch(S)).json()},f=()=>s.settings,p=()=>s.strings,v=()=>s.sections,m=()=>s.categories,E=_=>_?s.sections.filter(S=>S.categoryId===_.id):[],y=()=>{const _=f(),S=v(),b=[e.resolvePath(_.profile.logoUrl),e.resolvePath(_.profile.profilePictureUrl)];return S.forEach(N=>{!N.content||!N.content.articles||N.content.articles.forEach(R=>{R.items&&R.items.forEach(x=>{!x.icon||!x.icon.img||b.push(e.resolvePath(x.icon.img))})})}),b};return g.jsx(uI.Provider,{value:{getSettings:f,getStrings:p,getSections:v,getCategories:m,getCategorySections:E,listImagesForCache:y},children:t})},IO=D.createContext(null),bO=({children:t})=>{const e=Fh(),{getSettings:n}=TO(),r=n(),[i,s]=D.useState([]),[o,a]=D.useState(!0),[l,u]=D.useState(!0),[c,d]=D.useState(null),[f,p]=D.useState(null),[v,m]=D.useState(null),[E,y]=D.useState(null);D.useEffect(()=>{a(!e.isTouchDevice()&&r.animatedCursorEnabled)},[]);const _=(L,j)=>{if(i.find($=>$.id===L))return;const z={id:L,message:j};s($=>[...$,z])},S=()=>i.length,b=()=>i,N=L=>{s(j=>j.filter(z=>z.id!==L))},R=()=>o,x=()=>l,w=()=>{u(!l)},C=(L,j,z)=>{d({type:L,title:j,message:z})},I=()=>{d(null)},A=(L,j,z)=>{p({url:L,title:j,description:z})},O=()=>{p(null)},P=(L,j,z,$,K)=>{y({title:L,message:j,cancelButtonLabel:z,confirmButtonLabel:$,onConfirm:K})},F=()=>{y(null)},U=(L,j,z,$)=>{m({screenshots:L,aspectRatio:j,title:z,description:$})},q=()=>{m(null)},H=()=>S()||f||v||E;return g.jsx(IO.Provider,{value:{isShowingSpinner:S,listSpinnerActivities:b,showActivitySpinner:_,hideActivitySpinner:N,isAnimatedCursorEnabled:R,isAnimatedCursorActive:x,toggleAnimatedCursorActive:w,displayingNotification:c,displayNotification:C,killNotification:I,displayingYoutubeVideo:f,displayYoutubeVideo:A,hideYoutubeVideo:O,displayingGallery:v,displayGallery:U,hideGallery:q,pendingConfirmation:E,showConfirmationDialog:P,hideConfirmationDialog:F,isModalOpen:H},children:t})},Zs=[],eo=[],cI=()=>({schedule:(i,s,o)=>{const a=setTimeout(i,s);Zs.push({id:a,tag:o})},interval:(i,s,o)=>{const a=setInterval(i,s);eo.push({id:a,tag:o})},clearAllWithTag:i=>{for(let s=Zs.length-1;s>=0;s--)Zs[s].tag===i&&(clearTimeout(Zs[s].id),Zs.splice(s,1));for(let s=eo.length-1;s>=0;s--)eo[s].tag===i&&(clearInterval(eo[s].id),eo.splice(s,1))},clearAll:()=>{Zs.forEach(i=>{clearTimeout(i.id)}),eo.forEach(i=>{clearInterval(i.id)}),Zs.length=0,eo.length=0}}),RO=D.createContext(null),Wo={xxs:0,xs:360,sm:576,md:768,lg:992,xl:1200,xxl:1400},B1=.1,pd=Fh(),pg=cI(),AO=({children:t})=>{const[e,n]=D.useState(0),[r,i]=D.useState(0),[s,o]=D.useState(window.innerWidth),[a,l]=D.useState(window.innerHeight),[u,c]=D.useState(0),[d,f]=D.useState(!1);D.useEffect(()=>(p(),()=>{v()}),[]);const p=()=>{window.addEventListener("scroll",m,{passive:!0}),window.addEventListener("resize",E),window.addEventListener("keydown",_),m(),E(),pg.clearAllWithTag("window-provider"),pg.interval(()=>{y()},B1*1e3,"window-provider"),f(!0)},v=()=>{window.removeEventListener("scroll",m),window.removeEventListener("resize",E),window.removeEventListener("keydown",_),pg.clearAllWithTag("window-provider"),f(!1)},m=()=>{n(window.scrollX),i(window.scrollY)},E=()=>{o(window.innerWidth),l(window.innerHeight)},y=()=>{c(w=>w+B1)},_=w=>{switch(w.key){case"ArrowUp":case"ArrowDown":x();break}},S=w=>s>=Wo[w],b=()=>{const w=s;return w<Wo.sm?"xs":w<Wo.md?"sm":w<Wo.lg?"md":w<Wo.xl?"lg":w<Wo.xxl?"xl":"xxl"},N=()=>!S(pd.getRootSCSSVariable("mobile-layout-breakpoint")||"md"),R=()=>pd.isIOS()&&pd.isChrome(),x=()=>{const w=document.querySelector(".custom-scrollable"),C=document.querySelector(".custom-modal");!w||pd.isTouchDevice()||C||w.focus()};return g.jsx(RO.Provider,{value:{scrollX:e,scrollY:r,innerWidth:s,innerHeight:a,currentTimeSpan:u,isBreakpoint:S,getBreakpoint:b,isMobileLayout:N,hasFooterOffset:R,focusMainView:x},children:d&&g.jsx(g.Fragment,{children:t})})},PO=()=>{};var U1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},kO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new DO;const f=s<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NO=function(t){const e=dI(t);return fI.encodeByteArray(e,!0)},jf=function(t){return NO(t).replace(/\./g,"")},hI=function(t){try{return fI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=()=>OO().__FIREBASE_DEFAULTS__,LO=()=>{if(typeof process>"u"||typeof U1>"u")return;const t=U1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hI(t[1]);return e&&JSON.parse(e)},zh=()=>{try{return PO()||MO()||LO()||jO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pI=t=>{var e,n;return(n=(e=zh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VO=t=>{const e=pI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gI=()=>{var t;return(t=zh())===null||t===void 0?void 0:t.config},vI=t=>{var e;return(e=zh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jf(JSON.stringify(n)),jf(JSON.stringify(o)),""].join(".")}const uu={};function BO(){const t={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?t.emulator.push(e):t.prod.push(e);return t}function UO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $1=!1;function yI(t,e){if(typeof window>"u"||typeof document>"u"||!ol(window.location.host)||uu[t]===e||uu[t]||$1)return;uu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=BO().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{$1=!0,o()},f}function c(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=UO(r),p=n("text"),v=document.getElementById(p)||document.createElement("span"),m=n("learnmore"),E=document.getElementById(m)||document.createElement("a"),y=n("preprendIcon"),_=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const S=f.element;a(S),c(E,m);const b=u();l(_,y),S.append(_,v,E,b),document.body.appendChild(S)}s?(v.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $O(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function GO(){var t;const e=(t=zh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function qO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YO(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KO(){return!GO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XO(){try{return typeof indexedDB=="object"}catch{return!1}}function QO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="FirebaseError";class $i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JO,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ZO(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new $i(i,a,r)}}function ZO(t,e){return t.replace(eM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const eM=/\{\$([^}]+)}/g;function tM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(G1(s)&&G1(o)){if(!Oi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function G1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function nM(t,e){const n=new rM(t,e);return n.subscribe.bind(n)}class rM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gg),i.error===void 0&&(i.error=gg),i.complete===void 0&&(i.complete=gg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(t){return t&&t._delegate?t._delegate:t}class Co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aM(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oM(t){return t===io?void 0:t}function aM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const uM={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},cM=$e.INFO,dM={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},fM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=dM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G0{constructor(e){this.name=e,this._logLevel=cM,this._logHandler=fM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const hM=(t,e)=>e.some(n=>t instanceof n);let H1,W1;function pM(){return H1||(H1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gM(){return W1||(W1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _I=new WeakMap,Uv=new WeakMap,wI=new WeakMap,vg=new WeakMap,H0=new WeakMap;function vM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Es(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_I.set(n,t)}).catch(()=>{}),H0.set(e,t),e}function mM(t){if(Uv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Uv.set(t,e)}let $v={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Uv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yM(t){$v=t($v)}function _M(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mg(this),e,...n);return wI.set(r,e.sort?e.sort():[e]),Es(r)}:gM().includes(t)?function(...e){return t.apply(mg(this),e),Es(_I.get(this))}:function(...e){return Es(t.apply(mg(this),e))}}function wM(t){return typeof t=="function"?_M(t):(t instanceof IDBTransaction&&mM(t),hM(t,pM())?new Proxy(t,$v):t)}function Es(t){if(t instanceof IDBRequest)return vM(t);if(vg.has(t))return vg.get(t);const e=wM(t);return e!==t&&(vg.set(t,e),H0.set(e,t)),e}const mg=t=>H0.get(t);function EM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Es(o.result),l.oldVersion,l.newVersion,Es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const SM=["get","getKey","getAll","getAllKeys","count"],xM=["put","add","delete","clear"],yg=new Map;function q1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yg.get(e))return yg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=xM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return yg.set(e,s),s}yM(t=>({...t,get:(e,n,r)=>q1(e,n)||t.get(e,n,r),has:(e,n)=>!!q1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gv="@firebase/app",Y1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new G0("@firebase/app"),IM="@firebase/app-compat",bM="@firebase/analytics-compat",RM="@firebase/analytics",AM="@firebase/app-check-compat",PM="@firebase/app-check",kM="@firebase/auth",DM="@firebase/auth-compat",NM="@firebase/database",OM="@firebase/data-connect",MM="@firebase/database-compat",LM="@firebase/functions",jM="@firebase/functions-compat",VM="@firebase/installations",FM="@firebase/installations-compat",zM="@firebase/messaging",BM="@firebase/messaging-compat",UM="@firebase/performance",$M="@firebase/performance-compat",GM="@firebase/remote-config",HM="@firebase/remote-config-compat",WM="@firebase/storage",qM="@firebase/storage-compat",YM="@firebase/firestore",KM="@firebase/ai",XM="@firebase/firestore-compat",QM="firebase",JM="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="[DEFAULT]",ZM={[Gv]:"fire-core",[IM]:"fire-core-compat",[RM]:"fire-analytics",[bM]:"fire-analytics-compat",[PM]:"fire-app-check",[AM]:"fire-app-check-compat",[kM]:"fire-auth",[DM]:"fire-auth-compat",[NM]:"fire-rtdb",[OM]:"fire-data-connect",[MM]:"fire-rtdb-compat",[LM]:"fire-fn",[jM]:"fire-fn-compat",[VM]:"fire-iid",[FM]:"fire-iid-compat",[zM]:"fire-fcm",[BM]:"fire-fcm-compat",[UM]:"fire-perf",[$M]:"fire-perf-compat",[GM]:"fire-rc",[HM]:"fire-rc-compat",[WM]:"fire-gcs",[qM]:"fire-gcs-compat",[YM]:"fire-fst",[XM]:"fire-fst-compat",[KM]:"fire-vertex","fire-js":"fire-js",[QM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=new Map,eL=new Map,Wv=new Map;function K1(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fa(t){const e=t.name;if(Wv.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Wv.set(e,t);for(const n of Vf.values())K1(n,t);for(const n of eL.values())K1(n,t);return!0}function W0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new hc("app","Firebase",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=JM;function EI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ss.create("bad-app-name",{appName:String(i)});if(n||(n=gI()),!n)throw Ss.create("no-options");const s=Vf.get(i);if(s){if(Oi(n,s.options)&&Oi(r,s.config))return s;throw Ss.create("duplicate-app",{appName:i})}const o=new lM(i);for(const l of Wv.values())o.addComponent(l);const a=new nL(n,r,o);return Vf.set(i,a),a}function SI(t=Hv){const e=Vf.get(t);if(!e&&t===Hv&&gI())return EI();if(!e)throw Ss.create("no-app",{appName:t});return e}function xs(t,e,n){var r;let i=(r=ZM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(a.join(" "));return}Fa(new Co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="firebase-heartbeat-database",iL=1,$u="firebase-heartbeat-store";let _g=null;function xI(){return _g||(_g=EM(rL,iL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),_g}async function sL(t){try{const n=(await xI()).transaction($u),r=await n.objectStore($u).get(TI(t));return await n.done,r}catch(e){if(e instanceof $i)Mi.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(n.message)}}}async function X1(t,e){try{const r=(await xI()).transaction($u,"readwrite");await r.objectStore($u).put(e,TI(t)),await r.done}catch(n){if(n instanceof $i)Mi.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Mi.warn(r.message)}}}function TI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=1024,aL=30;class lL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Q1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>aL){const o=dL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q1(),{heartbeatsToSend:r,unsentEntries:i}=uL(this._heartbeatsCache.heartbeats),s=jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Mi.warn(n),""}}}function Q1(){return new Date().toISOString().substring(0,10)}function uL(t,e=oL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),J1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),J1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XO()?QO().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return X1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function J1(t){return jf(JSON.stringify({version:2,heartbeats:t})).length}function dL(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(t){Fa(new Co("platform-logger",e=>new TM(e),"PRIVATE")),Fa(new Co("heartbeat",e=>new lL(e),"PRIVATE")),xs(Gv,Y1,t),xs(Gv,Y1,"esm2017"),xs("fire-js","")}fL("");var hL="firebase",pL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(hL,pL,"app");function q0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gL=CI,II=new hc("auth","Firebase",CI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new G0("@firebase/auth");function vL(t,...e){Ff.logLevel<=$e.WARN&&Ff.warn(`Auth (${al}): ${t}`,...e)}function Zd(t,...e){Ff.logLevel<=$e.ERROR&&Ff.error(`Auth (${al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw Y0(t,...e)}function Zr(t,...e){return Y0(t,...e)}function bI(t,e,n){const r=Object.assign(Object.assign({},gL()),{[e]:n});return new hc("auth","Firebase",r).create(e,{appName:t.name})}function Ci(t){return bI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return II.create(t,...e)}function Re(t,e,...n){if(!t)throw Y0(e,...n)}function Ei(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zd(e),new Error(e)}function Li(t,e){t||Ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function mL(){return Z1()==="http:"||Z1()==="https:"}function Z1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mL()||WO()||"connection"in navigator)?navigator.onLine:!0}function _L(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=$O()||qO()}get(){return yL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SL=new gc(3e4,6e4);function Gi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function di(t,e,n,r,i={}){return AI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=pc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return HO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ol(t.emulatorConfig.host)&&(u.credentials="include"),RI.fetch()(await PI(t,t.config.apiHost,n,a),u)})}async function AI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wL),e);try{const i=new TL(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw gd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gd(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bI(t,c,u);Fr(t,c)}}catch(i){if(i instanceof $i)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function vc(t,e,n,r,i={}){const s=await di(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function PI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?K0(t.config,i):`${t.config.apiScheme}://${i}`;return EL.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function xL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),SL.get())})}}function gd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function eE(t){return t!==void 0&&t.enterprise!==void 0}class CL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xL(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IL(t,e){return di(t,"GET","/v2/recaptchaConfig",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bL(t,e){return di(t,"POST","/v1/accounts:delete",e)}async function zf(t,e){return di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RL(t,e=!1){const n=$t(t),r=await n.getIdToken(e),i=X0(r);Re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cu(wg(i.auth_time)),issuedAtTime:cu(wg(i.iat)),expirationTime:cu(wg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function wg(t){return Number(t)*1e3}function X0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zd("JWT malformed, contained fewer than 3 sections"),null;try{const i=hI(n);return i?JSON.parse(i):(Zd("Failed to decode base64 JWT payload"),null)}catch(i){return Zd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tE(t){const e=X0(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $i&&AL(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await za(t,zf(n,{idToken:r}));Re(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?kI(s.providerUserInfo):[],a=DL(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function kL(t){const e=$t(t);await Bf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kI(t){return t.map(e=>{var{providerId:n}=e,r=q0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){const n=await AI(t,{},async()=>{const r=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await PI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ol(t.emulatorConfig.host)&&(l.credentials="include"),RI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OL(t,e){return di(t,"POST","/v2/accounts:revokeToken",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=tE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await NL(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ca;return r&&(Re(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Re(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return Ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=q0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await za(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RL(this,e)}reload(){return kL(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await za(this,bL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:S,emailVerified:b,isAnonymous:N,providerData:R,stsTokenManager:x}=n;Re(S&&x,e,"internal-error");const w=Ca.fromJSON(this.name,x);Re(typeof S=="string",e,"internal-error"),Xi(d,e.name),Xi(f,e.name),Re(typeof b=="boolean",e,"internal-error"),Re(typeof N=="boolean",e,"internal-error"),Xi(p,e.name),Xi(v,e.name),Xi(m,e.name),Xi(E,e.name),Xi(y,e.name),Xi(_,e.name);const C=new Nr({uid:S,auth:e,email:f,emailVerified:b,displayName:d,isAnonymous:N,photoURL:v,phoneNumber:p,tenantId:m,stsTokenManager:w,createdAt:y,lastLoginAt:_});return R&&Array.isArray(R)&&(C.providerData=R.map(I=>Object.assign({},I))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ca;i.updateFromServerResponse(n);const s=new Nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Re(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?kI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ca;a.updateFromIdToken(r);const l=new Nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function Si(t){Li(t instanceof Function,"Expected a class definition");let e=nE.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DI.type="NONE";const rE=DI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(t,e,n){return`firebase:${t}:${e}:${n}`}class Ia{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ef(this.userKey,i.apiKey,s),this.fullPersistenceKey=ef("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zf(this.auth,{idToken:e}).catch(()=>{});return n?Nr._fromGetAccountInfoResponse(this.auth,n,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ia(Si(rE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Si(rE);const o=ef(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await zf(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Nr._fromGetAccountInfoResponse(e,f,c)}else d=Nr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ia(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ia(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(VI(e))return"Blackberry";if(FI(e))return"Webos";if(OI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(jI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function NI(t=Cn()){return/firefox\//i.test(t)}function OI(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(t=Cn()){return/crios\//i.test(t)}function LI(t=Cn()){return/iemobile/i.test(t)}function jI(t=Cn()){return/android/i.test(t)}function VI(t=Cn()){return/blackberry/i.test(t)}function FI(t=Cn()){return/webos/i.test(t)}function Q0(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ML(t=Cn()){var e;return Q0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LL(){return YO()&&document.documentMode===10}function zI(t=Cn()){return Q0(t)||jI(t)||FI(t)||VI(t)||/windows phone/i.test(t)||LI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e=[]){let n;switch(t){case"Browser":n=iE(Cn());break;case"Worker":n=`${iE(Cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e={}){return di(t,"GET","/v2/passwordPolicy",Gi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=6;class zL{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:FL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sE(this),this.idTokenSubscription=new sE(this),this.beforeStateQueue=new jL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=II,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ia.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zf(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_L()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Ci(this));const n=e?$t(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VL(this),n=new zL(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OL(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await Ia.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&vL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Us(t){return $t(t)}class sE{constructor(e){this.auth=e,this.observer=null,this.addObserver=nM(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UL(t){Bh=t}function UI(t){return Bh.loadJS(t)}function $L(){return Bh.recaptchaEnterpriseScript}function GL(){return Bh.gapiScript}function HL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class WL{constructor(){this.enterprise=new qL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const YL="recaptcha-enterprise",$I="NO_RECAPTCHA";class KL{constructor(e){this.type=YL,this.auth=Us(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{IL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new CL(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;eE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o($I)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WL().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&eE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=$L();l.length!==0&&(l+=a),UI(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function oE(t,e,n,r=!1,i=!1){const s=new KL(t);let o;if(i)o=$I;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Uf(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await oE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await oE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t,e){const n=W0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Oi(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function QL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JL(t,e,n){const r=Us(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=GI(e),{host:o,port:a}=ZL(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Oi(u,r.config.emulator)&&Oi(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,ol(o)?(mI(`${s}//${o}${l}`),yI("Auth",!0)):ej()}function GI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZL(t){const e=GI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:aE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:aE(o)}}}function aE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ej(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ei("not implemented")}_getIdTokenResponse(e){return Ei("not implemented")}_linkToIdToken(e,n){return Ei("not implemented")}_getReauthenticationResolver(e){return Ei("not implemented")}}async function tj(t,e){return di(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(t,e){return vc(t,"POST","/v1/accounts:signInWithPassword",Gi(t,e))}async function rj(t,e){return di(t,"POST","/v1/accounts:sendOobCode",Gi(t,e))}async function ij(t,e){return rj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",Gi(t,e))}async function oj(t,e){return vc(t,"POST","/v1/accounts:signInWithEmailLink",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends J0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,n,"signInWithPassword",nj);case"emailLink":return sj(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uf(e,r,"signUpPassword",tj);case"emailLink":return oj(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return vc(t,"POST","/v1/accounts:signInWithIdp",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj="http://localhost";class Io extends J0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=q0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Io(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ba(e,n)}buildRequest(){const e={requestUri:aj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uj(t){const e=Hl(Wl(t)).link,n=e?Hl(Wl(e)).deep_link_id:null,r=Hl(Wl(t)).deep_link_id;return(r?Hl(Wl(r)).link:null)||r||n||e||t}class Z0{constructor(e){var n,r,i,s,o,a;const l=Hl(Wl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=lj((i=l.mode)!==null&&i!==void 0?i:null);Re(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=uj(e);try{return new Z0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.providerId=ll.PROVIDER_ID}static credential(e,n){return Gu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Z0.parseLink(n);return Re(r,"argument-error"),Gu._fromEmailAndCode(e,r.code,r.tenantId)}}ll.PROVIDER_ID="password";ll.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ll.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends HI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends mc{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Io._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends mc{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends mc{constructor(){super("twitter.com")}static credential(e,n){return Io._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return as.credential(n,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(t,e){return vc(t,"POST","/v1/accounts:signUp",Gi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nr._fromIdTokenResponse(e,r,i),o=lE(r);return new bo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lE(r);return new bo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends $i{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $f(e,n,r,i)}}function WI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(t,s,e,r):s})}async function dj(t,e,n=!1){const r=await za(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fj(t,e,n=!1){const{auth:r}=t;if(gr(r.app))return Promise.reject(Ci(r));const i="reauthenticate";try{const s=await za(t,WI(r,i,e,t),n);Re(s.idToken,r,"internal-error");const o=X0(s.idToken);Re(o,r,"internal-error");const{sub:a}=o;return Re(t.uid===a,r,"user-mismatch"),bo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t,e,n=!1){if(gr(t.app))return Promise.reject(Ci(t));const r="signIn",i=await WI(t,r,e),s=await bo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function hj(t,e){return qI(Us(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(t){const e=Us(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pj(t,e,n){const r=Us(t);await Uf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ij)}async function gj(t,e,n){if(gr(t.app))return Promise.reject(Ci(t));const r=Us(t),o=await Uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&YI(t),l}),a=await bo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function KI(t,e,n){return gr(t.app)?Promise.reject(Ci(t)):hj($t(t),ll.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&YI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vj(t,e){return di(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$t(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await za(r,vj(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function yj(t,e,n,r){return $t(t).onIdTokenChanged(e,n,r)}function _j(t,e,n){return $t(t).beforeAuthStateChanged(e,n)}function wj(t,e,n,r){return $t(t).onAuthStateChanged(e,n,r)}function Ej(t){return $t(t).signOut()}const Gf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gf,"1"),this.storage.removeItem(Gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=1e3,xj=10;class QI extends XI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);LL()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QI.type="LOCAL";const Tj=QI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI extends XI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JI.type="SESSION";const ZI=JI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await Cj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=ey("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function bj(t){ei().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function Rj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Aj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Pj(){return eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="firebaseLocalStorageDb",kj=1,Hf="firebaseLocalStorage",nb="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(t,e){return t.transaction([Hf],e?"readwrite":"readonly").objectStore(Hf)}function Dj(){const t=indexedDB.deleteDatabase(tb);return new yc(t).toPromise()}function Kv(){const t=indexedDB.open(tb,kj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hf,{keyPath:nb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hf)?e(r):(r.close(),await Dj(),e(await Kv()))})})}async function uE(t,e,n){const r=$h(t,!0).put({[nb]:e,value:n});return new yc(r).toPromise()}async function Nj(t,e){const n=$h(t,!1).get(e),r=await new yc(n).toPromise();return r===void 0?null:r.value}function cE(t,e){const n=$h(t,!0).delete(e);return new yc(n).toPromise()}const Oj=800,Mj=3;class rb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Mj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uh._getInstance(Pj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Rj(),!this.activeServiceWorker)return;this.sender=new Ij(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Aj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kv();return await uE(e,Gf,"1"),await cE(e,Gf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>uE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Nj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=$h(i,!1).getAll();return new yc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rb.type="LOCAL";const Lj=rb;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t,e){return e?Si(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends J0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Vj(t){return qI(t.auth,new ty(t),t.bypassAuthState)}function Fj(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),fj(n,new ty(t),t.bypassAuthState)}async function zj(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),dj(n,new ty(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vj;case"linkViaPopup":case"linkViaRedirect":return zj;case"reauthViaPopup":case"reauthViaRedirect":return Fj;default:Fr(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=new gc(2e3,1e4);class ha extends ib{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bj.get())};e()}}ha.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj="pendingRedirect",tf=new Map;class $j extends ib{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tf.get(this.auth._key());if(!e){try{const r=await Gj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tf.set(this.auth._key(),e)}return this.bypassAuthState||tf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gj(t,e){const n=qj(e),r=Wj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Hj(t,e){tf.set(t._key(),e)}function Wj(t){return Si(t._redirectPersistence)}function qj(t){return ef(Uj,t.config.apiKey,t.name)}async function Yj(t,e,n=!1){if(gr(t.app))return Promise.reject(Ci(t));const r=Us(t),i=jj(r,e),o=await new $j(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj=10*60*1e3;class Xj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Qj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Kj&&this.cachedEventUids.clear(),this.cachedEventUids.has(dE(e))}saveEventToCache(e){this.cachedEventUids.add(dE(e)),this.lastProcessedEventTime=Date.now()}}function dE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Qj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(t,e={}){return di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eV=/^https?/;async function tV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jj(t);for(const n of e)try{if(nV(n))return}catch{}Fr(t,"unauthorized-domain")}function nV(t){const e=qv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eV.test(n))return!1;if(Zj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rV=new gc(3e4,6e4);function fE(){const t=ei().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iV(t){return new Promise((e,n)=>{var r,i,s;function o(){fE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fE(),n(Zr(t,"network-request-failed"))},timeout:rV.get()})}if(!((i=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ei().gapi)===null||s===void 0)&&s.load)o();else{const a=HL("iframefcb");return ei()[a]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},UI(`${GL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw nf=null,e})}let nf=null;function sV(t){return nf=nf||iV(t),nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new gc(5e3,15e3),aV="__/auth/iframe",lV="emulator/auth/iframe",uV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dV(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K0(e,lV):`https://${t.config.authDomain}/${aV}`,r={apiKey:e.apiKey,appName:t.name,v:al},i=cV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pc(r).slice(1)}`}async function fV(t){const e=await sV(t),n=ei().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:dV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zr(t,"network-request-failed"),a=ei().setTimeout(()=>{s(o)},oV.get());function l(){ei().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pV=500,gV=600,vV="_blank",mV="http://localhost";class hE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yV(t,e,n,r=pV,i=gV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hV),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Cn().toLowerCase();n&&(a=MI(u)?vV:n),NI(u)&&(e=e||mV,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,v])=>`${f}${p}=${v},`,"");if(ML(u)&&a!=="_self")return _V(e||"",a),new hE(null);const d=window.open(e||"",a,c);Re(d,t,"popup-blocked");try{d.focus()}catch{}return new hE(d)}function _V(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="__/auth/handler",EV="emulator/auth/handler",SV=encodeURIComponent("fac");async function pE(t,e,n,r,i,s){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:al,eventId:i};if(e instanceof HI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",tM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof mc){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${SV}=${encodeURIComponent(l)}`:"";return`${xV(t)}?${pc(a).slice(1)}${u}`}function xV({config:t}){return t.emulator?K0(t,EV):`https://${t.authDomain}/${wV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class TV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZI,this._completeRedirectFn=Yj,this._overrideRedirectResult=Hj}async _openPopup(e,n,r,i){var s;Li((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await pE(e,n,r,qv(),i);return yV(e,o,ey())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await pE(e,n,r,qv(),i);return bj(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Li(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fV(e),r=new Xj(e);return n.register("authEvent",i=>(Re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Eg,{type:Eg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Eg];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zI()||OI()||Q0()}}const CV=TV;var gE="@firebase/auth",vE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RV(t){Fa(new Co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Re(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BI(t)},u=new BL(r,i,s,l);return QL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new Co("auth-internal",e=>{const n=Us(e.getProvider("auth").getImmediate());return(r=>new IV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(gE,vE,bV(t)),xs(gE,vE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=5*60,PV=vI("authIdTokenMaxAge")||AV;let mE=null;const kV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PV)return;const i=n==null?void 0:n.token;mE!==i&&(mE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DV(t=SI()){const e=W0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XL(t,{popupRedirectResolver:CV,persistence:[Lj,Tj,ZI]}),r=vI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=kV(s.toString());_j(n,o,()=>o(n.currentUser)),yj(n,a=>o(a))}}const i=pI("auth");return i&&JL(n,`http://${i}`),n}function NV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UL({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",NV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RV("Browser");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,ob;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function C(){}C.prototype=w.prototype,x.D=w.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(I,A,O){for(var P=Array(arguments.length-2),F=2;F<arguments.length;F++)P[F-2]=arguments[F];return w.prototype[A].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,C){C||(C=0);var I=Array(16);if(typeof w=="string")for(var A=0;16>A;++A)I[A]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(A=0;16>A;++A)I[A]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=x.g[0],C=x.g[1],A=x.g[2];var O=x.g[3],P=w+(O^C&(A^O))+I[0]+3614090360&4294967295;w=C+(P<<7&4294967295|P>>>25),P=O+(A^w&(C^A))+I[1]+3905402710&4294967295,O=w+(P<<12&4294967295|P>>>20),P=A+(C^O&(w^C))+I[2]+606105819&4294967295,A=O+(P<<17&4294967295|P>>>15),P=C+(w^A&(O^w))+I[3]+3250441966&4294967295,C=A+(P<<22&4294967295|P>>>10),P=w+(O^C&(A^O))+I[4]+4118548399&4294967295,w=C+(P<<7&4294967295|P>>>25),P=O+(A^w&(C^A))+I[5]+1200080426&4294967295,O=w+(P<<12&4294967295|P>>>20),P=A+(C^O&(w^C))+I[6]+2821735955&4294967295,A=O+(P<<17&4294967295|P>>>15),P=C+(w^A&(O^w))+I[7]+4249261313&4294967295,C=A+(P<<22&4294967295|P>>>10),P=w+(O^C&(A^O))+I[8]+1770035416&4294967295,w=C+(P<<7&4294967295|P>>>25),P=O+(A^w&(C^A))+I[9]+2336552879&4294967295,O=w+(P<<12&4294967295|P>>>20),P=A+(C^O&(w^C))+I[10]+4294925233&4294967295,A=O+(P<<17&4294967295|P>>>15),P=C+(w^A&(O^w))+I[11]+2304563134&4294967295,C=A+(P<<22&4294967295|P>>>10),P=w+(O^C&(A^O))+I[12]+1804603682&4294967295,w=C+(P<<7&4294967295|P>>>25),P=O+(A^w&(C^A))+I[13]+4254626195&4294967295,O=w+(P<<12&4294967295|P>>>20),P=A+(C^O&(w^C))+I[14]+2792965006&4294967295,A=O+(P<<17&4294967295|P>>>15),P=C+(w^A&(O^w))+I[15]+1236535329&4294967295,C=A+(P<<22&4294967295|P>>>10),P=w+(A^O&(C^A))+I[1]+4129170786&4294967295,w=C+(P<<5&4294967295|P>>>27),P=O+(C^A&(w^C))+I[6]+3225465664&4294967295,O=w+(P<<9&4294967295|P>>>23),P=A+(w^C&(O^w))+I[11]+643717713&4294967295,A=O+(P<<14&4294967295|P>>>18),P=C+(O^w&(A^O))+I[0]+3921069994&4294967295,C=A+(P<<20&4294967295|P>>>12),P=w+(A^O&(C^A))+I[5]+3593408605&4294967295,w=C+(P<<5&4294967295|P>>>27),P=O+(C^A&(w^C))+I[10]+38016083&4294967295,O=w+(P<<9&4294967295|P>>>23),P=A+(w^C&(O^w))+I[15]+3634488961&4294967295,A=O+(P<<14&4294967295|P>>>18),P=C+(O^w&(A^O))+I[4]+3889429448&4294967295,C=A+(P<<20&4294967295|P>>>12),P=w+(A^O&(C^A))+I[9]+568446438&4294967295,w=C+(P<<5&4294967295|P>>>27),P=O+(C^A&(w^C))+I[14]+3275163606&4294967295,O=w+(P<<9&4294967295|P>>>23),P=A+(w^C&(O^w))+I[3]+4107603335&4294967295,A=O+(P<<14&4294967295|P>>>18),P=C+(O^w&(A^O))+I[8]+1163531501&4294967295,C=A+(P<<20&4294967295|P>>>12),P=w+(A^O&(C^A))+I[13]+2850285829&4294967295,w=C+(P<<5&4294967295|P>>>27),P=O+(C^A&(w^C))+I[2]+4243563512&4294967295,O=w+(P<<9&4294967295|P>>>23),P=A+(w^C&(O^w))+I[7]+1735328473&4294967295,A=O+(P<<14&4294967295|P>>>18),P=C+(O^w&(A^O))+I[12]+2368359562&4294967295,C=A+(P<<20&4294967295|P>>>12),P=w+(C^A^O)+I[5]+4294588738&4294967295,w=C+(P<<4&4294967295|P>>>28),P=O+(w^C^A)+I[8]+2272392833&4294967295,O=w+(P<<11&4294967295|P>>>21),P=A+(O^w^C)+I[11]+1839030562&4294967295,A=O+(P<<16&4294967295|P>>>16),P=C+(A^O^w)+I[14]+4259657740&4294967295,C=A+(P<<23&4294967295|P>>>9),P=w+(C^A^O)+I[1]+2763975236&4294967295,w=C+(P<<4&4294967295|P>>>28),P=O+(w^C^A)+I[4]+1272893353&4294967295,O=w+(P<<11&4294967295|P>>>21),P=A+(O^w^C)+I[7]+4139469664&4294967295,A=O+(P<<16&4294967295|P>>>16),P=C+(A^O^w)+I[10]+3200236656&4294967295,C=A+(P<<23&4294967295|P>>>9),P=w+(C^A^O)+I[13]+681279174&4294967295,w=C+(P<<4&4294967295|P>>>28),P=O+(w^C^A)+I[0]+3936430074&4294967295,O=w+(P<<11&4294967295|P>>>21),P=A+(O^w^C)+I[3]+3572445317&4294967295,A=O+(P<<16&4294967295|P>>>16),P=C+(A^O^w)+I[6]+76029189&4294967295,C=A+(P<<23&4294967295|P>>>9),P=w+(C^A^O)+I[9]+3654602809&4294967295,w=C+(P<<4&4294967295|P>>>28),P=O+(w^C^A)+I[12]+3873151461&4294967295,O=w+(P<<11&4294967295|P>>>21),P=A+(O^w^C)+I[15]+530742520&4294967295,A=O+(P<<16&4294967295|P>>>16),P=C+(A^O^w)+I[2]+3299628645&4294967295,C=A+(P<<23&4294967295|P>>>9),P=w+(A^(C|~O))+I[0]+4096336452&4294967295,w=C+(P<<6&4294967295|P>>>26),P=O+(C^(w|~A))+I[7]+1126891415&4294967295,O=w+(P<<10&4294967295|P>>>22),P=A+(w^(O|~C))+I[14]+2878612391&4294967295,A=O+(P<<15&4294967295|P>>>17),P=C+(O^(A|~w))+I[5]+4237533241&4294967295,C=A+(P<<21&4294967295|P>>>11),P=w+(A^(C|~O))+I[12]+1700485571&4294967295,w=C+(P<<6&4294967295|P>>>26),P=O+(C^(w|~A))+I[3]+2399980690&4294967295,O=w+(P<<10&4294967295|P>>>22),P=A+(w^(O|~C))+I[10]+4293915773&4294967295,A=O+(P<<15&4294967295|P>>>17),P=C+(O^(A|~w))+I[1]+2240044497&4294967295,C=A+(P<<21&4294967295|P>>>11),P=w+(A^(C|~O))+I[8]+1873313359&4294967295,w=C+(P<<6&4294967295|P>>>26),P=O+(C^(w|~A))+I[15]+4264355552&4294967295,O=w+(P<<10&4294967295|P>>>22),P=A+(w^(O|~C))+I[6]+2734768916&4294967295,A=O+(P<<15&4294967295|P>>>17),P=C+(O^(A|~w))+I[13]+1309151649&4294967295,C=A+(P<<21&4294967295|P>>>11),P=w+(A^(C|~O))+I[4]+4149444226&4294967295,w=C+(P<<6&4294967295|P>>>26),P=O+(C^(w|~A))+I[11]+3174756917&4294967295,O=w+(P<<10&4294967295|P>>>22),P=A+(w^(O|~C))+I[2]+718787259&4294967295,A=O+(P<<15&4294967295|P>>>17),P=C+(O^(A|~w))+I[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+A&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var C=w-this.blockSize,I=this.B,A=this.h,O=0;O<w;){if(A==0)for(;O<=C;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<w;)if(I[A++]=x.charCodeAt(O++),A==this.blockSize){i(this,I),A=0;break}}else for(;O<w;)if(I[A++]=x[O++],A==this.blockSize){i(this,I),A=0;break}}this.h=A,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var C=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=C&255,C/=256;for(this.u(x),x=Array(16),w=C=0;4>w;++w)for(var I=0;32>I;I+=8)x[C++]=this.g[w]>>>I&255;return x};function s(x,w){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=w(x)}function o(x,w){this.h=w;for(var C=[],I=!0,A=x.length-1;0<=A;A--){var O=x[A]|0;I&&O==w||(C[A]=O,I=!1)}this.g=C}var a={};function l(x){return-128<=x&&128>x?s(x,function(w){return new o([w|0],0>w?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return E(u(-x));for(var w=[],C=1,I=0;x>=C;I++)w[I]=x/C|0,C*=4294967296;return new o(w,0)}function c(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return E(c(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(w,8)),I=d,A=0;A<x.length;A+=8){var O=Math.min(8,x.length-A),P=parseInt(x.substring(A,A+O),w);8>O?(O=u(Math.pow(w,O)),I=I.j(O).add(u(P))):(I=I.j(C),I=I.add(u(P)))}return I}var d=l(0),f=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-E(this).m();for(var x=0,w=1,C=0;C<this.g.length;C++){var I=this.i(C);x+=(0<=I?I:4294967296+I)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(m(this))return"-"+E(this).toString(x);for(var w=u(Math.pow(x,6)),C=this,I="";;){var A=b(C,w).g;C=y(C,A.j(w));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=A,v(C))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function m(x){return x.h==-1}t.l=function(x){return x=y(this,x),m(x)?-1:v(x)?0:1};function E(x){for(var w=x.g.length,C=[],I=0;I<w;I++)C[I]=~x.g[I];return new o(C,~x.h).add(f)}t.abs=function(){return m(this)?E(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],I=0,A=0;A<=w;A++){var O=I+(this.i(A)&65535)+(x.i(A)&65535),P=(O>>>16)+(this.i(A)>>>16)+(x.i(A)>>>16);I=P>>>16,O&=65535,P&=65535,C[A]=P<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(x,w){return x.add(E(w))}t.j=function(x){if(v(this)||v(x))return d;if(m(this))return m(x)?E(this).j(E(x)):E(E(this).j(x));if(m(x))return E(this.j(E(x)));if(0>this.l(p)&&0>x.l(p))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,C=[],I=0;I<2*w;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<x.g.length;A++){var O=this.i(I)>>>16,P=this.i(I)&65535,F=x.i(A)>>>16,U=x.i(A)&65535;C[2*I+2*A]+=P*U,_(C,2*I+2*A),C[2*I+2*A+1]+=O*U,_(C,2*I+2*A+1),C[2*I+2*A+1]+=P*F,_(C,2*I+2*A+1),C[2*I+2*A+2]+=O*F,_(C,2*I+2*A+2)}for(I=0;I<w;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=w;I<2*w;I++)C[I]=0;return new o(C,0)};function _(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function S(x,w){this.g=x,this.h=w}function b(x,w){if(v(w))throw Error("division by zero");if(v(x))return new S(d,d);if(m(x))return w=b(E(x),w),new S(E(w.g),E(w.h));if(m(w))return w=b(x,E(w)),new S(E(w.g),w.h);if(30<x.g.length){if(m(x)||m(w))throw Error("slowDivide_ only works with positive integers.");for(var C=f,I=w;0>=I.l(x);)C=N(C),I=N(I);var A=R(C,1),O=R(I,1);for(I=R(I,2),C=R(C,2);!v(I);){var P=O.add(I);0>=P.l(x)&&(A=A.add(C),O=P),I=R(I,1),C=R(C,1)}return w=y(x,A.j(w)),new S(A,w)}for(A=d;0<=x.l(w);){for(C=Math.max(1,Math.floor(x.m()/w.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=u(C),P=O.j(w);m(P)||0<P.l(x);)C-=I,O=u(C),P=O.j(w);v(O)&&(O=f),A=A.add(O),x=y(x,P)}return new S(A,x)}t.A=function(x){return b(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],I=0;I<w;I++)C[I]=this.i(I)&x.i(I);return new o(C,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],I=0;I<w;I++)C[I]=this.i(I)|x.i(I);return new o(C,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],I=0;I<w;I++)C[I]=this.i(I)^x.i(I);return new o(C,this.h^x.h)};function N(x){for(var w=x.g.length+1,C=[],I=0;I<w;I++)C[I]=x.i(I)<<1|x.i(I-1)>>>31;return new o(C,x.h)}function R(x,w){var C=w>>5;w%=32;for(var I=x.g.length-C,A=[],O=0;O<I;O++)A[O]=0<w?x.i(O+C)>>>w|x.i(O+C+1)<<32-w:x.i(O+C);return new o(A,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ob=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Ts=o}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ab,ql,lb,rf,Xv,ub,cb,db;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,k){return h==Array.prototype||h==Object.prototype||(h[T]=k.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vd=="object"&&vd];for(var T=0;T<h.length;++T){var k=h[T];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=n(this);function i(h,T){if(T)e:{var k=r;h=h.split(".");for(var M=0;M<h.length-1;M++){var W=h[M];if(!(W in k))break e;k=k[W]}h=h[h.length-1],M=k[h],T=T(M),T!=M&&T!=null&&e(k,h,{configurable:!0,writable:!0,value:T})}}function s(h,T){h instanceof String&&(h+="");var k=0,M=!1,W={next:function(){if(!M&&k<h.length){var Q=k++;return{value:T(Q,h[Q]),done:!1}}return M=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(h){return h||function(){return s(this,function(T,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function u(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function c(h,T,k){return h.call.apply(h.bind,arguments)}function d(h,T,k){if(!h)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,M),h.apply(T,W)}}return function(){return h.apply(T,arguments)}}function f(h,T,k){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function p(h,T){var k=Array.prototype.slice.call(arguments,1);return function(){var M=k.slice();return M.push.apply(M,arguments),h.apply(this,M)}}function v(h,T){function k(){}k.prototype=T.prototype,h.aa=T.prototype,h.prototype=new k,h.prototype.constructor=h,h.Qb=function(M,W,Q){for(var fe=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)fe[lt-2]=arguments[lt];return T.prototype[W].apply(M,fe)}}function m(h){const T=h.length;if(0<T){const k=Array(T);for(let M=0;M<T;M++)k[M]=h[M];return k}return[]}function E(h,T){for(let k=1;k<arguments.length;k++){const M=arguments[k];if(l(M)){const W=h.length||0,Q=M.length||0;h.length=W+Q;for(let fe=0;fe<Q;fe++)h[W+fe]=M[fe]}else h.push(M)}}class y{constructor(T,k){this.i=T,this.j=k,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function _(h){return/^[\s\xa0]*$/.test(h)}function S(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function b(h){return b[" "](h),h}b[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function R(h,T,k){for(const M in h)T.call(k,h[M],M,h)}function x(h,T){for(const k in h)T.call(void 0,h[k],k,h)}function w(h){const T={};for(const k in h)T[k]=h[k];return T}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,T){let k,M;for(let W=1;W<arguments.length;W++){M=arguments[W];for(k in M)h[k]=M[k];for(let Q=0;Q<C.length;Q++)k=C[Q],Object.prototype.hasOwnProperty.call(M,k)&&(h[k]=M[k])}}function A(h){var T=1;h=h.split(":");const k=[];for(;0<T&&h.length;)k.push(h.shift()),T--;return h.length&&k.push(h.join(":")),k}function O(h){a.setTimeout(()=>{throw h},0)}function P(){var h=j;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class F{constructor(){this.h=this.g=null}add(T,k){const M=U.get();M.set(T,k),this.h?this.h.next=M:this.g=M,this.h=M}}var U=new y(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(T,k){this.h=T,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let H,L=!1,j=new F,z=()=>{const h=a.Promise.resolve(void 0);H=()=>{h.then($)}};var $=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(k){O(k)}var T=U;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}L=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const k=()=>{};a.addEventListener("test",k,T),a.removeEventListener("test",k,T)}catch{}return h}();function ie(h,T){if(J.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var k=this.type=h.type,M=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(N){e:{try{b(T.nodeName);var W=!0;break e}catch{}W=!1}W||(T=null)}}else k=="mouseover"?T=h.fromElement:k=="mouseout"&&(T=h.toElement);this.relatedTarget=T,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:X[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ie.aa.h.call(this)}}v(ie,J);var X={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),me=0;function Se(h,T,k,M,W){this.listener=h,this.proxy=null,this.src=T,this.type=k,this.capture=!!M,this.ha=W,this.key=++me,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,T,k,M,W){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var fe=Pe(h,T,M,W);return-1<fe?(T=h[fe],k||(T.fa=!1)):(T=new Se(T,this.src,Q,!!M,W),T.fa=k,h.push(T)),T};function de(h,T){var k=T.type;if(k in h.g){var M=h.g[k],W=Array.prototype.indexOf.call(M,T,void 0),Q;(Q=0<=W)&&Array.prototype.splice.call(M,W,1),Q&&(xe(T),h.g[k].length==0&&(delete h.g[k],h.h--))}}function Pe(h,T,k,M){for(var W=0;W<h.length;++W){var Q=h[W];if(!Q.da&&Q.listener==T&&Q.capture==!!k&&Q.ha==M)return W}return-1}var Y="closure_lm_"+(1e6*Math.random()|0),oe={};function he(h,T,k,M,W){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)he(h,T[Q],k,M,W);return null}return k=rt(k),h&&h[ue]?h.K(T,k,u(M)?!!M.capture:!1,W):be(h,T,k,!1,M,W)}function be(h,T,k,M,W,Q){if(!T)throw Error("Invalid event type");var fe=u(W)?!!W.capture:!!W,lt=at(h);if(lt||(h[Y]=lt=new se(h)),k=lt.add(T,k,M,fe,Q),k.proxy)return k;if(M=je(),k.proxy=M,M.src=h,M.listener=k,h.addEventListener)te||(W=fe),W===void 0&&(W=!1),h.addEventListener(T.toString(),M,W);else if(h.attachEvent)h.attachEvent(et(T.toString()),M);else if(h.addListener&&h.removeListener)h.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return k}function je(){function h(k){return T.call(h.src,h.listener,k)}const T=ct;return h}function Ee(h,T,k,M,W){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)Ee(h,T[Q],k,M,W);else M=u(M)?!!M.capture:!!M,k=rt(k),h&&h[ue]?(h=h.i,T=String(T).toString(),T in h.g&&(Q=h.g[T],k=Pe(Q,k,M,W),-1<k&&(xe(Q[k]),Array.prototype.splice.call(Q,k,1),Q.length==0&&(delete h.g[T],h.h--)))):h&&(h=at(h))&&(T=h.g[T.toString()],h=-1,T&&(h=Pe(T,k,M,W)),(k=-1<h?T[h]:null)&&ke(k))}function ke(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[ue])de(T.i,h);else{var k=h.type,M=h.proxy;T.removeEventListener?T.removeEventListener(k,M,h.capture):T.detachEvent?T.detachEvent(et(k),M):T.addListener&&T.removeListener&&T.removeListener(M),(k=at(T))?(de(k,h),k.h==0&&(k.src=null,T[Y]=null)):xe(h)}}}function et(h){return h in oe?oe[h]:oe[h]="on"+h}function ct(h,T){if(h.da)h=!0;else{T=new ie(T,this);var k=h.listener,M=h.ha||h.src;h.fa&&ke(h),h=k.call(M,T)}return h}function at(h){return h=h[Y],h instanceof se?h:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(h){return typeof h=="function"?h:(h[Oe]||(h[Oe]=function(T){return h.handleEvent(T)}),h[Oe])}function Je(){K.call(this),this.i=new se(this),this.M=this,this.F=null}v(Je,K),Je.prototype[ue]=!0,Je.prototype.removeEventListener=function(h,T,k,M){Ee(this,h,T,k,M)};function Ue(h,T){var k,M=h.F;if(M)for(k=[];M;M=M.F)k.push(M);if(h=h.M,M=T.type||T,typeof T=="string")T=new J(T,h);else if(T instanceof J)T.target=T.target||h;else{var W=T;T=new J(M,h),I(T,W)}if(W=!0,k)for(var Q=k.length-1;0<=Q;Q--){var fe=T.g=k[Q];W=Z(fe,M,!0,T)&&W}if(fe=T.g=h,W=Z(fe,M,!0,T)&&W,W=Z(fe,M,!1,T)&&W,k)for(Q=0;Q<k.length;Q++)fe=T.g=k[Q],W=Z(fe,M,!1,T)&&W}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var k=h.g[T],M=0;M<k.length;M++)xe(k[M]);delete h.g[T],h.h--}}this.F=null},Je.prototype.K=function(h,T,k,M){return this.i.add(String(h),T,!1,k,M)},Je.prototype.L=function(h,T,k,M){return this.i.add(String(h),T,!0,k,M)};function Z(h,T,k,M){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var W=!0,Q=0;Q<T.length;++Q){var fe=T[Q];if(fe&&!fe.da&&fe.capture==k){var lt=fe.listener,sn=fe.ha||fe.src;fe.fa&&de(h.i,fe),W=lt.call(sn,M)!==!1&&W}}return W&&!M.defaultPrevented}function G(h,T,k){if(typeof h=="function")k&&(h=f(h,k));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(h,T||0)}function ae(h){h.g=G(()=>{h.g=null,h.i&&(h.i=!1,ae(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class pe extends K{constructor(T,k){super(),this.m=T,this.l=k,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _e(h){K.call(this),this.h=h,this.g={}}v(_e,K);var Ke=[];function Lt(h){R(h.g,function(T,k){this.g.hasOwnProperty(k)&&ke(T)},h),h.g={}}_e.prototype.N=function(){_e.aa.N.call(this),Lt(this)},_e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _t=a.JSON.stringify,cr=a.JSON.parse,Wr=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Jn(){}Jn.prototype.h=null;function Zn(h){return h.h||(h.h=h.i())}function Fe(){}var Ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){J.call(this,"d")}v(ze,J);function wt(){J.call(this,"c")}v(wt,J);var tt={},Gt=null;function kt(){return Gt=Gt||new Je}tt.La="serverreachability";function Qt(h){J.call(this,tt.La,h)}v(Qt,J);function Jt(h){const T=kt();Ue(T,new Qt(T))}tt.STAT_EVENT="statevent";function Cr(h,T){J.call(this,tt.STAT_EVENT,h),this.stat=T}v(Cr,J);function We(h){const T=kt();Ue(T,new Cr(T,h))}tt.Ma="timingevent";function Ir(h,T){J.call(this,tt.Ma,h),this.size=T}v(Ir,J);function pn(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},T)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function qs(h,T,k,M,W,Q){h.info(function(){if(h.g)if(Q)for(var fe="",lt=Q.split("&"),sn=0;sn<lt.length;sn++){var Xe=lt[sn].split("=");if(1<Xe.length){var gn=Xe[0];Xe=Xe[1];var vn=gn.split("_");fe=2<=vn.length&&vn[1]=="type"?fe+(gn+"="+Xe+"&"):fe+(gn+"=redacted&")}}else fe=null;else fe=Q;return"XMLHTTP REQ ("+M+") [attempt "+W+"]: "+T+`
`+k+`
`+fe})}function Ys(h,T,k,M,W,Q,fe){h.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+W+"]: "+T+`
`+k+`
`+Q+" "+fe})}function An(h,T,k,M){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+El(h,k)+(M?" "+M:"")})}function Ks(h,T){h.info(function(){return"TIMEOUT: "+T})}Rn.prototype.info=function(){};function El(h,T){if(!h.g)return T;if(!T)return null;try{var k=JSON.parse(T);if(k){for(h=0;h<k.length;h++)if(Array.isArray(k[h])){var M=k[h];if(!(2>M.length)){var W=M[1];if(Array.isArray(W)&&!(1>W.length)){var Q=W[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var fe=1;fe<W.length;fe++)W[fe]=""}}}}return _t(k)}catch{return T}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},z_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rp;function jc(){}v(jc,Jn),jc.prototype.g=function(){return new XMLHttpRequest},jc.prototype.i=function(){return{}},Rp=new jc;function Wi(h,T,k,M){this.j=h,this.i=T,this.l=k,this.R=M||1,this.U=new _e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new B_}function B_(){this.i=null,this.g="",this.h=!1}var U_={},Ap={};function Pp(h,T,k){h.L=1,h.v=Bc(pi(T)),h.m=k,h.P=!0,$_(h,null)}function $_(h,T){h.F=Date.now(),Vc(h),h.A=pi(h.v);var k=h.A,M=h.R;Array.isArray(M)||(M=[String(M)]),rw(k.i,"t",M),h.C=0,k=h.j.J,h.h=new B_,h.g=Ew(h.j,k?T:null,!h.m),0<h.O&&(h.M=new pe(f(h.Y,h,h.g),h.O)),T=h.U,k=h.g,M=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(Ke[0]=W.toString()),W=Ke);for(var Q=0;Q<W.length;Q++){var fe=he(k,W[Q],M||T.handleEvent,!1,T.h||T);if(!fe)break;T.g[fe.key]=fe}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Jt(),qs(h.i,h.u,h.A,h.l,h.R,h.m)}Wi.prototype.ca=function(h){h=h.target;const T=this.M;T&&gi(h)==3?T.j():this.Y(h)},Wi.prototype.Y=function(h){try{if(h==this.g)e:{const vn=gi(this.g);var T=this.g.Ba();const Go=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||cw(this.g)))){this.J||vn!=4||T==7||(T==8||0>=Go?Jt(3):Jt(2)),kp(this);var k=this.g.Z();this.X=k;t:if(G_(this)){var M=cw(this.g);h="";var W=M.length,Q=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xs(this),Sl(this);var fe="";break t}this.h.i=new a.TextDecoder}for(T=0;T<W;T++)this.h.h=!0,h+=this.h.i.decode(M[T],{stream:!(Q&&T==W-1)});M.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=k==200,Ys(this.i,this.u,this.A,this.l,this.R,vn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,sn=this.g;if((lt=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(lt)){var Xe=lt;break t}}Xe=null}if(k=Xe)An(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,k);else{this.o=!1,this.s=3,We(12),Xs(this),Sl(this);break e}}if(this.P){k=!0;let br;for(;!this.J&&this.C<fe.length;)if(br=JP(this,fe),br==Ap){vn==4&&(this.s=4,We(14),k=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(br==U_){this.s=4,We(15),An(this.i,this.l,fe,"[Invalid Chunk]"),k=!1;break}else An(this.i,this.l,br,null),Dp(this,br);if(G_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||fe.length!=0||this.h.h||(this.s=1,We(16),k=!1),this.o=this.o&&k,!k)An(this.i,this.l,fe,"[Invalid Chunked Response]"),Xs(this),Sl(this);else if(0<fe.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Vp(gn),gn.M=!0,We(11))}}else An(this.i,this.l,fe,null),Dp(this,fe);vn==4&&Xs(this),this.o&&!this.J&&(vn==4?mw(this.j,this):(this.o=!1,Vc(this)))}else gk(this.g),k==400&&0<fe.indexOf("Unknown SID")?(this.s=3,We(12)):(this.s=0,We(13)),Xs(this),Sl(this)}}}catch{}finally{}};function G_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function JP(h,T){var k=h.C,M=T.indexOf(`
`,k);return M==-1?Ap:(k=Number(T.substring(k,M)),isNaN(k)?U_:(M+=1,M+k>T.length?Ap:(T=T.slice(M,M+k),h.C=M+k,T)))}Wi.prototype.cancel=function(){this.J=!0,Xs(this)};function Vc(h){h.S=Date.now()+h.I,H_(h,h.I)}function H_(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pn(f(h.ba,h),T)}function kp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Wi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ks(this.i,this.A),this.L!=2&&(Jt(),We(17)),Xs(this),this.s=2,Sl(this)):H_(this,this.S-h)};function Sl(h){h.j.G==0||h.J||mw(h.j,h)}function Xs(h){kp(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Lt(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Dp(h,T){try{var k=h.j;if(k.G!=0&&(k.g==h||Np(k.h,h))){if(!h.K&&Np(k.h,h)&&k.G==3){try{var M=k.Da.g.parse(T)}catch{M=null}if(Array.isArray(M)&&M.length==3){var W=M;if(W[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<h.F)qc(k),Hc(k);else break e;jp(k),We(18)}}else k.za=W[1],0<k.za-k.T&&37500>W[2]&&k.F&&k.v==0&&!k.C&&(k.C=pn(f(k.Za,k),6e3));if(1>=Y_(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Js(k,11)}else if((h.K||k.g==h)&&qc(k),!_(T))for(W=k.Da.g.parse(T),T=0;T<W.length;T++){let Xe=W[T];if(k.T=Xe[0],Xe=Xe[1],k.G==2)if(Xe[0]=="c"){k.K=Xe[1],k.ia=Xe[2];const gn=Xe[3];gn!=null&&(k.la=gn,k.j.info("VER="+k.la));const vn=Xe[4];vn!=null&&(k.Aa=vn,k.j.info("SVER="+k.Aa));const Go=Xe[5];Go!=null&&typeof Go=="number"&&0<Go&&(M=1.5*Go,k.L=M,k.j.info("backChannelRequestTimeoutMs_="+M)),M=k;const br=h.g;if(br){const Kc=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kc){var Q=M.h;Q.g||Kc.indexOf("spdy")==-1&&Kc.indexOf("quic")==-1&&Kc.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Op(Q,Q.h),Q.h=null))}if(M.D){const Fp=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;Fp&&(M.ya=Fp,ht(M.I,M.D,Fp))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-h.F,k.j.info("Handshake RTT: "+k.R+"ms")),M=k;var fe=h;if(M.qa=ww(M,M.J?M.ia:null,M.W),fe.K){K_(M.h,fe);var lt=fe,sn=M.L;sn&&(lt.I=sn),lt.B&&(kp(lt),Vc(lt)),M.g=fe}else gw(M);0<k.i.length&&Wc(k)}else Xe[0]!="stop"&&Xe[0]!="close"||Js(k,7);else k.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Js(k,7):Lp(k):Xe[0]!="noop"&&k.l&&k.l.ta(Xe),k.v=0)}}Jt(4)}catch{}}var ZP=class{constructor(h,T){this.g=h,this.map=T}};function W_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function q_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Y_(h){return h.h?1:h.g?h.g.size:0}function Np(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Op(h,T){h.g?h.g.add(T):h.h=T}function K_(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}W_.prototype.cancel=function(){if(this.i=X_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function X_(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const k of h.g.values())T=T.concat(k.D);return T}return m(h.i)}function ek(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var T=[],k=h.length,M=0;M<k;M++)T.push(h[M]);return T}T=[],k=0;for(M in h)T[k++]=h[M];return T}function tk(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var T=[];h=h.length;for(var k=0;k<h;k++)T.push(k);return T}T=[],k=0;for(const M in h)T[k++]=M;return T}}}function Q_(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var k=tk(h),M=ek(h),W=M.length,Q=0;Q<W;Q++)T.call(void 0,M[Q],k&&k[Q],h)}var J_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nk(h,T){if(h){h=h.split("&");for(var k=0;k<h.length;k++){var M=h[k].indexOf("="),W=null;if(0<=M){var Q=h[k].substring(0,M);W=h[k].substring(M+1)}else Q=h[k];T(Q,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Qs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Qs){this.h=h.h,Fc(this,h.j),this.o=h.o,this.g=h.g,zc(this,h.s),this.l=h.l;var T=h.i,k=new Cl;k.i=T.i,T.g&&(k.g=new Map(T.g),k.h=T.h),Z_(this,k),this.m=h.m}else h&&(T=String(h).match(J_))?(this.h=!1,Fc(this,T[1]||"",!0),this.o=xl(T[2]||""),this.g=xl(T[3]||"",!0),zc(this,T[4]),this.l=xl(T[5]||"",!0),Z_(this,T[6]||"",!0),this.m=xl(T[7]||"")):(this.h=!1,this.i=new Cl(null,this.h))}Qs.prototype.toString=function(){var h=[],T=this.j;T&&h.push(Tl(T,ew,!0),":");var k=this.g;return(k||T=="file")&&(h.push("//"),(T=this.o)&&h.push(Tl(T,ew,!0),"@"),h.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&h.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&h.push("/"),h.push(Tl(k,k.charAt(0)=="/"?sk:ik,!0))),(k=this.i.toString())&&h.push("?",k),(k=this.m)&&h.push("#",Tl(k,ak)),h.join("")};function pi(h){return new Qs(h)}function Fc(h,T,k){h.j=k?xl(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function zc(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Z_(h,T,k){T instanceof Cl?(h.i=T,lk(h.i,h.h)):(k||(T=Tl(T,ok)),h.i=new Cl(T,h.h))}function ht(h,T,k){h.i.set(T,k)}function Bc(h){return ht(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function xl(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Tl(h,T,k){return typeof h=="string"?(h=encodeURI(h).replace(T,rk),k&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function rk(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ew=/[#\/\?@]/g,ik=/[#\?:]/g,sk=/[#\?]/g,ok=/[#\?@]/g,ak=/#/g;function Cl(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function qi(h){h.g||(h.g=new Map,h.h=0,h.i&&nk(h.i,function(T,k){h.add(decodeURIComponent(T.replace(/\+/g," ")),k)}))}t=Cl.prototype,t.add=function(h,T){qi(this),this.i=null,h=Uo(this,h);var k=this.g.get(h);return k||this.g.set(h,k=[]),k.push(T),this.h+=1,this};function tw(h,T){qi(h),T=Uo(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function nw(h,T){return qi(h),T=Uo(h,T),h.g.has(T)}t.forEach=function(h,T){qi(this),this.g.forEach(function(k,M){k.forEach(function(W){h.call(T,W,M,this)},this)},this)},t.na=function(){qi(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),k=[];for(let M=0;M<T.length;M++){const W=h[M];for(let Q=0;Q<W.length;Q++)k.push(T[M])}return k},t.V=function(h){qi(this);let T=[];if(typeof h=="string")nw(this,h)&&(T=T.concat(this.g.get(Uo(this,h))));else{h=Array.from(this.g.values());for(let k=0;k<h.length;k++)T=T.concat(h[k])}return T},t.set=function(h,T){return qi(this),this.i=null,h=Uo(this,h),nw(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},t.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function rw(h,T,k){tw(h,T),0<k.length&&(h.i=null,h.g.set(Uo(h,T),m(k)),h.h+=k.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var k=0;k<T.length;k++){var M=T[k];const Q=encodeURIComponent(String(M)),fe=this.V(M);for(M=0;M<fe.length;M++){var W=Q;fe[M]!==""&&(W+="="+encodeURIComponent(String(fe[M]))),h.push(W)}}return this.i=h.join("&")};function Uo(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function lk(h,T){T&&!h.j&&(qi(h),h.i=null,h.g.forEach(function(k,M){var W=M.toLowerCase();M!=W&&(tw(this,M),rw(this,W,k))},h)),h.j=T}function uk(h,T){const k=new Rn;if(a.Image){const M=new Image;M.onload=p(Yi,k,"TestLoadImage: loaded",!0,T,M),M.onerror=p(Yi,k,"TestLoadImage: error",!1,T,M),M.onabort=p(Yi,k,"TestLoadImage: abort",!1,T,M),M.ontimeout=p(Yi,k,"TestLoadImage: timeout",!1,T,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=h}else T(!1)}function ck(h,T){const k=new Rn,M=new AbortController,W=setTimeout(()=>{M.abort(),Yi(k,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:M.signal}).then(Q=>{clearTimeout(W),Q.ok?Yi(k,"TestPingServer: ok",!0,T):Yi(k,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(W),Yi(k,"TestPingServer: error",!1,T)})}function Yi(h,T,k,M,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),M(k)}catch{}}function dk(){this.g=new Wr}function fk(h,T,k){const M=k||"";try{Q_(h,function(W,Q){let fe=W;u(W)&&(fe=_t(W)),T.push(M+Q+"="+encodeURIComponent(fe))})}catch(W){throw T.push(M+"type="+encodeURIComponent("_badmap")),W}}function Uc(h){this.l=h.Ub||null,this.j=h.eb||!1}v(Uc,Jn),Uc.prototype.g=function(){return new $c(this.l,this.j)},Uc.prototype.i=function(h){return function(){return h}}({});function $c(h,T){Je.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v($c,Je),t=$c.prototype,t.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,bl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,bl(this)),this.g&&(this.readyState=3,bl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iw(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function iw(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Il(this):bl(this),this.readyState==3&&iw(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Il(this))},t.Qa=function(h){this.g&&(this.response=h,Il(this))},t.ga=function(){this.g&&Il(this)};function Il(h){h.readyState=4,h.l=null,h.j=null,h.v=null,bl(h)}t.setRequestHeader=function(h,T){this.u.append(h,T)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var k=T.next();!k.done;)k=k.value,h.push(k[0]+": "+k[1]),k=T.next();return h.join(`\r
`)};function bl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function sw(h){let T="";return R(h,function(k,M){T+=M,T+=":",T+=k,T+=`\r
`}),T}function Mp(h,T,k){e:{for(M in k){var M=!1;break e}M=!0}M||(k=sw(k),typeof h=="string"?k!=null&&encodeURIComponent(String(k)):ht(h,T,k))}function Rt(h){Je.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Rt,Je);var hk=/^https?$/i,pk=["POST","PUT"];t=Rt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,T,k,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rp.g(),this.v=this.o?Zn(this.o):Zn(Rp),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(Q){ow(this,Q);return}if(h=k||"",k=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var W in M)k.set(W,M[W]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const Q of M.keys())k.set(Q,M.get(Q));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(k.keys()).find(Q=>Q.toLowerCase()=="content-type"),W=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pk,T,void 0))||M||W||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,fe]of k)this.g.setRequestHeader(Q,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uw(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){ow(this,Q)}};function ow(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,aw(h),Gc(h)}function aw(h){h.A||(h.A=!0,Ue(h,"complete"),Ue(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ue(this,"complete"),Ue(this,"abort"),Gc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gc(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lw(this):this.bb())},t.bb=function(){lw(this)};function lw(h){if(h.h&&typeof o<"u"&&(!h.v[1]||gi(h)!=4||h.Z()!=2)){if(h.u&&gi(h)==4)G(h.Ea,0,h);else if(Ue(h,"readystatechange"),gi(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var k;if(!(k=T)){var M;if(M=fe===0){var W=String(h.D).match(J_)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),M=!hk.test(W?W.toLowerCase():"")}k=M}if(k)Ue(h,"complete"),Ue(h,"success");else{h.m=6;try{var Q=2<gi(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",aw(h)}}finally{Gc(h)}}}}function Gc(h,T){if(h.g){uw(h);const k=h.g,M=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||Ue(h,"ready");try{k.onreadystatechange=M}catch{}}}function uw(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function gi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),cr(T)}};function cw(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function gk(h){const T={};h=(h.g&&2<=gi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<h.length;M++){if(_(h[M]))continue;var k=A(h[M]);const W=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Q=T[W]||[];T[W]=Q,Q.push(k)}x(T,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rl(h,T,k){return k&&k.internalChannelParams&&k.internalChannelParams[h]||T}function dw(h){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rl("baseRetryDelayMs",5e3,h),this.cb=Rl("retryDelaySeedMs",1e4,h),this.Wa=Rl("forwardChannelMaxRetries",2,h),this.wa=Rl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new W_(h&&h.concurrentRequestLimit),this.Da=new dk,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dw.prototype,t.la=8,t.G=1,t.connect=function(h,T,k,M){We(0),this.W=h,this.H=T||{},k&&M!==void 0&&(this.H.OSID=k,this.H.OAID=M),this.F=this.X,this.I=ww(this,null,this.W),Wc(this)};function Lp(h){if(fw(h),h.G==3){var T=h.U++,k=pi(h.I);if(ht(k,"SID",h.K),ht(k,"RID",T),ht(k,"TYPE","terminate"),Al(h,k),T=new Wi(h,h.j,T),T.L=2,T.v=Bc(pi(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!k&&a.Image&&(new Image().src=T.v,k=!0),k||(T.g=Ew(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Vc(T)}_w(h)}function Hc(h){h.g&&(Vp(h),h.g.cancel(),h.g=null)}function fw(h){Hc(h),h.u&&(a.clearTimeout(h.u),h.u=null),qc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Wc(h){if(!q_(h.h)&&!h.s){h.s=!0;var T=h.Ga;H||z(),L||(H(),L=!0),j.add(T,h),h.B=0}}function vk(h,T){return Y_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pn(f(h.Ga,h,T),yw(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Wi(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=w(Q),I(Q,this.S)):Q=this.S),this.m!==null||this.O||(W.H=Q,Q=null),this.P)e:{for(var T=0,k=0;k<this.i.length;k++){t:{var M=this.i[k];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(T+=M,4096<T){T=k;break e}if(T===4096||k===this.i.length-1){T=k+1;break e}}T=1e3}else T=1e3;T=pw(this,W,T),k=pi(this.I),ht(k,"RID",h),ht(k,"CVER",22),this.D&&ht(k,"X-HTTP-Session-Id",this.D),Al(this,k),Q&&(this.O?T="headers="+encodeURIComponent(String(sw(Q)))+"&"+T:this.m&&Mp(k,this.m,Q)),Op(this.h,W),this.Ua&&ht(k,"TYPE","init"),this.P?(ht(k,"$req",T),ht(k,"SID","null"),W.T=!0,Pp(W,k,null)):Pp(W,k,T),this.G=2}}else this.G==3&&(h?hw(this,h):this.i.length==0||q_(this.h)||hw(this))};function hw(h,T){var k;T?k=T.l:k=h.U++;const M=pi(h.I);ht(M,"SID",h.K),ht(M,"RID",k),ht(M,"AID",h.T),Al(h,M),h.m&&h.o&&Mp(M,h.m,h.o),k=new Wi(h,h.j,k,h.B+1),h.m===null&&(k.H=h.o),T&&(h.i=T.D.concat(h.i)),T=pw(h,k,1e3),k.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Op(h.h,k),Pp(k,M,T)}function Al(h,T){h.H&&R(h.H,function(k,M){ht(T,M,k)}),h.l&&Q_({},function(k,M){ht(T,M,k)})}function pw(h,T,k){k=Math.min(h.i.length,k);var M=h.l?f(h.l.Na,h.l,h):null;e:{var W=h.i;let Q=-1;for(;;){const fe=["count="+k];Q==-1?0<k?(Q=W[0].g,fe.push("ofs="+Q)):Q=0:fe.push("ofs="+Q);let lt=!0;for(let sn=0;sn<k;sn++){let Xe=W[sn].g;const gn=W[sn].map;if(Xe-=Q,0>Xe)Q=Math.max(0,W[sn].g-100),lt=!1;else try{fk(gn,fe,"req"+Xe+"_")}catch{M&&M(gn)}}if(lt){M=fe.join("&");break e}}}return h=h.i.splice(0,k),T.D=h,M}function gw(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;H||z(),L||(H(),L=!0),j.add(T,h),h.v=0}}function jp(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pn(f(h.Fa,h),yw(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,vw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pn(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,We(10),Hc(this),vw(this))};function Vp(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function vw(h){h.g=new Wi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=pi(h.qa);ht(T,"RID","rpc"),ht(T,"SID",h.K),ht(T,"AID",h.T),ht(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&ht(T,"TO",h.ja),ht(T,"TYPE","xmlhttp"),Al(h,T),h.m&&h.o&&Mp(T,h.m,h.o),h.L&&(h.g.I=h.L);var k=h.g;h=h.ia,k.L=1,k.v=Bc(pi(T)),k.m=null,k.P=!0,$_(k,h)}t.Za=function(){this.C!=null&&(this.C=null,Hc(this),jp(this),We(19))};function qc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function mw(h,T){var k=null;if(h.g==T){qc(h),Vp(h),h.g=null;var M=2}else if(Np(h.h,T))k=T.D,K_(h.h,T),M=1;else return;if(h.G!=0){if(T.o)if(M==1){k=T.m?T.m.length:0,T=Date.now()-T.F;var W=h.B;M=kt(),Ue(M,new Ir(M,k)),Wc(h)}else gw(h);else if(W=T.s,W==3||W==0&&0<T.X||!(M==1&&vk(h,T)||M==2&&jp(h)))switch(k&&0<k.length&&(T=h.h,T.i=T.i.concat(k)),W){case 1:Js(h,5);break;case 4:Js(h,10);break;case 3:Js(h,6);break;default:Js(h,2)}}}function yw(h,T){let k=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(k*=2),k*T}function Js(h,T){if(h.j.info("Error code "+T),T==2){var k=f(h.fb,h),M=h.Xa;const W=!M;M=new Qs(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fc(M,"https"),Bc(M),W?uk(M.toString(),k):ck(M.toString(),k)}else We(2);h.G=0,h.l&&h.l.sa(T),_w(h),fw(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),We(2)):(this.j.info("Failed to ping google.com"),We(1))};function _w(h){if(h.G=0,h.ka=[],h.l){const T=X_(h.h);(T.length!=0||h.i.length!=0)&&(E(h.ka,T),E(h.ka,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.ra()}}function ww(h,T,k){var M=k instanceof Qs?pi(k):new Qs(k);if(M.g!="")T&&(M.g=T+"."+M.g),zc(M,M.s);else{var W=a.location;M=W.protocol,T=T?T+"."+W.hostname:W.hostname,W=+W.port;var Q=new Qs(null);M&&Fc(Q,M),T&&(Q.g=T),W&&zc(Q,W),k&&(Q.l=k),M=Q}return k=h.D,T=h.ya,k&&T&&ht(M,k,T),ht(M,"VER",h.la),Al(h,M),M}function Ew(h,T,k){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new Rt(new Uc({eb:k})):new Rt(h.pa),T.Ha(h.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sw(){}t=Sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Yc(){}Yc.prototype.g=function(h,T){return new er(h,T)};function er(h,T){Je.call(this),this.g=new dw(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!_(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!_(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new $o(this)}v(er,Je),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Lp(this.g)},er.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var k={};k.__data__=h,h=k}else this.u&&(k={},k.__data__=_t(h),h=k);T.i.push(new ZP(T.Ya++,h)),T.G==3&&Wc(T)},er.prototype.N=function(){this.g.l=null,delete this.j,Lp(this.g),delete this.g,er.aa.N.call(this)};function xw(h){ze.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const k in T){h=k;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}v(xw,ze);function Tw(){wt.call(this),this.status=1}v(Tw,wt);function $o(h){this.g=h}v($o,Sw),$o.prototype.ua=function(){Ue(this.g,"a")},$o.prototype.ta=function(h){Ue(this.g,new xw(h))},$o.prototype.sa=function(h){Ue(this.g,new Tw)},$o.prototype.ra=function(){Ue(this.g,"b")},Yc.prototype.createWebChannel=Yc.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,db=function(){return new Yc},cb=function(){return kt()},ub=tt,Xv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,rf=Lc,z_.COMPLETE="complete",lb=z_,Fe.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",Je.prototype.listen=Je.prototype.K,ql=Fe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,ab=Rt}).apply(typeof vd<"u"?vd:typeof self<"u"?self:typeof window<"u"?window:{});const _E="@firebase/firestore",wE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new G0("@firebase/firestore");function Ko(){return Ro.logLevel}function ve(t,...e){if(Ro.logLevel<=$e.DEBUG){const n=e.map(ny);Ro.debug(`Firestore (${ul}): ${t}`,...n)}}function ji(t,...e){if(Ro.logLevel<=$e.ERROR){const n=e.map(ny);Ro.error(`Firestore (${ul}): ${t}`,...n)}}function As(t,...e){if(Ro.logLevel<=$e.WARN){const n=e.map(ny);Ro.warn(`Firestore (${ul}): ${t}`,...n)}}function ny(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fb(t,r,n)}function fb(t,e,n){let r=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ji(r),new Error(r)}function nt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||fb(e,i,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends $i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class MV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class LV{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ii,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ii)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new hb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class jV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new jV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const r=s=>{s.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new EE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new EE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Qv(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ve(r,i);{const s=pb(),o=BV(s.encode(SE(t,n)),s.encode(SE(e,n)));return o!==0?o:Ve(r,i)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function SE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function BV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function Ba(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="__name__";class Kr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Kr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Kr.isNumericId(e),i=Kr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Kr.extractNumericId(e).compare(Kr.extractNumericId(n)):Qv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class dt extends Kr{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const UV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Kr{construct(e,n,r){return new cn(e,n,r)}static isValidIdentifier(e){return UV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xE}static keyField(){return new cn([xE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(dt.fromString(e))}static fromName(e){return new Ie(dt.fromString(e).popFirst(5))}static empty(){return new Ie(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e,n){if(!n)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $V(t,e,n,r){if(e===!0&&r===!0)throw new ge(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function TE(t){if(!Ie.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CE(t){if(Ie.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae(12329,{type:typeof t})}function Xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gh(t);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function _c(t,e){if(!vb(t))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ge(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=-62135596800,bE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*bE);return new gt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<IE)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_c(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-IE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ut("string",gt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new gt(0,0))}static max(){return new De(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=-1;function GV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new Ps(i,Ie.empty(),e)}function HV(t){return new Ps(t.readTime,t.key,Hu)}class Ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ps(De.min(),Ie.empty(),Hu)}static max(){return new Ps(De.max(),Ie.empty(),Hu)}}function WV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==qV)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function KV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Hh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=-1;function Wh(t){return t==null}function Wf(t){return t===0&&1/t==-1/0}function XV(t){return typeof t=="number"&&Number.isInteger(t)&&!Wf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="";function QV(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=RE(e)),e=JV(t.get(n),e);return RE(e)}function JV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case mb:n+="";break;default:n+=s}}return n}function RE(t){return t+mb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $s(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=s??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ln(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new rr([])}unionWith(e){let n=new Xt(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new _b("Invalid base64 string: "+s):s}}(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const ZV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=ZV.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="server_timestamp",Eb="__type__",Sb="__previous_value__",xb="__local_write_time__";function sy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Eb])===null||n===void 0?void 0:n.stringValue)===wb}function qh(t){const e=t.mapValue.fields[Sb];return sy(e)?qh(e):e}function Wu(t){const e=ks(t.mapValue.fields[xb].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const qf="(default)";class qu{constructor(e,n){this.projectId=e,this.database=n||qf}static empty(){return new qu("","")}get isDefaultDatabase(){return this.database===qf}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="__type__",tF="__max__",yd={mapValue:{}},Cb="__vector__",Yf="value";function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sy(t)?4:rF(t)?9007199254740991:nF(t)?10:11:Ae(28295,{value:t})}function oi(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ks(i.timestampValue),a=ks(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ds(i.bytesValue).isEqual(Ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dt(i.doubleValue),a=Dt(s.doubleValue);return o===a?Wf(o)===Wf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ba(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(AE(o)!==AE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!oi(o[l],a[l])))return!1;return!0}(t,e);default:return Ae(52216,{left:t})}}function Yu(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function Ua(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dt(s.integerValue||s.doubleValue),l=Dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return kE(t.timestampValue,e.timestampValue);case 4:return kE(Wu(t),Wu(e));case 5:return Qv(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ds(s),l=Ds(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Ve(a[u],l[u]);if(c!==0)return c}return Ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ve(Dt(s.latitude),Dt(o.latitude));return a!==0?a:Ve(Dt(s.longitude),Dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},f=o.fields||{},p=(a=d[Yf])===null||a===void 0?void 0:a.arrayValue,v=(l=f[Yf])===null||l===void 0?void 0:l.arrayValue,m=Ve(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:DE(p,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===yd.mapValue&&o===yd.mapValue)return 0;if(s===yd.mapValue)return 1;if(o===yd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=Qv(l[d],c[d]);if(f!==0)return f;const p=Ua(a[l[d]],u[c[d]]);if(p!==0)return p}return Ve(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Ae(23264,{le:n})}}function kE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=ks(t),r=ks(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function DE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ua(n[i],r[i]);if(s)return s}return Ve(n.length,r.length)}function $a(t){return Jv(t)}function Jv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Jv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Jv(n.fields[o])}`;return i+"}"}(t.mapValue):Ae(61005,{value:t})}function sf(t){switch(Ns(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(t);return e?16+sf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ds(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+sf(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return $s(r.fields,(s,o)=>{i+=s.length+sf(o)}),i}(t.mapValue);default:throw Ae(13486,{value:t})}}function NE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zv(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function OE(t){return!!t&&"nullValue"in t}function ME(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function of(t){return!!t&&"mapValue"in t}function nF(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Tb])===null||n===void 0?void 0:n.stringValue)===Cb}function du(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $s(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=du(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!of(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=cn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=du(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());of(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];of(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$s(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hn(du(this.value))}}function Ib(t){const e=[];return $s(t.fields,(n,r)=>{const i=new cn([n]);if(of(r)){const s=Ib(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,De.min(),De.min(),De.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,i){return new xn(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new xn(e,2,n,De.min(),De.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,De.min(),De.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.position=e,this.inclusive=n}}function LE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Ie.comparator(Ie.fromName(o.referenceValue),n.key):r=Ua(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function iF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{}class zt extends bb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oF(e,n,r):n==="array-contains"?new uF(e,r):n==="in"?new cF(e,r):n==="not-in"?new dF(e,r):n==="array-contains-any"?new fF(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aF(e,r):new lF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ua(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends bb{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new zr(e,n)}matches(e){return Rb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Rb(t){return t.op==="and"}function Ab(t){return sF(t)&&Rb(t)}function sF(t){for(const e of t.filters)if(e instanceof zr)return!1;return!0}function em(t){if(t instanceof zt)return t.field.canonicalString()+t.op.toString()+$a(t.value);if(Ab(t))return t.filters.map(e=>em(e)).join(",");{const e=t.filters.map(n=>em(n)).join(",");return`${t.op}(${e})`}}function Pb(t,e){return t instanceof zt?function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(t,e):t instanceof zr?function(r,i){return i instanceof zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Pb(o,i.filters[a]),!0):!1}(t,e):void Ae(19439)}function kb(t){return t instanceof zt?function(n){return`${n.field.canonicalString()} ${n.op} ${$a(n.value)}`}(t):t instanceof zr?function(n){return n.op.toString()+" {"+n.getFilters().map(kb).join(" ,")+"}"}(t):"Filter"}class oF extends zt{constructor(e,n,r){super(e,n,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class aF extends zt{constructor(e,n){super(e,"in",n),this.keys=Db("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class lF extends zt{constructor(e,n){super(e,"not-in",n),this.keys=Db("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Db(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class uF extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&Yu(n.arrayValue,this.value)}}class cF extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yu(this.value.arrayValue,n)}}class dF extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yu(this.value.arrayValue,n)}}class fF extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function VE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hF(t,e,n,r,i,s,o)}function ay(t){const e=Me(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>em(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$a(r)).join(",")),e.Pe=n}return e.Pe}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jE(t.startAt,e.startAt)&&jE(t.endAt,e.endAt)}function tm(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function pF(t,e,n,r,i,s,o,a){return new fl(t,e,n,r,i,s,o,a)}function Yh(t){return new fl(t)}function FE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nb(t){return t.collectionGroup!==null}function fu(t){const e=Me(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(cn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Ku(s,r))}),n.has(cn.keyField().canonicalString())||e.Te.push(new Ku(cn.keyField(),r))}return e.Te}function ti(t){const e=Me(t);return e.Ie||(e.Ie=gF(e,fu(t))),e.Ie}function gF(t,e){if(t.limitType==="F")return VE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ku(i.field,s)});const n=t.endAt?new Kf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kf(t.startAt.position,t.startAt.inclusive):null;return VE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nm(t,e){const n=t.filters.concat([e]);return new fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rm(t,e,n){return new fl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kh(t,e){return ly(ti(t),ti(e))&&t.limitType===e.limitType}function Ob(t){return`${ay(ti(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kb(i)).join(", ")}]`),Wh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$a(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`}(ti(t))}; limitType=${t.limitType})`}function Xh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of fu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=LE(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,fu(r),i)||r.endAt&&!function(o,a,l){const u=LE(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,fu(r),i))}(t,e)}function vF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Mb(t){return(e,n)=>{let r=!1;for(const i of fu(t)){const s=mF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mF(t,e,n){const r=t.field.isKeyField()?Ie.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ua(l,u):Ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF=new bt(Ie.comparator);function Vi(){return yF}const Lb=new bt(Ie.comparator);function Yl(...t){let e=Lb;for(const n of t)e=e.insert(n.key,n);return e}function jb(t){let e=Lb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ho(){return hu()}function Vb(){return hu()}function hu(){return new jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const _F=new bt(Ie.comparator),wF=new Xt(Ie.comparator);function Ge(...t){let e=wF;for(const n of t)e=e.add(n);return e}const EF=new Xt(Ve);function SF(){return EF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function Fb(t){return{integerValue:""+t}}function xF(t,e){return XV(e)?Fb(e):uy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(){this._=void 0}}function TF(t,e,n){return t instanceof Xu?function(i,s){const o={fields:{[Eb]:{stringValue:wb},[xb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sy(s)&&(s=qh(s)),s&&(o.fields[Sb]=s),{mapValue:o}}(n,e):t instanceof Ga?Bb(t,e):t instanceof Ha?Ub(t,e):function(i,s){const o=zb(i,s),a=zE(o)+zE(i.Ee);return Zv(o)&&Zv(i.Ee)?Fb(a):uy(i.serializer,a)}(t,e)}function CF(t,e,n){return t instanceof Ga?Bb(t,e):t instanceof Ha?Ub(t,e):n}function zb(t,e){return t instanceof Xf?function(r){return Zv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xu extends Qh{}class Ga extends Qh{constructor(e){super(),this.elements=e}}function Bb(t,e){const n=$b(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ha extends Qh{constructor(e){super(),this.elements=e}}function Ub(t,e){let n=$b(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class Xf extends Qh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function zE(t){return Dt(t.integerValue||t.doubleValue)}function $b(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n){this.field=e,this.transform=n}}function IF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ga&&i instanceof Ga||r instanceof Ha&&i instanceof Ha?Ba(r.elements,i.elements,oi):r instanceof Xf&&i instanceof Xf?oi(r.Ee,i.Ee):r instanceof Xu&&i instanceof Xu}(t.transform,e.transform)}class bF{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function af(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jh{}function Gb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dy(t.key,_r.none()):new wc(t.key,t.data,_r.none());{const n=t.data,r=Hn.empty();let i=new Xt(cn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Gs(t.key,r,new rr(i.toArray()),_r.none())}}function RF(t,e,n){t instanceof wc?function(i,s,o){const a=i.value.clone(),l=UE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Gs?function(i,s,o){if(!af(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=UE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Hb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pu(t,e,n,r){return t instanceof wc?function(s,o,a,l){if(!af(s.precondition,o))return a;const u=s.value.clone(),c=$E(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Gs?function(s,o,a,l){if(!af(s.precondition,o))return a;const u=$E(s.fieldTransforms,l,o),c=o.data;return c.setAll(Hb(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return af(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=zb(r.transform,i||null);s!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,s))}return n||null}function BE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ba(r,i,(s,o)=>IF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wc extends Jh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gs extends Jh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Hb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UE(t,e,n){const r=new Map;nt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,CF(o,a,n[i]))}return r}function $E(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,TF(s,o,e))}return r}class dy extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PF extends Jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Vb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Gb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ge())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(n,r)=>BE(n,r))&&Ba(this.baseMutations,e.baseMutations,(n,r)=>BE(n,r))}}class fy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return _F}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,He;function OF(t){switch(t){case ee.OK:return Ae(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ae(15467,{code:t})}}function Wb(t){if(t===void 0)return ji("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Vt.OK:return ee.OK;case Vt.CANCELLED:return ee.CANCELLED;case Vt.UNKNOWN:return ee.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ee.INTERNAL;case Vt.UNAVAILABLE:return ee.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ee.NOT_FOUND;case Vt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Vt.ABORTED:return ee.ABORTED;case Vt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Vt.DATA_LOSS:return ee.DATA_LOSS;default:return Ae(39323,{code:t})}}(He=Vt||(Vt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=new Ts([4294967295,4294967295],0);function GE(t){const e=pb().encode(t),n=new ob;return n.update(e),new Uint8Array(n.digest())}function HE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ts([n,r],0),new Ts([i,s],0)]}class hy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kl(`Invalid padding: ${n}`);if(r<0)throw new Kl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ts.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ts.fromNumber(r)));return i.compare(MF)===1&&(i=new Ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=GE(e),[r,i]=HE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=GE(e),[r,i]=HE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zh(De.min(),i,new bt(Ve),Vi(),Ge())}}class Ec{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ec(r,n,Ge(),Ge(),Ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class qb{constructor(e,n){this.targetId=e,this.De=n}}class Yb{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WE{constructor(){this.ve=0,this.Ce=qE(),this.Fe=hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ge(),n=Ge(),r=Ge();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ae(38017,{changeType:s})}}),new Ec(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=qE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class LF{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vi(),this.je=_d(),this.Je=_d(),this.He=new bt(Ve)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(tm(s))if(r===0){const o=new Ie(s.path);this.Xe(n,o,xn.newNoDocument(o,De.min()))}else nt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ds(r).toUint8Array()}catch(l){if(l instanceof _b)return As("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hy(o,i,s)}catch(l){return As(l instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&tm(a.target)){const l=new Ie(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,xn.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Ge();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Zh(e,n,this.He,this.ze,r);return this.ze=Vi(),this.je=_d(),this.Je=_d(),this.He=new bt(Ve),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new WE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Xt(Ve),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Xt(Ve),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new WE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function _d(){return new bt(Ie.comparator)}function qE(){return new bt(Ie.comparator)}const jF={asc:"ASCENDING",desc:"DESCENDING"},VF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FF={and:"AND",or:"OR"};class zF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function im(t,e){return t.useProto3Json||Wh(e)?e:{value:e}}function Qf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BF(t,e){return Qf(t,e.toTimestamp())}function ni(t){return nt(!!t,49232),De.fromTimestamp(function(n){const r=ks(n);return new gt(r.seconds,r.nanos)}(t))}function py(t,e){return sm(t,e).canonicalString()}function sm(t,e){const n=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Xb(t){const e=dt.fromString(t);return nt(tR(e),10190,{key:e.toString()}),e}function om(t,e){return py(t.databaseId,e.path)}function Sg(t,e){const n=Xb(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ie(Jb(n))}function Qb(t,e){return py(t.databaseId,e)}function UF(t){const e=Xb(t);return e.length===4?dt.emptyPath():Jb(e)}function am(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jb(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function YE(t,e,n){return{name:om(t,e),fields:n.value.mapValue.fields}}function $F(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ae(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(nt(c===void 0||typeof c=="string",58123),hn.fromBase64String(c||"")):(nt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),hn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?ee.UNKNOWN:Wb(u.code);return new ge(c,u.message||"")}(o);n=new Yb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sg(t,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):De.min(),a=new Hn({mapValue:{fields:r.document.fields}}),l=xn.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new lf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sg(t,r.document),s=r.readTime?ni(r.readTime):De.min(),o=xn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new lf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sg(t,r.document),s=r.removedTargetIds||[];n=new lf([],s,i,null)}else{if(!("filter"in e))return Ae(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new NF(i,s),a=r.targetId;n=new qb(a,o)}}return n}function GF(t,e){let n;if(e instanceof wc)n={update:YE(t,e.key,e.value)};else if(e instanceof dy)n={delete:om(t,e.key)};else if(e instanceof Gs)n={update:YE(t,e.key,e.data),updateMask:ZF(e.fieldMask)};else{if(!(e instanceof PF))return Ae(16599,{Rt:e.type});n={verify:om(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xf)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Ae(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:BF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ae(27497)}(t,e.precondition)),n}function HF(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(De.min())&&(o=ni(s)),new bF(o,i.transformResults||[])}(n,e))):[]}function WF(t,e){return{documents:[Qb(t,e.path)]}}function qF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Qb(t,i);const s=function(u){if(u.length!==0)return eR(zr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Qo(f.field),direction:XF(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=im(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i}}function YF(t){let e=UF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nt(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=Zb(d);return f instanceof zr&&Ab(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Ku(Jo(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Wh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,p=d.values||[];return new Kf(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,p=d.values||[];return new Kf(p,f)}(n.endAt)),pF(e,i,o,s,a,"F",l,u)}function KF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jo(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jo(n.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jo(n.unaryFilter.field);return zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jo(n.unaryFilter.field);return zt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return zt.create(Jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zr.create(n.compositeFilter.filters.map(r=>Zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(t):Ae(30097,{filter:t})}function XF(t){return jF[t]}function QF(t){return VF[t]}function JF(t){return FF[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return cn.fromServerFormat(t.fieldPath)}function eR(t){return t instanceof zt?function(n){if(n.op==="=="){if(ME(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NAN"}};if(OE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ME(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NAN"}};if(OE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(n.field),op:QF(n.op),value:n.value}}}(t):t instanceof zr?function(n){const r=n.getFilters().map(i=>eR(i));return r.length===1?r[0]:{compositeFilter:{op:JF(n.op),filters:r}}}(t):Ae(54877,{filter:t})}function ZF(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,i,s=De.min(),o=De.min(),a=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e){this.gt=e}}function t4(t){const e=YF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this.Dn=new r4}addToCollectionParentIndex(e,n){return this.Dn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ps.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class r4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nR=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(nR,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Wa(0)}static ur(){return new Wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",i4=1048576;function QE([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class s4{constructor(e){this.Tr=e,this.buffer=new Xt(QE),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();QE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class o4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ve(XE,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){dl(n)?ve(XE,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.Rr(3e5)})}}class a4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Hh.ue);const r=new s4(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(KE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Ko()<=$e.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function l4(t,e){return new a4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.changes=new jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&pu(r.mutation,i,rr.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ge()){const i=ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Vi();const o=hu(),a=function(){return hu()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Gs)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),pu(c.mutation,u,c.mutation.getFieldMask(),gt.now())):o.set(u.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new c4(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=hu();let i=new bt((o,a)=>o-a),s=Ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||rr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||Ge()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=Vb();c.forEach(f=>{if(!s.has(f)){const p=Gb(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(ho());let a=Hu,l=s;return o.next(u=>ne.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ge())).next(c=>({batchId:a,changes:jb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next(r=>{let i=Yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Yl();return this.indexManager.getCollectionParents(e,s).next(a=>ne.forEach(a,l=>{const u=function(d,f){return new fl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,xn.newInvalidDocument(c)))});let a=Yl();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&pu(c.mutation,u,rr.empty(),gt.now()),Xh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:t4(i.bundledQuery),readTime:ni(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.overlays=new bt(Ie.comparator),this.kr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ho();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=ho(),s=n.length+1,o=new Ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new bt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=ho(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=ho(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return ne.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new DF(n,r));let s=this.kr.get(n);s===void 0&&(s=Ge(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.qr=new Xt(Zt.Qr),this.$r=new Xt(Zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Zt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Zt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new Ie(new dt([])),r=new Zt(n,e),i=new Zt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ie(new dt([])),r=new Zt(n,e),i=new Zt(n,e+1);let s=Ge();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Zt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ie.comparator(e.key,n.key)||Ve(e.Hr,n.Hr)}static Ur(e,n){return Ve(e.Hr,n.Hr)||Ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Xt(Zt.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kF(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?iy:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zt(n,0),i=new Zt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Ve);return n.forEach(i=>{const s=new Zt(i,0),o=new Zt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),ne.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Ie.isDocumentKey(s)||(s=s.child(""));const o=new Zt(new Ie(s),0);let a=new Xt(Ve);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},o),ne.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ne.forEach(n.mutations,i=>{const s=new Zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Zt(n,0),i=this.Yr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.ni=e,this.docs=function(){return new bt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=Vi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vi();const o=n.path,a=new Ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||WV(HV(c),r)<=0||(i.has(c.key)||Xh(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ae(9500)}ri(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m4(this)}getSize(e){return ne.resolve(this.size)}}class m4 extends u4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.persistence=e,this.ii=new jo(n=>ay(n),ly),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new gy,this.targetCount=0,this._i=Wa.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ne.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Wa(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.hr(n),ne.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.ai={},this.overlays={},this.ui=new Hh(0),this.ci=!1,this.ci=!0,this.li=new p4,this.referenceDelegate=e(this),this.hi=new y4(this),this.indexManager=new n4,this.remoteDocumentCache=function(i){return new v4(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new e4(n),this.Ti=new f4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new h4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new g4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const i=new _4(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return ne.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class _4 extends YV{constructor(e){super(),this.currentSequenceNumber=e}}class vy{constructor(e){this.persistence=e,this.Ai=new gy,this.Ri=null}static Vi(e){return new vy(e)}get mi(){if(this.Ri)return this.Ri;throw Ae(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,r=>{const i=Ie.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ne.or([()=>ne.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Jf{constructor(e,n){this.persistence=e,this.gi=new jo(r=>QV(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=l4(this,n)}static Vi(e,n){return new Jf(e,n)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ne.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?ne.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=sf(e.data.value)),n}Sr(e,n,r){return ne.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ge(),i=Ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new my(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return KO()?8:KV(Cn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new w4;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ko()<=$e.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Ko()<=$e.DEBUG&&ve("QueryEngine","Query:",Xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ko()<=$e.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):ne.resolve())}ps(e,n){if(FE(n))return ne.resolve(null);let r=ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rm(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ge(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(e,rm(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,i){return FE(n)||i.isEqual(De.min())?ne.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?ne.resolve(null):(Ko()<=$e.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xo(n)),this.vs(e,o,n,GV(i,Hu)).next(a=>a))})}bs(e,n){let r=new Xt(Mb(e));return n.forEach((i,s)=>{Xh(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Ko()<=$e.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.gs.getDocumentsMatchingQuery(e,n,Ps.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="LocalStore",S4=3e8;class x4{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new bt(Ve),this.Ms=new jo(s=>ay(s),ly),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function T4(t,e,n,r){return new x4(t,e,n,r)}async function iR(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ge();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function C4(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let p=ne.resolve();return f.forEach(v=>{p=p.next(()=>c.getEntry(l,v)).next(m=>{const E=u.docVersions.get(v);nt(E!==null,48541),m.version.compareTo(E)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ge();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function sR(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function I4(t,e){const n=Me(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.hi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,c.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(hn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(m,E,y){return m.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=S4?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,p,c)&&a.push(n.hi.updateTargetData(s,p))});let l=Vi(),u=Ge();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(b4(s,o,e.documentUpdates).next(c=>{l=c.Ls,u=c.ks})),!r.isEqual(De.min())){const c=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Fs=i,s))}function b4(t,e,n){let r=Ge(),i=Ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vi();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ve(yy,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function R4(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function A4(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function lm(t,e,n){const r=Me(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!dl(o))throw o;ve(yy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function JE(t,e,n){const r=Me(t);let i=De.min(),s=Ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Me(l),f=d.Ms.get(c);return f!==void 0?ne.resolve(d.Fs.get(f)):d.hi.getTargetData(u,c)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:Ge())).next(a=>(P4(r,vF(e),a),{documents:a,qs:s})))}function P4(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class ZE{constructor(){this.activeTargetIds=SF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k4{constructor(){this.Fo=new ZE,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ZE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="ConnectivityMonitor";class tS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ve(eS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ve(eS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function um(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="RestConnection",N4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===qf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=um(),a=this.Go(e,n.toUriEncodedString());ve(xg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),c=ol(u);return this.jo(e,a,l,r,c).then(d=>(ve(xg,`Received RPC '${e}' ${o}: `,d),d),d=>{throw As(xg,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=N4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class L4 extends O4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=um();return new Promise((a,l)=>{const u=new ab;u.setWithCredentials(!0),u.listenOnce(lb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rf.NO_ERROR:const d=u.getResponseJson();ve(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case rf.TIMEOUT:ve(_n,`RPC '${e}' ${o} timed out`),l(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case rf.HTTP_ERROR:const f=u.getStatus();if(ve(_n,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const m=function(y){const _=y.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(_)>=0?_:ee.UNKNOWN}(v.status);l(new ge(m,v.message))}else l(new ge(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ve(_n,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);ve(_n,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}P_(e,n,r){const i=um(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=db(),a=cb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");ve(_n,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.T_(d);let f=!1,p=!1;const v=new M4({Ho:E=>{p?ve(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(f||(ve(_n,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ve(_n,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},Yo:()=>d.close()}),m=(E,y,_)=>{E.listen(y,S=>{try{_(S)}catch(b){setTimeout(()=>{throw b},0)}})};return m(d,ql.EventType.OPEN,()=>{p||(ve(_n,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),m(d,ql.EventType.CLOSE,()=>{p||(p=!0,ve(_n,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(d))}),m(d,ql.EventType.ERROR,E=>{p||(p=!0,As(_n,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),v.__(new ge(ee.UNAVAILABLE,"The operation could not be completed")))}),m(d,ql.EventType.MESSAGE,E=>{var y;if(!p){const _=E.data[0];nt(!!_,16349);const S=_,b=(S==null?void 0:S.error)||((y=S[0])===null||y===void 0?void 0:y.error);if(b){ve(_n,`RPC '${e}' stream ${i} received error:`,b);const N=b.status;let R=function(C){const I=Vt[C];if(I!==void 0)return Wb(I)}(N),x=b.message;R===void 0&&(R=ee.INTERNAL,x="Unknown error status: "+N+" with message "+b.message),p=!0,v.__(new ge(R,x)),d.close()}else ve(_n,`RPC '${e}' stream ${i} received:`,_),v.a_(_)}}),m(a,ub.STAT_EVENT,E=>{E.stat===Xv.PROXY?ve(_n,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Xv.NOPROXY&&ve(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t){return new zF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="PersistentStream";class aR{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new oR(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ve(nS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ve(nS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j4 extends aR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=$F(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?ni(o.readTime):De.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=am(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=tm(l)?{documents:WF(s,l)}:{query:qF(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Kb(s,o.resumeToken);const u=im(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Qf(s,o.snapshotVersion.toTimestamp());const u=im(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=KF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=am(this.serializer),n.removeTarget=e,this.k_(n)}}class V4 extends aR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=HF(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=am(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{}class z4 extends F4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,sm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(ee.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,sm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ee.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class B4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ji(n),this._a=!1):ve("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="RemoteStore";class U4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Vo(this)&&(ve(Ao,"Restarting streams for network reachability change."),await async function(l){const u=Me(l);u.Ia.add(4),await Sc(u),u.Aa.set("Unknown"),u.Ia.delete(4),await tp(u)}(this))})}),this.Aa=new B4(r,i)}}async function tp(t){if(Vo(t))for(const e of t.da)await e(!0)}async function Sc(t){for(const e of t.da)await e(!1)}function lR(t,e){const n=Me(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Sy(n)?Ey(n):hl(n).x_()&&wy(n,e))}function _y(t,e){const n=Me(t),r=hl(n);n.Ta.delete(e),r.x_()&&uR(n,e),n.Ta.size===0&&(r.x_()?r.B_():Vo(n)&&n.Aa.set("Unknown"))}function wy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hl(t).H_(e)}function uR(t,e){t.Ra.$e(e),hl(t).Y_(e)}function Ey(t){t.Ra=new LF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),hl(t).start(),t.Aa.aa()}function Sy(t){return Vo(t)&&!hl(t).M_()&&t.Ta.size>0}function Vo(t){return Me(t).Ia.size===0}function cR(t){t.Ra=void 0}async function $4(t){t.Aa.set("Online")}async function G4(t){t.Ta.forEach((e,n)=>{wy(t,e)})}async function H4(t,e){cR(t),Sy(t)?(t.Aa.la(e),Ey(t)):t.Aa.set("Unknown")}async function W4(t,e,n){if(t.Aa.set("Online"),e instanceof Yb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){ve(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zf(t,r)}else if(e instanceof lf?t.Ra.Ye(e):e instanceof qb?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{const r=await sR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ta.get(u);c&&s.Ta.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ta.get(l);if(!c)return;s.Ta.set(l,c.withResumeToken(hn.EMPTY_BYTE_STRING,c.snapshotVersion)),uR(s,l);const d=new cs(c.target,l,u,c.sequenceNumber);wy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ve(Ao,"Failed to raise snapshot:",r),await Zf(t,r)}}async function Zf(t,e,n){if(!dl(e))throw e;t.Ia.add(1),await Sc(t),t.Aa.set("Offline"),n||(n=()=>sR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve(Ao,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await tp(t)})}function dR(t,e){return e().catch(n=>Zf(t,n,e))}async function np(t){const e=Me(t),n=Os(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:iy;for(;q4(e);)try{const i=await R4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,Y4(e,i)}catch(i){await Zf(e,i)}fR(e)&&hR(e)}function q4(t){return Vo(t)&&t.Pa.length<10}function Y4(t,e){t.Pa.push(e);const n=Os(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function fR(t){return Vo(t)&&!Os(t).M_()&&t.Pa.length>0}function hR(t){Os(t).start()}async function K4(t){Os(t).na()}async function X4(t){const e=Os(t);for(const n of t.Pa)e.X_(n.mutations)}async function Q4(t,e,n){const r=t.Pa.shift(),i=fy.from(r,e,n);await dR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await np(t)}async function J4(t,e){e&&Os(t).Z_&&await async function(r,i){if(function(o){return OF(o)&&o!==ee.ABORTED}(i.code)){const s=r.Pa.shift();Os(r).N_(),await dR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await np(r)}}(t,e),fR(t)&&hR(t)}async function rS(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ve(Ao,"RemoteStore received new credentials");const r=Vo(n);n.Ia.add(3),await Sc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await tp(n)}async function Z4(t,e){const n=Me(t);e?(n.Ia.delete(2),await tp(n)):e||(n.Ia.add(2),await Sc(n),n.Aa.set("Unknown"))}function hl(t){return t.Va||(t.Va=function(n,r,i){const s=Me(n);return s.ia(),new j4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:$4.bind(null,t),e_:G4.bind(null,t),n_:H4.bind(null,t),J_:W4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Sy(t)?Ey(t):t.Aa.set("Unknown")):(await t.Va.stop(),cR(t))})),t.Va}function Os(t){return t.ma||(t.ma=function(n,r,i){const s=Me(n);return s.ia(),new V4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:K4.bind(null,t),n_:J4.bind(null,t),ea:X4.bind(null,t),ta:Q4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await np(t)):(await t.ma.stop(),t.Pa.length>0&&(ve(Ao,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new xy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ty(t,e){if(ji("AsyncQueue",`${e}: ${t}`),dl(t))return new ge(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ie.comparator(n.key,r.key):(n,r)=>Ie.comparator(n.key,r.key),this.keyedMap=Yl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ra;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.fa=new bt(Ie.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ae(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class qa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qa(e,n,Ra.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class t3{constructor(){this.queries=sS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Me(n),s=i.queries;i.queries=sS(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function sS(){return new jo(t=>Ob(t),Kh)}async function Cy(t,e){const n=Me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new e3,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ty(o,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&by(n)}async function Iy(t,e){const n=Me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function n3(t,e){const n=Me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&by(n)}function r3(t,e,n){const r=Me(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function by(t){t.Da.forEach(e=>{e.next()})}var cm,oS;(oS=cm||(cm={})).Fa="default",oS.Cache="cache";class Ry{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.key=e}}class gR{constructor(e){this.key=e}}class i3{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ge(),this.mutatedKeys=Ge(),this.Xa=Mb(e),this.eu=new Ra(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new iS,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),p=Xh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;f&&p?f.data.isEqual(p.data)?v!==m&&(r.track({type:3,doc:p}),E=!0):this.iu(f,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.Xa(p,l)>0||u&&this.Xa(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),E=!0):f&&!p&&(r.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(p?(o=o.add(p),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((c,d)=>function(p,v){const m=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{At:E})}};return m(p)-m(v)}(c.type,d.type)||this.Xa(c.doc,d.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new qa(this.query,e.eu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new iS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ge(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new gR(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new pR(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ge();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return qa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ay="SyncEngine";class s3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class o3{constructor(e){this.key=e,this.lu=!1}}class a3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new jo(a=>Ob(a),Kh),this.Tu=new Map,this.Iu=new Set,this.du=new bt(Ie.comparator),this.Eu=new Map,this.Au=new gy,this.Ru={},this.Vu=new Map,this.mu=Wa.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function l3(t,e,n=!0){const r=ER(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await vR(r,e,n,!0),i}async function u3(t,e){const n=ER(t);await vR(n,e,!0,!1)}async function vR(t,e,n,r){const i=await A4(t.localStore,ti(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await c3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&lR(t.remoteStore,i),a}async function c3(t,e,n,r,i){t.gu=(d,f,p)=>async function(m,E,y,_){let S=E.view.nu(y);S.Ds&&(S=await JE(m.localStore,E.query,!1).then(({documents:x})=>E.view.nu(x,S)));const b=_&&_.targetChanges.get(E.targetId),N=_&&_.targetMismatches.get(E.targetId)!=null,R=E.view.applyChanges(S,m.isPrimaryClient,b,N);return lS(m,E.targetId,R._u),R.snapshot}(t,d,f,p);const s=await JE(t.localStore,e,!0),o=new i3(e,s.qs),a=o.nu(s.documents),l=Ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);lS(t,n,u._u);const c=new s3(e,n,o);return t.Pu.set(e,c),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function d3(t,e,n){const r=Me(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Kh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_y(r.remoteStore,i.targetId),dm(r,i.targetId)}).catch(cl)):(dm(r,i.targetId),await lm(r.localStore,i.targetId,!0))}async function f3(t,e){const n=Me(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_y(n.remoteStore,r.targetId))}async function h3(t,e,n){const r=w3(t);try{const i=await function(o,a){const l=Me(o),u=gt.now(),c=a.reduce((p,v)=>p.add(v.key),Ge());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=Vi(),m=Ge();return l.Os.getEntries(p,c).next(E=>{v=E,v.forEach((y,_)=>{_.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(E=>{d=E;const y=[];for(const _ of a){const S=AF(_,d.get(_.key).overlayedDocument);S!=null&&y.push(new Gs(_.key,S,Ib(S.value.mapValue),_r.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,y,a)}).next(E=>{f=E;const y=E.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(p,E.batchId,y)})}).then(()=>({batchId:f.batchId,changes:jb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new bt(Ve)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u}(r,i.batchId,n),await xc(r,i.changes),await np(r.remoteStore)}catch(i){const s=Ty(i,"Failed to persist write");n.reject(s)}}async function mR(t,e){const n=Me(t);try{const r=await I4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?nt(o.lu,14607):i.removedDocuments.size>0&&(nt(o.lu,42227),o.lu=!1))}),await xc(n,r,e)}catch(r){await cl(r)}}function aS(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Me(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.wa)f.va(a)&&(u=!0)}),u&&by(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function p3(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new bt(Ie.comparator);o=o.insert(s,xn.newNoDocument(s,De.min()));const a=Ge().add(s),l=new Zh(De.min(),new Map,new bt(Ve),o,a);await mR(r,l),r.du=r.du.remove(s),r.Eu.delete(e),Py(r)}else await lm(r.localStore,e,!1).then(()=>dm(r,e,n)).catch(cl)}async function g3(t,e){const n=Me(t),r=e.batch.batchId;try{const i=await C4(n.localStore,e);_R(n,r,null),yR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xc(n,i)}catch(i){await cl(i)}}async function v3(t,e,n){const r=Me(t);try{const i=await function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(nt(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);_R(r,e,n),yR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xc(r,i)}catch(i){await cl(i)}}function yR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function _R(t,e,n){const r=Me(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function dm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||wR(t,r)})}function wR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_y(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Py(t))}function lS(t,e,n){for(const r of n)r instanceof pR?(t.Au.addReference(r.key,e),m3(t,r)):r instanceof gR?(ve(Ay,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||wR(t,r.key)):Ae(19791,{yu:r})}function m3(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ve(Ay,"New document in limbo: "+n),t.Iu.add(r),Py(t))}function Py(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ie(dt.fromString(e)),r=t.mu.next();t.Eu.set(r,new o3(n)),t.du=t.du.insert(n,r),lR(t.remoteStore,new cs(ti(Yh(n.path)),r,"TargetPurposeLimboResolution",Hh.ue))}}async function xc(t,e,n){const r=Me(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=my.Es(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,u){const c=Me(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(u,f=>ne.forEach(f.Is,p=>c.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>ne.forEach(f.ds,p=>c.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!dl(d))throw d;ve(yy,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const p=c.Fs.get(f),v=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(v);c.Fs=c.Fs.insert(f,m)}}}(r.localStore,s))}async function y3(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ve(Ay,"User change. New user:",e.toKey());const r=await iR(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new ge(ee.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(n,r.Bs)}}function _3(t,e){const n=Me(t),r=n.Eu.get(e);if(r&&r.lu)return Ge().add(r.key);{let i=Ge();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function ER(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=p3.bind(null,e),e.hu.J_=n3.bind(null,e.eventManager),e.hu.pu=r3.bind(null,e.eventManager),e}function w3(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v3.bind(null,e),e}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ep(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return T4(this.persistence,new E4,e.initialUser,this.serializer)}Du(e){return new rR(vy.Vi,this.serializer)}bu(e){return new k4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class E3 extends eh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){nt(this.persistence.referenceDelegate instanceof Jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new o4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new rR(r=>Jf.Vi(r,n),this.serializer)}}class fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=y3.bind(null,this.syncEngine),await Z4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new t3}()}createDatastore(e){const n=ep(e.databaseInfo.databaseId),r=function(s){return new L4(s)}(e.databaseInfo);return function(s,o,a,l){return new z4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new U4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>aS(this.syncEngine,n,0),function(){return tS.C()?new tS:new D4}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new a3(i,s,o,a,l,u);return c&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Me(i);ve(Ao,"RemoteStore shutting down."),s.Ia.add(5),await Sc(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fm.provider={build:()=>new fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class S3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ve(Ms,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ve(Ms,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ty(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cg(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await iR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ve("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{As("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function uS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x3(t);ve(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rS(e.remoteStore,i)),t._onlineComponents=e}async function x3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Ms,"Using user provided OfflineComponentProvider");try{await Cg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Cg(t,new eh)}}else ve(Ms,"Using default OfflineComponentProvider"),await Cg(t,new E3(void 0));return t._offlineComponents}async function SR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Ms,"Using user provided OnlineComponentProvider"),await uS(t,t._uninitializedComponentsProvider._online)):(ve(Ms,"Using default OnlineComponentProvider"),await uS(t,new fm))),t._onlineComponents}function T3(t){return SR(t).then(e=>e.syncEngine)}async function th(t){const e=await SR(t),n=e.eventManager;return n.onListen=l3.bind(null,e.syncEngine),n.onUnlisten=d3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=f3.bind(null,e.syncEngine),n}function C3(t,e,n={}){const r=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new ky({next:f=>{c.Ou(),o.enqueueAndForget(()=>Iy(s,d));const p=f.docs.has(a);!p&&f.fromCache?u.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?u.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Ry(Yh(a.path),c,{includeMetadataChanges:!0,ka:!0});return Cy(s,d)}(await th(t),t.asyncQueue,e,n,r)),r.promise}function I3(t,e,n={}){const r=new Ii;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new ky({next:f=>{c.Ou(),o.enqueueAndForget(()=>Iy(s,d)),f.fromCache&&l.source==="server"?u.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Ry(a,c,{includeMetadataChanges:!0,ka:!0});return Cy(s,d)}(await th(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firestore.googleapis.com",dS=!0;class fS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TR,this.ssl=dS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:dS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=nR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i4)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$V("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OV;switch(r.type){case"firstParty":return new VV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cS.get(n);r&&(ve("ComponentProvider","Removing Datastore"),cS.delete(n),r.terminate())}(this),Promise.resolve()}}function b3(t,e,n,r={}){var i;t=Xn(t,rp);const s=ol(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(mI(`https://${l}`),yI("Firestore",!0)),o.host!==TR&&o.host!==l&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Oi(u,a)&&(t._setSettings(u),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=En.MOCK_USER;else{c=zO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new En(f)}t._authCredentials=new MV(new hb(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hs(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_c(n,Pt._jsonSchema))return new Pt(e,r||null,new Ie(dt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Ut("string",Pt._jsonSchemaVersion),referencePath:Ut("string")};class Cs extends Hs{constructor(e,n,r){super(e,n,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new Ie(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function fi(t,e,...n){if(t=$t(t),gb("collection","path",e),t instanceof rp){const r=dt.fromString(e,...n);return CE(r),new Cs(t,null,r)}{if(!(t instanceof Pt||t instanceof Cs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return CE(r),new Cs(t.firestore,null,r)}}function yt(t,e,...n){if(t=$t(t),arguments.length===1&&(e=ry.newId()),gb("doc","path",e),t instanceof rp){const r=dt.fromString(e,...n);return TE(r),new Pt(t,null,new Ie(r))}{if(!(t instanceof Pt||t instanceof Cs))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return TE(r),new Pt(t.firestore,t instanceof Cs?t.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="AsyncQueue";class pS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new oR(this,"async_queue_retry"),this.oc=()=>{const r=Tg();r&&ve(hS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Tg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Tg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ii;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!dl(e))throw e;ve(hS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ji("INTERNAL UNHANDLED ERROR: ",gS(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=xy.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Ae(47125,{hc:gS(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function gS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Fi extends rp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new pS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pS(e),this._firestoreClient=void 0,await e}}}function R3(t,e){const n=typeof t=="object"?t:SI(),r=typeof t=="string"?t:qf,i=W0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=VO("firestore");s&&b3(i,...s)}return i}function ip(t){if(t._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A3(t),t._firestoreClient}function A3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new eF(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,xR(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new S3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(hn.fromBase64String(e))}catch(n){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_c(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:Ut("string",vr._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(_c(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:Ut("string",ri._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ii._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_c(e,ii._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ii(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ii._jsonSchemaVersion="firestore/vectorValue/1.0",ii._jsonSchema={type:Ut("string",ii._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=/^__.*__$/;class k3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wc(e,this.data,n,this.fieldTransforms)}}class CR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Gs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ec:t})}}class op{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return nh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(IR(this.Ec)&&P3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class D3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ep(e)}Dc(e,n,r,i=!1){return new op({Ec:e,methodName:n,bc:r,path:cn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ap(t){const e=t._freezeSettings(),n=ep(t._databaseId);return new D3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bR(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);My("Data must be an object, but it was:",o,r);const a=AR(r,o);let l,u;if(s.merge)l=new rr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=hm(e,d,n);if(!o.contains(f))throw new ge(ee.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);kR(c,f)||c.push(f)}l=new rr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new k3(new Hn(a),l,u)}class lp extends pl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lp}}function RR(t,e,n){return new op({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dy extends pl{_toFieldTransform(e){return new cy(e.path,new Xu)}isEqual(e){return e instanceof Dy}}class Ny extends pl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RR(this,e,!0),r=this.vc.map(s=>Fo(s,n)),i=new Ga(r);return new cy(e.path,i)}isEqual(e){return e instanceof Ny&&Oi(this.vc,e.vc)}}class Oy extends pl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=RR(this,e,!0),r=this.vc.map(s=>Fo(s,n)),i=new Ha(r);return new cy(e.path,i)}isEqual(e){return e instanceof Oy&&Oi(this.vc,e.vc)}}function N3(t,e,n,r){const i=t.Dc(1,e,n);My("Data must be an object, but it was:",i,r);const s=[],o=Hn.empty();$s(r,(l,u)=>{const c=Ly(e,l,n);u=$t(u);const d=i.gc(c);if(u instanceof lp)s.push(c);else{const f=Fo(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new rr(s);return new CR(o,a,i.fieldTransforms)}function O3(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[hm(e,r,n)],l=[i];if(s.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(hm(e,s[f])),l.push(s[f+1]);const u=[],c=Hn.empty();for(let f=a.length-1;f>=0;--f)if(!kR(u,a[f])){const p=a[f];let v=l[f];v=$t(v);const m=o.gc(p);if(v instanceof lp)u.push(p);else{const E=Fo(v,m);E!=null&&(u.push(p),c.set(p,E))}}const d=new rr(u);return new CR(c,d,o.fieldTransforms)}function M3(t,e,n,r=!1){return Fo(n,t.Dc(r?4:3,e))}function Fo(t,e){if(PR(t=$t(t)))return My("Unsupported field value:",e,t),AR(t,e);if(t instanceof pl)return function(r,i){if(!IR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Fo(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=$t(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gt.fromDate(r);return{timestampValue:Qf(i.serializer,s)}}if(r instanceof gt){const s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,s)}}if(r instanceof ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:Kb(i.serializer,r._byteString)};if(r instanceof Pt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:py(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ii)return function(o,a){return{mapValue:{fields:{[Tb]:{stringValue:Cb},[Yf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return uy(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Gh(r)}`)}(t,e)}function AR(t,e){const n={};return yb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(t,(r,i)=>{const s=Fo(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function PR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof ri||t instanceof vr||t instanceof Pt||t instanceof pl||t instanceof ii)}function My(t,e,n){if(!PR(n)||!vb(n)){const r=Gh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function hm(t,e,n){if((e=$t(e))instanceof sp)return e._internalPath;if(typeof e=="string")return Ly(t,e);throw nh("Field path arguments must be of type string or ",t,!1,void 0,n)}const L3=new RegExp("[~\\*/\\[\\]]");function Ly(t,e,n){if(e.search(L3)>=0)throw nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sp(...e.split("."))._internalPath}catch{throw nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nh(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ge(ee.INVALID_ARGUMENT,a+t+l)}function kR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class j3 extends DR{data(){return super.data()}}function jy(t,e){return typeof e=="string"?Ly(t,e):e instanceof sp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class OR extends Vy{}function V3(t,e,...n){let r=[];e instanceof Vy&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof zy).length,a=s.filter(l=>l instanceof Fy).length;if(o>1||o>0&&a>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Fy extends OR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fy(e,n,r)}_apply(e){const n=this._parse(e);return MR(e._query,n),new Hs(e.firestore,e.converter,nm(e._query,n))}_parse(e){const n=ap(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){yS(d,c);const v=[];for(const m of d)v.push(mS(l,s,m));f={arrayValue:{values:v}}}else f=mS(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||yS(d,c),f=M3(a,o,d,c==="in"||c==="not-in");return zt.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class zy extends Vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)MR(o,l),o=nm(o,l)}(e._query,n),new Hs(e.firestore,e.converter,nm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class By extends OR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new By(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ku(s,o)}(e._query,this._field,this._direction);return new Hs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function F3(t,e="asc"){const n=e,r=jy("orderBy",t);return By._create(r,n)}function mS(t,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nb(e)&&n.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!Ie.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return NE(t,new Ie(r))}if(n instanceof Pt)return NE(t,n._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(n)}.`)}function yS(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class z3{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $s(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Yf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Dt(o.doubleValue));return new ii(s)}convertGeoPoint(e){return new ri(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=ks(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);nt(tR(r),9688,{name:e});const i=new qu(r.get(1),r.get(3)),s=new Ie(r.popFirst(5));return i.isEqual(n)||ji(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends DR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:Ut("string",mo._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class uf extends mo{data(e={}){return super.data(e)}}class yo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uf(this._firestore,this._userDataWriter,r.key,r,new Xl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new uf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:B3(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function B3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(t){t=Xn(t,Pt);const e=Xn(t.firestore,Fi);return C3(ip(e),t._key).then(n=>VR(e,t,n))}yo._jsonSchemaVersion="firestore/querySnapshot/1.0",yo._jsonSchema={type:Ut("string",yo._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Uy extends z3{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Tc(t){t=Xn(t,Hs);const e=Xn(t.firestore,Fi),n=ip(e),r=new Uy(e);return NR(t._query),I3(n,t._query).then(i=>new yo(e,r,t,i))}function li(t,e,n){t=Xn(t,Pt);const r=Xn(t.firestore,Fi),i=LR(t.converter,e,n);return up(r,[bR(ap(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,_r.none())])}function Po(t,e,n,...r){t=Xn(t,Pt);const i=Xn(t.firestore,Fi),s=ap(i);let o;return o=typeof(e=$t(e))=="string"||e instanceof sp?O3(s,"updateDoc",t._key,e,n,r):N3(s,"updateDoc",t._key,e),up(i,[o.toMutation(t._key,_r.exists(!0))])}function U3(t){return up(Xn(t.firestore,Fi),[new dy(t._key,_r.none())])}function jR(t,e){const n=Xn(t.firestore,Fi),r=yt(t),i=LR(t.converter,e);return up(n,[bR(ap(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}function rh(t,...e){var n,r,i;t=$t(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vS(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vS(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof Pt)u=Xn(t.firestore,Fi),c=Yh(t._key.path),l={next:d=>{e[o]&&e[o](VR(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Xn(t,Hs);u=Xn(d.firestore,Fi),c=d._query;const f=new Uy(u);l={next:p=>{e[o]&&e[o](new yo(u,f,d,p))},error:e[o+1],complete:e[o+2]},NR(t._query)}return function(f,p,v,m){const E=new ky(m),y=new Ry(p,E,v);return f.asyncQueue.enqueueAndForget(async()=>Cy(await th(f),y)),()=>{E.Ou(),f.asyncQueue.enqueueAndForget(async()=>Iy(await th(f),y))}}(ip(u),c,a,l)}function up(t,e){return function(r,i){const s=new Ii;return r.asyncQueue.enqueueAndForget(async()=>h3(await T3(r),i,s)),s.promise}(ip(t),e)}function VR(t,e,n){const r=n.docs.get(e._key),i=new Uy(t);return new mo(t,i,e._key,r,new Xl(n.hasPendingWrites,n.fromCache),e.converter)}function cp(){return new Dy("serverTimestamp")}function $y(...t){return new Ny("arrayUnion",t)}function Gy(...t){return new Oy("arrayRemove",t)}(function(e,n=!0){(function(i){ul=i})(al),Fa(new Co("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Fi(new LV(r.getProvider("auth-internal")),new FV(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xs(_E,wE,e),xs(_E,wE,"esm2017")})();const $3={apiKey:"AIzaSyBYY694nCtOOSKO4rTnYc_jqWqcibc3r5k",authDomain:"mehko-ai.firebaseapp.com",projectId:"mehko-ai"},FR=EI($3),Aa=DV(FR),Qe=R3(FR),zR=D.createContext();function G3({children:t}){const[e,n]=D.useState(null),[r,i]=D.useState(!0),[s,o]=D.useState(!1);D.useEffect(()=>wj(Aa,async d=>{if(n(d),d)try{if((await d.getIdTokenResult()).claims.admin===!0)o(!0);else{const p=await ai(yt(Qe,"users",d.uid));p.exists()&&p.data().role==="admin"?o(!0):o(!1)}}catch(f){console.error("Error checking admin status:",f),o(!1)}else o(!1);i(!1)}),[]);const a=(c,d)=>KI(Aa,c,d),l=()=>Ej(Aa),u=async()=>{if(!e)return!1;try{if((await e.getIdTokenResult()).claims.admin===!0)return o(!0),!0;const d=await ai(yt(Qe,"users",e.uid));return d.exists()&&d.data().role==="admin"?(o(!0),!0):(o(!1),!1)}catch(c){return console.error("Error checking admin status:",c),o(!1),!1}};return g.jsx(zR.Provider,{value:{user:e,loading:r,login:a,logout:l,isAdmin:s,checkAdminStatus:u},children:t})}function bn(){return D.useContext(zR)}const BR=D.createContext(),UR=()=>{const t=D.useContext(BR);if(!t)throw new Error("useAuthModal must be used within an AuthModalProvider");return t},H3=({children:t})=>{const[e,n]=D.useState(!1),s={isOpen:e,openAuthModal:()=>n(!0),closeAuthModal:()=>n(!1)};return g.jsx(BR.Provider,{value:s,children:t})};function W3(){const[t,e]=D.useState({}),[n,r]=D.useState({}),[i,s]=D.useState({});return{collapsedApps:t,collapsedSteps:n,collapsedSupport:i,setCollapsedApps:e,setCollapsedSteps:r,setCollapsedSupport:s,toggle:(a,l,u,c=null)=>{a(d=>({...d,[u]:c!==null?c:!d[u]}))}}}const q3=({applications:t,activeApplicationId:e,onRemove:n,activeSection:r,setActiveSection:i,onSelect:s,onStepSelect:o,selectedStepId:a,allProgress:l={},getProgressPercentage:u})=>{const{collapsedApps:c,collapsedSteps:d,collapsedSupport:f,setCollapsedApps:p,setCollapsedSteps:v,setCollapsedSupport:m,toggle:E}=W3(),{isAdmin:y}=bn();return g.jsxs("div",{className:"sidebar",children:[g.jsxs("div",{className:"sidebar-header",children:[g.jsx("h3",{children:"Your Applications"}),y&&g.jsx("div",{className:"admin-indicator",children:g.jsx("span",{className:"admin-badge",children:""})})]}),g.jsx("ul",{className:"sidebar-list",children:t.map(_=>{var O,P,F,U;const S=_.id===e,b=c[_.id],N=d[_.id],R=f[_.id],x=((O=_.steps)==null?void 0:O.length)||0,w=l[_.id]||[],C=w.length,I=u?u(_.id,x):0;console.log(`Sidebar progress for ${_.id}:`,{totalSteps:x,completedSteps:w,completeCount:C,percent:I,allProgress:l[_.id]});const A=!!((P=_.supportTools)!=null&&P.commentsEnabled);return g.jsxs("div",{className:"sidebar-item-wrapper",onClick:()=>s(_.id),children:[g.jsxs("div",{className:`sidebar-item ${S?"active":""}`,children:[g.jsx("div",{className:"sidebar-app-title",children:_.title}),g.jsxs("div",{className:"sidebar-progress",children:[g.jsx("div",{className:"sidebar-progress-bar",children:g.jsx("div",{className:"sidebar-progress-fill",style:{width:`${I}%`}})}),g.jsxs("div",{className:"progress-info",children:[g.jsxs("small",{children:[C," of ",x," steps complete"]}),g.jsxs("small",{className:"progress-percent",children:[I,"%"]})]})]}),S&&g.jsxs("div",{className:"sidebar-controls",children:[g.jsx("button",{className:"collapse-btn",onClick:q=>{q.stopPropagation(),E(p,c,_.id)},title:b?"Expand":"Collapse",children:b?"":""}),C===0&&g.jsx("button",{className:"remove-btn",onClick:q=>{q.stopPropagation(),n(_.id)},title:"Remove Application",children:""})]})]}),!b&&S&&g.jsxs("div",{className:"sidebar-sublist",style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"60vh"},children:[g.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[g.jsxs("li",{className:r==="overview"?"active-nav":"",onClick:q=>{q.stopPropagation(),i("overview"),E(v,d,_.id,!0),E(m,f,_.id,!0)},children:["Overview (",((F=_.steps)==null?void 0:F.length)||0," steps)"]}),g.jsx("li",{className:"sidebar-section-label",children:g.jsxs("span",{className:"collapsible-section",onClick:q=>{q.stopPropagation(),E(v,d,_.id)},children:[N?"":""," Steps"]})})]}),g.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,flex:1,overflowY:"auto"},children:!N&&((U=_.steps)==null?void 0:U.map((q,H)=>{const L=q.id||q._id||String(H),j=r==="steps"&&a===L;return g.jsxs("li",{className:`step-item ${j?"active-nav":""} ${(l[_.id]||[]).includes(L)?"completed":""}`,onClick:z=>{z.stopPropagation(),o&&o(L)},children:[g.jsxs("div",{className:"step-content",children:[g.jsx("span",{className:"step-icon",children:q.type==="form"?"":q.type==="pdf"?"":""}),g.jsxs("span",{className:"step-title",children:["Step ",H+1,": ",q.title]})]}),(l[_.id]||[]).includes(L)&&g.jsx("span",{className:"step-status",children:""})]},L)}))}),A&&g.jsx("div",{style:{borderTop:"1px solid #eee",padding:"8px 12px",flexShrink:0},children:g.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[g.jsx("li",{className:"sidebar-section-label",children:g.jsxs("span",{className:"collapsible-section",onClick:q=>{q.stopPropagation(),E(m,f,_.id)},children:[R?"":""," Support"]})}),!R&&g.jsxs("li",{className:`sidebar-support-item ${r==="comments"?"active-nav":""}`,onClick:q=>{q.stopPropagation(),i("comments")},children:[g.jsx("span",{className:"nav-icon",children:""}),g.jsx("span",{className:"nav-text",children:"Community Comments"})]})]})})]})]},_.id)})})]})},Y3=({application:t,completedSteps:e=[],onClick:n})=>{var r;return(r=t.steps)!=null&&r.length,e.length,g.jsx("div",{className:"application-card",onClick:n,children:g.jsxs("div",{className:"application-card-inner",children:[g.jsx("h3",{children:t.title}),g.jsx("p",{children:t.description}),t.rootDomain&&g.jsx("div",{className:"application-source",children:g.jsxs("small",{children:["Source: ",t.rootDomain]})})]})})},K3=({onApplicationSelect:t})=>{const[e,n]=D.useState([]),[r,i]=D.useState({}),[s,o]=D.useState(!0),{user:a}=bn();return D.useEffect(()=>{async function l(){try{const u=await Tc(fi(Qe,"applications")),c={};u.forEach(d=>{c[d.id]={id:d.id,...d.data()}}),n(c)}catch(u){console.error("Failed to fetch applications:",u)}finally{o(!1)}}l()},[]),g.jsxs("div",{className:"application-card-grid",children:[g.jsx("h2",{className:"grid-title",children:"Select Your Application"}),g.jsxs("div",{className:"card-grid",children:[s&&g.jsx("p",{children:"Loading applications..."}),!s&&Object.keys(e).length===0&&g.jsx("p",{children:"No applications available at this time."}),!s&&Object.values(e).map(l=>g.jsx(Y3,{application:l,onClick:()=>t(l)},l.id))]})]})};function X3({steps:t=[]}){return g.jsx("div",{className:"application-steps",children:t.length>0&&g.jsxs("div",{className:"steps-section",children:[g.jsx("h3",{children:"How to Apply"}),g.jsx("ol",{className:"steps-list",children:t.map((e,n)=>g.jsx("li",{children:e.title},n))})]})})}function dp({onClick:t,disabled:e=!1,size:n="medium",variant:r="default",children:i="Report Issue"}){const s=`report-button report-button--${n} report-button--${r}`;return g.jsxs("button",{className:s,onClick:t,disabled:e,title:"Report an issue",children:[g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),g.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),g.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),i]})}const Q3="reports";async function J3(t){try{const n={...Object.fromEntries(Object.entries(t).filter(([i,s])=>s!=null)),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"open",assignedTo:null,resolution:null,resolvedAt:null};return(await jR(fi(Qe,Q3),n)).id}catch(e){throw console.error("Error submitting report:",e),new Error("Failed to submit report")}}function fp({isOpen:t,onClose:e,application:n,step:r=null,onReportSubmitted:i}){const{user:s}=bn(),[o,a]=D.useState({issueType:"general",description:"",severity:"medium"}),[l,u]=D.useState(!1),[c,d]=D.useState(""),f=async m=>{if(m.preventDefault(),!!o.description.trim()){u(!0),d("");try{console.log("ReportModal Debug:",{application:n,step:r,user:s,applicationId:n==null?void 0:n.id,userId:s==null?void 0:s.uid});const E={applicationId:n==null?void 0:n.id,applicationTitle:n==null?void 0:n.title,stepId:(r==null?void 0:r.id)||(r==null?void 0:r._id)||null,stepTitle:(r==null?void 0:r.title)||null,issueType:o.issueType,description:o.description.trim(),severity:o.severity,context:r?"step":"application",userId:s==null?void 0:s.uid,userEmail:s==null?void 0:s.email};if(!E.applicationId||!E.userId)throw console.error("Validation failed:",E),new Error("Missing required fields: applicationId or userId");if(!n||typeof n!="object")throw new Error("Invalid application object");if(!n.id)throw new Error("Application missing ID field");if(!s||!s.uid)throw new Error("User not authenticated");const y=await J3(E);d("success"),setTimeout(()=>{e(),i&&i({...E,id:y})},1500)}catch(E){console.error("Failed to submit report:",E),d("error")}finally{u(!1)}}},p=()=>{l||(a({issueType:"general",description:"",severity:"medium"}),d(""),e())},v=()=>r?`Report an issue with: ${r.title}`:`Report an issue with: ${n==null?void 0:n.title}`;return t?g.jsx("div",{className:"report-modal-overlay",onClick:p,children:g.jsxs("div",{className:"report-modal-content",onClick:m=>m.stopPropagation(),children:[g.jsxs("div",{className:"report-modal-header",children:[g.jsx("h3",{children:"Report an Issue"}),g.jsx("button",{className:"report-modal-close",onClick:p,disabled:l,children:""})]}),g.jsxs("div",{className:"report-issue-modal",children:[g.jsx("div",{className:"report-context",children:g.jsx("p",{children:v()})}),g.jsxs("form",{onSubmit:f,className:"report-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"issueType",children:"Issue Type"}),g.jsxs("select",{id:"issueType",value:o.issueType,onChange:m=>a(E=>({...E,issueType:m.target.value})),disabled:l,children:[g.jsx("option",{value:"general",children:"General Issue"}),g.jsx("option",{value:"outdated",children:"Outdated Information"}),g.jsx("option",{value:"broken",children:"Broken Link/Function"}),g.jsx("option",{value:"content",children:"Content Error"}),g.jsx("option",{value:"ui",children:"UI/UX Problem"}),g.jsx("option",{value:"other",children:"Other"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"severity",children:"Severity"}),g.jsxs("select",{id:"severity",value:o.severity,onChange:m=>a(E=>({...E,severity:m.target.value})),disabled:l,children:[g.jsx("option",{value:"low",children:"Low - Minor inconvenience"}),g.jsx("option",{value:"medium",children:"Medium - Affects usability"}),g.jsx("option",{value:"high",children:"High - Blocks progress"}),g.jsx("option",{value:"critical",children:"Critical - Cannot proceed"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"description",children:"Description *"}),g.jsx("textarea",{id:"description",value:o.description,onChange:m=>a(E=>({...E,description:m.target.value})),placeholder:"Please describe the issue you encountered...",rows:4,required:!0,disabled:l})]}),c==="success"&&g.jsx("div",{className:"status-message success",children:" Report submitted successfully! Thank you for your feedback."}),c==="error"&&g.jsx("div",{className:"status-message error",children:" Failed to submit report. Please try again."}),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{type:"button",onClick:p,disabled:l,className:"btn-secondary",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:l||!o.description.trim(),className:"btn-primary",children:l?"Submitting...":"Submit Report"})]})]})]})]})}):null}function Z3({application:t}){const[e,n]=D.useState(!1),{user:r}=bn();if(!t)return null;const i=()=>{r&&n(!0)},s=o=>{console.log("Report submitted:",o)};return g.jsxs("div",{className:"application-view",children:[g.jsxs("div",{className:"application-header",children:[g.jsxs("div",{className:"header-content",children:[g.jsx("h2",{children:t.title}),g.jsx("p",{children:t.description})]}),r&&g.jsx("div",{className:"header-actions",children:g.jsx(dp,{onClick:i,size:"medium",variant:"outline",children:"Report Issue"})})]}),t.steps&&g.jsx(X3,{steps:t.steps}),g.jsx(fp,{isOpen:e,onClose:()=>n(!1),application:t,onReportSubmitted:s})]})}const ez=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,i]=D.useState("login"),[s,o]=D.useState({name:"",email:"",password:"",confirmPassword:""}),[a,l]=D.useState({}),[u,c]=D.useState(!1),[d,f]=D.useState(!1),[p,v]=D.useState(!1);D.useEffect(()=>(t?(getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="hidden"),i("login"),v(!1),l({})):getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="unset"),()=>{getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="unset")}),[t]),D.useEffect(()=>{const R=x=>{x.key==="Escape"&&t&&e()};return t&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[t,e]);const m=R=>{const{name:x,value:w}=R.target;o(C=>({...C,[x]:w})),a[x]&&l(C=>({...C,[x]:""}))},E=()=>{const R={};return r==="signup"&&(s.name.trim()?s.name.trim().length<2&&(R.name="Name must be at least 2 characters"):R.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(R.email="Please enter a valid email"):R.email="Email is required",s.password?s.password.length<6&&(R.password="Password must be at least 6 characters"):R.password="Password is required",r==="signup"&&(s.confirmPassword?s.password!==s.confirmPassword&&(R.confirmPassword="Passwords do not match"):R.confirmPassword="Please confirm your password"),l(R),Object.keys(R).length===0},y=async R=>{if(R.preventDefault(),!!E()){c(!0);try{if(r==="login")await KI(Aa,s.email,s.password),n(),e();else{const w=(await gj(Aa,s.email,s.password)).user;await mj(w,{displayName:s.name.trim()}),await li(yt(Qe,"users",w.uid),{email:w.email,displayName:s.name.trim(),createdAt:new Date().toISOString()}),n(),e()}}catch(x){let w="An error occurred. Please try again.";switch(x.code){case"auth/user-not-found":w="No account found with this email.";break;case"auth/wrong-password":w="Incorrect password.";break;case"auth/email-already-in-use":w="An account with this email already exists.";break;case"auth/weak-password":w="Password is too weak.";break;case"auth/invalid-email":w="Invalid email address.";break;default:w=x.message}l({general:w})}finally{c(!1)}}},_=()=>{i(r==="login"?"signup":"login"),o({name:"",email:"",password:"",confirmPassword:""}),l({}),v(!1)},S=async R=>{if(R.preventDefault(),!s.email){l({email:"Please enter your email address to reset your password"});return}if(!/\S+@\S+\.\S+/.test(s.email)){l({email:"Please enter a valid email address"});return}c(!0);try{await pj(Aa,s.email),v(!0),l({})}catch(x){let w="An error occurred. Please try again.";switch(x.code){case"auth/user-not-found":w="No account found with this email address.";break;case"auth/invalid-email":w="Please enter a valid email address.";break;case"auth/too-many-requests":w="Too many attempts. Please try again later.";break;default:w=x.message}l({email:w})}finally{c(!1)}},b=()=>{console.log("Going back to login from mode:",r),v(!1),l({}),i("login")},N=()=>{console.log("Switching to reset mode from:",r),i("reset"),l({}),v(!1)};return t?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"auth-modal-backdrop",onClick:e}),g.jsx("div",{className:"auth-modal",children:g.jsxs("div",{className:"auth-modal-content",children:[g.jsx("button",{className:"auth-modal-close",onClick:e,children:g.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),g.jsxs("div",{className:"auth-modal-header",children:[g.jsx("div",{className:"auth-modal-logo",children:g.jsx("div",{className:"auth-modal-logo-icon",children:g.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})})}),g.jsx("h2",{className:"auth-modal-title",children:r==="login"?"Welcome Back":"Create Account"}),g.jsx("p",{className:"auth-modal-subtitle",children:r==="login"?"Sign in to continue your MEHKO application journey":"Join our community and start your MEHKO application"})]}),g.jsxs("form",{onSubmit:y,className:"auth-modal-form",children:[r==="signup"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),g.jsxs("div",{className:"input-wrapper",children:[g.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),g.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),g.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:m,className:`form-input ${a.name?"error":""}`,placeholder:"Enter your full name"})]}),a.name&&g.jsx("span",{className:"error-message",children:a.name})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),g.jsxs("div",{className:"input-wrapper",children:[g.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),g.jsx("polyline",{points:"22,6 12,13 2,6"})]}),g.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:m,className:`form-input ${a.email?"error":""}`,placeholder:"Enter your email address"})]}),a.email&&g.jsx("span",{className:"error-message",children:a.email})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),g.jsxs("div",{className:"input-wrapper",children:[g.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),g.jsx("circle",{cx:"12",cy:"16",r:"1"}),g.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),g.jsx("input",{id:"password",name:"password",type:d?"text":"password",value:s.password,onChange:m,className:`form-input ${a.password?"error":""}`,placeholder:"Enter your password"}),g.jsx("button",{type:"button",className:"password-toggle",onClick:()=>f(!d),children:g.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d?g.jsxs(g.Fragment,{children:[g.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):g.jsxs(g.Fragment,{children:[g.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),g.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]}),a.password&&g.jsx("span",{className:"error-message",children:a.password})]}),r==="login"&&g.jsx("div",{className:"forgot-password-section",children:g.jsx("button",{type:"button",onClick:N,className:"forgot-password-link",children:"Forgot your password?"})}),r==="signup"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),g.jsxs("div",{className:"input-wrapper",children:[g.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),g.jsx("circle",{cx:"12",cy:"16",r:"1"}),g.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),g.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:m,className:`form-input ${a.confirmPassword?"error":""}`,placeholder:"Confirm your password"})]}),a.confirmPassword&&g.jsx("span",{className:"error-message",children:a.confirmPassword})]}),a.general&&g.jsxs("div",{className:"error-banner",children:[g.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("circle",{cx:"12",cy:"12",r:"10"}),g.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),g.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),g.jsx("span",{children:a.general})]}),g.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:u,children:u?g.jsxs("div",{className:"loading-spinner",children:[g.jsx("div",{className:"spinner"}),g.jsx("span",{children:"Processing..."})]}):r==="login"?"Sign In":"Create Account"})]}),r==="reset"&&g.jsx("div",{className:"password-reset-section",children:p?g.jsxs("div",{className:"reset-success",children:[g.jsx("div",{className:"success-icon",children:g.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),g.jsx("polyline",{points:"22,4 12,14.01 9,11.01"})]})}),g.jsx("h3",{className:"success-title",children:"Check Your Email"}),g.jsxs("p",{className:"success-message",children:["We've sent a password reset link to ",g.jsx("strong",{children:s.email})]}),g.jsx("p",{className:"success-note",children:"Please check your email and click the link to reset your password. If you don't see it, check your spam folder."})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"reset-header",children:[g.jsx("h3",{className:"reset-title",children:"Reset Your Password"}),g.jsx("p",{className:"reset-subtitle",children:"Enter your email address and we'll send you a link to reset your password."})]}),g.jsxs("form",{onSubmit:S,className:"reset-form",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{htmlFor:"resetEmail",className:"form-label",children:"Email Address"}),g.jsxs("div",{className:"input-wrapper",children:[g.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),g.jsx("polyline",{points:"22,6 12,13 2,6"})]}),g.jsx("input",{id:"resetEmail",name:"email",type:"email",value:s.email,onChange:m,className:`form-input ${a.email?"error":""}`,placeholder:"Enter your email address"})]}),a.email&&g.jsx("span",{className:"error-message",children:a.email})]}),g.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:u,children:u?g.jsxs("div",{className:"loading-spinner",children:[g.jsx("div",{className:"spinner"}),g.jsx("span",{children:"Sending..."})]}):"Send Reset Link"})]})]})}),g.jsx("div",{className:"auth-modal-footer",children:r==="reset"?g.jsx("div",{className:"reset-footer",children:g.jsxs("button",{type:"button",onClick:b,className:"back-to-login-btn",children:[g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Sign In"]})}):g.jsxs("p",{className:"auth-modal-switch",children:[r==="login"?"Don't have an account?":"Already have an account?",g.jsx("button",{type:"button",onClick:_,className:"switch-btn",children:r==="login"?"Sign up":"Sign in"})]})})]})})]}):null};function tz(){const{user:t,logout:e,isAdmin:n}=bn(),{isOpen:r,openAuthModal:i,closeAuthModal:s}=UR(),o=async()=>{await e()},a=()=>{};return g.jsxs("header",{className:"app-header",children:[g.jsxs("div",{className:"header-content",children:[g.jsx("div",{className:"header-left",children:g.jsxs("div",{className:"logo-section",onClick:()=>window.location.reload(),children:[g.jsxs("h1",{className:"app-title",children:[g.jsx("span",{className:"app-icon",children:""}),"MEHKO.ai"]}),g.jsx("p",{className:"app-tagline",children:"MEHKO Applications Made Simple"})]})}),g.jsx("div",{className:"header-right",children:t?g.jsxs("div",{className:"user-section",children:[n&&g.jsxs(Uu,{to:"/admin",className:"admin-dashboard-link",children:[g.jsx("span",{className:"admin-icon",children:""}),g.jsx("span",{className:"admin-text",children:"Admin Dashboard"})]}),g.jsxs("div",{className:"user-info",children:[g.jsx("span",{className:"user-avatar",children:t.displayName?t.displayName.charAt(0).toUpperCase():t.email.charAt(0).toUpperCase()}),g.jsx("span",{className:"user-name",children:t.displayName||t.email})]}),g.jsxs("button",{onClick:o,className:"logout-button",children:[g.jsx("span",{className:"button-icon",children:""}),g.jsx("span",{className:"button-text",children:"Log Out"})]})]}):g.jsx("div",{className:"auth-section",children:g.jsxs("button",{onClick:i,className:"auth-button",children:[g.jsx("span",{className:"button-icon",children:""}),"Sign In"]})})})]}),g.jsx(ez,{isOpen:r,onClose:s,onSuccess:a})]})}async function nz(t,e,n){const r=yt(Qe,"users",t,"aiChats",e);await li(r,{messages:n},{merge:!0})}async function rz(t,e){const n=yt(Qe,"users",t,"aiChats",e),r=await ai(n);return r.exists()?r.data().messages:[]}async function iz(t,e,n,r){const i=yt(Qe,"users",t,"formProgress",e);await li(i,{[n]:r},{merge:!0})}async function $R(t,e,n){const r=yt(Qe,"users",t,"formProgress",e),i=await ai(r);return i.exists()?i.data()[n]||{}:{}}async function sz(t,e,n,r){const i=yt(Qe,"users",t,"formProgress",e);await li(i,{[n]:r},{merge:!0})}async function Hy(t,e,n="form"){if(!t||!e){console.warn("pinApplication: Missing required parameters",{userId:t,applicationId:e});return}const r=yt(Qe,"users",t,"pinnedApplications",e);await li(r,{pinnedAt:new Date,triggeredBy:n},{merge:!0})}async function oz(t,e){if(!t||!e){console.warn("unpinApplication: Missing required parameters",{userId:t,applicationId:e});return}const n=yt(Qe,"users",t,"pinnedApplications",e);await U3(n)}const GR=location.hostname==="localhost"?"http://127.0.0.1:8000":"https://api.mehko.ai",Wy=t=>{const e=t.startsWith("/api")?t:`/api${t}`;return`${GR}${e}`};var xx,Tx;const az=(((Tx=(xx=import.meta)==null?void 0:xx.env)==null?void 0:Tx.VITE_API_URL)||"").trim()||(GR||"").trim()||"http://127.0.0.1:8000",Pn={PYTHON_API:az},zn=(t,e)=>`${t}${e}`,qy={APPS:(t=Pn.PYTHON_API)=>zn(t,"/api/apps"),APP_BY_ID:(t=Pn.PYTHON_API,e)=>zn(t,`/api/apps/${encodeURIComponent(e)}`),AI_CHAT:(t=Pn.PYTHON_API)=>zn(t,"/api/ai-chat"),AI_ANALYZE_PDF:(t=Pn.PYTHON_API)=>zn(t,"/api/ai-analyze-pdf"),FORM_FIELDS:(t=Pn.PYTHON_API)=>zn(t,"/api/form-fields"),FILL_PDF:(t=Pn.PYTHON_API)=>zn(t,"/api/fill-pdf"),PROCESS_COUNTY:(t=Pn.PYTHON_API)=>zn(t,"/api/admin/process-county"),GET_COUNTIES:(t=Pn.PYTHON_API)=>zn(t,"/api/admin/counties"),DELETE_COUNTY:(t=Pn.PYTHON_API,e)=>zn(t,`/api/admin/county/${encodeURIComponent(e)}`),CREATE_ACROFORM:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/create-acroform`),GET_ACROFORM_DEFINITION:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/acroform-definition`),GET_ACROFORM_PDF:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/acroform-pdf`),GET_PDF:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/pdf`),FILL_PDF_FORM:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/fill`)},hp=(t="default")=>Pn.PYTHON_API,Ed=hp("python"),lz=qy.AI_CHAT(),uz=()=>g.jsxs("div",{className:"ai-chat__loading-spinner",children:[g.jsxs("div",{className:"ai-chat__spinner-dots",children:[g.jsx("div",{className:"ai-chat__spinner-dot"}),g.jsx("div",{className:"ai-chat__spinner-dot"}),g.jsx("div",{className:"ai-chat__spinner-dot"})]}),g.jsx("div",{className:"ai-chat__loading-text",children:"AI is thinking..."})]}),cz=t=>t.replace(/\*\s*\n\s*\*/g,`
`).replace(/\n\s*\*\s*\n/g,`
`).replace(/\*\s*:/g,":").replace(/\n{3,}/g,`

`).replace(/\s+\n/g,`
`).replace(/\n\s+/g,`
`).replace(/([.!?])\s+([A-Z][a-z])/g,`$1

$2`).replace(/([.!?])\s+([A-Z][A-Z\s]+:)/g,`$1

$2`).replace(/(\d+\.)\s+/g,`
$1 `).replace(/(^|\n)([*-])\s*/g,"$1$2 ").trim();function _S({application:t,currentStep:e,currentStepId:n,completedStepIds:r=[],context:i=null}){const{user:s}=bn(),[o,a]=D.useState([]),[l,u]=D.useState(""),[c,d]=D.useState(!1),[f,p]=D.useState(null),v=D.useRef(null),[m,E]=D.useState({}),[y,_]=D.useState({}),[S,b]=D.useState({}),[N,R]=D.useState({}),[x,w]=D.useState(!1),[C,I]=D.useState(!1);D.useEffect(()=>{if(i&&i.subStepText){const L=`I need help with this sub-step: "${i.subStepText}". Can you provide more detailed guidance?`;u(L)}},[i]);const A=D.useMemo(()=>((t==null?void 0:t.steps)||[]).map(j=>{const z=j.id||j._id;return{...j,_id:z,isComplete:r.includes(z)}}),[t==null?void 0:t.steps,r]),O=D.useMemo(()=>((t==null?void 0:t.steps)||[]).filter(L=>L.type==="pdf"&&L.formId),[t==null?void 0:t.steps]);D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const L={};for(const j of t.steps)if(j.type==="pdf"&&j.formId)try{const z=await fetch(`${Ed}/api/apps/${t.id}/forms/${j.formId}/template`);if(!z.ok){console.warn(`Form template not found for ${j.formId} (${z.status}) - this is normal if the form hasn't been uploaded yet`);continue}const $=z.headers.get("content-type");if(!$||!$.includes("application/json")){console.warn(`Form template for ${j.formId} returned non-JSON content (${$}) - skipping`);continue}const K=await z.json();L[j.formId]=K.fields||[]}catch(z){console.error("overlay fetch failed:",j.formId,z)}E(L)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid)||!(t!=null&&t.steps))return;const L={};for(const j of t.steps)if(j.type==="pdf"&&j.formId)try{const z=await $R(s.uid,t.id,j.formId);L[j.formId]=z||{}}catch(z){console.error("loadFormData failed:",j.formId,z)}_(L)})()},[s==null?void 0:s.uid,t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const L={},j={};for(const z of t.steps)if(z.type==="pdf"&&z.formId){try{const $=`${Ed}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(z.formId)}/text`;console.log(`Fetching PDF text from: ${$}`);const K=await fetch($);if(K.ok){const J=K.headers.get("content-type");if(!J||!J.includes("application/json")){console.warn(`PDF text for ${z.formId} returned non-JSON content (${J}) - skipping`);continue}const te=await K.json();L[z.formId]=Array.isArray(te.pages)?te.pages.join(`

---

`):"",console.log(`Successfully loaded text for form: ${z.formId}`)}else console.log(`Form ${z.formId} not found on server (${K.status}) - this is normal if the form hasn't been uploaded yet`)}catch($){console.log(`Could not fetch text for form ${z.formId}: ${$.message}`)}j[z.formId]={title:z.title||z.formId,url:`${Ed}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(z.formId)}/pdf?inline=0`,previewBase:`${Ed}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(z.formId)}/preview-page?page=`}}b(L),R(j)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{!s||!(t!=null&&t.id)||rz(s.uid,t.id).then(L=>{L!=null&&L.length?a(L):a([{sender:"ai",text:`Welcome! I'm here to help with ${t.title}. 

IMPORTANT: This app tracks your MEHKO application progress and provides guidance. You'll need to:
 Fill out PDF forms directly in the dashboard for most steps
 Download completed forms to print and sign if needed
 Mark steps complete once forms are finished

Ask me anything or pick a quick task above!`,timestamp:new Date},{sender:"ai",text:" Note: While I aim to provide accurate information, please verify important details with official sources as I may occasionally make mistakes.",timestamp:new Date}])})},[s==null?void 0:s.uid,t==null?void 0:t.id]),D.useEffect(()=>{var L;(L=v.current)==null||L.scrollIntoView({behavior:"smooth"})},[o]);const P=[{title:"What should I do next?",prompt:"What's the next step I should complete in my MEHKO application?"},{title:"Help with current step",prompt:"I'm currently on this step. What do I need to do?"},{title:"Form completion help",prompt:"I need help filling out a form. What should I know?"},{title:"Application overview",prompt:"Give me an overview of the entire MEHKO application process."}],F=f?[{title:`Complete ${f.title}`,prompt:`I want to complete the ${f.title} form. What do I need to do?`},{title:"Form field help",prompt:`I'm confused about some fields in the ${f.title} form. Can you help?`},{title:"Form submission",prompt:`How do I submit the completed ${f.title} form?`}]:[],U=async(L,j=null)=>{if(!(L!=null&&L.trim()))return;const $={sender:"user",text:j?`[Form: ${j.title}] ${L}`:L,timestamp:new Date},K=[...o,$];a(K),u(""),d(!0);try{const te=await(await fetch(lz,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:K.map(ue=>({role:ue.sender==="ai"?"assistant":"user",content:ue.text})),applicationId:t.id,context:{application:{id:t.id,title:t.title,rootDomain:t.rootDomain},steps:A,currentStep:e,currentStepId:n,completedStepIds:r,comments:t.comments||[],overlays:m,formData:y,pdfText:S,pdfLinks:N,selectedForm:j?{...j,pdfContent:S[j.formId]||null}:null,workflow:{description:"This is a MEHKO application tracking system. Users fill out PDF forms directly in the dashboard for most steps, then download completed forms to print and sign if needed. The app provides interactive form completion and tracks progress.",formProcess:"Forms are filled out directly in the dashboard using interactive PDF viewers. Completed forms can be downloaded for printing and signing.",appPurpose:"The app tracks application progress, provides interactive form completion, and helps users understand requirements - it handles most of the form completion process directly."}}})})).json(),ie={sender:"ai",text:cz(te.reply||"Sorry, I don't have a response right now."),timestamp:new Date},X=[...K,ie];a(X),await nz(s.uid,t.id,X),await Hy(s.uid,t.id,"ai")}catch(J){console.error(J),a(te=>[...te,{sender:"ai",text:"Oops, something went wrong.",timestamp:new Date}])}finally{d(!1)}},q=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),U(l,f))};function H(){return O.length?g.jsxs("div",{className:"ai-chat__form-actions",children:[g.jsxs("button",{className:"ai-chat__section-toggle",onClick:()=>w(!x),children:[g.jsx("span",{className:"ai-chat__section-toggle-icon",children:x?"":""}),g.jsx("span",{className:"ai-chat__section-toggle-text",children:"Form-Specific Help"}),g.jsxs("span",{className:"ai-chat__section-toggle-count",children:["(",O.length,")"]})]}),g.jsx("div",{className:`ai-chat__form-actions-content ${x?"expanded":"collapsed"}`,children:g.jsx("div",{className:"ai-chat__form-actions-grid",children:O.map(L=>g.jsxs("div",{className:"ai-chat__form-card",children:[g.jsxs("div",{className:"ai-chat__form-card-header",children:[g.jsx("h4",{children:L.title}),g.jsx("button",{className:`ai-chat__form-select-btn ${(f==null?void 0:f.formId)===L.formId?"active":""}`,onClick:()=>p((f==null?void 0:f.formId)===L.formId?null:L),children:(f==null?void 0:f.formId)===L.formId?" Selected":"Select Form"})]}),(f==null?void 0:f.formId)===L.formId&&g.jsxs("div",{className:"ai-chat__form-card-content",children:[g.jsx("div",{className:"ai-chat__form-quick-tasks",children:F.map((j,z)=>g.jsx("button",{className:"ai-chat__form-task-btn",onClick:()=>U(j.prompt,L),children:j.title},z))}),g.jsxs("div",{className:"ai-chat__form-actions-buttons",children:[g.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const j=N[L.formId];j&&window.open(j.url,"_blank","noopener,noreferrer")},children:" Open PDF"}),g.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const j=N[L.formId];j&&window.open(j.previewBase+"0","_blank","noopener,noreferrer")},children:" Preview"})]})]})]},L.formId))})})]}):null}return s?g.jsxs("div",{className:"ai-chat",children:[g.jsxs("div",{className:"ai-chat__header",children:[g.jsx("div",{className:"ai-chat__avatar",children:""}),g.jsxs("div",{className:"ai-chat__title",children:[g.jsxs("div",{className:"ai-chat__welcome",children:["Welcome back",s!=null&&s.displayName?`, ${s.displayName}`:"","!"]}),g.jsxs("div",{className:"ai-chat__subtitle",children:["Let's work on ",g.jsx("strong",{children:t==null?void 0:t.title}),"."]})]})]}),g.jsxs("div",{className:"ai-chat__content",children:[g.jsx(H,{}),g.jsxs("div",{className:"ai-chat__guide-card",children:[g.jsxs("button",{className:"ai-chat__section-toggle",onClick:()=>I(!C),children:[g.jsx("span",{className:"ai-chat__section-toggle-icon",children:C?"":""}),g.jsx("span",{className:"ai-chat__section-toggle-text",children:"General Tasks I can assist you with"}),g.jsxs("span",{className:"ai-chat__section-toggle-count",children:["(",P.length,")"]})]}),g.jsx("div",{className:`ai-chat__guide-content ${C?"expanded":"collapsed"}`,children:g.jsx("ul",{className:"ai-chat__guide-list",children:P.map(L=>g.jsx("li",{children:g.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>U(L.prompt),children:L.title})},L.title))})})]}),f&&g.jsxs("div",{className:"ai-chat__form-context",children:[g.jsxs("div",{className:"ai-chat__form-context-header",children:[g.jsxs("span",{children:[" Working on: ",g.jsx("strong",{children:f.title})]}),g.jsx("button",{className:"ai-chat__form-context-clear",onClick:()=>p(null),children:" Clear"})]}),g.jsx("div",{className:"ai-chat__form-context-info",children:"Ask me anything specific about this form. I'll provide targeted help based on the form content and your progress."})]}),g.jsxs("div",{className:"ai-chat__history",children:[o.map((L,j)=>{var z,$;return g.jsxs("div",{className:`chat-msg ${L.sender}`,children:[g.jsx("div",{className:"chat-bubble",children:L.text}),g.jsx("div",{className:"timestamp",children:((($=(z=L.timestamp)==null?void 0:z.toDate)==null?void 0:$.call(z))||new Date(L.timestamp)).toLocaleTimeString()})]},j)}),c&&g.jsx("div",{className:"chat-msg ai",children:g.jsx("div",{className:"chat-bubble",children:g.jsx(uz,{})})}),g.jsx("div",{ref:v})]})]}),g.jsxs("div",{className:"ai-chat__composer",children:[g.jsx("div",{className:"ai-chat__disclaimer",children:g.jsx("small",{children:"AI responses may contain inaccuracies. Please verify important information with official sources."})}),g.jsxs("div",{className:"ai-chat__input-section",children:[f&&g.jsxs("div",{className:"ai-chat__form-guidance",children:[g.jsx("strong",{children:" Form Guidance:"})," You're working on the"," ",g.jsx("strong",{children:f.title}),". Fill out this form directly in the dashboard, then download the completed PDF to print and sign if needed."]}),g.jsxs("div",{className:"ai-chat__input-container",children:[g.jsx("textarea",{placeholder:f?`Ask about ${f.title}... (e.g., "What does this field mean?")`:'Ask Orion (e.g., "What should I do next?")',value:l,onChange:L=>u(L.target.value),onKeyDown:q,disabled:c}),g.jsx("button",{onClick:()=>U(l,f),disabled:!l.trim()||c,children:c?"":"Send"})]})]})]})]}):g.jsx("p",{className:"ai-chat__login",children:"Please log in to use this feature."})}async function Ig(t){const e=fi(Qe,"applications",t,"comments"),n=V3(e,F3("timestamp","asc"));return(await Tc(n)).docs.map(i=>({id:i.id,...i.data()}))}async function dz(t,e){const n=fi(Qe,"applications",t,"comments");await jR(n,{...e,timestamp:cp(),reactions:{}})}async function fz(t,e,n,r){const i=fi(Qe,"applications",t,"comments"),s=yt(i,e),o=await ai(s);if(!o.exists())return;((o.data().reactions||{})[n]||[]).includes(r)||await Po(s,{[`reactions.${n}`]:$y(r)})}async function hz(t,e,n,r){const i=fi(Qe,"applications",t,"comments"),s=yt(i,e);await Po(s,{[`reactions.${n}`]:Gy(r)})}const wS=["","","","","","","",""];function pz({application:t,context:e=null}){const[n,r]=D.useState([]),[i,s]=D.useState(""),[o,a]=D.useState(null),{user:l}=bn(),u=D.useRef(null);D.useEffect(()=>{t!=null&&t.id&&Ig(t.id).then(r)},[t==null?void 0:t.id]),D.useEffect(()=>{if(e&&e.subStepText){const v=`Question/comment about this sub-step: "${e.subStepText}"

`;s(v)}},[e]),D.useEffect(()=>{const v=m=>{u.current&&!u.current.contains(m.target)&&a(null)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]);const c=async v=>{v.preventDefault(),i.trim()&&(await dz(t.id,{text:i,userId:(l==null?void 0:l.uid)||"anon",displayName:(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Anonymous",userEmail:(l==null?void 0:l.email)||"anonymous@example.com"}),s(""),Ig(t.id).then(r))},d=async(v,m)=>{var _,S;if(!l)return;const E=n.find(b=>b.id===v);((S=(_=E==null?void 0:E.reactions)==null?void 0:_[l.uid])==null?void 0:S.includes(m))?await hz(t.id,v,l.uid,m):await fz(t.id,v,l.uid,m),Ig(t.id).then(r)},f=(v,m)=>v?Object.values(v).flat().filter(E=>E===m).length:0,p=(v,m)=>{var E;return!v||!l?!1:((E=v[l.uid])==null?void 0:E.includes(m))||!1};return g.jsxs("div",{className:"comments-section",children:[g.jsx("h3",{className:"comments-title",children:"Community Comments"}),l?g.jsxs("form",{className:"comment-form",onSubmit:c,children:[g.jsx("div",{className:"comment-form-header",children:g.jsxs("span",{className:"comment-author-label",children:["Commenting as: ",g.jsx("strong",{children:l.displayName||l.email})]})}),g.jsx("textarea",{className:"comment-textarea",value:i,onChange:v=>s(v.target.value),placeholder:"Share your experience or ask a question..."}),g.jsx("button",{type:"submit",disabled:!i.trim(),className:"submit-btn",children:"Submit Comment"})]}):g.jsx("p",{className:"comments-login-msg",children:"Please log in to leave a comment."}),g.jsx("ul",{className:"comment-list",children:n.map(v=>{var m;return g.jsxs("li",{className:"comment-item",children:[g.jsxs("div",{className:"comment-header",children:[g.jsx("span",{className:"comment-author",children:v.displayName}),g.jsx("span",{className:"comment-timestamp",children:(m=v.timestamp)!=null&&m.toDate?new Date(v.timestamp.toDate()).toLocaleDateString():"Recently"})]}),g.jsx("p",{className:"comment-text",children:v.text}),g.jsxs("div",{className:"comment-reactions",children:[o===v.id&&g.jsx("div",{className:"emoji-picker",ref:u,children:wS.map(E=>g.jsx("button",{className:`emoji-option ${p(v.reactions,E)?"active":""}`,onClick:()=>{d(v.id,E),a(null)},title:E,children:E},E))}),g.jsx("button",{className:"emoji-trigger-btn",onClick:()=>a(o===v.id?null:v.id),title:"Add reaction",children:""}),wS.map(E=>{const y=f(v.reactions,E);return y===0?null:g.jsxs("div",{className:"reaction-display",children:[g.jsx("span",{className:"emoji",children:E}),g.jsx("span",{className:"count",children:y})]},E)})]})]},v.id)})})]})}function Yy(t,e){const[n,r]=D.useState([]),[i,s]=D.useState(!1);D.useEffect(()=>{if(!t||!e){r([]);return}s(!0);const u=yt(Qe,"users",t,"applicationProgress",e),c=rh(u,d=>{r(d.exists()?d.data().completedStepIds||[]:[]),s(!1)},()=>s(!1));return()=>c()},[t,e]);const o=D.useCallback(async()=>{if(!t||!e)return null;const u=yt(Qe,"users",t,"applicationProgress",e);return(await ai(u)).exists()||await li(u,{completedStepIds:[]}),u},[t,e]),a=D.useCallback(async u=>{if(!t||!e||!u)return;const c=await o();c&&await Po(c,{completedStepIds:$y(u)})},[t,e,o]),l=D.useCallback(async u=>{if(!t||!e||!u)return;const c=await o();c&&await Po(c,{completedStepIds:Gy(u)})},[t,e,o]);return{completedSteps:n,loading:i,markStepComplete:a,markStepIncomplete:l}}async function Ky(t,e,n,r){try{const i=yt(Qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback",r),s=await ai(i);return s.exists()?s.data():{liked:!1,disliked:!1,timestamp:null}}catch(i){return console.error("Error fetching sub-step feedback:",i),{liked:!1,disliked:!1,timestamp:null}}}async function HR(t,e,n,r,i){try{const s=yt(Qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback",r);return await li(s,{...i,updatedAt:cp()},{merge:!0}),!0}catch(s){throw console.error("Error updating sub-step feedback:",s),s}}async function gz(t,e,n,r){try{const s={liked:!(await Ky(t,e,n,r)).liked,disliked:!1,timestamp:cp()};return await HR(t,e,n,r,s),s}catch(i){throw console.error("Error toggling sub-step like:",i),i}}async function vz(t,e,n,r){try{const s={liked:!1,disliked:!(await Ky(t,e,n,r)).disliked,timestamp:cp()};return await HR(t,e,n,r,s),s}catch(i){throw console.error("Error toggling sub-step dislike:",i),i}}async function mz(t,e,n){try{const r=fi(Qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback"),i=await Tc(r);let s=0,o=0;return i.forEach(a=>{const l=a.data();l.liked&&s++,l.disliked&&o++}),{totalLikes:s,totalDislikes:o,totalFeedback:i.size}}catch(r){return console.error("Error fetching sub-step feedback stats:",r),{totalLikes:0,totalDislikes:0,totalFeedback:0}}}function ES({subStepText:t,stepId:e,applicationId:n,application:r,step:i,onCommentRequest:s,subStepIndex:o}){const{user:a}=bn(),[l,u]=D.useState(!1),[c,d]=D.useState(!1),[f,p]=D.useState(!1),[v,m]=D.useState({totalLikes:0,totalDislikes:0});D.useEffect(()=>{a!=null&&a.uid&&n&&e&&o!==void 0&&E()},[a==null?void 0:a.uid,n,e,o]);const E=async()=>{console.log(" Debug - Loading feedback:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid});try{const R=await Ky(n,e,o,a.uid);u(R.liked||!1),d(R.disliked||!1);const x=await mz(n,e,o);m(x)}catch(R){console.error(" Error loading feedback:",R)}},y=()=>{let R="";i!=null&&i.searchTerms&&Array.isArray(i.searchTerms)&&i.searchTerms.length>0?R=i.searchTerms[0]:t?R=t.length>100?t.substring(0,100)+"...":t:R="MEHKO application";let x="";r!=null&&r.title&&(r.title.toLowerCase().includes("los angeles")?x="Los Angeles County":r.title.toLowerCase().includes("san diego")?x="San Diego County":r.title.toLowerCase().includes("alameda")?x="Alameda County":r.title.toLowerCase().includes("santa barbara")?x="Santa Barbara County":r.title.toLowerCase().includes("sonoma")?x="Sonoma County":r.title.toLowerCase().includes("county")&&(x=r.title)),!x&&(r!=null&&r.id)&&(x=r.id.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase())),x||(x="MEHKO");let w=R;x&&R.toLowerCase().includes(x.toLowerCase())?w=R:w=`${x} ${R}`;const I=`https://www.google.com/search?q=${encodeURIComponent(w)}`;window.open(I,"_blank","noopener,noreferrer")},_=()=>{if(s){const R=i!=null&&i.searchTerms&&Array.isArray(i.searchTerms)&&i.searchTerms.length>0?i.searchTerms.join(", "):t;s({type:"ai_chat",subStepText:R,stepId:e,applicationId:n})}},S=async()=>{if(!a||f)return;console.log(" Debug - Like clicked:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid}),p(!0);const R=setTimeout(()=>{console.warn(" Like operation timed out after 5 seconds"),p(!1)},5e3);try{const x=await gz(n,e,o,a.uid);u(x.liked),d(x.disliked),x.liked?m(w=>({...w,totalLikes:w.totalLikes+1,totalDislikes:w.totalDislikes>0?w.totalDislikes-1:0})):m(w=>({...w,totalLikes:w.totalLikes>0?w.totalLikes-1:0}))}catch(x){console.error(" Error toggling like:",x),u(!l)}finally{clearTimeout(R),p(!1)}},b=async()=>{if(!a||f)return;console.log(" Debug - Dislike clicked:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid}),p(!0);const R=setTimeout(()=>{console.warn(" Dislike operation timed out after 5 seconds"),p(!1)},5e3);try{const x=await vz(n,e,o,a.uid);u(x.liked),d(x.disliked),x.disliked?m(w=>({...w,totalDislikes:w.totalDislikes+1,totalLikes:w.totalLikes>0?w.totalLikes-1:0})):m(w=>({...w,totalDislikes:w.totalDislikes>0?w.totalDislikes-1:0}))}catch(x){console.error(" Error toggling dislike:",x),p(!1)}finally{clearTimeout(R),p(!1)}},N=()=>{a&&s&&s({type:"comment",subStepText:t,stepId:e,applicationId:n})};return g.jsxs("div",{className:"sub-step-actions",children:[g.jsxs("div",{className:"action-icons",children:[g.jsx("button",{className:"action-icon internet-icon",onClick:y,title:"Search the web (opens in new tab)",children:g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),g.jsx("button",{className:"action-icon ai-icon",onClick:_,title:"Ask AI for help with this step",children:g.jsx("span",{style:{fontSize:"16px"},children:""})})]}),g.jsxs("div",{className:"feedback-actions",children:[g.jsx("button",{className:`feedback-btn like-btn ${l?"active":""}`,onClick:S,disabled:f,title:"Like",children:f?g.jsx("div",{className:"loading-spinner"}):g.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})})}),g.jsx("button",{className:`feedback-btn dislike-btn ${c?"active":""}`,onClick:b,disabled:f,title:"Dislike",children:f?g.jsx("div",{className:"loading-spinner"}):g.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2z"})})}),g.jsx("button",{className:"feedback-btn comment-btn",onClick:N,title:"Add to community discussion",children:g.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21.99 4c0-1.1-.89-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})})]}),(v.totalLikes>0||v.totalDislikes>0)&&g.jsxs("div",{className:"feedback-counts",children:[v.totalLikes>0&&g.jsxs("span",{className:"count-item like-count",children:[g.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})}),v.totalLikes]}),v.totalDislikes>0&&g.jsxs("span",{className:"count-item dislike-count",children:[g.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2z"})}),v.totalDislikes]})]})]})}const bg=t=>{if(!t)return t;let e=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return e=e.replace(new RegExp("(?<!<strong>)\\*([^*]+?)\\*(?!<\\/strong>)","g"),"<em>$1</em>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e};function yz({step:t,applicationId:e,hideCompleteToggle:n,application:r,onCommentRequest:i}){const{user:s}=bn(),{completedSteps:o,markStepComplete:a,markStepIncomplete:l}=Yy(s==null?void 0:s.uid,e),[u,c]=D.useState(!1),d=t.id||t._id,f=o.includes(d),p=()=>{s&&(console.log("InfoStep Debug:",{step:t,application:r,user:s,stepId:d,applicationId:e}),c(!0))},v=S=>{console.log("Step report submitted:",S)},m=async()=>{if(!(!t.formId||t.type!=="pdf"))try{const S=await fetch(Wy(`/apps/${e}/forms/${t.formId}/pdf`));if(!S.ok)throw new Error("Failed to download PDF");const b=await S.blob(),N=window.URL.createObjectURL(b),R=document.createElement("a");R.href=N,R.download=`${e}_${t.formId}.pdf`,document.body.appendChild(R),R.click(),window.URL.revokeObjectURL(N),document.body.removeChild(R)}catch(S){console.error("Error downloading PDF:",S),alert("Failed to download PDF. Please try again.")}},E=S=>{if(!S)return[];const b=[],N=S.split(`
`);let R=null,x=[];return N.forEach((w,C)=>{const I=w.trim();I.startsWith("**")&&I.endsWith("**")&&!I.includes("Search terms for unclear parts")?(R&&b.push({...R,content:x.join(`
`).trim()}),R={title:I.replace(/\*\*/g,""),type:"section"},x=[]):I&&!I.startsWith("*Search:*")&&x.push(I)}),R&&b.push({...R,content:x.join(`
`).trim()}),b},y=(S,b)=>{const N=S.title==="What you need",R=S.title==="Cost & time",x=S.title==="Ready when",w=S.title==="Where/how",C=A=>A?A.split(`
`).map((O,P)=>{if(!O.trim())return null;const F=O.includes("website")||O.includes("visit")||O.includes("go to"),U=O.toLowerCase().includes("county")||O.toLowerCase().includes("deh")||O.toLowerCase().includes("acgov");return F||U?g.jsxs("div",{className:"actionable-content",children:[g.jsx("p",{className:"content-paragraph",children:O.trim()}),g.jsxs("div",{className:"action-buttons",children:[F&&g.jsx("button",{className:"action-button website-button",onClick:()=>{const q=(r==null?void 0:r.rootDomain)||"google.com";window.open(`https://${q}`,"_blank")},title:"Visit county website",children:" Visit Website"}),g.jsx("button",{className:"action-button search-button",onClick:()=>{let q="";r!=null&&r.title?q=r.title:r!=null&&r.id?q=r.id.replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase()):q="MEHKO";let H="";t!=null&&t.searchTerms&&Array.isArray(t.searchTerms)&&t.searchTerms.length>0?H=t.searchTerms[0]:H=O.trim().length>100?O.trim().substring(0,100)+"...":O.trim();let L=H;q&&H.toLowerCase().includes(q.toLowerCase())?L=H:L=`${q} ${H}`;const j=L;window.open(`https://www.google.com/search?q=${encodeURIComponent(j)}`,"_blank")},title:"Search for more information",children:" Search Google"})]})]},P):g.jsx("p",{className:"content-paragraph",children:O.trim()},P)}):null,I=(A,O)=>{const P=A.trim();if(P.startsWith("- ")){const F=P.replace("- ","").trim(),U=F.match(/go to Step (\d+): (.+?)(?:\s|$)/);if(U){const q=U[1],H=U[2];return g.jsxs("div",{className:"checklist-item checklist-item--with-step",children:[g.jsx("div",{className:"checkbox-placeholder",children:""}),g.jsxs("div",{className:"checklist-content",children:[g.jsx("span",{className:"checklist-text",children:F.replace(/go to Step \d+: .+?(?:\s|$)/,"")}),g.jsxs("button",{className:"step-reference-button",onClick:()=>{const L=parseInt(q)-1;r!=null&&r.steps&&r.steps[L]&&(r.steps[L],window.location.pathname.includes("/dashboard")&&alert(`Navigate to Step ${q}: ${H} in the sidebar`))},title:`Go to Step ${q}: ${H}`,children:[g.jsxs("span",{className:"step-number",children:["Step ",q]}),g.jsx("span",{className:"step-title",children:H}),g.jsx("span",{className:"step-arrow",children:""})]})]})]},O)}return g.jsxs("div",{className:"checklist-item",children:[g.jsx("div",{className:"checkbox-placeholder",children:""}),g.jsx("span",{className:"checklist-text",dangerouslySetInnerHTML:{__html:bg(F)}})]},O)}return null};return g.jsxs("div",{className:`content-section ${S.type} ${S.title.toLowerCase().replace(/\s+/g,"-")}`,children:[g.jsx("h3",{className:"section-title",children:S.title}),N?g.jsx("div",{className:"checklist-content",children:S.content.split(`
`).map((A,O)=>I(A,O))}):R?g.jsx("div",{className:"cost-time-content",children:g.jsx("div",{className:"cost-time-badge",children:S.content})}):x?g.jsx("div",{className:"ready-when-content",children:g.jsx("div",{className:"ready-when-badge",children:S.content})}):w?g.jsx("div",{className:"where-how-content",children:C(S.content)}):g.jsx("div",{className:"section-content",children:S.content.split(`
`).map((A,O)=>A.trim()?g.jsx("p",{className:"content-paragraph",dangerouslySetInnerHTML:{__html:bg(A.trim())}},O):null)}),g.jsx(ES,{stepId:d,applicationId:e,application:r,step:t,subStepText:S.content,subStepIndex:b,onCommentRequest:i})]},b)},_=S=>{const b=E(S);return b.length===0?g.jsxs("div",{className:"fallback-content",children:[S.split(`
`).map((N,R)=>g.jsx("p",{className:"content-paragraph",dangerouslySetInnerHTML:{__html:bg(N.trim())}},R)),g.jsx(ES,{stepId:d,applicationId:e,application:r,step:t,subStepText:S,subStepIndex:0,onCommentRequest:i})]}):g.jsx("div",{className:"structured-content",children:b.map((N,R)=>y(N,R))})};return g.jsxs("div",{className:"info-step",children:[g.jsxs("div",{className:"step-header",children:[g.jsx("h2",{children:t.title}),s&&g.jsx(dp,{onClick:p,size:"small",variant:"subtle",children:"Report Issue"})]}),t.type==="pdf"&&t.formId&&g.jsxs("div",{className:"pdf-download-section",children:[g.jsx("button",{className:"pdf-download-button",onClick:m,title:"Download the original PDF form template",children:" Download PDF Template"}),g.jsx("p",{className:"pdf-download-note",children:"Download the original PDF form to view offline or print. You can still fill out the form in this application."})]}),g.jsx("div",{className:"step-content",children:_(t.content)}),!n&&s&&g.jsx("div",{className:"step-completion",children:g.jsxs("label",{className:"completion-checkbox",children:[g.jsx("input",{type:"checkbox",checked:f,onChange:S=>{S.target.checked?a(d):l(d)}}),g.jsx("span",{children:"Mark this step as complete"})]})}),g.jsx(fp,{isOpen:u,onClose:()=>c(!1),application:r,step:t,onReportSubmitted:v})]})}function _z(){const{user:t}=bn(),[e,n]=D.useState([]),[r,i]=D.useState(!0);return D.useEffect(()=>{if(!t)return;async function s(){const a=(await Tc(fi(Qe,"users",t.uid,"pinnedApplications"))).docs.map(c=>c.id),u=(await Promise.all(a.map(c=>ai(yt(Qe,"applications",c))))).filter(c=>c.exists()).map(c=>({id:c.id,...c.data()}));n(u),i(!1)}s()},[t]),{applications:e,loading:r}}function wz({applicationId:t,formName:e,stepId:n,hideCompleteToggle:r=!1,application:i,step:s}){const{user:o}=bn(),{completedSteps:a,markStepComplete:l,markStepIncomplete:u}=Yy(o==null?void 0:o.uid,t),c=a.includes(n),[d,f]=D.useState([]),[p,v]=D.useState({}),[m,E]=D.useState("idle"),[y,_]=D.useState(!0),[S,b]=D.useState(!1);D.useEffect(()=>{(async()=>{_(!0);try{const O=await(await fetch(`${qy.FORM_FIELDS()}?applicationId=${t}&formName=${e}`)).json();if(f(O.fields||[]),o){const P=await $R(o.uid,t,e);v(P||{})}}catch(A){console.error("Error fetching fields or saved form data",A)}_(!1)})()},[t,e,o]);const N=async I=>{const A={...p,[I.target.name]:I.target.value};if(v(A),E("saving"),o)try{await iz(o.uid,t,e,A),await Hy(o.uid,t,"form"),E("saved"),setTimeout(()=>E("idle"),1500)}catch(O){console.error("Failed to save form data",O),E("error")}},R=()=>{v({}),E("idle")},x=async()=>{try{const I=await fetch(Wy("/fill-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:t,formName:e,formData:p})});if(!I.ok)throw new Error("PDF generation failed");const{url:A}=await I.json();window.location.href=A}catch(I){console.error("Error downloading PDF:",I),alert("Something went wrong generating the PDF.")}},w=()=>{o&&b(!0)},C=I=>{console.log("Form step report submitted:",I)};return o?y?g.jsxs("div",{className:"dynamic-form",children:[g.jsx("div",{className:"form-header",children:g.jsx("h2",{children:"Loading form..."})}),g.jsx("div",{className:"loading",children:"Loading form fields..."})]}):g.jsxs("div",{className:"dynamic-form",children:[g.jsxs("div",{className:"form-header",children:[g.jsx("h2",{children:e.replace(".pdf","").replace(/[_-]/g," ")}),o&&g.jsx(dp,{onClick:w,size:"small",variant:"subtle",children:"Report Issue"})]}),g.jsxs("form",{onSubmit:I=>I.preventDefault(),children:[!r&&g.jsx("div",{className:"step-complete-checkbox",children:g.jsxs("label",{children:[g.jsx("input",{type:"checkbox",checked:c,onChange:I=>{I.target.checked?l(n):u(n)}}),"Mark this step as complete"]})}),g.jsx("div",{className:"form-status",children:g.jsx("span",{className:`status ${m}`,children:m==="saving"?"Saving...":m==="saved"?"Saved ":m==="error"?"Error ":""})}),d.map((I,A)=>g.jsxs("div",{className:"form-field",children:[g.jsx("label",{children:I.label||I.name}),g.jsx("input",{type:"text",name:I.name,value:p[I.name]||"",onChange:N}),I.description&&g.jsx("small",{className:"field-description",children:I.description})]},`${I.label}-${A}`)),g.jsxs("div",{className:"form-actions",children:[g.jsx("button",{type:"button",onClick:R,children:"Reset Form"}),g.jsx("button",{type:"button",onClick:x,children:"Download Filled PDF"})]})]}),g.jsx(fp,{isOpen:S,onClose:()=>b(!1),application:i,step:s,onReportSubmitted:C})]}):g.jsx("p",{children:"Please log in to use this feature."})}function Ez(t,e=[]){const[n,r]=D.useState({}),[i,s]=D.useState(!1),o=D.useMemo(()=>Array.isArray(e)?[...e].sort():[],[e]);D.useEffect(()=>{if(console.log("useAllApplicationsProgress: useEffect triggered",{userId:t,memoizedAppIds:o,memoizedAppIdsLength:o.length}),!t||o.length===0){console.log("useAllApplicationsProgress: No userId or app IDs, resetting progress"),r({});return}console.log("useAllApplicationsProgress: Setting up listeners for",o.length,"applications"),s(!0);const d=[];return o.forEach(f=>{if(!f)return;const p=yt(Qe,"users",t,"applicationProgress",f),v=rh(p,m=>{r(E=>({...E,[f]:m.exists()?m.data().completedStepIds||[]:[]})),s(!1)},m=>{console.error(`Error fetching progress for ${f}:`,m),r(E=>({...E,[f]:[]})),s(!1)});d.push(v)}),o.length===0&&s(!1),()=>{d.forEach(f=>f())}},[t,o]);const a=D.useCallback(d=>n[d]||[],[n]),l=D.useCallback((d,f=0)=>{const p=a(d);return f===0?0:Math.round(p.length/f*100)},[a]),u=D.useCallback(async(d,f)=>{if(!t||!d||!f)return;const p=yt(Qe,"users",t,"applicationProgress",d);(await ai(p)).exists()?await Po(p,{completedStepIds:$y(f)}):await li(p,{completedStepIds:[f]})},[t]),c=D.useCallback(async(d,f)=>{if(!t||!d||!f)return;const p=yt(Qe,"users",t,"applicationProgress",d);(await ai(p)).exists()&&await Po(p,{completedStepIds:Gy(f)})},[t]);return{allProgress:n,getProgressForApp:a,getProgressPercentage:l,markStepComplete:u,markStepIncomplete:c,loading:i}}const Sz=({app:t,form:e,application:n,step:r,onFormDataChange:i,initialFormData:s={}})=>{const[o,a]=D.useState(null),[l,u]=D.useState(!0),[c,d]=D.useState(null),[f,p]=D.useState(s),[v,m]=D.useState(!1),E=D.useRef(null),y=D.useRef(f),_=hp("python");D.useEffect(()=>{S()},[t,e]),D.useEffect(()=>{y.current=f},[f]);const S=async()=>{u(!0),d(null);try{const x=`${_}/api/apps/${t}/forms/${e}/pdf?inline=true`;a(x),m(!1)}catch(x){console.error("Failed to load PDF:",x),d("Failed to load the form. Please try again.")}finally{u(!1)}},b=(x,w)=>{const C={...y.current,[x]:w};p(C),i&&i(C)},N=()=>{E.current&&(window.removeEventListener("message",R),window.addEventListener("message",R))},R=x=>{try{x.data&&x.data.type==="form-field-changed"&&b(x.data.fieldName,x.data.value)}catch(w){console.warn("Error handling iframe message:",w)}};return D.useEffect(()=>()=>{window.removeEventListener("message",R)},[]),l?g.jsx("div",{className:"acroform-viewer",children:g.jsxs("div",{className:"loading-container",children:[g.jsx("div",{className:"loading-spinner"}),g.jsx("p",{children:"Loading form..."})]})}):c?g.jsx("div",{className:"acroform-viewer",children:g.jsxs("div",{className:"error-container",children:[g.jsx("div",{className:"error-icon",children:""}),g.jsx("h3",{children:"Error Loading Form"}),g.jsx("p",{children:c}),g.jsx("button",{onClick:S,className:"retry-button",children:"Try Again"})]})}):g.jsxs("div",{className:"acroform-viewer",children:[g.jsx("div",{className:"pdf-container",children:o&&g.jsx("iframe",{ref:E,src:o,className:"pdf-iframe",title:"PDF Form",onLoad:N,onError:()=>{console.error("PDF iframe failed to load"),d("Failed to load the PDF form. Please check your connection and try again.")}})}),!v&&Object.keys(f).length>0&&g.jsxs("div",{className:"fallback-form",children:[g.jsx("h3",{children:"Form Data"}),g.jsx("div",{className:"form-fields",children:Object.entries(f).map(([x,w])=>g.jsxs("div",{className:"form-field",children:[g.jsxs("label",{children:[x,":"]}),g.jsx("input",{type:"text",value:w||"",onChange:C=>b(x,C.target.value),placeholder:`Enter ${x}`})]},x))})]})]})};function WR({app:t,form:e,application:n,step:r}){const[i,s]=D.useState({fields:[]}),[o,a]=D.useState({}),[l,u]=D.useState(!0),[c,d]=D.useState(!1),[f,p]=D.useState(null),[v,m]=D.useState(!1),E=D.useRef(null),y=D.useRef(null),[_,S]=D.useState(0),[b,N]=D.useState("idle"),[R,x]=D.useState(null),{user:w,isAdmin:C}=bn(),I=ci(),{openAuthModal:A}=UR(),O=I.pathname.startsWith("/admin");D.useEffect(()=>()=>{E.current&&clearTimeout(E.current),y.current&&clearInterval(y.current)},[]);const P=D.useCallback(async()=>{if(!(!w||!t||!e))try{N("saving"),await sz(w.uid,t,e,o),N("saved"),x(new Date),E.current&&(clearTimeout(E.current),E.current=null),setTimeout(()=>{N("idle")},2e3)}catch(H){console.error("Failed to save form data:",H),N("error"),setTimeout(()=>N("idle"),3e3)}},[w,t,e,o]),F=D.useCallback(()=>{w&&(E.current&&clearTimeout(E.current),y.current&&clearInterval(y.current),N("saving"),S(2),E.current=setTimeout(()=>{P(),E.current=null},2e3),y.current=setInterval(()=>{S(H=>H<=1?(clearInterval(y.current),y.current=null,0):H-1)},1e3))},[w,P]);D.useEffect(()=>{(async()=>{u(!0);try{s({fields:[]}),a({}),console.log("PDF step: Showing form.pdf directly without field mapping")}catch(H){console.error("Form loading failed:",H),s({fields:[]}),a({})}finally{u(!1)}})()},[t,e,w]),D.useCallback((H,L,j)=>{a(z=>({...z,[H]:L==="checkbox"?!!j:j})),F()},[F]),D.useMemo(()=>{const H=new Map;for(const L of i.fields){const j=L.page??0;H.has(j)||H.set(j,[]),H.get(j).push(L)}for(const[L,j]of H.entries()){const z=i.fields.filter($=>($.page??0)===L).map($=>$.id);j.sort(($,K)=>z.indexOf($.id)-z.indexOf(K.id))}return[...H.entries()].sort((L,j)=>L[0]-j[0])},[i]);const U=()=>{w&&m(!0)},q=H=>{console.log("PDF step report submitted:",H)};return l?g.jsx("div",{style:{padding:16},children:"Loading"}):w?O&&!C?g.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[g.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[g.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Access Denied"}),g.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),g.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),g.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",g.jsx("strong",{children:t})," application."]})]}):g.jsxs("div",{className:"pdf-form-container",children:[g.jsxs("div",{className:"step-header",children:[g.jsxs("div",{className:"header-content",children:[g.jsx("h2",{children:(r==null?void 0:r.title)||`Form: ${e.replace(/_/g," ").replace(/.pdf$/i,"")}`}),g.jsx("p",{children:"View the PDF form below"})]}),w&&g.jsx(dp,{onClick:U,size:"small",variant:"subtle",children:"Report Issue"})]}),g.jsx(Sz,{app:t,form:e,application:n,step:r,initialFormData:o,onFormDataChange:H=>{a(H),F()}}),g.jsx(fp,{isOpen:v,onClose:()=>m(!1),application:n,step:r,onReportSubmitted:q})]}):O?g.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[g.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[g.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Access Denied"}),g.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),g.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),g.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",g.jsx("strong",{children:t})," application."]})]}):g.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[g.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[g.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Authentication Required"}),g.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"You need to be signed in to fill out this form. Please log in to continue with your application."}),g.jsx("button",{onClick:A,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Sign In to Continue"})]}),g.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This form is part of the ",g.jsx("strong",{children:t})," application process."]})]})}function xz(){const{app:t,form:e}=WC();return g.jsx(WR,{app:t,form:e})}const Tz=hp("python");function Cz(t){const[e,n]=D.useState([]),[r,i]=D.useState(!0),[s,o]=D.useState(null);return D.useEffect(()=>{if(!t){n([]),i(!1);return}async function a(){try{i(!0),o(null);const l=await fetch(`${Tz}/api/apps/${t}/forms`);if(!l.ok)throw new Error(`Failed to fetch forms: ${l.status}`);const u=await l.json();n(u)}catch(l){console.error("Error fetching available forms:",l),o(l.message),n([])}finally{i(!1)}}a()},[t]),{forms:e,loading:r,error:s}}function Iz(){var Pe;const{applications:t,loading:e}=_z(),{user:n}=bn(),[r,i]=D.useState([]),[s,o]=D.useState(null),[a,l]=D.useState("overview"),[u,c]=D.useState(null),[d,f]=D.useState(null),[p,v]=D.useState(null),[m,E]=D.useState(typeof window<"u"?window.matchMedia("(min-width: 1200px)").matches:!0);D.useEffect(()=>{var he;if(typeof window>"u")return;const Y=window.matchMedia("(min-width: 1200px)"),oe=be=>E(be.matches);return(he=Y.addEventListener)==null||he.call(Y,"change",oe),E(Y.matches),()=>{var be;return(be=Y.removeEventListener)==null?void 0:be.call(Y,"change",oe)}},[]),D.useEffect(()=>{!e&&t.length>0&&i(t)},[e,t]);const y=r.find(Y=>Y.id===s)||null,{forms:_,loading:S}=Cz(s),b=Y=>{if(!Y.formId||!_.length||_.includes(Y.formId))return Y.formId;const oe=_.find(he=>he.toLowerCase()===Y.formId.toLowerCase());return oe||_[0]||Y.formId};D.useEffect(()=>{var Y;y&&console.log("DashboardApp Debug - Active Application:",{id:y.id,title:y.title,steps:y.steps,hasSteps:Array.isArray(y.steps),stepsLength:((Y=y.steps)==null?void 0:Y.length)||0})},[y]),D.useEffect(()=>{s&&_.length>0&&console.log("DashboardApp Debug - Available Forms:",{appId:s,availableForms:_,formsLoading:S})},[s,_,S]);const{completedSteps:N,markStepComplete:R,markStepIncomplete:x}=Yy(n==null?void 0:n.uid,s),w=D.useMemo(()=>r.map(Y=>Y.id),[r]),{allProgress:C,getProgressPercentage:I}=Ez(n==null?void 0:n.uid,w),A=D.useMemo(()=>((y==null?void 0:y.steps)||[]).map((oe,he)=>({...oe,_id:oe.id??String(he),title:oe.title??`Step ${he+1}`,type:oe.type??"unknown"})),[y]),O=((Pe=A[0])==null?void 0:Pe._id)||null;D.useEffect(()=>{if(!n||!s){f(null);return}const Y=r.find(be=>be.id===s);if(!Y)return;const oe=rh(yt(Qe,"users",n.uid,"applicationProgress",Y.id),be=>{const je=be.exists()?be.data().completedStepIds||[]:[];f(Ee=>({...Ee||Y,completedStepIds:je}))}),he=rh(fi(Qe,"applications",Y.id,"comments"),be=>{const je=be.docs.map(Ee=>Ee.data());f(Ee=>({...Ee||Y,comments:je}))});return f(Y),()=>{oe(),he()}},[n,s,r]),D.useEffect(()=>{a==="steps"&&!u&&O&&c(O)},[a,u,O]);const P=Y=>{r.find(oe=>oe.id===Y.id)||i(oe=>[...oe,Y]),o(Y.id),l("overview"),c(null),n!=null&&n.uid&&Hy(n.uid,Y.id)},F=Y=>{o(Y),l("overview"),c(null)},U=Y=>{var he;const oe=r.filter(be=>be.id!==Y);i(oe),s===Y&&(o(((he=oe[0])==null?void 0:he.id)??null),l("overview"),c(null)),n!=null&&n.uid&&oz(n.uid,Y)},q=Y=>{l("steps"),c(Y)},H=()=>{if(!A.length)return null;console.log("Finding first incomplete step:",{totalSteps:A.length,completedSteps:N,steps:A.map(Y=>({id:Y.id,_id:Y._id,title:Y.title}))});for(let Y=0;Y<A.length;Y++){const oe=A[Y],he=oe.id||oe._id||String(Y);if(!N.includes(he))return console.log(`First incomplete step found: Step ${Y+1} (${he})`),he}return console.log("All steps completed, returning first step"),O},L=()=>{if(!r.length)return null;const Y=!!s,oe=y?`Home > ${y.title}${a!=="overview"?` > ${a}`:""}`:"Home";return g.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:12},children:g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[Y&&g.jsx("button",{onClick:()=>{o(null),l("overview"),c(null)},style:{padding:"4px 8px",borderRadius:6,border:"1px solid #e2e2e2",background:"#fff",cursor:"pointer",fontSize:14},"aria-label":"Back to Application Grid",title:"Back to Application Grid",children:" Back"}),g.jsx("div",{style:{fontSize:14,color:"#666"},children:oe})]})})},j=A.findIndex(Y=>Y._id===u),z=A.length,$=z?Math.round((j+1)/z*100):0,K=j>0,J=j<z-1,te=()=>K&&c(A[j-1]._id),ie=()=>J&&c(A[j+1]._id),X=j>=0?A[j]:null,ue=X?N.includes(X.id||X._id):!1,me=()=>{if(a!=="steps"||!X)return null;const Y=()=>{const oe=X.id||X._id;ue?x(oe):R(oe)};return g.jsxs("div",{style:{display:"grid",gap:8,border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)",width:"100%",minWidth:0,overflow:"hidden"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[g.jsx("button",{onClick:te,disabled:!K,title:"Previous step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:K?"pointer":"not-allowed",opacity:K?1:.5,flexShrink:0},children:""}),g.jsxs("div",{style:{flex:1,minWidth:0},children:[g.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["Step ",j+1," of ",z]}),g.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:X.title,children:X.title})]}),g.jsx("button",{onClick:ie,disabled:!J,title:"Next step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:J?"pointer":"not-allowed",opacity:J?1:.5,flexShrink:0},children:""}),g.jsx("button",{onClick:Y,style:{padding:"6px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:ue?"#10b981":"#fff",color:ue?"#fff":"#374151",cursor:"pointer",fontSize:13,fontWeight:500,flexShrink:0},children:ue?" Complete":"Mark Complete"})]}),g.jsx("div",{style:{width:"100%",height:4,background:"#e5e7eb",borderRadius:2,overflow:"hidden"},children:g.jsx("div",{style:{width:`${$}%`,height:"100%",background:"#10b981",transition:"width 0.3s ease"}})})]})},Se=()=>{if(a!=="steps")return null;const Y=A.find(oe=>oe._id===u);return Y?Y.type==="form"?g.jsx(wz,{applicationId:y.id,stepId:Y.id||Y._id,formName:Y.formName,hideCompleteToggle:!0,application:y,step:Y}):Y.type==="pdf"?g.jsx("div",{style:{display:"grid",gap:8,width:"100%",minWidth:0,overflow:"hidden"},children:g.jsx(WR,{app:y.id,form:b(Y),application:y,step:Y},`${y.id}:${b(Y)}`)}):Y.type==="info"||Y.content?g.jsx(yz,{step:Y,applicationId:y.id,hideCompleteToggle:!0,application:y,onCommentRequest:xe}):g.jsx("p",{children:"Unsupported step type."}):g.jsx("div",{children:"Select a step to begin."})},xe=Y=>{Y.type==="ai_chat"?(v({subStepText:Y.subStepText,stepId:Y.stepId,applicationId:Y.applicationId}),console.log("AI Chat requested for sub-step:",Y.subStepText)):Y.type==="comment"&&(v({subStepText:Y.subStepText,stepId:Y.stepId,applicationId:Y.applicationId}),l("comments"),console.log("Comment requested for sub-step:",Y.subStepText))},se=Y=>{Y!==a&&(v(null),l(Y))},de=()=>{if(!y||m)return null;const Y=(oe,he)=>g.jsx("button",{onClick:()=>se(oe),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ddd",background:a===oe?"#eef":"#fff",cursor:"pointer",fontSize:14},children:he},oe);return g.jsxs("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:[Y("overview","Overview"),Y("steps","Steps"),Y("comments","Comments")]})};return g.jsxs(g.Fragment,{children:[g.jsx(tz,{}),g.jsxs("div",{className:"app-wrapper",children:[g.jsx(q3,{applications:r,activeApplicationId:s,onRemove:U,activeSection:a,setActiveSection:se,onSelect:F,onStepSelect:q,selectedStepId:u,allProgress:C,getProgressPercentage:I}),g.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:y&&m?"1fr 380px":"1fr",gap:16,minHeight:"calc(100vh - 90px)"},children:[g.jsxs("main",{className:"main-content",style:{minWidth:0,width:"100%",overflow:"auto"},children:[g.jsx(L,{}),r.length===0||!y?g.jsx(K3,{onApplicationSelect:P}):g.jsxs(g.Fragment,{children:[g.jsx(de,{}),a==="overview"&&g.jsxs("div",{style:{display:"grid",gap:12},children:[g.jsx(Z3,{application:y}),A.length>0&&g.jsx("button",{onClick:()=>{l("steps");const Y=N.length>0?H():O;c(Y)},style:{padding:"10px 14px",border:"1px solid #ccc",borderRadius:8,width:"fit-content",background:"#f7f7f7",cursor:"pointer"},children:N.length>0?"Continue Application ":"Start application "})]}),a==="steps"&&g.jsxs("div",{style:{display:"grid",gap:12,width:"100%",minWidth:0},children:[g.jsx(me,{}),g.jsx("div",{style:{minHeight:200,width:"100%",minWidth:0,overflow:"auto"},children:g.jsx(Se,{})})]}),a==="comments"&&y&&g.jsx(pz,{application:y,context:p}),!m&&y&&g.jsx("section",{style:{marginTop:16,border:"1px solid #eee",borderRadius:12,background:"#fff"},children:g.jsx("div",{style:{height:420,overflow:"auto",padding:8},children:g.jsx(_S,{application:d||y,currentStep:X,currentStepId:(X==null?void 0:X.id)||(X==null?void 0:X._id)||null,completedStepIds:N,context:p})})})]})]}),y&&m&&g.jsxs("aside",{style:{borderLeft:"1px solid #eee",paddingLeft:12,position:"sticky",height:"calc(100vh - 90px)",display:"flex",flexDirection:"column",gap:8,background:"transparent",minHeight:0},children:[g.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#30343a"},children:"Your AI Assistant"}),g.jsx("div",{style:{border:"1px solid #e8e8e8",borderRadius:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)",flex:1,minHeight:0,display:"flex",overflow:"hidden"},children:g.jsx("div",{style:{flex:1,minHeight:0,overflow:"auto",padding:8},children:g.jsx(_S,{application:d||y,currentStep:X,currentStepId:(X==null?void 0:X.id)||(X==null?void 0:X._id)||null,completedStepIds:N,context:p})})})]})]})]})]})}const SS=Wy("/apps");function bz(){const{user:t,loading:e,isAdmin:n}=bn(),[r,i]=D.useState("apps");if(e)return g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t||!n)return g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),g.jsx("p",{className:"text-gray-600 mb-4",children:"Admin privileges required."}),g.jsx("p",{className:"text-sm text-gray-500",children:"Only authorized users can access this area."}),g.jsx(Link,{to:"/dashboard",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Dashboard"})]})});const[s,o]=D.useState([]),[a,l]=D.useState(""),[u,c]=D.useState(!1),d=s.find(G=>G.id===a)||null,[f,p]=D.useState(""),[v,m]=D.useState(""),[E,y]=D.useState(""),[_,S]=D.useState(""),[b,N]=D.useState([]),[R,x]=D.useState("info"),[w,C]=D.useState(""),[I,A]=D.useState(""),[O,P]=D.useState(""),[F,U]=D.useState(""),[q,H]=D.useState(null),[L,j]=D.useState([]),[z,$]=D.useState([]),[K,J]=D.useState([]),[te,ie]=D.useState(""),[X,ue]=D.useState(!1),[me,Se]=D.useState(!1),[xe,se]=D.useState(""),de=G=>{se(G),setTimeout(()=>se(""),2500)};async function Pe(){const ae=(await Tc(fi(Qe,"applications"))).docs.map(pe=>({id:pe.id,...pe.data()}));o(ae.sort((pe,_e)=>pe.id.localeCompare(_e.id)))}function Y(G){l(G),c(!1);const ae=s.find(pe=>pe.id===G);ae&&(p(ae.id),m(ae.title||""),y(ae.rootDomain||""),S(ae.description||""),N(Array.isArray(ae.steps)?ae.steps:[])),j([])}function oe(){l(""),c(!0),p(""),m(""),y(""),S(""),N([]),j([])}D.useEffect(()=>{Pe()},[]);const he=G=>{G.preventDefault(),G.stopPropagation(),Se(!0)},be=G=>{G.preventDefault(),G.stopPropagation(),Se(!1)},je=G=>{G.preventDefault(),G.stopPropagation()},Ee=G=>{G.preventDefault(),G.stopPropagation(),Se(!1);const pe=Array.from(G.dataTransfer.files).filter(_e=>_e.type==="application/json"||_e.name.endsWith(".json"));pe.length>0?($(_e=>[..._e,...pe]),de(`Added ${pe.length} JSON file(s)`)):de("No JSON files found. Please drop .json files only.")},ke=G=>{console.log("File select triggered",G.target.files);const ae=Array.from(G.target.files);console.log("Files selected:",ae);const pe=ae.filter(_e=>_e.type==="application/json"||_e.name.endsWith(".json"));console.log("JSON files filtered:",pe),pe.length>0?($(_e=>[..._e,...pe]),de(`Added ${pe.length} JSON file(s)`)):de("No JSON files found. Please select .json files only."),G.target.value=""},et=G=>{$(ae=>ae.filter((pe,_e)=>_e!==G)),J(ae=>ae.filter((pe,_e)=>_e!==G))},ct=async()=>{if(z.length===0)return;const G=[];for(const ae of z)try{const pe=await ae.text(),_e=JSON.parse(pe);G.push({filename:ae.name,data:_e,valid:_e.id&&_e.title&&_e.steps&&Array.isArray(_e.steps),error:null})}catch(pe){G.push({filename:ae.name,data:null,valid:!1,error:pe.message})}J(G)},at=async()=>{if(K.length===0)return;ue(!0),ie("Processing applications...");let G=0,ae=0;for(const pe of K){if(!pe.valid){ae++;continue}try{console.log("Application data:",pe.data);const _e=await fetch(`${SS}/process-county`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe.data)});if(console.log("Response status:",_e.status),console.log("Response ok:",_e.ok),_e.ok){const Ke=await _e.json();console.log("Success result:",Ke),G++}else{const Ke=await _e.text();console.error("Error response:",Ke),ae++}}catch{ae++}}ie(`Import complete: ${G} successful, ${ae} failed`),ue(!1),$([]),J([]),Pe()},Oe=()=>{if(!w.trim()){de("Please enter a step title");return}const G={id:`step_${Date.now()}`,title:w.trim(),type:R,content:I.trim(),formName:O.trim(),formId:F.trim(),_file:q};j(ae=>[...ae,G]),C(""),A(""),P(""),U(""),H(null),de("Step added to queue")},rt=G=>{j(ae=>ae.filter((pe,_e)=>_e!==G))},Je=async()=>{if(!(!f||L.length===0))try{const G=[...b];for(const pe of L){const{_file:_e,...Ke}=pe;if(Ke.type==="pdf"&&_e){const Lt=new FormData;if(Lt.append("pdf",_e),Lt.append("formId",Ke.formId),!(await fetch(`${SS}/api/apps/${f}/forms/${Ke.formId}/upload`,{method:"POST",body:Lt})).ok)throw new Error(`Failed to upload PDF for ${Ke.formId}`)}G.push(Ke)}const ae=yt(Qe,"applications",f);await Po(ae,{steps:G}),N(G),j([]),de("Steps saved successfully"),Pe()}catch(G){de(`Error saving steps: ${G.message}`)}},Ue=async()=>{if(!f.trim()||!v.trim()){de("Please fill in required fields");return}try{const G={id:f.trim(),title:v.trim(),rootDomain:E.trim(),description:_.trim(),steps:b,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await li(yt(Qe,"applications",f.trim()),G),de("Application saved successfully"),Pe(),c(!1),l(f.trim())}catch(G){de(`Error saving application: ${G.message}`)}},Z=async G=>{if(confirm("Are you sure you want to delete this application?"))try{await li(yt(Qe,"applications",G),{deleted:!0}),de("Application deleted"),Pe(),a===G&&oe()}catch(ae){de(`Error deleting application: ${ae.message}`)}};return g.jsxs("div",{className:"admin-dashboard",children:[g.jsx("header",{className:"admin-header",children:g.jsxs("div",{className:"header-content",children:[g.jsxs("div",{className:"header-left",children:[g.jsx("h1",{children:"Admin Dashboard"}),g.jsx("p",{children:"Manage applications and forms"})]}),g.jsx("div",{className:"header-right",children:g.jsxs("a",{href:"/dashboard",className:"back-to-dashboard-btn",children:[g.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to User Dashboard"]})})]})}),g.jsxs("nav",{className:"admin-nav",children:[g.jsx("button",{className:`nav-tab ${r==="apps"?"active":""}`,onClick:()=>i("apps"),children:"Applications"}),g.jsx("button",{className:`nav-tab ${r==="import"?"active":""}`,onClick:()=>i("import"),children:"Import Application Data"}),g.jsx("button",{className:`nav-tab ${r==="reports"?"active":""}`,onClick:()=>i("reports"),children:"Issue Reports"})]}),xe&&g.jsx("div",{className:"status-banner",children:xe}),g.jsxs("main",{className:"admin-main",children:[r==="apps"&&g.jsxs(g.Fragment,{children:[g.jsxs("section",{className:"apps-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("h2",{children:"Applications"}),g.jsx("button",{onClick:oe,className:"btn-primary",children:"+ New Application"})]}),g.jsx("div",{className:"apps-grid",children:s.map(G=>{var ae;return g.jsxs("div",{className:`app-card ${a===G.id?"selected":""}`,onClick:()=>Y(G.id),children:[g.jsx("h3",{children:G.title}),g.jsx("p",{className:"app-domain",children:G.rootDomain}),g.jsx("p",{className:"app-description",children:G.description}),g.jsxs("div",{className:"app-steps",children:[((ae=G.steps)==null?void 0:ae.length)||0," steps"]}),g.jsx("button",{onClick:pe=>{pe.stopPropagation(),Z(G.id)},className:"btn-delete",children:"Delete"})]},G.id)})})]}),(a||u)&&g.jsxs("section",{className:"app-form-section",children:[g.jsx("h3",{children:a?`Edit Application: ${d==null?void 0:d.title}`:"New Application"}),g.jsxs("div",{className:"form-grid",children:[g.jsxs("div",{children:[g.jsx("label",{children:"Application ID"}),g.jsx("input",{value:f,onChange:G=>p(G.target.value),placeholder:"e.g., los_angeles_county_mehko"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Title"}),g.jsx("input",{value:v,onChange:G=>m(G.target.value),placeholder:"e.g., Los Angeles County MEHKO"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Root Domain"}),g.jsx("input",{value:E,onChange:G=>y(G.target.value),placeholder:"e.g., sandiegocounty.gov"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Description"}),g.jsx("textarea",{value:_,onChange:G=>S(G.target.value),placeholder:"Brief description of the application"})]})]}),g.jsx("button",{onClick:Ue,className:"btn-primary",children:"Save Application"})]}),a&&g.jsxs("section",{className:"steps-section",children:[g.jsxs("h3",{children:["Steps for ",d.title]}),g.jsxs("div",{className:"existing-steps",children:[g.jsx("h4",{children:"Current Steps"}),b.map((G,ae)=>g.jsxs("div",{className:"step-item",children:[g.jsx("span",{className:"step-number",children:ae+1}),g.jsx("span",{className:"step-title",children:G.title}),g.jsx("span",{className:"step-type",children:G.type})]},G.id))]}),g.jsxs("div",{className:"add-step-form",children:[g.jsx("h4",{children:"Add New Step"}),g.jsxs("div",{className:"step-form-grid",children:[g.jsxs("div",{children:[g.jsx("label",{children:"Step Title"}),g.jsx("input",{value:w,onChange:G=>C(G.target.value),placeholder:"e.g., Submit Application"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Step Type"}),g.jsxs("select",{value:R,onChange:G=>x(G.target.value),children:[g.jsx("option",{value:"info",children:"Information"}),g.jsx("option",{value:"form",children:"Form"}),g.jsx("option",{value:"pdf",children:"PDF"})]})]}),g.jsxs("div",{children:[g.jsx("label",{children:"Content/Description"}),g.jsx("textarea",{value:I,onChange:G=>A(G.target.value),placeholder:"Step description or instructions"})]}),R==="form"&&g.jsxs("div",{children:[g.jsx("label",{children:"Form Name"}),g.jsx("input",{value:O,onChange:G=>P(G.target.value),placeholder:"e.g., MEHKO_SOP-English.pdf"})]}),R==="pdf"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{children:"Form ID"}),g.jsx("input",{value:F,onChange:G=>U(G.target.value),placeholder:"e.g., MEHKO_SOP-English"})]}),g.jsxs("div",{children:[g.jsx("label",{children:"PDF File"}),g.jsx("input",{type:"file",accept:"application/pdf",onChange:G=>{var ae;return H(((ae=G.target.files)==null?void 0:ae[0])||null)}})]})]})]}),g.jsxs("div",{className:"step-actions",children:[g.jsx("button",{onClick:Oe,className:"btn-secondary",children:"Add to Queue"}),g.jsx("button",{onClick:Je,disabled:!f||L.length===0,className:"btn-primary",children:"Save All Steps"}),g.jsxs("span",{className:"queue-count",children:[L.length," step",L.length!==1?"s":""," queued"]})]}),L.length>0&&g.jsxs("div",{className:"queued-steps",children:[g.jsx("strong",{children:"Queued Steps:"}),g.jsx("ul",{children:L.map((G,ae)=>g.jsxs("li",{children:[G.title," ",g.jsxs("em",{children:["(",G.type,")"]}),G.type==="pdf"&&`  formId: ${G.formId}`,G.type==="form"&&`  formName: ${G.formName}`,g.jsx("button",{onClick:()=>rt(ae),className:"btn-remove",children:"Remove"})]},ae))})]})]})]})]}),r==="import"&&g.jsxs("section",{className:"import-section",children:[g.jsx("h2",{children:"Import Application Data"}),g.jsx("p",{children:"Upload JSON files to bulk import applications"}),g.jsxs("div",{className:"import-area",children:[g.jsxs("div",{className:`drop-zone ${me?"drag-over":""}`,onDrop:Ee,onDragOver:je,onDragEnter:he,onDragLeave:be,children:[g.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),g.jsx("polyline",{points:"7,10 12,15 17,10"}),g.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),g.jsx("p",{children:me?"Drop your JSON files here!":"Drop JSON files here or"}),!me&&g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"file",multiple:!0,accept:".json",onChange:ke,className:"file-input",id:"file-input"}),g.jsx("label",{htmlFor:"file-input",className:"btn-primary",children:"Select Files"})]})]}),z.length>0&&g.jsxs("div",{className:"file-list",children:[g.jsx("h4",{children:"Selected Files:"}),z.map((G,ae)=>g.jsxs("div",{className:"file-item",children:[g.jsx("span",{children:G.name}),g.jsx("button",{onClick:()=>et(ae),className:"btn-remove",children:"Remove"})]},ae)),g.jsxs("div",{className:"file-actions",children:[g.jsx("button",{onClick:ct,className:"btn-secondary",children:"Preview Files"}),g.jsx("button",{onClick:at,disabled:X||K.length===0,className:"btn-primary",children:X?"Processing...":"Import All"})]})]}),K.length>0&&g.jsxs("div",{className:"preview-list",children:[g.jsx("h4",{children:"File Preview:"}),K.map((G,ae)=>g.jsxs("div",{className:`preview-item ${G.valid?"valid":"invalid"}`,children:[g.jsx("span",{children:G.filename}),g.jsx("span",{className:"status",children:G.valid?" Valid":" Invalid"}),G.error&&g.jsx("span",{className:"error",children:G.error})]},ae))]}),te&&g.jsx("div",{className:"import-status",children:te})]})]}),r==="reports"&&g.jsx(ReportsViewer,{})]})]})}function Xy(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function qR(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function YR(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function Qy(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Rz(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Az(t,e){var n=Qy("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function pm(t){return t.replace(/_/g,".")}function Ql(t,e){var n=null,r="-1";return Xy(t,function(i){var s=Qy("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!s||i.brand?!1:(n=i,r=s[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Az(i.versionTest.toLowerCase(),e)||r),r=pm(r),!0)}),{preset:n,version:r}}function Sd(t,e){var n={brand:"",version:"-1"};return Xy(t,function(r){var i=KR(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function KR(t,e){return qR(t,function(n){var r=n.brand;return Qy(""+e.test,r.toLowerCase())})}var XR=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],QR=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],gm=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],JR=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ZR=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function eA(t){return!!Ql(JR,t).preset}function Pz(t){var e=YR(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:eA(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},s=Ql(XR,e),o=s.preset,a=s.version,l=Ql(ZR,e),u=l.preset,c=l.version,d=Ql(QR,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=Ql(gm,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),o&&(r.name=o.id,r.version=a,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function kz(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],s=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Sd(JR,n).brand||eA(YR())},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&Xy(gm,function(f){return KR(n,f)});var l=Sd(QR,n);if(o.chromium=!!l.brand,o.chromiumVersion=l.version||"-1",!o.chromium){var u=Sd(gm,n);o.webkit=!!u.brand,o.webkitVersion=u.version||"-1"}var c=qR(ZR,function(f){return new RegExp(""+f.test,"g").exec(s)});a.name=c?c.id:"";{var d=Sd(XR,n);o.name=d.brand||o.name,o.version=d.brand&&t?t.uaFullVersion:d.version}return o.webkit&&(a.name=r?"ios":"mac"),a.name==="ios"&&o.webview&&(o.version="-1"),a.version=pm(a.version),o.version=pm(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:r,isHints:!0}}function Dz(t){return Rz()?kz():Pz(t)}function Nz(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function Oz(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function _o(t,e){return function(n){n&&(t[e]=n)}}function tA(t,e,n){return function(r){r&&(t[e][n]=r)}}function Mz(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var s=e[i]||i;s in n||(n[s]=function(){for(var o,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(o=this[r])[i].apply(o,a);return u===this[r]?this:u})})}}var Lz="function",jz="object",Vz="string",Fz="number",Jy="undefined",nA=typeof window!==Jy,zz=typeof document!==Jy&&document,Bz=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Bt=1e-7,xd={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Uz(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function ih(t,e,n,r){return(t*r+e*n)/(n+r)}function Zy(t){return typeof t===Jy}function Br(t){return t&&typeof t===jz}function rn(t){return Array.isArray(t)}function Hi(t){return typeof t===Vz}function Qu(t){return typeof t===Fz}function e_(t){return typeof t===Lz}function $z(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function rA(t,e,n,r,i){var s=t_(t,e,n);return s?n:Gz(t,e,n+1,r,i)}function t_(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Gz(t,e,n,r,i){for(var s=function(u){var c=e[u].trim();if(c===t.close&&!t_(t,e,u))return{value:u};var d=u,f=or(i,function(p){var v=p.open;return v===c});if(f&&(d=rA(f,e,u,r,i)),d===-1)return o=u,"break";u=d,o=u},o,a=n;a<r;++a){var l=s(a);if(a=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function n_(t,e){var n=Hi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,s=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,l=a===void 0?o:a,u=n.openCloseCharacters,c=u===void 0?Bz:u,d=c.map(function(x){var w=x.open,C=x.close;return w===C?w:w+"|"+C}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",p=new RegExp(f,"g"),v=t.split(p).filter(function(x){return x&&x!=="undefined"}),m=v.length,E=[],y=[];function _(){return y.length?(E.push(y.join("")),y=[],!0):!1}for(var S=function(x){var w=v[x].trim(),C=x,I=or(c,function(P){var F=P.open;return F===w}),A=or(c,function(P){var F=P.close;return F===w});if(I){if(C=rA(I,v,x,m,c),C!==-1&&l)return _()&&s||(E.push(v.slice(x,C+1).join("")),x=C,s)?(b=x,"break"):(b=x,"continue")}else if(A&&!t_(A,v,x)){var O=Uz(c);return O.splice(c.indexOf(A),1),{value:n_(t,{separator:i,isSeparateFirst:s,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:O})}}else if($z(w,i)&&!o)return _(),s?(b=x,"break"):(b=x,"continue");C===-1&&(C=m-1),y.push(v.slice(x,C+1).join("")),x=C,b=x},b,N=0;N<m;++N){var R=S(N);if(N=b,typeof R=="object")return R.value;if(R==="break")break}return y.length&&E.push(y.join("")),E}function Ls(t){return n_(t,"")}function po(t){return n_(t,",")}function iA(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Cc(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Hz(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function Ju(){return Date.now?Date.now():new Date().getTime()}function zi(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function or(t,e,n){var r=zi(t,e);return r>-1?t[r]:n}var sA=function(){var t=Ju(),e=nA&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=Ju(),i=setTimeout(function(){n(r-t)},1e3/60);return i}}(),Wz=function(){var t=nA&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function gl(t){return Object.keys(t)}function st(t,e){var n=Cc(t),r=n.value,i=n.unit;if(Br(e)){var s=e[i];if(s){if(e_(s))return s(r);if(xd[i])return xd[i](r,s)}}else if(i==="%")return r*e/100;return xd[i]?xd[i](r):r}function vm(t,e,n){return Math.max(e,Math.min(t,n))}function xS(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Ne(e[0],Bt),Ne(e[0]/r,Bt)],[Ne(e[1]*r,Bt),Ne(e[1],Bt)]].filter(function(i){return i.every(function(s,o){var a=e[o],l=Ne(a,Bt);return n?s<=a||s<=l:s>=a||s>=l})})[0]||t}function oA(t,e,n,r){if(!r)return t.map(function(p,v){return vm(p,e[v],n[v])});var i=t[0],s=t[1],o=r===!0?i/s:r,a=xS(t,e,!1,o),l=a[0],u=a[1],c=xS(t,n,!0,o),d=c[0],f=c[1];return i<l||s<u?(i=l,s=u):(i>d||s>f)&&(i=d,s=f),[i,s]}function qz(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function mm(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Mt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Yz(t){return[0,1].map(function(e){return mm(t.map(function(n){return n[e]}))})}function TS(t){var e=Yz(t),n=Mt(e,t[0]),r=Mt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function bi(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Ne(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function CS(t,e){return t.forEach(function(n,r){t[r]=Ne(t[r],e)}),t}function Kz(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function Xz(t){return t.reduce(function(e,n){return e.concat(n)},[])}function qt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function aA(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function lA(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function wn(t,e,n,r){t.addEventListener(e,n,r)}function on(t,e,n,r){t.removeEventListener(e,n,r)}function r_(t){return(t==null?void 0:t.ownerDocument)||zz}function i_(t){return r_(t).documentElement}function Ws(t){return r_(t).body}function Is(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function uA(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function s_(t){return Br(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function Qz(t,e,n,r,i,s){for(var o=0;o<i;++o){var a=n+o*i,l=r+o*i;t[a]+=t[l]*s,e[a]+=e[l]*s}}function Jz(t,e,n,r,i){for(var s=0;s<i;++s){var o=n+s*i,a=r+s*i,l=t[o],u=e[o];t[o]=t[a],t[a]=l,e[o]=e[a],e[a]=u}}function Zz(t,e,n,r,i){for(var s=0;s<r;++s){var o=n+s*r;t[o]/=i,e[o]/=i}}function cA(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ui(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=vt(e),i=0;i<e;++i){var s=e*i+i;if(!Ne(n[s],Bt)){for(var o=i+1;o<e;++o)if(n[e*i+o]){Jz(n,r,i,o,e);break}}if(!Ne(n[s],Bt))return[];Zz(n,r,i,e,n[s]);for(var o=0;o<e;++o){var a=o,l=o+i*e,u=n[l];!Ne(u,Bt)||i===o||Qz(n,r,a,i,e,-u)}}return r}function eB(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function dA(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function tB(t,e){for(var n=vt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function ko(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ur(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=vt(n),i=Math.min(e,n),s=0;s<i-1;++s){for(var o=0;o<i-1;++o)r[s*n+o]=t[s*e+o];r[(s+1)*n-1]=t[(s+1)*e-1],r[(n-1)*n+s]=t[(e-1)*e+s]}return r[n*n-1]=t[e*e-1],r}function sh(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=vt(t);return e.forEach(function(i){r=ot(r,i,t)}),r}function ot(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,s=e.length/i;if(i){if(!s)return t}else return e;for(var o=0;o<n;++o)for(var a=0;a<s;++a){r[a*n+o]=0;for(var l=0;l<i;++l)r[a*n+o]+=t[l*n+o]*e[a*i+l]}return r}function Ye(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ce(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function nB(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function fA(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function In(t,e,n){n===void 0&&(n=e.length);var r=ot(t,e,n),i=r[n-1];return r.map(function(s){return s/i})}function rB(t,e){return ot(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function iB(t,e){return ot(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function sB(t,e){return ot(t,bc(e,4))}function Td(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],s=i===void 0?1:i,o=e[2],a=o===void 0?1:o;return ot(t,[r,0,0,0,0,s,0,0,0,0,a,0,0,0,0,1],4)}function Ic(t,e){return In(bc(e,3),ko(t,3))}function Rg(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],s=i===void 0?0:i,o=e[2],a=o===void 0?0:o;return ot(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,s,a,1],4)}function IS(t,e){return ot(t,e,4)}function bc(t,e){var n=Math.cos(t),r=Math.sin(t),i=vt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function vt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function o_(t,e){for(var n=vt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Do(t,e){for(var n=vt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function a_(t,e,n,r,i,s,o,a){var l=t[0],u=t[1],c=e[0],d=e[1],f=n[0],p=n[1],v=r[0],m=r[1],E=i[0],y=i[1],_=s[0],S=s[1],b=o[0],N=o[1],R=a[0],x=a[1],w=[l,0,c,0,f,0,v,0,u,0,d,0,p,0,m,0,1,0,1,0,1,0,1,0,0,l,0,c,0,f,0,v,0,u,0,d,0,p,0,m,0,1,0,1,0,1,0,1,-E*l,-y*l,-_*c,-S*c,-b*f,-N*f,-R*v,-x*v,-E*u,-y*u,-_*d,-S*d,-b*p,-N*p,-R*m,-x*m],C=ui(w,8);if(!C.length)return[];var I=ot(C,[E,y,_,S,b,N,R,x],8);return I[8]=1,Ur(eB(I),3,4)}var gu=function(){return gu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gu.apply(this,arguments)};function oB(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Zu(t,e){return e===void 0&&(e=0),Zo(Ya(t,e))}function aB(t,e){var n=In(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function Zo(t){var e=oB();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Ya(t,e){e===void 0&&(e=0);var n=rn(t)?t:Ls(t);return n.map(function(r){var i=iA(r),s=i.prefix,o=i.value,a=null,l=s,u="";if(s==="translate"||s==="translateX"||s==="translate3d"){var c=Br(e)?gu(gu({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=po(o).map(function(P,F){return F===0&&"x%"in c?c["%"]=e["x%"]:F===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],st(P,c)}),f=d[0],p=d[1],v=p===void 0?0:p,m=d[2],E=m===void 0?0:m;a=Rg,u=[f,v,E]}else if(s==="translateY"){var y=Br(e)?gu({"%":e["y%"]},e):{"%":e},v=st(o,y);a=Rg,u=[0,v,0]}else if(s==="translateZ"){var E=parseFloat(o);a=Rg,u=[0,0,E]}else if(s==="scale"||s==="scale3d"){var _=po(o).map(function(P){return parseFloat(P)}),S=_[0],b=_[1],N=b===void 0?S:b,R=_[2],x=R===void 0?1:R;a=Td,u=[S,N,x]}else if(s==="scaleX"){var S=parseFloat(o);a=Td,u=[S,1,1]}else if(s==="scaleY"){var N=parseFloat(o);a=Td,u=[1,N,1]}else if(s==="scaleZ"){var x=parseFloat(o);a=Td,u=[1,1,x]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var w=Cc(o),C=w.unit,I=w.value,A=C==="rad"?I:I*Math.PI/180;s==="rotate"||s==="rotateZ"?(l="rotateZ",a=sB):s==="rotateX"?a=rB:s==="rotateY"&&(a=iB),u=A}else if(s==="matrix3d")a=IS,u=po(o).map(function(P){return parseFloat(P)});else if(s==="matrix"){var O=po(o).map(function(P){return parseFloat(P)});a=IS,u=[O[0],O[1],0,0,O[2],O[3],0,0,0,0,1,0,O[4],O[5],0,1]}else l="";return{name:s,functionName:l,value:o,matrixFunction:a,functionValue:u}})}var lB=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,s=this.values,o=i.indexOf(n),a=o===-1?i.length:o;i[a]=n,s[a]=r},t}(),uB=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),cB=typeof Map=="function",dB=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function fB(t,e){var n=[],r=[];return t.forEach(function(i){var s=i[0],o=i[1],a=new dB;n[s]=a,r[o]=a}),n.forEach(function(i,s){i.connect(n[s-1])}),t.filter(function(i,s){return!e[s]}).map(function(i,s){var o=i[0],a=i[1];if(o===a)return[0,0];var l=n[o],u=r[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,n[0]);var d=l.getIndex();return[c,d]})}var hB=function(){function t(n,r,i,s,o,a,l,u){this.prevList=n,this.list=r,this.added=i,this.removed=s,this.changed=o,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=fB(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(s,o){var a=s[0],l=s[1],u=r[o],c=u[0],d=u[1];if(a!==l)return i.push([c,d]),!0}),this.cachePureChanged=i},t}();function l_(t,e,n){var r=cB?Map:n?uB:lB,i=n||function(_){return _},s=[],o=[],a=[],l=t.map(i),u=e.map(i),c=new r,d=new r,f=[],p=[],v={},m=[],E=0,y=0;return l.forEach(function(_,S){c.set(_,S)}),u.forEach(function(_,S){d.set(_,S)}),l.forEach(function(_,S){var b=d.get(_);typeof b>"u"?(++y,o.push(S)):v[b]=y}),u.forEach(function(_,S){var b=c.get(_);typeof b>"u"?(s.push(S),++E):(a.push([b,S]),y=v[S]||0,f.push([b-y,S-E]),p.push(S===b),b!==S&&m.push([b,S]))}),o.reverse(),new hB(t,e,s,o,m,a,f,p)}var pB=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=l_(this.list,r,this.findKeyCallback);return this.list=r,i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ym=function(t,e){return ym=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},ym(t,e)};function gB(t,e){ym(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var hA=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),pA=function(t){gB(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,hA)||this}return e}(pB);function vB(t,e){return l_(t,e,hA)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _m=function(){return _m=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_m.apply(this,arguments)};function mB(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var u_=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Br(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Br(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var s=this._events[n];if(s){var o=zi(s,function(a){return a.listener===r});o>-1&&s.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(s){i._addEvent(n,s,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var s=this._events[n];if(!n||!s)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,mB(s).forEach(function(a){a.listener(r),a.once&&i.off(n,a.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var s=this._events;s[n]=s[n]||[];var o=s[n];o.push(_m({listener:r},i))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wm=function(t,e){return wm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},wm(t,e)};function yB(t,e){wm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pa=function(){return pa=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pa.apply(this,arguments)};function _B(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function bS(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function Cd(t){if(t){if(Hi(t))return document.querySelector(t)}else return null;if(e_(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var wB=function(t){yB(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(s){r.checkScroll({container:i.container,inputEvent:s})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var s=Cd(i.container);if(!s){this._flag=!1;return}var o=0,a=0,l=0,u=0;if(s===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=s.getBoundingClientRect();o=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var s=r.clientX,o=r.clientY,a=i.threshold,l=a===void 0?0:a,u=this,c=u._startRect,d=u._startPos;this._currentOptions=i;var f=[0,0];return c.top>o-l?(d[1]>c.top||o<d[1])&&(f[1]=-1):c.top+c.height<o+l&&(d[1]<c.top+c.height||o>d[1])&&(f[1]=1),c.left>s-l?(d[0]>c.left||s<d[0])&&(f[0]=-1):c.left+c.width<s+l&&(d[0]<c.left+c.width||s>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(pa(pa({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var s=r.prevScrollPos,o=s===void 0?this._prevScrollPos:s,a=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(a||[0,0],r),p=f[0]-o[0],v=f[1]-o[1],m=a||[p?Math.abs(p)/p:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,this._lock=!1,!p&&!v?!1:(this.emit("move",{offsetX:m[0]?p:0,offsetY:m[1]?v:0,inputEvent:c}),u&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var s=i.container,o=i.getScrollPosition,a=o===void 0?_B:o;return a({container:Cd(s),direction:r})},n._continueDrag=function(r){var i=this,s,o=r.container,a=r.direction,l=r.throttleTime,u=r.useScroll,c=r.isDrag,d=r.inputEvent;if(!(!this._flag||c&&this._isWait)){var f=Ju(),p=Math.max(l+this._prevTime-f,0);if(p>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},p),!1;this._prevTime=f;var v=this._getScrollPosition(a,r);this._prevScrollPos=v,c&&(this._isWait=!0),u||(this._lock=!0);var m={container:Cd(o),direction:a,inputEvent:d};return(s=r.requestScroll)===null||s===void 0||s.call(r,m),this.emit("scroll",m),this._isWait=!1,u||this.checkScroll(pa(pa({},r),{prevScrollPos:v,direction:a,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var s=i===!0?bS:i,o=Cd(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=bS(window,this._onScroll):this._unregister=s(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(u_);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function EB(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Un(t){return Ne(t,Bt)}function SB(t,e){return t.every(function(n,r){return Un(n-e[r])===0})}function xB(t,e){return!Un(t[0]-e[0])&&!Un(t[1]-e[1])}function gA(t){return t.length<3?0:Math.abs(qz(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function RS(t,e){var n=e.width,r=e.height,i=e.left,s=e.top,o=No(t),a=o.minX,l=o.minY,u=o.maxX,c=o.maxY,d=n/(u-a),f=r/(c-l);return t.map(function(p){return[i+(p[0]-a)*d,s+(p[1]-l)*f]})}function No(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function Em(t,e,n){var r=t[0],i=t[1],s=No(e),o=s.minX,a=s.maxX,l=[[o,i],[a,i]],u=oh(l[0],l[1]),c=Sm(e),d=[];if(c.forEach(function(v){var m=oh(v[0],v[1]),E=v[0];if(SB(u,m))d.push({pos:t,line:v,type:"line"});else{var y=vA(c_(u,m),[l,v]);y.forEach(function(_){v.some(function(S){return xB(S,_)})?d.push({pos:_,line:v,type:"point"}):Un(E[1]-i)!==0&&d.push({pos:_,line:v,type:"intersection"})})}}),or(d,function(v){return v[0]===r}))return!0;var f=0,p={};return d.forEach(function(v){var m=v.pos,E=v.type,y=v.line;if(!(m[0]>r))if(E==="intersection")++f;else{if(E==="line")return;if(E==="point"){var _=or(y,function(N){return N[1]!==i}),S=p[m[0]],b=_[1]>i?1:-1;S?S!==b&&++f:p[m[0]]=b}}}),f%2===1}function oh(t,e){var n=t[0],r=t[1],i=e[0],s=e[1],o=i-n,a=s-r;Math.abs(o)<Bt&&(o=0),Math.abs(a)<Bt&&(a=0);var l=0,u=0,c=0;return o?a?(l=-a/o,u=1,c=-l*n-r):(u=1,c=-r):a&&(l=-1,c=n),[l,u,c]}function c_(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=n===0&&s===0,u=r===0&&o===0,c=[];if(l&&u)return[];if(l){var d=-i/r,f=-a/o;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(u){var p=-i/n,v=-a/s;return p!==v?[]:[[p,-1/0],[p,1/0]]}else if(n===0){var m=-i/r,E=-(o*m+a)/s;c=[[E,m]]}else if(s===0){var m=-a/o,E=-(r*m+i)/n;c=[[E,m]]}else if(r===0){var E=-i/n,m=-(s*E+a)/o;c=[[E,m]]}else if(o===0){var E=-a/s,m=-(n*E+i)/r;c=[[E,m]]}else{var E=(r*a-o*i)/(o*n-r*s),m=-(n*E+i)/r;c=[[E,m]]}return c.map(function(y){return[y[0],y[1]]})}function vA(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var i=t[0],s=i[0],o=i[1];if(Un(s-t[1][0])){if(!Un(o-t[1][1])){var u=Math.max.apply(Math,n.map(function(d){return d[0][0]})),c=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Un(u-c)>0)return[];r=[[u,o],[c,o]]}}else{var a=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Un(a-l)>0)return[];r=[[s,a],[s,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],p=d[1];return n.every(function(v){return 0<=Un(f-v[0][0])&&0<=Un(v[0][1]-f)&&0<=Un(p-v[1][0])&&0<=Un(v[1][1]-p)})})),r.map(function(d){return[Un(d[0]),Un(d[1])]})}function Sm(t){return EB(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function TB(t,e){var n=t.slice(),r=e.slice();TS(n)===-1&&n.reverse(),TS(r)===-1&&r.reverse();var i=Sm(n),s=Sm(r),o=i.map(function(c){return oh(c[0],c[1])}),a=s.map(function(c){return oh(c[0],c[1])}),l=[];o.forEach(function(c,d){var f=i[d],p=[];a.forEach(function(v,m){var E=c_(c,v),y=vA(E,[f,s[m]]);p.push.apply(p,y.map(function(_){return{index1:d,index2:m,pos:_,type:"intersection"}}))}),p.sort(function(v,m){return bi(f[0],v.pos)-bi(f[0],m.pos)}),l.push.apply(l,p),Em(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),s.forEach(function(c,d){if(Em(c[1],n)){var f=!1,p=zi(l,function(v){var m=v.index2;return m===d?(f=!0,!1):!!f});p===-1&&(f=!1,p=zi(l,function(v){var m=v.index1,E=v.index2;return m===-1&&E+1===d?(f=!0,!1):!!f})),p===-1?l.push({index1:-1,index2:d,pos:c[1],type:"inside"}):l.splice(p,0,{index1:-1,index2:d,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var d=c.pos,f=d[0]+"x"+d[1];return u[f]?!1:(u[f]=!0,!0)})}function CB(t,e){var n=TB(t,e);return n.map(function(r){var i=r.pos;return i})}function IB(t,e){var n=CB(t,e);return gA(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xm=function(t,e){return xm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},xm(t,e)};function bB(t,e){xm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jt=function(){return jt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jt.apply(this,arguments)};function RB(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Ag(t){return RB([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function AB(t){return t.touches&&t.touches.length>=2}function Id(t){return t?t.touches?kB(t.touches):[mA(t)]:[]}function PB(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function AS(t,e,n){var r=n.length,i=vu(t,r),s=i.clientX,o=i.clientY,a=i.originalClientX,l=i.originalClientY,u=vu(e,r),c=u.clientX,d=u.clientY,f=vu(n,r),p=f.clientX,v=f.clientY,m=s-c,E=o-d,y=s-p,_=o-v;return{clientX:a,clientY:l,deltaX:m,deltaY:E,distX:y,distY:_}}function Pg(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function kB(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(mA(t[r]));return n}function mA(t){return{clientX:t.clientX,clientY:t.clientY}}function vu(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var s=t[i];n.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,n.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,n.clientX+=s.clientX,n.clientY+=s.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var kg=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Ag(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Ag(e)-Ag(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=AS(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,s=r.deltaY;return this.movement+=Math.sqrt(i*i+s*s),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),s=[],o=0;o<i;++o)s[o]=AS([e[o]],[n[o]],[r[o]]);return s},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=vu(e,this.length),i=vu(this.prevClients,this.length),s=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(s*s+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Pg(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Pg(e)/Pg(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),PS=["textarea","input"],DB=function(t){bB(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(f,p){if(p===void 0&&(p=!0),!(!i.flag&&f.cancelable===!1)){var v=f.type.indexOf("drag")>=-1;if(!(i.flag&&v)){i._isDragAPI=!0;var m=i.options,E=m.container,y=m.pinchOutside,_=m.preventWheelClick,S=m.preventRightClick,b=m.preventDefault,N=m.checkInput,R=m.dragFocusedInput,x=m.preventClickEventOnDragStart,w=m.preventClickEventOnDrag,C=m.preventClickEventByCondition,I=i._useTouch,A=!i.flag;if(i._isSecondaryButton=f.which===3||f.button===2,_&&(f.which===2||f.button===1)||S&&(f.which===3||f.button===2))return i.stop(),!1;if(A){var O=i._window.document.activeElement,P=f.target;if(P){var F=P.tagName.toLowerCase(),U=PS.indexOf(F)>-1,q=P.isContentEditable;if(U||q){if(N||!R&&O===P)return!1;if(O&&(O===P||q&&O.isContentEditable&&O.contains(P)))if(R)P.blur();else return!1}else if((b||f.type==="touchstart")&&O){var H=O.tagName.toLowerCase();(O.isContentEditable||PS.indexOf(H)>-1)&&O.blur()}(x||w||C)&&wn(i._window,"click",i._onClick,!0)}i.clientStores=[new kg(Id(f))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=p,i._dragFlag=!0,i._prevInputEvent=f,i.data={},i.doubleFlag=Ju()-i.prevTime<200,i._isMouseEvent=PB(f),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var L=i._preventMouseEvent||i.emit("dragStart",jt(jt({data:i.data,datas:i.data,inputEvent:f,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:p,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));L===!1&&i.stop(),i._isMouseEvent&&i.flag&&b&&f.preventDefault()}if(!i.flag)return!1;var j=0;if(A?(i._attchDragEvent(),I&&y&&(j=setTimeout(function(){wn(E,"touchstart",i.onDragStart,{passive:!1})}))):I&&y&&on(E,"touchstart",i.onDragStart),i.flag&&AB(f)){if(clearTimeout(j),A&&f.touches.length!==f.changedTouches.length)return;i.pinchFlag||i.onPinchStart(f)}}}},i.onDrag=function(f,p){if(i.flag){var v=i.options.preventDefault;!i._isMouseEvent&&v&&f.preventDefault(),i._prevInputEvent=f;var m=Id(f),E=i.moveClients(m,f,!1);if(i._dragFlag){if(i.pinchFlag||E.deltaX||E.deltaY){var y=i._preventMouseEvent||i.emit("drag",jt(jt({},E),{isScroll:!!p,inputEvent:f}));if(y===!1){i.stop();return}}i.pinchFlag&&i.onPinch(f,m)}i.getCurrentStore().getPosition(m,!0)}},i.onDragEnd=function(f){if(i.flag){var p=i.options,v=p.pinchOutside,m=p.container,E=p.preventClickEventOnDrag,y=p.preventClickEventOnDragStart,_=p.preventClickEventByCondition,S=i.isDrag;(E||y||_)&&requestAnimationFrame(function(){i._allowClickEvent()}),!_&&!y&&E&&!S&&i._allowClickEvent(),i._useTouch&&v&&on(m,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(f);var b=f!=null&&f.touches?Id(f):[],N=b.length;N===0||!i.options.keepDragging?i.flag=!1:i._addStore(new kg(b));var R=i._getPosition(),x=Ju(),w=!S&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=S||w?0:x,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",jt({data:i.data,datas:i.data,isDouble:w,isDrag:S,isClick:!S,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:f,isTrusted:i._isTrusted},R)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){on(i._window,"click",i._onClick,!0)},i._onClick=function(f){i._allowClickEvent(),i._allowMouseEvent();var p=i.options.preventClickEventByCondition;p!=null&&p(f)||(f.stopPropagation(),f.preventDefault())},i._onContextMenu=function(f){var p=i.options;p.preventRightClick?i.onDragEnd(f):f.preventDefault()},i._passCallback=function(){};var s=[].concat(n),o=s[0];i._window=uA(o)?o:Is(o),i.options=jt({checkInput:!1,container:o&&!("document"in o)?Is(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=i.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=s,i._useDrag&&s.forEach(function(f){wn(f,"dragstart",i.onDragStart)}),i._useMouse&&(s.forEach(function(f){wn(f,"mousedown",i.onDragStart),wn(f,"mousemove",i._passCallback)}),wn(l,"contextmenu",i._onContextMenu)),c&&wn(Is(),"blur",i.onBlur),i._useTouch){var d={passive:!1};s.forEach(function(f){wn(f,"touchstart",i.onDragStart,d),wn(f,"touchmove",i._passCallback,d)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(n,r),s&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],s=n[1],o=this.getCurrentStore(),a=o.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+i,clientY:c+s,originalClientX:u,originalClientY:c}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),jt(jt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),on(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(s){on(s,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(s){on(s,"mousedown",n.onDragStart)}),on(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(s){on(s,"touchstart",n.onDragStart)}),on(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var s=new kg(Id(n));this.pinchFlag=!0,this._addStore(s);var o=this.emit("pinchStart",jt(jt({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",jt(jt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",jt(jt({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var s=this._getPosition(n,i),o=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var a=!1;return!o&&this.isDrag&&(a=!0),jt(jt({data:this.data,datas:this.data},s),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),s=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(u,c){var d=c.getPosition();return u.distX+=d.distX,u.distY+=d.distY,u},s),a=o.distX,l=o.distY;return jt(jt({},s),{distX:a,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(wn(r,"dragover",this.onDrag,i),wn(n,"dragend",this.onDragEnd)),this._useMouse&&(wn(r,"mousemove",this.onDrag),wn(n,"mouseup",this.onDragEnd)),this._useTouch&&(wn(r,"touchmove",this.onDrag,i),wn(n,"touchend",this.onDragEnd,i),wn(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(on(r,"dragover",this.onDrag),on(n,"dragend",this.onDragEnd)),this._useMouse&&(on(r,"mousemove",this.onDrag),on(n,"mouseup",this.onDragEnd)),this._useTouch&&(on(r,"touchstart",this.onDragStart),on(r,"touchmove",this.onDrag),on(n,"touchend",this.onDragEnd),on(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(u_);function NB(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var OB=NB;function MB(t){return OB(t).toString(36)}function LB(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function jB(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var s=i.trim();return(s?po(s):[""]).map(function(o){var a=o.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function VB(t,e,n,r,i){var s=r_(r),o=s.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=jB(t,e,n),(i||s.head||s.body).appendChild(o),o}function FB(t){var e="rCS"+MB(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=LB(n),s=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!s)s=VB(e,t,r,n,i);else{var o=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var a,l=parseFloat(s.getAttribute("data-styled-count"))||0;l<=1?(s.remove?s.remove():(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(l-1))}}}}}var Tm=function(){return Tm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tm.apply(this,arguments)};function zB(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yA(t,e){var n=FB(e),r=n.className;return D.forwardRef(function(i,s){var o=i.className,a=o===void 0?"":o;i.cspNonce;var l=zB(i,["className","cspNonce"]),u=D.useRef();return D.useImperativeHandle(s,function(){return u.current},[]),D.useEffect(function(){var c=n.inject(u.current,{nonce:i.cspNonce});return function(){c.destroy()}},[]),D.createElement(t,Tm({ref:u,"data-styled-id":r,className:"".concat(a," ").concat(r)},l))})}var Cm=function(t,e){return Cm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Cm(t,e)};function Rc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Cm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var V=function(){return V=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V.apply(this,arguments)};function BB(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function UB(t,e,n,r){var i=arguments.length,s=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function $B(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function ce(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Ac(t,e){return V({events:[],props:[],name:t},e)}var GB=["n","w","s","e"],d_=["n","w","s","e","nw","ne","sw","se"];function HB(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function WB(t){var e=HB(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var vl=Dz(),_A=vl.browser.webkit,wA=_A&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),EA=vl.browser.name,SA=parseInt(vl.browser.version,10),qB=EA==="chrome",YB=vl.browser.chromium,KB=parseInt(vl.browser.chromiumVersion,10)||0,XB=qB&&SA>=109||YB&&KB>=109,QB=EA==="firefox",JB=parseInt(vl.browser.webkitVersion,10)>=612||SA>=15,f_="moveable-",ZB=d_.map(function(t){var e="",n="",r="center",i="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(s,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(s,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),e6=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(ZB,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(WB(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(wA?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),t6=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Im=1e-4,Ln=1e-7,bd=1e-9,bm=Math.pow(10,10),kS=-bm,n6={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},h_={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},xA={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},r6=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function Pc(t,e,n,r,i,s){var o,a;s===void 0&&(s="draggable");var l=(a=(o=e.gestos[s])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[s]||(u[s]={});return V(V({},l),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var Ka=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),V(V({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,s=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:s,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Pa(t,e,n,r){var i=t.length===16,s=i?4:3,o=Bo(t,n,r,s),a=B(o,4),l=B(a[0],2),u=l[0],c=l[1],d=B(a[1],2),f=d[0],p=d[1],v=B(a[2],2),m=v[0],E=v[1],y=B(a[3],2),_=y[0],S=y[1],b=B(Tt(t,e,s),2),N=b[0],R=b[1],x=Math.min(u,f,m,_),w=Math.min(c,p,E,S),C=Math.max(u,f,m,_),I=Math.max(c,p,E,S);u=u-x||0,f=f-x||0,m=m-x||0,_=_-x||0,c=c-w||0,p=p-w||0,E=E-w||0,S=S-w||0,N=N-x||0,R=R-w||0;var A=t[0],O=t[s+1],P=Nn(A*O);return{left:x,top:w,right:C,bottom:I,origin:[N,R],pos1:[u,c],pos2:[f,p],pos3:[m,E],pos4:[_,S],direction:P}}function TA(t,e){var n=e.clientX,r=e.clientY,i=e.datas,s=t.state,o=s.moveableClientRect,a=s.rootMatrix,l=s.is3d,u=s.pos1,c=o.left,d=o.top,f=l?4:3,p=B(Ce(Ja(a,[n-c,r-d],f),u),2),v=p[0],m=p[1],E=B(hi({datas:i,distX:v,distY:m}),2),y=E[0],_=E[1];return[y,_]}function zo(t,e){var n=e.datas,r=t.state,i=r.allMatrix,s=r.beforeMatrix,o=r.is3d,a=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,p=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=s,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=ui(i,p),n.inverseBeforeMatrix=ui(s,p),n.absoluteOrigin=ko(Ye([a,l],u),p),n.startDragBeforeDist=In(n.inverseBeforeMatrix,n.absoluteOrigin,p),n.startDragDist=In(n.inverseMatrix,n.absoluteOrigin,p)}function i6(t){return Pa(t.datas.beforeTransform,[50,50],100,100).direction}function pp(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,s=r.transformIndex,o=i.nextTransforms,a=o.length,l=i.nextTransformAppendedIndexes,u=-1;s===-1?(n==="translate"?u=0:n==="rotate"&&(u=zi(o,function(p){return p.match(/scale\(/g)})),u===-1&&(u=o.length),r.transformIndex=u):or(l,function(p){return p.index===s&&p.functionName===n})?u=s:u=s+l.filter(function(p){return p.index<s}).length;var c=PU(o,t.state,u),d=c.targetFunction,f=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=c.beforeFunctionTexts,r.afterFunctionTexts=c.afterFunctionTexts,r.beforeTransform=c.beforeFunctionMatrix,r.beforeTransform2=c.beforeFunctionMatrix2,r.targetTansform=c.targetFunctionMatrix,r.afterTransform=c.afterFunctionMatrix,r.afterTransform2=c.afterFunctionMatrix2,r.targetAllTransform=c.allFunctionMatrix,d.functionName===f?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):a>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=ce(ce([],B(l),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function gp(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function s6(t){var e=t.datas,n=t.distX,r=t.distY,i=B(IA({datas:e,distX:n,distY:r}),2),s=i[0],o=i[1],a=CA(e,tB([s,o],4));return In(a,ko([0,0,0],4),4)}function CA(t,e,n){var r=t.beforeTransform,i=t.afterTransform,s=t.beforeTransform2,o=t.afterTransform2,a=t.targetAllTransform,l=n?ot(a,e,4):ot(e,a,4),u=ot(ui(n?s:r,4),l,4),c=ot(u,ui(n?o:i,4),4);return c}function IA(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,s=e.is3d,o=e.startDragBeforeDist,a=e.absoluteOrigin,l=s?4:3;return Ce(In(i,Ye(a,[n,r]),l),o)}function hi(t,e){var n=t.datas,r=t.distX,i=t.distY,s=n.inverseBeforeMatrix,o=n.inverseMatrix,a=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,d=a?4:3;return Ce(In(e?s:o,Ye(c,[r,i]),d),e?l:u)}function o6(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var s=n.matrix,o=n.is3d;n.startDragBeforeDist;var a=n.startDragDist,l=n.absoluteOrigin,u=o?4:3;return Ce(In(s,Ye(a,[r,i]),u),l)}function a6(t,e,n,r,i,s){return r===void 0&&(r=e),i===void 0&&(i=n),s===void 0&&(s=[0,0]),t?t.map(function(o,a){var l=Cc(o),u=l.value,c=l.unit,d=a?i:r,f=a?n:e;if(o==="%"||isNaN(u)){var p=d?s[a]/d:0;return f*p}else if(c!=="%")return u;return f*u/100}):s}function bA(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function l6(t,e){return bA(e).map(function(n){return t[n]})}function Dg(t,e){var n=(e+1)/2;return[ih(t[0][0],t[1][0],n,1-n),ih(t[0][1],t[1][1],n,1-n)]}function Yt(t,e){var n=Dg([t[0],t[1]],e[0]),r=Dg([t[2],t[3]],e[0]);return Dg([n,r],e[1])}function u6(t,e,n,r,i,s){var o=Bo(e,n,r,i),a=Yt(o,s),l=t[0]-a[0],u=t[1]-a[1];return[l,u]}function kc(t,e,n,r){return ot(t,yu(e,r,n),r)}function c6(t,e,n,r){var i=t.transformOrigin,s=t.offsetMatrix,o=t.is3d,a=o?4:3,l;if(Hi(n)){var u=e.beforeTransform,c=e.afterTransform;r?l=Ur(Zu(n),4,a):l=Ur(ot(ot(u,Zu([n]),4),c,4),4,a)}else l=n;return kc(s,l,i,a)}function d6(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,s=t.targetMatrix,o=t.targetAllTransform,a=i?4:3;return kc(r,ot(o||s,o_(e,a),a),n,a)}function vp(t,e){var n=ml(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=rn(r)?r:Ls(r),Rm(t,e,i)},setTransformIndex:function(r){Rm(t,e,r)}}}function mp(t,e,n){var r=ml(e),i=r.startTransforms;Rm(t,e,zi(i,function(s){return s.indexOf("".concat(n,"("))===0}))}function Rm(t,e,n){var r=ml(e),i=e.datas;if(i.transformIndex=n,n!==-1){var s=r.startTransforms[n];if(s){var o=t.state,a=Ya([s],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});i.startValue=a[0].functionValue}}}function p_(t,e){var n=ml(t);n.nextTransforms=Ls(e)}function ml(t){return t.originalDatas.beforeRenderable}function ah(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Rd(t){return(ah(t)||[]).join(" ")}function Ad(t){return ml(t).nextStyle}function RA(t,e,n,r,i){p_(i,e);var s=Dn.drag(t,Pc(i,t.state,n,r)),o=s?s.transform:e;return V(V({transform:e,drag:s},On({transform:o},i)),{afterTransform:o})}function g_(t,e,n,r,i,s){var o=c6(t.state,i,e,s),a=p6(t,n,r,o);return a}function AA(t,e,n,r,i,s,o){var a=g_(t,e,n,i,s,o),l=t.state,u=l.left,c=l.top,d=t.props.groupable,f=d?u:0,p=d?c:0,v=Ce(r,a);return Ce(v,[f,p])}function f6(t,e,n,r,i,s,o){var a=AA(t,e,n,r,i,s,o);return a}function h6(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function p6(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,s=i.width,o=i.height,a=i.is3d,l=a?4:3,u=[s/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return Tt(r,u,l)}function g6(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,s=n.fixedOffset;return AA(t,"rotate(".concat(e,"deg)"),r,i,s,n)}function v6(t,e,n,r,i,s){var o=t.props.groupable,a=t.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,d=a.width,f=a.height,p=a.left,v=a.top,m=s.fixedDirection,E=s.nextTargetMatrix||a.targetMatrix,y=c?4:3,_=a6(i,e,n,d,f,l),S=o?p:0,b=o?v:0,N=kc(u,E,_,y),R=u6(r,N,e,n,y,m);return Ce(R,[S,b])}function m6(t,e){return Yt(Tr(t.state),e)}function y6(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n!=null&&n.isFlag()&&(i=n.getEventData()[e]),!i&&(r!=null&&r.isFlag())&&(i=r.getEventData()[e]),i||{}}function _6(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function w6(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function PA(t,e,n){for(var r=t,i=[],s=i_(t)||Ws(t),o=!n&&t===e||t===s,a=o,l=!1,u=3,c,d,f,p=!1,v=tc(e,e,!0).offsetParent,m=1;r&&!a;){a=o;var E=Qn(r),y=E("position"),_=eP(r),S=y==="fixed",b=w6(E),N=nB(mU(_)),R=void 0,x=!1,w=!1,C=0,I=0,A=0,O=0,P={hasTransform:!1,fixedContainer:null};S&&(p=!0,P=SU(r),v=P.fixedContainer);var F=N.length;!l&&(F===16||b.length)&&(l=!0,u=4,Om(i),f&&(f=Ur(f,3,4))),l&&F===9&&(N=Ur(N,3,4));var U=EU(r,t),q=U.tagName,H=U.hasOffset,L=U.isSVG,j=U.origin,z=U.targetOrigin,$=U.offset,K=B($,2),J=K[0],te=K[1];q==="svg"&&!r.ownerSVGElement&&f&&(i.push({type:"target",target:r,matrix:xU(r,u)}),i.push({type:"offset",target:r,matrix:vt(u)}));var ie=parseFloat(E("zoom"))||1;if(S)R=P.fixedContainer,x=!0;else{var X=tc(r,e,!1,!0,E),ue=X.offsetZoom;if(R=X.offsetParent,x=X.isEnd,w=X.isStatic,m*=ue,(X.isCustomElement||ue!==1)&&w)J-=R.offsetLeft,te-=R.offsetTop;else if(QB||XB){var me=X.parentSlotElement;if(me){for(var Se=R,xe=0,se=0;Se&&_6(Se);)xe+=Se.offsetLeft,se+=Se.offsetTop,Se=Se.offsetParent;J-=xe,te-=se}}}if(_A&&!JB&&H&&!L&&w&&(y==="relative"||y==="static")&&(J-=R.offsetLeft,te-=R.offsetTop,o=o||x),S)H&&P.hasTransform&&(A=R.clientLeft,O=R.clientTop);else if(H&&v!==R&&(C=R.clientLeft,I=R.clientTop),H&&R===s){var de=tP(r,!1);J+=de[0],te+=de[1]}if(i.push({type:"target",target:r,matrix:yu(N,u,j)}),b.length&&(i.push({type:"offset",target:r,matrix:vt(u)}),i.push({type:"target",target:r,matrix:yu(Zu(b),u,j)})),H){var Pe=r===t,Y=Pe?0:r.scrollLeft,oe=Pe?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Do([J-Y+C-A,te-oe+I-O],u)})}else i.push({type:"offset",target:r,origin:j});if(ie!==1&&i.push({type:"zoom",target:r,matrix:yu(o_([ie,ie],u),u,[0,0])}),f||(f=N),c||(c=j),d||(d=z),a||S)break;r=R,o=x,(!n||r===s)&&(a=o)}return f||(f=vt(u)),c||(c=[0,0]),d||(d=[0,0]),{zoom:m,offsetContainer:v,matrixes:i,targetMatrix:f,transformOrigin:c,targetOrigin:d,is3d:l,hasFixed:p}}var so=null,oo=null,ga=null;function Xa(t){t?(window.Map&&(so=new Map,oo=new Map),ga=[]):(so=null,ga=null,oo=null)}function E6(t){var e=oo==null?void 0:oo.get(t);if(e)return e;var n=_u(t,!0);return oo&&oo.set(t,n),n}function S6(t,e){if(ga){var n=or(ga,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=PA(t,e,!0);return ga&&ga.push([[t,e],r]),r}function Qn(t){var e=so==null?void 0:so.get(t);if(!e){var n=Is(t).getComputedStyle(t);if(!so)return function(s){return n[s]};e={style:n,cached:{}},so.set(t,e)}var r=e.cached,i=e.style;return function(s){return s in r||(r[s]=i[s]),r[s]}}function Lr(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var s=i.childDatas;return t.moveables.map(function(o,a){return s[a]=s[a]||{},s[a][e]=s[a][e]||{},V(V({},n),{isRequestChild:!0,datas:s[a][e],originalDatas:s[a]})})}function Ng(t,e,n,r,i,s,o){var a=!!n.match(/Start$/g),l=!!n.match(/End$/g),u=i.isPinch,c=i.datas,d=Lr(t,e.name,i),f=t.moveables,p=[],v=d.map(function(m,E){var y=f[E],_=y.state,S=_.gestos,b=m;if(a)b=new Ka(o).dragStart(r,m),p.push(b);else{if(S[o]||(S[o]=c.childGestos[E]),!S[o])return;b=Pc(m,_,r,u,s,o),p.push(b)}var N=e[n](y,V(V({},b),{parentFlag:!0}));return l&&(S[o]=null),N});return a&&(c.childGestos=f.map(function(m){return m.state.gestos[o]})),{eventParams:v,childEvents:p}}function Ri(t,e,n,r,i,s){i===void 0&&(i=function(c,d){return d});var o=!!n.match(/End$/g),a=Lr(t,e.name,r),l=t.moveables,u=a.map(function(c,d){var f=l[d],p=c;p=i(f,c);var v=e[n](f,V(V({},p),{parentFlag:!0}));return o&&(f.state.gestos={}),v});return u}function lh(t,e,n,r){var i=n.fixedDirection,s=n.fixedPosition,o=r.datas.startPositions||Tr(e.state),a=Yt(o,i),l=B(In(bc(-t.rotation/180*Math.PI,3),[a[0]-s[0],a[1]-s[1],1],3),2),u=l[0],c=l[1];return r.datas.originalX=u,r.datas.originalY=c,r}function kA(t,e,n,r){var i=t.getState(),s=i.renderPoses,o=i.rotation,a=i.direction,l=Oo(t.props,e).zoom,u=mu(o/Math.PI*180),c={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var f=d.renderDirectionMap;n.forEach(function(v){var m=v.dir;c[m]=!0});var p=Nn(a);return n.map(function(v){var m=v.data,E=v.classNames,y=v.dir,_=h_[y];if(!_||!c[y])return null;f[y]=!0;var S=(Ne(u,15)+p*xA[y]+720)%180,b={};return gl(m).forEach(function(N){b["data-".concat(N)]=m[N]}),r.createElement("div",V({className:Te.apply(void 0,ce(["control","direction",y,e],B(E),!1)),"data-rotation":S,"data-direction":y},b,{key:"direction-".concat(y),style:fh.apply(void 0,ce([o,l],B(_.map(function(N){return s[N]})),!1))}))})}function DA(t,e,n,r){var i=Oo(t.props,n),s=i.renderDirections,o=s===void 0?e:s,a=i.displayAroundControls;if(!o)return[];var l=o===!0?d_:o;return ce(ce([],B(a?LA(t,r,n,l):[]),!1),B(kA(t,n,l.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function ec(t,e,n,r,i,s){for(var o=[],a=6;a<arguments.length;a++)o[a-6]=arguments[a];var l=Mt(n,r),u=e?Ne(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(s),className:Te.apply(void 0,ce(["line","direction",e?"edge":"",e],B(o),!1)),"data-rotation":u,"data-line-key":s,"data-direction":e,style:Zl(n,r,i,l)})}function NA(t,e,n,r,i){var s=n===!0?GB:n;return s.map(function(o,a){var l=B(h_[o],2),u=l[0],c=l[1];if(c!=null)return ec(t,o,r[u],r[c],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function OA(t){return function(e,n){var r=Oo(e.props,t).edge;return r&&(r===!0||r.length)?ce(ce([],B(NA(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),B(x6(e,t,n)),!1):MA(e,t,n)}}function MA(t,e,n){return DA(t,d_,e,n)}function x6(t,e,n){return DA(t,["nw","ne","sw","se"],e,n)}function LA(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var s=t.getState(),o=s.renderPoses,a=s.rotation,l=s.direction,u=i.renderDirectionMap,c=t.props.zoom,d=Nn(l),f=a/Math.PI*180;return(r||gl(u)).map(function(p){var v=h_[p];if(!v)return null;var m=(Ne(f,15)+d*xA[p]+720)%180,E=["around-control"];return n&&E.push("direction",n),e.createElement("div",{className:Te.apply(void 0,ce([],B(E),!1)),"data-rotation":m,"data-direction":p,key:"direction-around-".concat(p),style:fh.apply(void 0,ce([a,c],B(v.map(function(y){return o[y]})),!1))})})}function v_(t,e,n){var r=t||{},i=r.position,s=i===void 0?"client":i,o=r.left,a=o===void 0?-1/0:o,l=r.top,u=l===void 0?-1/0:l,c=r.right,d=c===void 0?1/0:c,f=r.bottom,p=f===void 0?1/0:f,v={position:s,left:a,top:u,right:d,bottom:p};return{vertical:DS(v,e,!0),horizontal:DS(v,n,!1)}}function yp(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,s=r.clientWidth,o=r.clientLeft,a=r.clientTop,l=n.snapOffset,u=l.left,c=l.top,d=l.right,f=l.bottom,p=e||t.props.bounds||{},v=p.position||"client",m=v==="css",E=p.left,y=E===void 0?-1/0:E,_=p.top,S=_===void 0?-1/0:_,b=p.right,N=b===void 0?m?-1/0:1/0:b,R=p.bottom,x=R===void 0?m?-1/0:1/0:R;return m&&(N=s+d-u-N,x=i+f-c-x),{left:y+u-o,right:N+u-o,top:S+c-a,bottom:x+c-a}}function T6(t,e,n){var r=yp(t),i=r.left,s=r.top,o=r.right,a=r.bottom,l=B(n,2),u=l[0],c=l[1],d=B(Ce(n,e),2),f=d[0],p=d[1];re(f)<Ln&&(f=0),re(p)<Ln&&(p=0);var v=p>0,m=f>0,E={isBound:!1,offset:0,pos:0},y={isBound:!1,offset:0,pos:0};if(f===0&&p===0)return{vertical:E,horizontal:y};if(f===0)v?a<c&&(y.pos=a,y.offset=c-a):s>c&&(y.pos=s,y.offset=c-s);else if(p===0)m?o<u&&(E.pos=o,E.offset=u-o):i>u&&(E.pos=i,E.offset=u-i);else{var _=p/f,S=n[1]-_*u,b=0,N=0,R=!1;m&&o<=u?(b=_*o+S,N=o,R=!0):!m&&u<=i&&(b=_*i+S,N=i,R=!0),R&&(b<s||b>a)&&(R=!1),R||(v&&a<=c?(b=a,N=(b-S)/_,R=!0):!v&&c<=s&&(b=s,N=(b-S)/_,R=!0)),R&&(E.isBound=!0,E.pos=N,E.offset=u-N,y.isBound=!0,y.pos=b,y.offset=c-b)}return{vertical:E,horizontal:y}}function DS(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],s=Math.min.apply(Math,ce([],B(e),!1)),o=Math.max.apply(Math,ce([],B(e),!1)),a=[];return r+1>s&&a.push({direction:"start",isBound:!0,offset:s-r,pos:r}),i-1<o&&a.push({direction:"end",isBound:!0,offset:o-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return re(u.offset)-re(l.offset)})}function NS(t,e,n){var r=n?t.map(function(i){return Ic(i,n)}):t;return r.some(function(i){return i[0]<e.left&&re(i[0]-e.left)>.1||i[0]>e.right&&re(i[0]-e.right)>.1||i[1]<e.top&&re(i[1]-e.top)>.1||i[1]>e.bottom&&re(i[1]-e.bottom)>.1})}function C6(t,e,n){var r=xr(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(s,o){return re(s-t[n?0:1])-re(o-t[n?0:1])}).map(function(s){return Mt([0,0],n?[s,e]:[e,s])})}function I6(t,e,n,r,i){if(!t.props.bounds)return[];var s=i*Math.PI/180,o=yp(t),a=o.left,l=o.top,u=o.right,c=o.bottom,d=a-r[0],f=u-r[0],p=l-r[1],v=c-r[1],m={left:d,top:p,right:f,bottom:v};if(!NS(n,m,0))return[];var E=[];return[[d,0],[f,0],[p,1],[v,1]].forEach(function(y){var _=B(y,2),S=_[0],b=_[1];n.forEach(function(N){var R=Mt([0,0],N);E.push.apply(E,ce([],B(C6(N,S,b).map(function(x){return s+x-R}).filter(function(x){return!NS(e,m,x)}).map(function(x){return Ne(x*180/Math.PI,Ln)})),!1))})}),E}var b6=["left","right","center"],R6=["top","bottom","middle"],OS={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},js={start:"left",end:"right",center:"center"},Vs={start:"top",end:"bottom",center:"middle"};function va(){return{left:!1,top:!1,right:!1,bottom:!1}}function yl(t,e){var n=t.props,r=n.snappable,i=n.bounds,s=n.innerBounds,o=n.verticalGuidelines,a=n.horizontalGuidelines,l=n.snapGridWidth,u=n.snapGridHeight,c=t.state,d=c.guidelines,f=c.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||u||i||s||d&&d.length||o&&o.length||a&&a.length)}function m_(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function A6(t,e){var n=m_(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function y_(t,e){var n=A6(t,e),r=R6.filter(function(s){return s in n}),i=b6.filter(function(s){return s in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(s){return n[s]}),vertical:i.map(function(s){return n[s]})}}function P6(t,e,n){var r=Tt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function k6(t){var e=B(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];Math.abs(i)<Bt&&(i=0),Math.abs(s)<Bt&&(s=0);var o=0,a=0,l=0;return i?s?(o=-s/i,a=1,l=o*n[0]-n[1]):(a=1,l=-n[1]):(o=-1,l=n[0]),[o,a,l].map(function(u){return Ne(u,Bt)})}var jA="snapRotationThreshold",VA="snapRotationDegrees",FA="snapHorizontalThreshold",zA="snapVerticalThreshold";function _p(t,e,n,r,i,s,o){var a;r===void 0&&(r=[]),i===void 0&&(i=[]);var l=t.props,u=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=KS(o,l[FA],5),d=KS(s,l[zA],5);return BA(t.state.guidelines,e,n,r,i,c,d,u)}function BA(t,e,n,r,i,s,o,a){return{vertical:LS(t,"vertical",e,o*a[0],r),horizontal:LS(t,"horizontal",n,s*a[1],i)}}function D6(t,e,n){var r=B(n,2),i=r[0],s=r[1],o=B(e,2),a=o[0],l=o[1],u=B(Ce(n,e),2),c=u[0],d=u[1],f=d>0,p=c>0;c=hh(c),d=hh(d);var v={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(c===0&&d===0)return{vertical:v,horizontal:m};var E=_p(t,c?[i]:[],d?[s]:[],[],[],void 0,void 0),y=E.vertical,_=E.horizontal;y.posInfos.filter(function(q){var H=q.pos;return p?H>=a:H<=a}),_.posInfos.filter(function(q){var H=q.pos;return f?H>=l:H<=l}),y.isSnap=y.posInfos.length>0,_.isSnap=_.posInfos.length>0;var S=Am(y),b=S.isSnap,N=S.guideline,R=Am(_),x=R.isSnap,w=R.guideline,C=x?w.pos[1]:0,I=b?N.pos[0]:0;if(c===0)x&&(m.isSnap=!0,m.pos=w.pos[1],m.offset=s-m.pos);else if(d===0)b&&(v.isSnap=!0,v.pos=I,v.offset=i-I);else{var A=d/c,O=n[1]-A*i,P=0,F=0,U=!1;b?(F=I,P=A*F+O,U=!0):x&&(P=C,F=(P-O)/A,U=!0),U&&(v.isSnap=!0,v.pos=F,v.offset=i-F,m.isSnap=!0,m.pos=P,m.offset=s-P)}return{vertical:v,horizontal:m}}function ds(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function MS(t,e,n,r){var i=y_(t.props.snapDirections,e),s=_p(t,i.vertical,i.horizontal,i.verticalNames.map(function(l){return ds(l)}),i.horizontalNames.map(function(l){return ds(l)}),n,r),o=ds(i.horizontalNames[s.horizontal.index]),a=ds(i.verticalNames[s.vertical.index]);return{vertical:V(V({},s.vertical),{direction:a}),horizontal:V(V({},s.horizontal),{direction:o})}}function Am(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,s=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:s,pos:n.pos,guideline:o}}function LS(t,e,n,r,i){var s,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",l=a?0:1,u=n.map(function(d,f){var p=i[f]||"",v=t.map(function(m){var E=m.pos,y=d-E[l];return{offset:y,dist:re(y),guideline:m,direction:p}}).filter(function(m){var E=m.guideline,y=m.dist,_=E.type;return!(_!==e||y>r)}).sort(function(m,E){return m.dist-E.dist});return{pos:d,index:f,guidelineInfos:v,direction:p}}).filter(function(d){return d.guidelineInfos.length>0}).sort(function(d,f){return d.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(o=(s=u[0])===null||s===void 0?void 0:s.direction)!==null&&o!==void 0?o:"",posInfos:u}}function N6(t,e,n,r,i){var s=[];n[0]&&n[1]?s=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,p,v){var m=v[p+1]||v[0];s.push(f),s.push([(f[0]+m[0])/2,(f[1]+m[1])/2])}):t.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],n):(s.push.apply(s,ce([],B(l6([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]));var o=s.map(function(f){return Yt(e,f)}),a=o.map(function(f){return f[0]}),l=o.map(function(f){return f[1]}),u=_p(t,a,l,s.map(function(f){return ds(f[0])}),s.map(function(f){return ds(f[1])}),r,i),c=ds(s.map(function(f){return f[0]})[u.vertical.index]),d=ds(s.map(function(f){return f[1]})[u.horizontal.index]);return{vertical:V(V({},u.vertical),{direction:c}),horizontal:V(V({},u.horizontal),{direction:d})}}function UA(t,e){var n=re(t.offset),r=re(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<Ln?1:r<Ln?-1:n-r}function uh(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],s=r.sign[e],o=n.offset[e],a=r.offset[e];if(i){if(!s)return-1}else return 1;return UA({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:a})})[0]}function O6(t,e,n){var r=[];if(n)re(e[0])!==1||re(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(a){var l=[o*i[0],a*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var s=re(e[0])===1?[1]:[1,-1];s.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var s=re(e[1])===1?[1]:[1,-1];s.forEach(function(a){r.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return r}function $A(t,e){var n=mm([e[0][0],e[1][0]]),r=mm([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function __(t,e){var n=B(e,2),r=n[0],i=n[1],s=i[0]-r[0],o=i[1]-r[1];re(s)<Ln&&(s=0),re(o)<Ln&&(o=0);var a,l;if(!s)a=r[0],l=t[0];else if(!o)a=r[1],l=t[1];else{var u=o/s;a=u*(t[0]-r[0])+r[1],l=t[1]}return a-l}function GA(t,e,n,r){return r===void 0&&(r=Ln),t.every(function(i){var s=__(i,e),o=s<=0;return o===n||re(s)<=r})}function jS(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function M6(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,s=e.horizontalSign,o=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,d=a.height,f=[[l,u],[l,u+d]],p=[[l,u],[l+c,u]],v=[[l+c,u],[l+c,u+d]],m=[[l,u+d],[l+c,u+d]];if(GA([[l,u],[l+c,u],[l,u+d],[l+c,u+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var E=fs(n,o,p,i),y=fs(n,o,m,i),_=fs(n,o,f,s),S=fs(n,o,v,s),b=E.isBound&&y.isBound,N=E.isBound||y.isBound,R=_.isBound&&S.isBound,x=_.isBound||S.isBound,w=Qa(E.offset,y.offset),C=Qa(_.offset,S.offset),I=[0,0],A=!1,O=!1;return re(C)<re(w)?(I=[w,0],A=N,O=b):(I=[0,C],A=x,O=R),{isAllBound:O,isVerticalBound:N,isHorizontalBound:x,isBound:A,offset:I}}function fs(t,e,n,r,i,s){var o=B(e,2),a=o[0],l=o[1],u=t[0],c=n[0],d=n[1],f=hh(d[1]-c[1]),p=hh(d[0]-c[0]),v=l,m=a,E=-a/l;if(p){if(!f){if(s&&!v)return{isBound:!1,offset:0};if(m){var b=(c[1]-u[1])/E+u[0];return jS(b,c[0],d[0],r,i)}else{var _=c[1]-u[1],S=re(_)<=(i||0);return{isBound:S,offset:S?_:0}}}}else{if(s&&!m)return{isBound:!1,offset:0};if(v){var y=E*(c[0]-u[0])+u[1];return jS(y,c[1],d[1],r,i)}else{var _=c[0]-u[0],S=re(_)<=(i||0);return{isBound:S,offset:S?_:0}}}return{isBound:!1,offset:0}}function HA(t,e,n){return e.map(function(r){var i=M6(t,r),s=i.isBound,o=i.offset,a=i.isVerticalBound,l=i.isHorizontalBound,u=r.multiple,c=hi({datas:n,distX:o[0],distY:o[1]}).map(function(d,f){return d*(u[f]?2/u[f]:0)});return{sign:u,isBound:s,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function L6(t,e,n){var r,i=w_(t,e,[0,0],!1).map(function(f){return V(V({},f),{multiple:f.multiple.map(function(p){return re(p)*2})})}),s=HA(t,i,n),o=uh(s,0),a=uh(s,1),l=0,u=0,c=o.isVerticalBound||a.isVerticalBound,d=o.isHorizontalBound||a.isHorizontalBound;return(c||d)&&(r=B(o6({datas:n,distX:-o.offset[0],distY:-a.offset[1]}),2),l=r[0],u=r[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:d,offset:u}}}function j6(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function w_(t,e,n,r){var i=t.state,s=i.allMatrix,o=i.is3d,a=Bo(s,100,100,o?4:3),l=Yt(a,[0,0]);return j6(n,r).map(function(u){var c=B(u,3),d=c[0],f=c[1],p=c[2],v=[Yt(a,f),Yt(a,p)],m=k6(v),E=$A(l,v),y=E.vertical,_=E.horizontal,S=__(l,v)<=0;return{multiple:d,centerSign:S,verticalSign:y,horizontalSign:_,lineConstants:m,line:[Yt(e,f),Yt(e,p)]}})}function VS(t,e,n,r){var i=r?t.map(function(s){return Ic(s,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(s){var o=__(n,s)<=0;return!GA(e,s,o)})}function V6(t){var e=B(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];if(!i)return re(n[0]);if(!s)return re(n[1]);var o=s/i;return re((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function F6(t){var e=B(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];if(!i)return[n[0],0];if(!s)return[0,n[1]];var o=s/i,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}function z6(t,e,n,r,i){var s=t.props.innerBounds,o=i*Math.PI/180;if(!s)return[];var a=s.left,l=s.top,u=s.width,c=s.height,d=a-r[0],f=a+u-r[0],p=l-r[1],v=l+c-r[1],m=[[d,p],[f,p],[d,v],[f,v]],E=Yt(n,[0,0]);if(!VS(n,m,E,0))return[];var y=[],_=m.map(function(S){return[xr(S),Mt([0,0],S)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(S){var b=Mt([0,0],F6(S)),N=V6(S);y.push.apply(y,ce([],B(_.filter(function(R){var x=B(R,1),w=x[0];return w&&N<=w}).map(function(R){var x=B(R,2),w=x[0],C=x[1],I=Math.acos(w?N/w:0),A=C+I,O=C-I;return[o+A-b,o+O-b]}).reduce(function(R,x){return R.push.apply(R,ce([],B(x),!1)),R},[]).filter(function(R){return!VS(e,m,E,R)}).map(function(R){return Ne(R*180/Math.PI,Ln)})),!1))}),y}function B6(t){var e=t.props.innerBounds,n=va();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,s=r.pos2,o=r.pos3,a=r.pos4,l=[i,s,o,a],u=Yt(l,[0,0]),c=e.left,d=e.top,f=e.width,p=e.height,v=[[c,d],[c,d+p]],m=[[c,d],[c+f,d]],E=[[c+f,d],[c+f,d+p]],y=[[c,d+p],[c+f,d+p]],_=w_(t,l,[0,0],!1),S=[],b=[];return _.forEach(function(N){var R=N.line,x=N.lineConstants,w=$A(u,R),C=w.horizontal,I=w.vertical,A=fs(R,x,m,I,1,!0),O=fs(R,x,y,I,1,!0),P=fs(R,x,v,C,1,!0),F=fs(R,x,E,C,1,!0);A.isBound&&!n.top&&(S.push(d),n.top=!0),O.isBound&&!n.bottom&&(S.push(d+p),n.bottom=!0),P.isBound&&!n.left&&(b.push(c),n.left=!0),F.isBound&&!n.right&&(b.push(c+f),n.right=!0)}),{boundMap:n,horizontal:S,vertical:b}}function U6(t,e,n,r){var i=e[0]-t[0],s=e[1]-t[1];if(re(i)<Bt&&(i=0),re(s)<Bt&&(s=0),!i)return r?[0,0]:[0,n];if(!s)return r?[n,0]:[0,0];var o=s/i,a=t[1]-o*t[0];if(r){var l=o*(e[0]+n)+a;return[n,l-e[1]]}else{var u=(e[1]+n-a)/o;return[u-e[0],n]}}function Pm(t,e,n,r,i){var s=U6(t,e,n,r);if(!s)return{isOutside:!1,offset:[0,0]};var o=bi(t,e),a=bi(s,t),l=bi(s,e),u=a>o||l>o,c=B(hi({datas:i,distX:s[0],distY:s[1]}),2),d=c[0],f=c[1];return{offset:[d,f],isOutside:u}}function ch(t,e){return t.isBound?t.offset:e.isSnap?Am(e).offset:0}function $6(t,e,n,r,i){var s=B(e,2),o=s[0],a=s[1],l=B(n,2),u=l[0],c=l[1],d=B(r,2),f=d[0],p=d[1],v=B(i,2),m=v[0],E=v[1],y=-m,_=-E;if(t&&o&&a){y=0,_=0;var S=[];if(u&&c?S.push([0,E],[m,0]):u?S.push([m,0]):c?S.push([0,E]):f&&p?S.push([0,E],[m,0]):f?S.push([m,0]):p&&S.push([0,E]),S.length){S.sort(function(x,w){return xr(Ce([o,a],x))-xr(Ce([o,a],w))});var b=S[0];if(b[0]&&re(o)>Bt)y=-b[0],_=a*re(o+y)/re(o)-a;else if(b[1]&&re(a)>Bt){var N=a;_=-b[1],y=o*re(a+_)/re(N)-o}if(t&&c&&u)if(re(y)>Bt&&re(y)<re(m)){var R=re(m)/re(y);y*=R,_*=R}else if(re(_)>Bt&&re(_)<re(E)){var R=re(E)/re(_);y*=R,_*=R}else y=Qa(-m,y),_=Qa(-E,_)}}else y=o||u?-m:0,_=a||c?-E:0;return[y,_]}function G6(t,e,n,r,i,s){if(!yl(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=x_(s.absolutePoses,[e,n]),a=wr(o),l=a.left,u=a.right,c=a.top,d=a.bottom,f={horizontal:o.map(function(F){return F[1]}),vertical:o.map(function(F){return F[0]})},p=m_(t.props.snapDirections),v=y_(p,{left:l,right:u,top:c,bottom:d,center:(l+u)/2,middle:(c+d)/2}),m=wp(t,i,v,f),E=m.vertical,y=m.horizontal,_=L6(t,o,s),S=_.vertical,b=_.horizontal,N=E.isSnap,R=y.isSnap,x=E.isBound||S.isBound,w=y.isBound||b.isBound,C=Qa(E.offset,S.offset),I=Qa(y.offset,b.offset),A=B($6(r,[e,n],[x,w],[N,R],[C,I]),2),O=A[0],P=A[1];return[{isBound:x,isSnap:N,offset:O},{isBound:w,isSnap:R,offset:P}]}function wp(t,e,n,r){r===void 0&&(r=n);var i=v_(yp(t),r.vertical,r.horizontal),s=i.horizontal,o=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:_p(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=ch(s[0],l),d=ch(o[0],u),f=re(c),p=re(d);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:f,bounds:s,snap:l},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:p,bounds:o,snap:u}}}function FS(t,e,n,r,i,s,o){o===void 0&&(o=[1,1]);var a=v_(e,n,r),l=a.horizontal,u=a.vertical,c=BA(t,n,r,[],[],i,s,o),d=c.horizontal,f=c.vertical,p=ch(l[0],d),v=ch(u[0],f),m=re(p),E=re(v);return{horizontal:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:p,dist:m,bounds:l,snap:d},vertical:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:E,bounds:u,snap:f}}}function H6(t,e,n,r){var i=Mt(t,e)/Math.PI*180,s=n.vertical,o=s.isBound,a=s.isSnap,l=s.dist,u=n.horizontal,c=u.isBound,d=u.isSnap,f=u.dist,p=i%180,v=p<3||p>177,m=p>87&&p<93;return f<l&&(o||a&&!m&&(!r||!v))?"vertical":c||d&&!v&&(!r||!m)?"horizontal":""}function W6(t,e,n,r,i,s){return n.map(function(o){var a=B(o,2),l=a[0],u=a[1],c=Yt(e,l),d=Yt(e,u),f=r?q6(t,c,d,i):wp(t,i,{vertical:[d[0]],horizontal:[d[1]]}),p=f.horizontal,v=p.offset,m=p.isBound,E=p.isSnap,y=f.vertical,_=y.offset,S=y.isBound,b=y.isSnap,N=Ce(u,l);if(!_&&!v)return{isBound:S||m,isSnap:b||E,sign:N,offset:[0,0]};var R=H6(c,d,f,r);if(!R)return{sign:N,isBound:!1,isSnap:!1,offset:[0,0]};var x=R==="vertical",w=[0,0];return!r&&re(u[0])===1&&re(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?w=hi({datas:s,distX:-_,distY:-v}):w=Pm(c,d,-(x?_:v),x,s).offset,w=w.map(function(C,I){return C*(N[I]?2/N[I]:0)}),{sign:N,isBound:x?S:m,isSnap:x?b:E,offset:w}})}function zS(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function q6(t,e,n,r){var i=T6(t,e,n),s=i.horizontal,o=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:D6(t,e,n),l=a.horizontal,u=a.vertical,c=zS(s,l),d=zS(o,u),f=re(c),p=re(d);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:d,dist:p}}}function Y6(t,e,n,r,i){var s=[-n[0],-n[1]],o=t.state,a=o.width,l=o.height,u=t.props.bounds,c=1/0,d=1/0;if(u){var f=[[n[0],-n[1]],[-n[0],n[1]]],p=u.left,v=p===void 0?-1/0:p,m=u.top,E=m===void 0?-1/0:m,y=u.right,_=y===void 0?1/0:y,S=u.bottom,b=S===void 0?1/0:S;f.forEach(function(N){var R=N[0]!==s[0],x=N[1]!==s[1],w=Yt(e,N),C=Mt(r,w)*360/Math.PI;if(x){var I=w.slice();(re(C-360)<2||re(C-180)<2)&&(I[1]=r[1]);var A=Pm(r,I,(r[1]<w[1]?b:E)-w[1],!1,i),O=B(A.offset,2),P=O[1],F=A.isOutside;isNaN(P)||(d=l+(F?1:-1)*re(P))}if(R){var I=w.slice();(re(C-90)<2||re(C-270)<2)&&(I[0]=r[0]);var U=Pm(r,I,(r[0]<w[0]?_:v)-w[0],!0,i),q=B(U.offset,1),H=q[0],L=U.isOutside;isNaN(H)||(c=a+(L?1:-1)*re(H))}})}return{maxWidth:c,maxHeight:d}}var Dn={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,s=n.zoom,o=t.getState(),a=o.dragInfo,l=o.beforeOrigin;if(r||!i||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=xr(u),d=Mt(u,[0,0]);return[e.createElement("div",{className:Te("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(d,"rad) scaleY(").concat(s,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,s=t.state,o=s.gestos,a=s.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(a.left||"")||0,n.top=parseFloat(a.top||"")||0,n.bottom=parseFloat(a.bottom||"")||0,n.right=parseFloat(a.right||"")||0,n.startValue=[0,0],zo(t,e),mp(t,e,"translate"),hU(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=Le(t,e,V({set:function(c){n.startValue=c}},vp(t,e))),u=r||ye(t,"onDragStart",l);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){pp(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,s=e.isPinch,o=e.deltaOffset,a=e.useSnap,l=e.isRequest,u=e.isGroup,c=e.parentThrottleDrag,d=e.distX,f=e.distY,p=n.isDrag,v=n.prevDist,m=n.prevBeforeDist,E=n.startValue;if(p){o&&(d+=o[0],f+=o[1]);var y=t.props,_=y.parentMoveable,S=u?0:y.throttleDrag||c||0,b=r?0:y.throttleDragRotate||0,N=0,R=!1,x=!1,w=!1,C=!1;if(!r&&b>0&&(d||f)){var I=y.startDragRotate||0,A=Ne(I+Mt([0,0],[d,f])*180/Math.PI,b)-I,O=f*Math.abs(Math.cos((A-90)/180*Math.PI)),P=d*Math.abs(Math.cos(A/180*Math.PI)),F=xr([P,O]);N=A*Math.PI/180,d=F*Math.cos(N),f=F*Math.sin(N)}if(!s&&!r&&!i){var U=B(G6(t,d,f,b,!a&&l||o,n),2),q=U[0],H=U[1];R=q.isSnap,x=q.isBound,w=H.isSnap,C=H.isBound;var L=q.offset,j=H.offset;d+=L,f+=j}var z=Ye(IA({datas:n,distX:d,distY:f}),E),$=Ye(s6({datas:n,distX:d,distY:f}),E);CS($,Ln),CS(z,Ln),b||(!R&&!x&&($[0]=Ne($[0],S),z[0]=Ne(z[0],S)),!w&&!C&&($[1]=Ne($[1],S),z[1]=Ne(z[1],S)));var K=Ce(z,E),J=Ce($,E),te=Ce(J,v),ie=Ce(K,m);n.prevDist=J,n.prevBeforeDist=K,n.passDelta=te,n.passDist=J;var X=n.left+K[0],ue=n.top+K[1],me=n.right-K[0],Se=n.bottom-K[1],xe=gp(n,"translate(".concat($[0],"px, ").concat($[1],"px)"),"translate(".concat(J[0],"px, ").concat(J[1],"px)"));if(p_(e,xe),t.state.dragInfo.dist=r?[0,0]:J,!(!r&&!_&&te.every(function(oe){return!oe})&&ie.some(function(oe){return!oe}))){var se=t.state,de=se.width,Pe=se.height,Y=Le(t,e,V({transform:xe,dist:J,delta:te,translate:$,beforeDist:K,beforeDelta:ie,beforeTranslate:z,left:X,top:ue,right:me,bottom:Se,width:de,height:Pe,isPinch:s},On({transform:xe},e)));return!r&&ye(t,"onDrag",Y),Y}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,V(V({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ar(t,e,{});return!n&&ye(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,s=e.clientX,o=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var l=Ng(t,this,"dragStart",[s||0,o||0],e,!1,"draggable"),u=l.childEvents,c=l.eventParams,d=V(V({},a),{targets:t.props.targets,events:c}),f=ye(t,"onDragGroupStart",d);i.isDrag=f!==!1;var p=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],i.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,V(V({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,s=Ng(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=V({targets:t.props.targets,events:s},r);return ye(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=Ng(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ye(t,"onDragGroupEnd",ar(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,s=!1;return{isControl:!1,requestStart:function(o){return s=o.useSnap,{datas:e,useSnap:s}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:s}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:s}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function WA(t,e){var n=Yt(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function K6(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,s=t.height,o=r?4:3,a=[i/2*(1+e[0]),s/2*(1+e[1])],l=Tt(n,a,o),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function qA(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,s=t.height,o=r?4:3,a=h6(e,i,s),l=Tt(n,e,o),u=[i?0:e[0],s?0:e[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var BS=I_("resizable"),km={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:OA("resizable"),dragControlCondition:BS,viewClassName:C_("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,s=e.isGroup,o=e.parentDirection,a=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,d=oP(o,i,r,l),f=t.state,p=f.target,v=f.width,m=f.height,E=f.gestos;if(!d||!p||E.resizable)return!1;E.resizable=a||t.controlGesto,!i&&zo(t,e),l.datas={},l.direction=d,l.startOffsetWidth=v,l.startOffsetHeight=m,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var y=t.props.transformOrigin||"% %";l.transformOrigin=Hi(y)?y.split(" "):y,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e==null?void 0:e.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function _(C){l.ratio=C&&isFinite(C)?C:0}l.startPositions=Tr(t.state);function S(C){var I=WA(l.startPositions,C);l.fixedDirection=I.fixedDirection,l.fixedPosition=I.fixedPosition,l.fixedOffset=I.fixedOffset}function b(C){var I=qA(t.state,C);l.fixedDirection=I.fixedDirection,l.fixedPosition=I.fixedPosition,l.fixedOffset=I.fixedOffset}function N(C){l.minSize=[st("".concat(C[0]),0)||0,st("".concat(C[1]),0)||0]}function R(C){var I=[C[0]||1/0,C[1]||1/0];(!Qu(I[0])||isFinite(I[0]))&&(I[0]=st("".concat(I[0]),0)||1/0),(!Qu(I[1])||isFinite(I[1]))&&(I[1]=st("".concat(I[1]),0)||1/0),l.maxSize=I}_(v/m),S(u||[-d[0],-d[1]]),l.setFixedDirection=S,l.setFixedPosition=b,l.setMin=N,l.setMax=R;var x=Le(t,e,{direction:d,startRatio:l.ratio,set:function(C){var I=B(C,2),A=I[0],O=I[1];l.startWidth=A,l.startHeight=O},setMin:N,setMax:R,setRatio:_,setFixedDirection:S,setFixedPosition:b,setOrigin:function(C){l.transformOrigin=C},dragStart:Dn.dragStart(t,new Ka().dragStart([0,0],e))}),w=c||ye(t,"onResizeStart",x);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,w!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?x:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,s=e.isPinch,o=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,d=e.isGroup,f=e.parentEvent,p=e.resolveMatrix,v=r.isResize,m=r.transformOrigin,E=r.startWidth,y=r.startHeight,_=r.prevWidth,S=r.prevHeight,b=r.minSize,N=r.maxSize,R=r.ratio,x=r.startOffsetWidth,w=r.startOffsetHeight,C=r.isWidth;if(!v)return;if(p){var I=t.state.is3d,A=r.startOffsetMatrix,O=r.startTransformOrigin,P=I?4:3,F=Zu(ah(e)),U=Math.sqrt(F.length);P!==U&&(F=Ur(F,U,P));var q=kc(A,F,O,P),H=Bo(q,x,w,P);r.startPositions=H,r.nextTargetMatrix=F,r.nextAllMatrix=q}var L=Oo(t.props,"resizable"),j=L.resizeFormat,z=L.throttleResize,$=z===void 0?i?0:1:z,K=L.parentMoveable,J=L.keepRatioFinally,te=r.direction,ie=te,X=0,ue=0;!te[0]&&!te[1]&&(ie=[1,1]);var me=R&&(o??L.keepRatio)||!1;function Se(){var Oe=r.fixedDirection,rt=fP(ie,me,r,e);X=rt.distWidth,ue=rt.distHeight;var Je=ie[0]-Oe[0]||me?Math.max(x+X,Ln):x,Ue=ie[1]-Oe[1]||me?Math.max(w+ue,Ln):w;return me&&x&&w&&(C?Ue=Je/R:Je=Ue*R),[Je,Ue]}var xe=B(Se(),2),se=xe[0],de=xe[1];f||(r.setFixedDirection(r.fixedDirection),ye(t,"onBeforeResize",Le(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(Oe){var rt;return r.setFixedDirection(Oe),rt=B(Se(),2),se=rt[0],de=rt[1],[se,de]},setFixedPosition:function(Oe){var rt;return r.setFixedPosition(Oe),rt=B(Se(),2),se=rt[0],de=rt[1],[se,de]},boundingWidth:se,boundingHeight:de,setSize:function(Oe){var rt;rt=B(Oe,2),se=rt[0],de=rt[1]}},!0)));var Pe=a;a||(!i&&s?Pe=m6(t,[0,0]):Pe=r.fixedPosition);var Y=[0,0];s||(Y=dU(t,se,de,te,Pe,!u&&c,r)),l&&(!l[0]&&(Y[0]=0),!l[1]&&(Y[1]=0));function oe(){var Oe;j&&(Oe=B(j([se,de]),2),se=Oe[0],de=Oe[1]),se=Ne(se,$),de=Ne(de,$)}if(me){ie[0]&&ie[1]&&Y[0]&&Y[1]&&(re(Y[0])>re(Y[1])?Y[1]=0:Y[0]=0);var he=!Y[0]&&!Y[1];he&&oe(),ie[0]&&!ie[1]||Y[0]&&!Y[1]||he&&C?(se+=Y[0],de=se/R):(!ie[0]&&ie[1]||!Y[0]&&Y[1]||he&&!C)&&(de+=Y[1],se=de*R)}else se+=Y[0],de+=Y[1],se=Math.max(0,se),de=Math.max(0,de);n=B(oA([se,de],b,N,me?R:!1),2),se=n[0],de=n[1],oe(),me&&(d||J)&&(C?de=se/R:se=de*R),X=se-x,ue=de-w;var be=[X-_,ue-S];r.prevWidth=X,r.prevHeight=ue;var je=v6(t,se,de,Pe,m,r);if(!(!K&&be.every(function(Oe){return!Oe})&&je.every(function(Oe){return!Oe}))){var Ee=Dn.drag(t,Pc(e,t.state,je,!!s,!1,"draggable")),ke=Ee.transform,et=E+X,ct=y+ue,at=Le(t,e,V({width:et,height:ct,offsetWidth:Math.round(se),offsetHeight:Math.round(de),startRatio:R,boundingWidth:se,boundingHeight:de,direction:te,dist:[X,ue],delta:be,isPinch:!!s,drag:Ee},lP({style:{width:"".concat(et,"px"),height:"".concat(ct,"px")},transform:ke},Ee,e)));return!f&&ye(t,"onResize",at),at}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,s=n.startOffsetHeight,o=n.prevWidth,a=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,d=u-(i+o),f=c-(s+a),p=re(d)>3,v=re(f)>3;if(p&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),v&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),p||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ar(t,e,{});return!r&&ye(t,"onResizeEnd",i),i}},dragGroupControlCondition:BS,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,V(V({},e),{isGroup:!0}));if(!r)return!1;var i=Lr(t,"resizable",e),s=n.startOffsetWidth,o=n.startOffsetHeight;function a(){var p=n.minSize;i.forEach(function(v){var m=v.datas,E=m.minSize,y=m.startOffsetWidth,_=m.startOffsetHeight,S=s*(y?E[0]/y:0),b=o*(_?E[1]/_:0);p[0]=Math.max(p[0],S),p[1]=Math.max(p[1],b)})}function l(){var p=n.maxSize;i.forEach(function(v){var m=v.datas,E=m.maxSize,y=m.startOffsetWidth,_=m.startOffsetHeight,S=s*(y?E[0]/y:0),b=o*(_?E[1]/_:0);p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],b)})}var u=Ri(t,this,"dragControlStart",e,function(p,v){return lh(t,p,n,v)});a(),l();var c=function(p){r.setFixedDirection(p),u.forEach(function(v,m){v.setFixedDirection(p),lh(t,v.moveable,n,i[m])})};n.setFixedDirection=c;var d=V(V({},r),{targets:t.props.targets,events:u.map(function(p){return V(V({},p),{setMin:function(v){p.setMin(v),a()},setMax:function(v){p.setMax(v),l()}})}),setFixedDirection:c,setMin:function(p){r.setMin(p),a()},setMax:function(p){r.setMax(p),l()}}),f=ye(t,"onResizeGroupStart",d);return n.isResize=f!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Oo(t.props,"resizable");Sp(t,"onBeforeResize",function(p){ye(t,"onBeforeResizeGroup",Le(t,e,V(V({},p),{targets:r.targets}),!0))});var i=this.dragControl(t,V(V({},e),{isGroup:!0}));if(i){var s=i.boundingWidth,o=i.boundingHeight,a=i.dist,l=r.keepRatio,u=[s/(s-a[0]),o/(o-a[1])],c=n.fixedPosition,d=Ri(t,this,"dragControl",e,function(p,v){var m=B(In(bc(t.rotation/180*Math.PI,3),[v.datas.originalX*u[0],v.datas.originalY*u[1],1],3),2),E=m[0],y=m[1];return V(V({},v),{parentDist:null,parentScale:u,dragClient:Ye(c,[E,y]),parentKeepRatio:l})}),f=V({targets:r.targets,events:d},i);return ye(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=Ri(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onResizeGroupEnd",s),n}},request:function(t){var e={},n=0,r=0,i=!1,s=t.getRect();return{isControl:!0,requestStart:function(o){var a;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(a=o==null?void 0:o.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-s.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-s.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function Og(t,e,n,r,i){var s=t.props.groupable,o=t.state,a=o.is3d?4:3,l=e.origin,u=Tt(t.state.rootMatrix,Ce([l[0],l[1]],s?[0,0]:[o.left,o.top]),a),c=Ye([i.left,i.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Mt(c,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=bi(c,[n,r])}function cf(t,e,n){var r=n.defaultDeg,i=n.prevDeg,s=i%360,o=Math.floor(i/360);s<0&&(s+=360),s>t&&s>270&&t<90?++o:s<t&&s<90&&t>270&&--o;var a=e*(o*360+t-r);return n.prevDeg=r+a,a}function Mg(t,e,n,r){return cf(Mt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Lg(t,e,n,r,i,s){var o=t.props.throttleRotate,a=o===void 0?0:o,l=n.prevSnapDeg,u=0,c=!1;if(s){var d=cU(t,e,r,i+r);c=d.isSnap,u=i+d.dist}c||(u=Ne(i+r,a));var f=u-i;return n.prevSnapDeg=f,[f-l,f,u]}function YA(t,e,n){var r=B(e,4),i=r[0],s=r[1],o=r[2],a=r[3];if(t==="none")return[];if(rn(t))return t.map(function(E){return YA(E,[i,s,o,a],n)[0]});var l=B((t||"top").split("-"),2),u=l[0],c=l[1],d=[i,s];u==="left"?d=[o,i]:u==="right"?d=[s,a]:u==="bottom"&&(d=[a,o]);var f=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],p=iP(d,n);if(c){var v=c==="top"||c==="left",m=u==="bottom"||u==="left";f=d[v&&!m||!v&&m?0:1]}return[[f,p]]}function Dm(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(qt(n,Te("rotation-control"))||t.props.rotateAroundControls&&qt(n,Te("around-control"))||qt(n,Te("control"))&&qt(n,Te("rotatable")))return!0;var r=t.props.rotationTarget;return r?b_(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var X6=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,Q6={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[X6],viewClassName:function(t){return t.isDragging("rotatable")?Te("view-rotation-dragging"):""},render:function(t,e){var n=Oo(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,s=n.zoom,o=n.renderDirections,a=n.rotateAroundControls,l=n.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,d=u.direction;if(!r)return null;var f=YA(i,c,d),p=[];if(f.forEach(function(y,_){var S=B(y,2),b=S[0],N=S[1];p.push(e.createElement("div",{key:"rotation".concat(_),className:Te("rotation"),style:{transform:"translate(-50%) translate(".concat(b[0],"px, ").concat(b[1],"px) rotate(").concat(N,"rad)")}},e.createElement("div",{className:Te("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),e.createElement("div",{className:Te("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}),o){var v=gl(l||{}),m={};v.forEach(function(y){l[y].forEach(function(_){m[_]=y})});var E=[];rn(o)&&(E=o.map(function(y){var _=m[y];return{data:_?{resolve:_}:{},classNames:_?["move"]:[],dir:y}})),p.push.apply(p,ce([],B(kA(t,"rotatable",E,e)),!1))}return a&&p.push.apply(p,ce([],B(LA(t,e)),!1)),p},dragControlCondition:Dm,dragControlStart:function(t,e){var n,r,i=e.datas,s=e.clientX,o=e.clientY,a=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,d=t.state,f=d.target,p=d.left,v=d.top,m=d.direction,E=d.beforeDirection,y=d.targetTransform,_=d.moveableClientRect,S=d.offsetMatrix,b=d.targetMatrix,N=d.allMatrix,R=d.width,x=d.height;if(!c&&!f)return!1;var w=t.getRect();i.rect=w,i.transform=y,i.left=p,i.top=v;var C=function(ie){var X=qA(t.state,ie);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,$&&$.setFixedPosition(ie)},I=function(ie){var X=K6(t.state,ie);i.fixedDirection=X.fixedDirection,i.fixedOffset=X.fixedOffset,i.fixedPosition=X.fixedPosition,$&&$.setFixedDirection(ie)},A=s,O=o;if(c||u||l){var P=a||0;i.beforeInfo={origin:w.beforeOrigin,prevDeg:P,defaultDeg:P,prevSnapDeg:0,startDist:0},i.afterInfo=V(V({},i.beforeInfo),{origin:w.origin}),i.absoluteInfo=V(V({},i.beforeInfo),{origin:w.origin,startValue:P})}else{var F=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(F){var U=F.getAttribute("data-direction")||"",q=n6[U];if(q){i.isControl=!0,i.isAroundControl=qt(F,Te("around-control")),i.controlDirection=q;var H=F.getAttribute("data-resolve");H&&(i.resolveAble=H);var L=IU(d.rootMatrix,d.renderPoses,_);n=B(Yt(L,q),2),A=n[0],O=n[1]}}i.beforeInfo={origin:w.beforeOrigin},i.afterInfo={origin:w.origin},i.absoluteInfo={origin:w.origin,startValue:w.rotation};var j=C;C=function(ie){var X=d.is3d?4:3,ue=B(Ye(dA(b,X),ie),2),me=ue[0],Se=ue[1],xe=In(S,ko([me,Se],X)),se=In(N,ko([ie[0],ie[1]],X));j(ie);var de=d.posDelta;i.beforeInfo.origin=Ce(xe,de),i.afterInfo.origin=Ce(se,de),i.absoluteInfo.origin=Ce(se,de),Og(t,i.beforeInfo,A,O,_),Og(t,i.afterInfo,A,O,_),Og(t,i.absoluteInfo,A,O,_)},I=function(ie){var X=Yt([[0,0],[R,0],[0,x],[R,x]],ie);C(X)}}i.startClientX=A,i.startClientY=O,i.direction=m,i.beforeDirection=E,i.startValue=0,i.datas={},mp(t,e,"rotate");var z=!1,$=!1;if(i.isControl&&i.resolveAble){var K=i.resolveAble;K==="resizable"&&($=km.dragControlStart(t,V(V({},new Ka("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}$||(z=Dn.dragStart(t,new Ka().dragStart([0,0],e))),C(bU(t));var J=Le(t,e,V(V({set:function(ie){i.startValue=ie*Math.PI/180},setFixedDirection:I,setFixedPosition:C},vp(t,e)),{dragStart:z,resizeStart:$})),te=ye(t,"onRotateStart",J);return i.isRotate=te!==!1,d.snapRenderInfo={request:e.isRequest},i.isRotate?J:!1},dragControl:function(t,e){var n,r,i,s=e.datas,o=e.clientDistX,a=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,d=e.groupDelta,f=e.resolveMatrix,p=s.beforeDirection,v=s.beforeInfo,m=s.afterInfo,E=s.absoluteInfo,y=s.isRotate,_=s.startValue,S=s.rect,b=s.startClientX,N=s.startClientY;if(y){pp(t,e,"rotate");var R=i6(e),x=p*R,w=t.props.parentMoveable,C=0,I,A,O=0,P,F,U=0,q,H,L=180/Math.PI*_,j=E.startValue,z=!1,$=b+o,K=N+a;if(!u&&"parentDist"in e){var J=e.parentDist;I=J,P=J,q=J}else c||u?(I=cf(l,p,v),P=cf(l,x,m),q=cf(l,x,E)):(I=Mg($,K,p,v),P=Mg($,K,x,m),q=Mg($,K,x,E),z=!0);if(A=L+I,F=L+P,H=j+q,ye(t,"onBeforeRotate",Le(t,e,{beforeRotation:A,rotation:F,absoluteRotation:H,setRotation:function(Pe){P=Pe-L,I=P,q=P}},!0)),n=B(Lg(t,S,v,I,L,z),3),C=n[0],I=n[1],A=n[2],r=B(Lg(t,S,m,P,L,z),3),O=r[0],P=r[1],F=r[2],i=B(Lg(t,S,E,q,j,z),3),U=i[0],q=i[1],H=i[2],!(!U&&!O&&!C&&!w&&!f)){var te=gp(s,"rotate(".concat(F,"deg)"),"rotate(".concat(P,"deg)"));f&&(s.fixedPosition=g_(t,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var ie=g6(t,P,s),X=Ce(Ye(d||[0,0],ie),s.prevInverseDist||[0,0]);s.prevInverseDist=ie,s.requestValue=null;var ue=RA(t,te,X,c,e),me=ue,Se=bi([$,K],E.startAbsoluteOrigin)-E.startDist,xe=void 0;if(s.resolveAble==="resizable"){var se=km.dragControl(t,V(V({},Pc(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:Se}));se&&(xe=se,me=lP(me,se,e))}var de=Le(t,e,V(V({delta:O,dist:P,rotate:F,rotation:F,beforeDist:I,beforeDelta:C,beforeRotate:A,beforeRotation:A,absoluteDist:q,absoluteDelta:U,absoluteRotate:H,absoluteRotation:H,isPinch:!!c,resize:xe},ue),me));return ye(t,"onRotate",de),de}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ar(t,e,{});return ye(t,"onRotateEnd",r),r}},dragGroupControlCondition:Dm,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,s=r.top,o=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var l=Ri(t,this,"dragControlStart",e,function(d,f){var p=d.state,v=p.left,m=p.top,E=p.beforeOrigin,y=Ye(Ce([v,m],[i,s]),Ce(E,o));return f.datas.startGroupClient=y,f.datas.groupClient=y,V(V({},f),{parentRotate:0})}),u=V(V({},a),{targets:t.props.targets,events:l}),c=ye(t,"onRotateGroupStart",u);return n.isRotate=c!==!1,n.isRotate?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){Sp(t,"onBeforeRotate",function(u){ye(t,"onBeforeRotateGroup",Le(t,e,V(V({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,s=r.beforeDist,o=s/180*Math.PI,a=Ri(t,this,"dragControl",e,function(u,c){var d=c.datas.startGroupClient,f=B(c.datas.groupClient,2),p=f[0],v=f[1],m=B(Ic(d,o*i),2),E=m[0],y=m[1],_=[E-p,y-v];return c.datas.groupClient=[E,y],V(V({},c),{parentRotate:s,groupDelta:_})});t.rotation=i*r.beforeRotation;var l=V({targets:t.props.targets,events:a,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return ye(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=Ri(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onRotateGroupEnd",s),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function J6(t,e){var n,r=t.direction,i=t.classNames,s=t.size,o=t.pos,a=t.zoom,l=t.key,u=r==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(s),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),n)})}function E_(t,e){return J6(V(V({},t),{classNames:ce([Te("line","guideline",t.direction)],B(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(Ne(n,.1),"px")})}),e)}function US(t,e,n,r,i,s,o,a){var l=t.props.zoom;return n.map(function(u,c){var d=u.type,f=u.pos,p=[0,0];return p[o]=r,p[o?0:1]=-i+f,E_({key:"".concat(e,"TargetGuideline").concat(c),classNames:[Te("target","bold",d)],posValue:p,sizeValue:s,zoom:l,direction:e},a)})}function $S(t,e,n,r,i,s){var o=t.props,a=o.zoom,l=o.isDisplayInnerSnapDigit,u=e==="horizontal"?js:Vs,c=i[u.start],d=i[u.end];return n.filter(function(f){var p=f.hide,v=f.elementRect;if(p)return!1;if(l&&v){var m=v.rect;if(m[u.start]<=c&&d<=m[u.end])return!1}return!0}).map(function(f,p){var v=f.pos,m=f.size,E=f.element,y=f.className,_=[-r[0]+v[0],-r[1]+v[1]];return E_({key:"".concat(e,"-default-guideline-").concat(p),classNames:E?[Te("bold"),y]:[Te("normal"),y],direction:e,posValue:_,sizeValue:m,zoom:a},s)})}function Jl(t,e,n,r,i,s,o,a){var l,u=t.props,c=u.snapDigit,d=c===void 0?0:c,f=u.isDisplaySnapDigit,p=f===void 0?!0:f,v=u.snapDistFormat,m=v===void 0?function(N,R){return N}:v,E=u.zoom,y=e==="horizontal"?"X":"Y",_=e==="vertical"?"height":"width",S=Math.abs(i),b=p?parseFloat(S.toFixed(d)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Te("guideline-group",e),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[_]="".concat(S,"px"),l)},E_({direction:e,classNames:[Te(n),o],size:"100%",posValue:[0,0],sizeValue:S,zoom:E},a),a.createElement("div",{className:Te("size-value","gap"),style:{transform:"translate".concat(y,"(-50%) scale(").concat(E,")")}},b>0?m(b,e):""))}function Z6(t,e,n,r){var i=t==="vertical"?0:1,s=t==="vertical"?1:0,o=i?js:Vs,a=n[o.start],l=n[o.end];return uP(e,function(u){return u.pos[i]}).map(function(u){var c=[],d=[],f=[];return u.forEach(function(p){var v,m,E=p.element,y=p.elementRect.rect;if(y[o.end]<a)c.push(p);else if(l<y[o.start])d.push(p);else if(y[o.start]<=a&&l<=y[o.end]&&r){var _=p.pos,S={element:E,rect:V(V({},y),(v={},v[o.end]=y[o.start],v))},b={element:E,rect:V(V({},y),(m={},m[o.start]=y[o.end],m))},N=[0,0],R=[0,0];N[i]=_[i],N[s]=_[s],R[i]=_[i],R[s]=_[s]+p.size,c.push({type:t,pos:N,size:0,elementRect:S,direction:"",elementDirection:"end"}),d.push({type:t,pos:R,size:0,elementRect:b,direction:"",elementDirection:"start"})}}),c.sort(function(p,v){return v.pos[s]-p.pos[s]}),d.sort(function(p,v){return p.pos[s]-v.pos[s]}),{total:u,start:c,end:d,inner:f}})}function eU(t,e,n,r,i){var s=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(a){var l=e.filter(function(E){return E.type===a}),u=a==="vertical"?1:0,c=u?0:1,d=Z6(a,l,r,s),f=u?Vs:js,p=u?js:Vs,v=r[f.start],m=r[f.end];d.forEach(function(E){var y=E.total,_=E.start,S=E.end,b=E.inner,N=n[c]+y[0].pos[c]-r[p.start],R=r;_.forEach(function(x){var w=x.elementRect.rect,C=R[f.start]-w[f.end];if(C>0){var I=[0,0];I[u]=n[u]+R[f.start]-v-C,I[c]=N,o.push(Jl(t,a,"dashed",o.length,C,I,x.className,i))}R=w}),R=r,S.forEach(function(x){var w=x.elementRect.rect,C=w[f.start]-R[f.end];if(C>0){var I=[0,0];I[u]=n[u]+R[f.end]-v,I[c]=N,o.push(Jl(t,a,"dashed",o.length,C,I,x.className,i))}R=w}),b.forEach(function(x){var w=x.elementRect.rect,C=v-w[f.start],I=w[f.end]-m,A=[0,0],O=[0,0];A[u]=n[u]-C,A[c]=N,O[u]=n[u]+m-v,O[c]=N,o.push(Jl(t,a,"dashed",o.length,C,A,x.className,i)),o.push(Jl(t,a,"dashed",o.length,I,O,x.className,i))})})}),o}function tU(t,e,n,r,i){var s=[];return["horizontal","vertical"].forEach(function(o){var a=e.filter(function(E){return E.type===o}).slice(0,1),l=o==="vertical"?0:1,u=l?0:1,c=l?Vs:js,d=l?js:Vs,f=r[c.start],p=r[c.end],v=r[d.start],m=r[d.end];a.forEach(function(E){var y=E.gap,_=E.gapRects,S=Math.max.apply(Math,ce([v],B(_.map(function(R){var x=R.rect;return x[d.start]})),!1)),b=Math.min.apply(Math,ce([m],B(_.map(function(R){var x=R.rect;return x[d.end]})),!1)),N=(S+b)/2;S===b||N===(v+m)/2||_.forEach(function(R){var x=R.rect,w=R.className,C=[n[0],n[1]];if(x[c.end]<f)C[l]+=x[c.end]-f;else if(p<x[c.start])C[l]+=x[c.start]-f-y;else return;C[u]+=N-v,s.push(Jl(t,l?"vertical":"horizontal","gap",s.length,y,C,w,i))})})}),s}function Nm(t){var e,n,r=t.state,i=r.containerClientRect,s=r.hasFixed,o=i.overflow,a=i.scrollHeight,l=i.scrollWidth,u=i.clientHeight,c=i.clientWidth,d=i.clientLeft,f=i.clientTop,p=t.props,v=p.snapGap,m=v===void 0?!0:v,E=p.verticalGuidelines,y=p.horizontalGuidelines,_=p.snapThreshold,S=_===void 0?5:_,b=p.maxSnapElementGuidelineDistance,N=b===void 0?1/0:b,R=p.isDisplayGridGuidelines,x=wr(Tr(t.state)),w=x.top,C=x.left,I=x.bottom,A=x.right,O={top:w,left:C,bottom:I,right:A,center:(C+A)/2,middle:(w+I)/2},P=sU(t),F=ce([],B(P),!1),U=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(j){return j*S});m&&F.push.apply(F,ce([],B(nU(t,O,U)),!1));var q=V({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(F.push.apply(F,ce([],B(iU(t,o?l:c,o?a:u,d,f,q,R)),!1)),s){var H=i.left,L=i.top;q.left+=H,q.top+=L,q.right+=H,q.bottom+=L}return F.push.apply(F,ce([],B(XA(y||!1,E||!1,o?l:c,o?a:u,d,f,q)),!1)),F=F.filter(function(j){var z=j.element,$=j.elementRect,K=j.type;if(!z||!$)return!0;var J=$.rect;return KA(O,J,K,N)}),F}function nU(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,s=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,a=o===void 0?1/0:o,l=t.state.elementRects,u=[];return[["vertical",js,Vs],["horizontal",Vs,js]].forEach(function(c){var d=B(c,3),f=d[0],p=d[1],v=d[2],m=e[p.start],E=e[p.end],y=e[p.center],_=e[v.start],S=e[v.end],b={left:n[0],top:n[1]};function N(w){var C=w.rect,I=b[p.start];return C[p.end]<m+I?m-C[p.end]:E-I<C[p.start]?C[p.start]-E:-1}var R=l.filter(function(w){var C=w.rect;return C[v.start]>S||C[v.end]<_?!1:N(w)>0}).sort(function(w,C){return N(w)-N(C)}),x=[];R.forEach(function(w){R.forEach(function(C){if(w!==C){var I=w.rect,A=C.rect,O=I[v.start],P=I[v.end],F=A[v.start],U=A[v.end];O>U||F>P||x.push([w,C])}})}),x.forEach(function(w){var C=B(w,2),I=C[0],A=C[1],O=I.rect,P=A.rect,F=O[p.start],U=O[p.end],q=P[p.start],H=P[p.end],L=b[p.start],j=0,z=0,$=!1,K=!1,J=!1;if(U<=m&&E<=q){if(K=!0,j=(q-U-(E-m))/2,z=U+j+(E-m)/2,re(z-y)>L)return}else if(U<q&&H<m+L){if($=!0,j=q-U,z=H+j,re(z-m)>L)return}else if(U<q&&E-L<F){if(J=!0,j=q-U,z=F-j,re(z-E)>L)return}else return;j&&KA(e,P,f,s)&&(j>a||u.push({type:f,pos:f==="vertical"?[z,0]:[0,z],element:A.element,size:0,className:A.className,isStart:$,isCenter:K,isEnd:J,gap:j,hide:!0,gapRects:[I,A],direction:"",elementDirection:""}))})}),u}function rU(t,e,n,r){var i,s,o=t.props,a=t.state,l=o.snapGridAll,u=o.snapGridWidth,c=u===void 0?0:u,d=o.snapGridHeight,f=d===void 0?0:d,p=a.snapRenderInfo,v=p&&(((i=p.direction)===null||i===void 0?void 0:i[0])||((s=p.direction)===null||s===void 0?void 0:s[1])),m=t.moveables;if(l&&m&&v&&(c||f)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var E=t.getRect(),y=E.children,_=p.direction;if(y){var S=_.map(function(N,R){var x=R===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:f,posName:"top",sizeName:"height",clientOffset:r.top-n},w=x.snapSize,C=x.posName,I=x.sizeName,A=x.clientOffset;if(!w)return{dir:N,multiple:1,snapSize:w,snapOffset:0};var O=E[I],P=E[C],F=Xz(y.map(function($){return[$[C]-P,$[I],O-$[I]-$[C]+P]})).filter(function($){return $}).sort(function($,K){return $-K}),U=F[0],q=F.map(function($){return Ne($/U,.1)*w}),H=1,L=Ne(O/U,.1);for(H=1;H<=10&&!q.every(function($){return $*H%1===0});++H);var j=(-N+1)/2,z=ih(P-A,P-A+O,j,1-j);return{multiple:L*H,dir:N,snapSize:w,snapOffset:Math.round(z/w)}}),b=S.map(function(N){return N.multiple||1});a.snapThresholdInfo.multiples=b,a.snapThresholdInfo.offset=S.map(function(N){return N.snapOffset}),S.forEach(function(N,R){N.snapSize})}}else a.snapThresholdInfo=null}function iU(t,e,n,r,i,s,o){r===void 0&&(r=0),i===void 0&&(i=0);var a=t.props,l=t.state,u=a.snapGridWidth,c=u===void 0?0:u,d=a.snapGridHeight,f=d===void 0?0:d,p=[],v=s.left,m=s.top,E=[0,0];rU(t,r,i,s);var y=l.snapThresholdInfo,_=c,S=f;if(y&&(c*=y.multiples[0]||1,f*=y.multiples[1]||1,E=y.offset),f){for(var b=function(R){p.push({type:"horizontal",pos:[v,Ne(E[1]*S+R-i+m,.1)],className:Te("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},N=0;N<=n*2;N+=f)b(N);for(var N=-f;N>=-n;N-=f)b(N)}if(c){for(var b=function(x){p.push({type:"vertical",pos:[Ne(E[0]*_+x-r+v,.1),m],className:Te("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},N=0;N<=e*2;N+=c)b(N);for(var N=-c;N>=-e;N-=c)b(N)}return p}function KA(t,e,n,r){return n==="horizontal"?re(t.right-e.left)<=r||re(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?re(t.bottom-e.top)<=r||re(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function sU(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(f){return!f.refresh}),s=r.map(function(f){return Br(f)&&"element"in f?V(V({},f),{element:si(f.element,!0)}):{element:si(f,!0)}}).filter(function(f){return f.element}),o=vB(i.map(function(f){return f.element}),s.map(function(f){return f.element})),a=o.maintained,l=o.added,u=[];a.forEach(function(f){var p=B(f,2),v=p[0],m=p[1];u[m]=i[v]}),oU(t,l.map(function(f){return s[f]})).map(function(f,p){u[l[p]]=f}),e.elementRects=u;var c=m_(t.props.elementSnapDirections),d=[];return u.forEach(function(f){var p=f.element,v=f.top,m=v===void 0?c.top:v,E=f.left,y=E===void 0?c.left:E,_=f.right,S=_===void 0?c.right:_,b=f.bottom,N=b===void 0?c.bottom:b,R=f.center,x=R===void 0?c.center:R,w=f.middle,C=w===void 0?c.middle:w,I=f.className,A=f.rect,O=y_({top:m,right:S,left:y,bottom:N,center:x,middle:C},A),P=O.horizontal,F=O.vertical,U=O.horizontalNames,q=O.verticalNames,H=A.top,L=A.left,j=A.right-L,z=A.bottom-H,$=[j,z];F.forEach(function(K,J){d.push({type:"vertical",element:p,pos:[Ne(K,.1),H],size:z,sizes:$,className:I,elementRect:f,elementDirection:OS[q[J]]||q[J],direction:""})}),P.forEach(function(K,J){d.push({type:"horizontal",element:p,pos:[L,Ne(K,.1)],size:j,sizes:$,className:I,elementRect:f,elementDirection:OS[U[J]]||U[J],direction:""})})}),d}function GS(t,e){return t?t.map(function(n){var r=Br(n)?n:{pos:n},i=r.pos;return Qu(i)?r:V(V({},r),{pos:st(i,e)})}):[]}function XA(t,e,n,r,i,s,o){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var a=[],l=o.left,u=o.top,c=o.bottom,d=o.right,f=n+d-l,p=r+c-u;return GS(t,p).forEach(function(v){a.push({type:"horizontal",pos:[l,Ne(v.pos-s+u,.1)],size:f,className:v.className,direction:""})}),GS(e,f).forEach(function(v){a.push({type:"vertical",pos:[Ne(v.pos-i+l,.1),u],size:p,className:v.className,direction:""})}),a}function oU(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,s=r.rootMatrix,o=r.is3d,a=r.offsetDelta,l=o?4:3,u=B(P6(s,i,l),2),c=u[0],d=u[1],f=n?0:a[0],p=n?0:a[1];return e.map(function(v){var m=v.element.getBoundingClientRect(),E=m.left-c-f,y=m.top-d-p,_=y+m.height,S=E+m.width,b=B(Ja(s,[E,y],l),2),N=b[0],R=b[1],x=B(Ja(s,[S,_],l),2),w=x[0],C=x[1];return V(V({},v),{rect:{left:N,right:w,top:R,bottom:C,center:(N+w)/2,middle:(R+C)/2}})})}function Pd(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(n!==r){var o=si(r,!0);if(o){var a=_u(o),l=XS(e,[a.left-i.left,a.top-i.top]),u=XS(e,[a.right-i.right,a.bottom-i.bottom]);s.left=Ne(l[0],1e-5),s.top=Ne(l[1],1e-5),s.right=Ne(u[0],1e-5),s.bottom=Ne(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=s,e.guidelines=Nm(t),e.enableSnap=!0,!0}function QA(t,e,n,r,i,s){var o=Bo(t,e,n,s?4:3),a=Yt(o,r);return x_(o,Ce(i,a))}function HS(t){return t?t/re(t):0}function aU(t,e,n,r,i,s){var o=s.fixedDirection,a=O6(n,o,r),l=w_(t,e,n,r),u=ce(ce([],B(W6(t,e,a,r,i,s)),!1),B(HA(t,l,s)),!1),c=uh(u,0),d=uh(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function lU(t,e,n,r,i,s,o,a,l){var u=Yt(e,o),c=wp(t,a,{vertical:[u[0]],horizontal:[u[1]]}),d=c.horizontal.offset,f=c.vertical.offset;if(Ne(f,Im)||Ne(d,Im)){var p=B(hi({datas:l,distX:-f,distY:-d}),2),v=p[0],m=p[1],E=Math.min(i||1/0,n+o[0]*v),y=Math.min(s||1/0,r+o[1]*m);return[E-n,y-r]}return[0,0]}function JA(t,e,n,r,i,s,o,a){for(var l=Tr(t.state),u=t.props.keepRatio,c=0,d=0,f=0;f<2;++f){var p=e(c,d),v=aU(t,p,i,u,o,a),m=v.width,E=v.height,y=m.isBound,_=E.isBound,S=m.offset,b=E.offset;if(f===1&&(y||(S=0),_||(b=0)),f===0&&o&&!y&&!_)return[0,0];if(u){var N=re(S)*(n?1/n:1),R=re(b)*(r?1/r:1),x=y&&_?N<R:_||!y&&N<R;x?S=n*b/r:b=r*S/n}c+=S,d+=b}if(!u&&i[0]&&i[1]){var w=Y6(t,l,i,s,a),C=w.maxWidth,I=w.maxHeight,A=B(lU(t,e(c,d).map(function(F){return F.map(function(U){return Ne(U,Im)})}),n+c,r+d,C,I,i,o,a),2),S=A[0],b=A[1];c+=S,d+=b}return[c,d]}function mu(t){return t<0&&(t=t%360+360),t%=360,t}function uU(t,e){e=mu(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return re(t-r)<re(t-i)?r:i}function jg(t,e){t=mu(t),e=mu(e);var n=mu(t-e);return Math.min(n,360-n)}function cU(t,e,n,r){var i,s=t.props,o=(i=s[jA])!==null&&i!==void 0?i:5,a=s[VA];if(yl(t,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,d=e.pos4,f=e.origin,p=n*Math.PI/180,v=[l,u,c,d].map(function(b){return Ce(b,f)}),m=v.map(function(b){return Ic(b,p)}),E=ce(ce([],B(I6(t,v,m,f,n)),!1),B(z6(t,v,m,f,n)),!1);E.sort(function(b,N){return re(b-n)-re(N-n)});var y=E.length>0;if(y)return{isSnap:y,dist:y?E[0]:n}}if(a!=null&&a.length&&o){var _=a.slice().sort(function(b,N){return jg(b,r)-jg(N,r)}),S=_[0];if(jg(S,r)<=o)return{isSnap:!0,dist:n+uU(r,S)-r}}return{isSnap:!1,dist:n}}function dU(t,e,n,r,i,s,o){if(!yl(t,"resizable"))return[0,0];var a=o.fixedDirection,l=o.nextAllMatrix,u=t.state,c=u.allMatrix,d=u.is3d;return JA(t,function(f,p){return QA(l||c,e+f,n+p,a,i,d)},e,n,r,i,s,o)}function fU(t,e,n,r,i){if(!yl(t,"scalable"))return[0,0];var s=i.startOffsetWidth,o=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=JA(t,function(d,f){return QA(d6(i,Ye(e,[d/s,f/o])),s,o,l,a,u)},s,o,n,a,r,i);return[c[0]/s,c[1]/o]}function hU(t,e){e.absolutePoses=Tr(t.state)}function WS(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;or(e,function(s){return s.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return V(V({},r),{direction:i.direction})})}function qS(t,e,n,r,i,s){var o=v_(yp(t,s),e,n),a=o.vertical,l=o.horizontal,u=va();a.forEach(function(v){v.isBound&&(v.direction==="start"&&(u.left=!0),v.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:v.pos}))}),l.forEach(function(v){v.isBound&&(v.direction==="start"&&(u.top=!0),v.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:v.pos}))});var c=B6(t),d=c.boundMap,f=c.vertical,p=c.horizontal;return f.forEach(function(v){zi(r,function(m){var E=m.type,y=m.pos;return E==="bounds"&&y===v})>=0||r.push({type:"bounds",pos:v})}),p.forEach(function(v){zi(i,function(m){var E=m.type,y=m.pos;return E==="bounds"&&y===v})>=0||i.push({type:"bounds",pos:v})}),{boundMap:u,innerBoundMap:d}}var pU=I_("",["resizable","scalable"]),gU={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",jA,VA,FA,zA,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,s=n.pos1,o=n.pos2,a=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=t.props.snapRenderThreshold,d=c===void 0?1:c;if(!u||!u.render||!yl(t,""))return ya(t,"boundMap",va(),function(te){return JSON.stringify(te)}),ya(t,"innerBoundMap",va(),function(te){return JSON.stringify(te)}),[];n.guidelines=Nm(t);var f=Math.min(s[0],o[0],a[0],l[0]),p=Math.min(s[1],o[1],a[1],l[1]),v=u.externalPoses||[],m=Tr(t.state),E=[],y=[],_=[],S=[],b=[],N=wr(m),R=N.width,x=N.height,w=N.top,C=N.left,I=N.bottom,A=N.right,O={left:C,right:A,top:w,bottom:I,center:(C+A)/2,middle:(w+I)/2},P=v.length>0,F=P?wr(v):{};if(!u.request){if(u.direction&&b.push(N6(t,m,u.direction,d,d)),u.snap){var U=wr(m);u.center&&(U.middle=(U.top+U.bottom)/2,U.center=(U.left+U.right)/2),b.push(MS(t,U,d,d))}P&&(u.center&&(F.middle=(F.top+F.bottom)/2,F.center=(F.left+F.right)/2),b.push(MS(t,F,d,d))),b.forEach(function(te){var ie=te.vertical.posInfos,X=te.horizontal.posInfos;E.push.apply(E,ce([],B(ie.filter(function(ue){var me=ue.guidelineInfos;return me.some(function(Se){var xe=Se.guideline;return!xe.hide})}).map(function(ue){return{type:"snap",pos:ue.pos}})),!1)),y.push.apply(y,ce([],B(X.filter(function(ue){var me=ue.guidelineInfos;return me.some(function(Se){var xe=Se.guideline;return!xe.hide})}).map(function(ue){return{type:"snap",pos:ue.pos}})),!1)),_.push.apply(_,ce([],B(WS(ie)),!1)),S.push.apply(S,ce([],B(WS(X)),!1))})}var q=qS(t,[C,A],[w,I],E,y),H=q.boundMap,L=q.innerBoundMap;P&&qS(t,[F.left,F.right],[F.top,F.bottom],E,y,u.externalBounds);var j=ce(ce([],B(_),!1),B(S),!1),z=j.filter(function(te){return te.element&&!te.gapRects}),$=j.filter(function(te){return te.gapRects}).sort(function(te,ie){return te.gap-ie.gap});ye(t,"onSnap",{guidelines:j.filter(function(te){var ie=te.element;return!ie}),elements:z,gaps:$},!0);var K=ya(t,"boundMap",H,function(te){return JSON.stringify(te)},va()),J=ya(t,"innerBoundMap",L,function(te){return JSON.stringify(te)},va());return(H===K||L===J)&&ye(t,"onBound",{bounds:H,innerBounds:L},!0),ce(ce(ce(ce(ce(ce([],B(eU(t,z,[f,p],O,e)),!1),B(tU(t,$,[f,p],O,e)),!1),B($S(t,"horizontal",S,[i,r],O,e)),!1),B($S(t,"vertical",_,[i,r],O,e)),!1),B(US(t,"horizontal",y,f,r,R,0,e)),!1),B(US(t,"vertical",E,p,i,x,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Pd(t)},drag:function(t){var e=t.state;Pd(t)||(e.guidelines=Nm(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(pU(t,e)||Dm(t,e))return!0;if(!e.isRequest&&e.inputEvent)return qt(e.inputEvent.target,Te("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Pd(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Pd(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function vU(t,e){return[t[0]*e[0],t[1]*e[1]]}function Te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Nz.apply(void 0,ce([f_],B(t),!1))}function ZA(t){t()}function mU(t){return!t||t==="none"?[1,0,0,1,0,0]:Br(t)?t:Zu(t)}function yu(t,e,n){return sh(e,Do(n,e),t,Do(n.map(function(r){return-r}),e))}function yU(t,e,n){if(e==="%"){var r=S_(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function _U(t){var e=wU(T_(t,":before"));return e.map(function(n,r){var i=Cc(n),s=i.value,o=i.unit;return s*yU(t,o,r===0)})}function dh(t){return t?t.split(" "):["0","0"]}function wU(t){return dh(t.transformOrigin)}function eP(t){var e=Qn(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var s=i.length;if(!s)return"";for(var o=[],a=function(u){var c=i[u].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return c[d]}).join(", "),")"))},l=0;l<s;++l)a(l);return o.join(" ")}return""}function tc(t,e,n,r,i){var s,o,a=i_(t)||Ws(t),l=!1,u,c;if(!t||n)u=t;else{var d=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentElement,f=t.parentElement;d?(l=!0,c=f,u=d):u=f}for(var p=!1,v=t===e||u===e,m="relative",E=1,y=parseFloat(i==null?void 0:i("zoom"))||1,_=i==null?void 0:i("position");u&&u!==a;){e===u&&(v=!0);var S=Qn(u),b=u.tagName.toLowerCase(),N=eP(u),R=S("willChange"),x=parseFloat(S("zoom"))||1;if(m=S("position"),r&&x!==1){E=x;break}if(!n&&r&&y!==1&&_&&_!=="absolute"||b==="svg"||b==="foreignobject"||m!=="static"||N&&N!=="none"||R==="transform")break;var w=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,C=u.parentNode;w&&(l=!0,c=C);var I=C;if(I&&I.nodeType===11){u=I.host,p=!0,m=Qn(u)("position");break}u=I,m="relative"}return{offsetZoom:E,hasSlot:l,parentSlotElement:c,isCustomElement:p,isStatic:m==="static",isEnd:v||!u||u===a,offsetParent:u||a}}function EU(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Qn(t),a=Zy(i),l=!a,u,c;return!l&&(r!=="svg"||t.ownerSVGElement)?(u=wA?_U(t):dh(o("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice(),l=!0,r==="svg"?(i=0,s=0):(n=B(TU(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],s=n[1],u[0]=n[2],u[1]=n[3])):(u=dh(o("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice()),{tagName:r,isSVG:a,hasOffset:l,offset:[i||0,s||0],origin:u,targetOrigin:c}}function tP(t,e){var n=Qn(t),r=Qn(Ws(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var s=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(s=0)),[s,o]}function Om(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ur(n,3,4))})}function SU(t){for(var e=t.parentElement,n=!1,r=Ws(t);e;){var i=T_(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function Ep(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(fA(t,!e).join(","),")")}function S_(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function xU(t,e){var n,r=S_(t),i=r.width,s=r.height,o=r.clientWidth,a=r.clientHeight,l=o/i,u=a/s,c=t.preserveAspectRatio.baseVal,d=c.align,f=c.meetOrSlice,p=[0,0],v=[l,u],m=[0,0];if(d!==1){var E=(d-2)%3,y=Math.floor((d-2)/3);p[0]=i*E/2,p[1]=s*y/2;var _=f===2?Math.max(u,l):Math.min(l,u);v[0]=_,v[1]=_,m[0]=(o-i)/2*E,m[1]=(a-s)/2*y}var S=o_(v,e);return n=B(m,2),S[e*(e-1)]=n[0],S[e*(e-1)+1]=n[1],yu(S,e,p)}function TU(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Qn(t),s=i("transform-box")==="fill-box",o=t.getBBox(),a=S_(t.ownerSVGElement),l=o.x,u=o.y;r==="foreignobject"&&!l&&!u&&(l=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var c=l-a.x,d=u-a.y,f=s?e[0]:e[0]-c,p=s?e[1]:e[1]-d;return[c,d,f,p]}function Tt(t,e,n){return In(t,ko(e,n),n)}function Bo(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Tt(t,i,r)})}function wr(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,ce([],B(e),!1)),i=Math.min.apply(Math,ce([],B(n),!1)),s=Math.max.apply(Math,ce([],B(e),!1)),o=Math.max.apply(Math,ce([],B(n),!1)),a=s-r,l=o-i;return{left:r,top:i,right:s,bottom:o,width:a,height:l}}function YS(t,e,n,r){var i=Bo(t,e,n,r);return wr(i)}function CU(t,e,n,r,i){var s,o=t.target,a=t.origin,l=e.matrix,u=rP(o),c=u.offsetWidth,d=u.offsetHeight,f=n.getBoundingClientRect(),p=[0,0];n===Ws(n)&&(p=tP(o,!0));for(var v=o.getBoundingClientRect(),m=v.left-f.left+n.scrollLeft-(n.clientLeft||0)+p[0],E=v.top-f.top+n.scrollTop-(n.clientTop||0)+p[1],y=v.width,_=v.height,S=sh(r,i,l),b=YS(S,c,d,r),N=b.left,R=b.top,x=b.width,w=b.height,C=Tt(S,a,r),I=Ce(C,[N,R]),A=[m+I[0]*y/x,E+I[1]*_/w],O=[0,0],P=0;++P<10;){var F=ui(i,r);s=B(Ce(Tt(F,A,r),Tt(F,C,r)),2),O[0]=s[0],O[1]=s[1];var U=sh(r,i,Do(O,r),l),q=YS(U,c,d,r),H=q.left,L=q.top,j=H-m,z=L-E;if(re(j)<2&&re(z)<2)break;A[0]-=j,A[1]-=z}return O.map(function($){return Math.round($)})}function IU(t,e,n){var r=t.length===16,i=r?4:3,s=e.map(function(l){return Tt(t,l,i)}),o=n.left,a=n.top;return s.map(function(l){return[l[0]+o,l[1]+a]})}function xr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nP(t,e){return xr([e[0]-t[0],e[1]-t[1]])}function Zl(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Mt(t,e));var i=nP(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function fh(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,s=n.reduce(function(a,l){return a+l[0]},0)/i,o=n.reduce(function(a,l){return a+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Oo(t,e){var n=t[e];return Br(n)?V(V({},t),n):t}function rP(t){var e=t&&!Zy(t.offsetWidth),n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,c=0,d=0,f=0,p=0,v=1/0,m=1/0,E=1/0,y=1/0,_=0,S=0,b=!1;if(t)if(!e&&t.ownerSVGElement){var N=t.getBBox();b=!0,n=N.width,r=N.height,o=n,a=r,l=n,u=r,i=n,s=r}else{var R=Qn(t),x=t.style,w=R("boxSizing")==="border-box",C=parseFloat(R("borderLeftWidth"))||0,I=parseFloat(R("borderRightWidth"))||0,A=parseFloat(R("borderTopWidth"))||0,O=parseFloat(R("borderBottomWidth"))||0,P=parseFloat(R("paddingLeft"))||0,F=parseFloat(R("paddingRight"))||0,U=parseFloat(R("paddingTop"))||0,q=parseFloat(R("paddingBottom"))||0,H=P+F,L=U+q,j=C+I,z=A+O,$=H+j,K=L+z,J=R("position"),te=0,ie=0;if("clientLeft"in t){var X=null;if(J==="absolute"){var ue=tc(t,Ws(t));X=ue.offsetParent}else X=t.parentElement;if(X){var me=Qn(X);te=parseFloat(me("width")),ie=parseFloat(me("height"))}}c=Math.max(H,st(R("minWidth"),te)||0),d=Math.max(L,st(R("minHeight"),ie)||0),v=st(R("maxWidth"),te),m=st(R("maxHeight"),ie),isNaN(v)&&(v=1/0),isNaN(m)&&(m=1/0),_=st(x.width,0)||0,S=st(x.height,0)||0,o=parseFloat(R("width"))||0,a=parseFloat(R("height"))||0,l=re(o-_)<1?vm(c,_||o,v):o,u=re(a-S)<1?vm(d,S||a,m):a,n=l,r=u,i=l,s=u,w?(E=v,y=m,f=c,p=d,l=n-$,u=r-K):(E=v+$,y=m+K,f=c+$,p=d+K,n=l+$,r=u+K),i=l+H,s=u+L}return{svg:b,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:s,contentWidth:l,contentHeight:u,inlineCSSWidth:_,inlineCSSHeight:S,cssWidth:o,cssHeight:a,minWidth:c,minHeight:d,maxWidth:v,maxHeight:m,minOffsetWidth:f,minOffsetHeight:p,maxOffsetWidth:E,maxOffsetHeight:y}}function iP(t,e){return Mt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function kd(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function sP(t,e){var n=t===Ws(t)||t===i_(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Qn(t)("overflow")!=="visible",V(V({},e),r)}function Vg(t,e,n,r){var i=t.left,s=t.right,o=t.top,a=t.bottom,l=e.top,u=e.left,c={left:u+i,top:l+o,right:u+s,bottom:l+a,width:s-i,height:a-o};return n&&r?sP(n,c):c}function _u(t,e){var n=0,r=0,i=0,s=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,s=o.height}var a={left:n,top:r,width:i,height:s,right:n+i,bottom:r+s};return t&&e?sP(t,a):a}function bU(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),s=i.offsetWidth,o=i.offsetHeight,a=i.svg,l=i.transformOrigin;return!n&&a&&r?R_(r,s,o):l}function oP(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var s=n.target;i=aP(s,r)}return i}function aP(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function x_(t,e){return[Ye(e,t[0]),Ye(e,t[1]),Ye(e,t[2]),Ye(e,t[3])]}function Tr(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,s=t.pos3,o=t.pos4;return x_([r,i,s,o],[e,n])}function Mm(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function ma(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];(r==null?void 0:r.isIdle())===!1&&Mm(t,e),r==null||r.unset(),t[n]=null}function On(t,e){if(e){var n=ml(e);n.nextStyle=V(V({},n.nextStyle),t)}return{style:t,cssText:gl(t).map(function(r){return"".concat(Hz(r,"-"),": ").concat(t[r],";")}).join("")}}function lP(t,e,n){var r=e.afterTransform||e.transform;return V(V({},On(V(V(V({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function Le(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var s=V(V({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=s):i.isStartEvent=!0,s}function ar(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),V(V({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function Sp(t,e,n){t._emitter.on(e,n)}function ye(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function T_(t,e){return Is(t).getComputedStyle(t,e)}function Dd(t,e,n){var r={},i={};return t.filter(function(s){var o=s.name;if(r[o]||!e.some(function(a){return s[a]}))return!1;if(!n&&s.ableGroup){if(i[s.ableGroup])return!1;i[s.ableGroup]=!0}return r[o]=!0,!0})}function Lm(t,e){return t===e||t==null&&e==null}function KS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!Zy(i))return i}return t[n]}function uP(t,e){var n=[],r=[];return t.forEach(function(i,s){var o=e(i,s,t),a=r.indexOf(o),l=n[a]||[];a===-1&&(r.push(o),n.push(l)),l.push(i)}),n}function RU(t,e){var n=[],r={};return t.forEach(function(i,s){var o=e(i,s,t),a=r[o];a||(a=[],r[o]=a,n.push(a)),a.push(i)}),n}function cP(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Qa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return re(r)-re(n)}),t[0]}function Ja(t,e,n){return In(ui(t,n),ko(e,n),n)}function AU(t,e){var n,r=t.is3d,i=t.rootMatrix,s=r?4:3;return n=B(Ja(i,[e.distX,e.distY],s),2),e.distX=n[0],e.distY=n[1],e}function dr(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Tt(t,[HS(n[0]||1),0],r),s=Tt(t,[0,HS(n[1]||1)],r),o=Tt(t,[n[0]/xr(i),n[1]/xr(s)],r);return Ye(e,o)}function kr(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function hh(t){return re(t)<=Ln?0:t}function C_(t){return function(e){if(!e.isDragging(t))return"";var n=y6(e,t),r=n.deg;return r?Te("view-control-rotation".concat(r)):""}}function I_(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(s){return r.requestAble===s})?r.parentDirection:!1;var i=r.inputEvent.target;return qt(i,Te("direction"))&&(!t||qt(i,Te(t)))}}function PU(t,e,n){var r,i=Ya(t,{"x%":function(N){return N/100*e.offsetWidth},"y%":function(N){return N/100*e.offsetHeight}}),s=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),a=t[n]||"",l=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),c=i.slice(0,n<0?void 0:n),d=i.slice(0,n<0?void 0:n+1),f=(r=i[n])!==null&&r!==void 0?r:Ya([""])[0],p=n<0?[]:i.slice(n),v=n<0?[]:i.slice(n+1),m=f?[f]:[],E=Zo(c),y=Zo(d),_=Zo(p),S=Zo(v),b=ot(E,_,4);return{transforms:t,beforeFunctionMatrix:E,beforeFunctionMatrix2:y,targetFunctionMatrix:Zo(m),afterFunctionMatrix:_,afterFunctionMatrix2:S,allFunctionMatrix:b,beforeFunctions:c,beforeFunctions2:d,targetFunction:m[0],afterFunctions:p,afterFunctions2:v,beforeFunctionTexts:s,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function kU(t){return!t||!Br(t)||s_(t)?!1:rn(t)||"length"in t}function si(t,e){return t?s_(t)?t:Hi(t)?e?document.querySelector(t):t:e_(t)?t():uA(t)?t:"current"in t?t.current:t:null}function b_(t,e){if(!t)return[];var n=kU(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Hi(i)&&e?ce(ce([],B(r),!1),B([].slice.call(document.querySelectorAll(i))),!1):(rn(i)?r.push(b_(i,e)):r.push(si(i,e)),r)},[])}function DU(t,e,n){var r=Mt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function XS(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,s=ui(n,i);return r||(s=Ur(s,3,4)),s[12]=0,s[13]=0,s[14]=0,aB(s,e)}function dP(t,e,n,r,i){var s=B(t,2),o=s[0],a=s[1],l=0,u=0;if(i&&o&&a){var c=Mt([0,0],e),d=Mt([0,0],r),f=xr(e),p=Math.cos(c-d)*f;if(!r[0])u=p,l=u*n;else if(!r[1])l=p,u=l/n;else{var v=r[0]*o,m=r[1]*a,E=Math.atan2(v+e[0],m+e[1]),y=Math.atan2(v,m);E<0&&(E+=Math.PI*2),y<0&&(y+=Math.PI*2);var _=0;re(E-y)<Math.PI/2||re(E-y)>Math.PI/2*3||(y+=Math.PI),_=E-y,_>Math.PI*2?_-=Math.PI*2:_>Math.PI?_=2*Math.PI-_:_<-Math.PI&&(_=-2*Math.PI-_);var S=xr([v+e[0],m+e[1]])*Math.cos(_);l=S*Math.sin(y)-v,u=S*Math.cos(y)-m,r[0]<0&&(l*=-1),r[1]<0&&(u*=-1)}}else l=r[0]*e[0],u=r[1]*e[1];return[l,u]}function fP(t,e,n,r){var i,s=n.ratio,o=n.startOffsetWidth,a=n.startOffsetHeight,l=0,u=0,c=r.distX,d=r.distY,f=r.pinchScale,p=r.parentDistance,v=r.parentDist,m=r.parentScale,E=n.fixedDirection,y=[0,1].map(function(x){return re(t[x]-E[x])}),_=[0,1].map(function(x){var w=y[x];return w!==0&&(w=2/w),w});if(v)l=v[0],u=v[1],e&&(l?u||(u=l/s):l=u*s);else if(Qu(f))l=(f-1)*o,u=(f-1)*a;else if(m)l=(m[0]-1)*o,u=(m[1]-1)*a;else if(p){var S=o*y[0],b=a*y[1],N=xr([S,b]);l=p/N*S*_[0],u=p/N*b*_[1]}else{var R=hi({datas:n,distX:c,distY:d});R=_.map(function(x,w){return R[w]*x}),i=B(dP([o,a],R,s,t,e),2),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function jm(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=B(t.split(" "),2),r=n[0],i=n[1],s=jm(r||""),o=jm(i||""),a=V(V({},s),o),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function R_(t,e,n){var r=jm(t,!0),i=r.x,s=r.y;return[st(i,e)||0,st(s,n)||0]}function NU(t,e,n){var r=t.map(function(s){return Ce(s,e)}),i=r.map(function(s){return Ic(s,n)});return{prev:r,next:i,result:i.map(function(s){return Ye(s,e)})}}function hP(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],s=rn(n),o=rn(i);return s&&o?hP(n,i):!s&&!o?n===i:!1})}function ya(t,e,n,r,i){var s=t._store,o=s[e];if(!(e in s))if(i!=null)s[e]=i,o=i;else return s[e]=n,n;return o===n||r(o)===r(n)?o:(s[e]=n,n)}function Nn(t){return t>=0?1:-1}function re(t){return Math.abs(t)}function Fg(t,e){return Kz(t).map(function(n){return e(n)})}function pP(t){return Qu(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var OU=Ac("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,s=e.originalDatas,o=t.props,a=o.pinchable,l=o.ables;if(!a)return!1;var u="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),d=(a===!0?t.controlAbles:l.filter(function(m){return a.indexOf(m.name)>-1})).filter(function(m){return m.canPinch&&m[c]}),f=Le(t,e,{});r&&(f.targets=r);var p=ye(t,u,f);n.isPinch=p!==!1,n.ables=d;var v=n.isPinch;return v?(d.forEach(function(m){if(s[m.name]=s[m.name]||{},!!m[c]){var E=V(V({},e),{datas:s[m.name],parentRotate:i,isPinch:!0});m[c](t,E)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,s=e.originalDatas,o=e.inputEvent,a=e.targets,l=e.angle;if(n.isPinch){var u=i*(1-1/r),c=Le(t,e,{});a&&(c.targets=a);var d="onPinch".concat(a?"Group":"");ye(t,d,c);var f=n.ables,p="drag".concat(a?"Group":"","Control");return f.forEach(function(v){v[p]&&v[p](t,V(V({},e),{datas:s[v.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,s=e.targets,o=e.originalDatas;if(n.isPinch){var a="onPinch".concat(s?"Group":"","End"),l=ar(t,e,{isDrag:r});s&&(l.targets=s),ye(t,a,l);var u=n.ables,c="drag".concat(s?"Group":"","ControlEnd");return u.forEach(function(d){d[c]&&d[c](t,V(V({},e),{isDrag:r,datas:o[d.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,V(V({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,V(V({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,V(V({},e),{targets:t.props.targets}))}}),QS=I_("scalable"),MU={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:OA("scalable"),dragControlCondition:QS,viewClassName:C_("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,s=e.parentDirection,o=oP(s,r,i,n),a=t.state,l=a.width,u=a.height,c=a.targetTransform,d=a.target,f=a.pos1,p=a.pos2,v=a.pos4;if(!o||!d)return!1;r||zo(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=l,n.startOffsetHeight=u,n.startValue=[1,1];var m=!o[0]&&!o[1]||o[0]||!o[1];mp(t,e,"scale"),n.isWidth=m;function E(R){n.ratio=R&&isFinite(R)?R:0}n.startPositions=Tr(t.state);function y(R){var x=WA(n.startPositions,R);n.fixedDirection=x.fixedDirection,n.fixedPosition=x.fixedPosition,n.fixedOffset=x.fixedOffset}n.setFixedDirection=y,E(bi(f,p)/bi(p,v)),y([-o[0],-o[1]]);var _=function(R){n.minScaleSize=R},S=function(R){n.maxScaleSize=R};_([-1/0,-1/0]),S([1/0,1/0]);var b=Le(t,e,V(V({direction:o,set:function(R){n.startValue=R},setRatio:E,setFixedDirection:y,setMinScaleSize:_,setMaxScaleSize:S},vp(t,e)),{dragStart:Dn.dragStart(t,new Ka().dragStart([0,0],e))})),N=ye(t,"onScaleStart",b);return n.startFixedDirection=n.fixedDirection,N!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?b:!1},dragControl:function(t,e){pp(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,s=e.isPinch,o=e.dragClient,a=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=n.prevDist,d=n.direction,f=n.startOffsetWidth,p=n.startOffsetHeight,v=n.isScale,m=n.startValue,E=n.isWidth,y=n.ratio;if(!v)return!1;var _=t.props,S=_.throttleScale,b=_.parentMoveable,N=d;!d[0]&&!d[1]&&(N=[1,1]);var R=y&&(r??_.keepRatio)||!1,x=t.state,w=[m[0],m[1]];function C(){var se=fP(N,R,n,e),de=se.distWidth,Pe=se.distHeight,Y=f?(f+de)/f:1,oe=p?(p+Pe)/p:1;m[0]||(w[0]=de/f),m[1]||(w[1]=Pe/p);var he=(N[0]||R?Y:1)*w[0],be=(N[1]||R?oe:1)*w[1];return he===0&&(he=Nn(c[0])*bd),be===0&&(be=Nn(c[1])*bd),[he,be]}var I=C();if(!s&&t.props.groupable){var A=x.snapRenderInfo||{},O=A.direction;rn(O)&&(O[0]||O[1])&&(x.snapRenderInfo={direction:d,request:e.isRequest})}ye(t,"onBeforeScale",Le(t,e,{scale:I,setFixedDirection:function(se){return n.setFixedDirection(se),I=C(),I},startFixedDirection:n.startFixedDirection,setScale:function(se){I=se}},!0));var P=[I[0]/w[0],I[1]/w[1]],F=o,U=[0,0],q=Nn(P[0]*P[1]),H=!o&&!i&&s;if(H||u?F=g_(t,n.targetAllTransform,[0,0],[0,0],n):o||(F=n.fixedPosition),s||(U=fU(t,P,d,!l&&a,n)),R){N[0]&&N[1]&&U[0]&&U[1]&&(Math.abs(U[0]*f)>Math.abs(U[1]*p)?U[1]=0:U[0]=0);var L=!U[0]&&!U[1];if(L&&(E?P[0]=Ne(P[0]*w[0],S)/w[0]:P[1]=Ne(P[1]*w[1],S)/w[1]),N[0]&&!N[1]||U[0]&&!U[1]||L&&E){P[0]+=U[0];var j=f*P[0]*w[0]/y;P[1]=Nn(q*P[0])*re(j/p/w[1])}else if(!N[0]&&N[1]||!U[0]&&U[1]||L&&!E){P[1]+=U[1];var z=p*P[1]*w[1]*y;P[0]=Nn(q*P[1])*re(z/f/w[0])}}else P[0]+=U[0],P[1]+=U[1],U[0]||(P[0]=Ne(P[0]*w[0],S)/w[0]),U[1]||(P[1]=Ne(P[1]*w[1],S)/w[1]);P[0]===0&&(P[0]=Nn(c[0])*bd),P[1]===0&&(P[1]=Nn(c[1])*bd),I=vU(P,[w[0],w[1]]);var $=[f,p],K=[f*I[0],p*I[1]];K=oA(K,n.minScaleSize,n.maxScaleSize,R?y:!1),I=Fg(2,function(se){return $[se]?K[se]/$[se]:K[se]}),P=Fg(2,function(se){return I[se]/w[se]});var J=Fg(2,function(se){return c[se]?P[se]/c[se]:P[se]}),te="scale(".concat(P.join(", "),")"),ie="scale(".concat(I.join(", "),")"),X=gp(n,ie,te),ue=!m[0]||!m[1],me=f6(t,ue?ie:te,n.fixedDirection,F,n.fixedOffset,n,ue),Se=H?me:Ce(me,n.prevInverseDist||[0,0]);if(n.prevDist=P,n.prevInverseDist=me,I[0]===c[0]&&I[1]===c[1]&&Se.every(function(se){return!se})&&!b&&!H)return!1;var xe=Le(t,e,V({offsetWidth:f,offsetHeight:p,direction:d,scale:I,dist:P,delta:J,isPinch:!!s},RA(t,X,Se,s,e)));return ye(t,"onScale",xe),xe},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ar(t,e,{});return ye(t,"onScaleEnd",r),r},dragGroupControlCondition:QS,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=Lr(t,"resizable",e);n.moveableScale=t.scale;var s=Ri(t,this,"dragControlStart",e,function(u,c){return lh(t,u,n,c)}),o=function(u){r.setFixedDirection(u),s.forEach(function(c,d){c.setFixedDirection(u),lh(t,c.moveable,n,i[d])})};n.setFixedDirection=o;var a=V(V({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),l=ye(t,"onScaleGroupStart",a);return n.isScale=l!==!1,n.isScale?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){Sp(t,"onBeforeScale",function(c){ye(t,"onBeforeScaleGroup",Le(t,e,V(V({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,s=n.moveableScale;t.scale=[i[0]*s[0],i[1]*s[1]];var o=t.props.keepRatio,a=n.fixedPosition,l=Ri(t,this,"dragControl",e,function(c,d){var f=B(In(bc(t.rotation/180*Math.PI,3),[d.datas.originalX*i[0],d.datas.originalY*i[1],1],3),2),p=f[0],v=f[1];return V(V({},d),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Ye(a,[p,v])})}),u=V({targets:t.props.targets,events:l},r);return ye(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=Ri(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onScaleGroupEnd",s),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Qi(t,e){return t.map(function(n,r){return ih(n,e[r],1,2)})}function JS(t,e,n){var r=Mt(t,e),i=Mt(t,n),s=i-r;return s>=0?s:s+2*Math.PI}function LU(t,e){var n=JS(t[0],t[1],t[2]),r=JS(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var jU={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:C_("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,s=n.warpable,o=n.zoom;if(r||i||!s)return[];var a=t.state,l=a.pos1,u=a.pos2,c=a.pos3,d=a.pos4,f=Qi(l,u),p=Qi(u,l),v=Qi(l,c),m=Qi(c,l),E=Qi(c,d),y=Qi(d,c),_=Qi(u,d),S=Qi(d,u);return ce([e.createElement("div",{className:Te("line"),key:"middeLine1",style:Zl(f,E,o)}),e.createElement("div",{className:Te("line"),key:"middeLine2",style:Zl(p,y,o)}),e.createElement("div",{className:Te("line"),key:"middeLine3",style:Zl(v,_,o)}),e.createElement("div",{className:Te("line"),key:"middeLine4",style:Zl(m,S,o)})],B(MA(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return qt(n,Te("direction"))&&qt(n,Te("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,s=r.target,o=aP(s,n);if(!o||!i)return!1;var a=t.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,d=a.targetMatrix,f=a.width,p=a.height,v=a.left,m=a.top;n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?d:Ur(d,3,4),n.targetInverseMatrix=cA(ui(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=v,n.top=m,n.poses=[[0,0],[f,0],[0,p],[f,p]].map(function(_){return Ce(_,l)}),n.nextPoses=n.poses.map(function(_){var S=B(_,2),b=S[0],N=S[1];return In(n.warpTargetMatrix,[b,N,0,1],4)}),n.startValue=vt(4),n.prevMatrix=vt(4),n.absolutePoses=Tr(a),n.posIndexes=bA(o),zo(t,e),mp(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:o};var E=Le(t,e,V({set:function(_){n.startValue=_}},vp(t,e))),y=ye(t,"onWarpStart",E);return y!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,s=e.distY,o=n.targetInverseMatrix,a=n.prevMatrix,l=n.isWarp,u=n.startValue,c=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(pp(t,e,"matrix3d"),yl(t,"warpable")){var p=d.map(function(C){return f[C]});p.length>1&&p.push([(p[0][0]+p[1][0])/2,(p[0][1]+p[1][1])/2]);var v=wp(t,r,{horizontal:p.map(function(C){return C[1]+s}),vertical:p.map(function(C){return C[0]+i})}),m=v.horizontal,E=v.vertical;s-=m.offset,i-=E.offset}var y=hi({datas:n,distX:i,distY:s},!0),_=n.nextPoses.slice();if(d.forEach(function(C){_[C]=Ye(_[C],y)}),!t6.every(function(C){return LU(C.map(function(I){return c[I]}),C.map(function(I){return _[I]}))}))return!1;var S=a_(c[0],c[2],c[1],c[3],_[0],_[2],_[1],_[3]);if(!S.length)return!1;var b=ot(o,S,4),N=CA(n,b,!0),R=ot(ui(a,4),N,4);n.prevMatrix=N;var x=ot(u,N,4),w=gp(n,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(N.join(", "),")"));return p_(e,w),ye(t,"onWarp",Le(t,e,V({delta:R,matrix:x,dist:N,multiply:ot,transform:w},On({transform:w},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,ye(t,"onWarpEnd",ar(t,e,{})),r):!1}},VU=Te("area-pieces"),Nd=Te("area-piece"),gP=Te("avoid"),FU=Te("view-dragging");function zg(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;lA(e,gP),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function ZS(t){return t.createElement("div",{key:"area_pieces",className:VU},t.createElement("div",{className:Nd}),t.createElement("div",{className:Nd}),t.createElement("div",{className:Nd}),t.createElement("div",{className:Nd}))}var vP={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,s=n.groupable,o=n.passDragArea,a=t.getState(),l=a.width,u=a.height,c=a.renderPoses,d=o?Te("area","pass"):Te("area");if(s)return[e.createElement("div",{key:"area",ref:_o(t,"areaElement"),className:d}),ZS(e)];if(!r||!i)return[];var f=a_([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),p=f.length?Ep(f,!0):"none";return[e.createElement("div",{key:"area",ref:_o(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:p}}),ZS(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,s=e.inputEvent;if(!s)return!1;n.isDragArea=!1;var o=t.areaElement,a=t.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,d=a.is3d,f=l.left,p=l.top,v=wr(u),m=v.left,E=v.top,y=v.width,_=v.height,S=d?4:3,b=B(Ja(c,[r-f,i-p],S),2),N=b[0],R=b[1];N-=m,R-=E;var x=[{left:m,top:E,width:y,height:R-10},{left:m,top:E,width:N-10,height:_},{left:m,top:E+R+10,width:y,height:_-R-10},{left:m+N+10,top:E,width:y-N-10,height:_}],w=[].slice.call(o.nextElementSibling.children);x.forEach(function(C,I){w[I].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),aA(o,gP),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,zg(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||zg(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){zg(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&sA(function(){e.disableNativeEvent=!1})}},zU=Ac("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,s=n.groupable,o=t.getState(),a=o.beforeOrigin,l=o.rotation,u=o.svg,c=o.allMatrix,d=o.is3d,f=o.left,p=o.top,v=o.offsetWidth,m=o.offsetHeight,E;if(!s&&u&&i){var y=B(R_(i,v,m),2),_=y[0],S=y[1],b=d?4:3,N=Tt(c,[_,S],b);E=fh(l,r,Ce(N,[f,p]))}else E=fh(l,r,a);return[e.createElement("div",{className:Te("control","origin"),style:E,key:"beforeOrigin"})]}});function BU(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var UU={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,s=n.scrollOptions,o=new wB,a=si(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;o.on("scroll",function(c){var d=c.container,f=c.direction,p=Le(t,e,{scrollContainer:d,direction:f}),v=u?"onScrollGroup":"onScroll";u&&(p.targets=u),ye(t,v,p)}).on("move",function(c){var d=c.offsetX,f=c.offsetY,p=c.inputEvent;t[l].scrollBy(d,f,p.inputEvent,!1)}).on("scrollDrag",function(c){var d=c.next;d(t[l].getCurrentEvent())}),o.dragStart(e,V({container:a},s))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,s=i===void 0?t.getContainer():i,o=r.scrollThreshold,a=o===void 0?0:o,l=r.scrollThrottleTime,u=l===void 0?0:l,c=r.getScrollPosition,d=c===void 0?BU:c,f=r.scrollOptions;return n.drag(e,V({container:s,threshold:a,throttleTime:u,getScrollPosition:function(p){return d({scrollContainer:p.container,direction:p.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,V(V({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,V(V({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,V(V({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,V(V({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,V(V({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,V(V({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,V(V({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},mP={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},$U=Ac("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=pP(n.padding||{}),i=r.left,s=r.top,o=r.right,a=r.bottom,l=t.getState(),u=l.renderPoses,c=l.pos1,d=l.pos2,f=l.pos3,p=l.pos4,v=[c,d,f,p],m=[];return i>0&&m.push([0,2]),s>0&&m.push([0,1]),o>0&&m.push([1,3]),a>0&&m.push([2,3]),m.map(function(E,y){var _=B(E,2),S=_[0],b=_[1],N=v[S],R=v[b],x=u[S],w=u[b],C=a_([0,0],[100,0],[0,100],[100,100],N,R,x,w);if(C.length)return e.createElement("div",{key:"padding".concat(y),className:Te("padding"),style:{transform:Ep(C,!0)}})})}}),ex=["nw","ne","se","sw"];function Od(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var GU=[1,2,5,6],HU=[0,3,4,7],ao=[1,-1,-1,1],lo=[1,1,-1,-1];function A_(t,e,n,r,i,s,o,a){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=n),a===void 0&&(a=r);var l=[],u=!1,c=t.filter(function(f){return!f.virtual}),d=c.map(function(f){var p=f.horizontal,v=f.vertical,m=f.pos;if(v&&!u&&(u=!0,l.push("/")),u){var E=Math.max(0,v===1?m[1]-s:a-m[1]);return l.push(kr(E,r,e)),E}else{var E=Math.max(0,p===1?m[0]-i:o-m[0]);return l.push(kr(E,n,e)),E}});return{radiusPoses:c,styles:l,raws:d}}function yP(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var s=t[i];s.sub&&(s.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),s.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function _P(t,e,n,r,i,s,o){var a,l,u,c;s===void 0&&(s=[0,0]),o===void 0&&(o=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,p=t.slice(0,f),v=t.slice(f+1),m=p.length,E=v.length,y=E>0,_=B(p,4),S=_[0],b=S===void 0?"0px":S,N=_[1],R=N===void 0?b:N,x=_[2],w=x===void 0?b:x,C=_[3],I=C===void 0?R:C,A=B(v,4),O=A[0],P=O===void 0?b:O,F=A[1],U=F===void 0?y?P:R:F,q=A[2],H=q===void 0?y?P:w:q,L=A[3],j=L===void 0?y?U:I:L,z=[b,R,w,I].map(function(X){return st(X,e)}),$=[P,U,H,j].map(function(X){return st(X,n)}),K=z.slice(),J=$.slice();a=B(Od([K[0],K[1]],e),2),K[0]=a[0],K[1]=a[1],l=B(Od([K[3],K[2]],e),2),K[3]=l[0],K[2]=l[1],u=B(Od([J[0],J[3]],n),2),J[0]=u[0],J[3]=u[1],c=B(Od([J[1],J[2]],n),2),J[1]=c[0],J[2]=c[1];var te=o?K:K.slice(0,Math.max(s[0],m)),ie=o?J:J.slice(0,Math.max(s[1],E));return ce(ce([],B(te.map(function(X,ue){var me=ex[ue];return{virtual:ue>=m,horizontal:ao[ue],vertical:0,pos:[r+X,i+(lo[ue]===-1?n:0)],sub:!0,raw:z[ue],direction:me}})),!1),B(ie.map(function(X,ue){var me=ex[ue];return{virtual:ue>=E,horizontal:0,vertical:lo[ue],pos:[r+(ao[ue]===-1?e:0),i+X],sub:!0,raw:$[ue],direction:me}})),!1)}function WU(t,e,n,r,i){i===void 0&&(i=e.length);var s=yP(t.slice(r)),o=s.horizontalRange,a=s.verticalRange,l=n-r,u=0;if(l===0)u=i;else if(l>0&&l<o[1])u=o[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;t.splice(n,u),e.splice(n,u)}function qU(t,e,n,r,i,s,o,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var d=yP(t.slice(n)),f=d.horizontalRange,p=d.verticalRange;if(r>-1)for(var v=ao[r]===1?s-u:a-s,m=f[1];m<=r;++m){var E=lo[m]===1?c:l,y=0;if(r===m?y=s:m===0?y=u+v:ao[m]===-1&&(y=a-(e[n][0]-u)),t.splice(n+m,0,{horizontal:ao[m],vertical:0,pos:[y,E]}),e.splice(n+m,0,[y,E]),m===0)break}else if(i>-1){var _=lo[i]===1?o-c:l-o;if(f[1]===0&&p[1]===0){var S=[u+_,c];t.push({horizontal:ao[0],vertical:0,pos:S}),e.push(S)}for(var b=p[0],m=p[1];m<=i;++m){var y=ao[m]===1?u:a,E=0;if(i===m?E=o:m===0?E=c+_:lo[m]===1?E=e[n+b][1]:lo[m]===-1&&(E=l-(e[n+b][1]-c)),t.push({horizontal:0,vertical:lo[m],pos:[y,E]}),e.push([y,E]),m===0)break}}}function YU(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,s){return i.horizontal?e[s]:null}).filter(function(i){return i!=null}),r=t.map(function(i,s){return i.vertical?e[s]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var KU=[[0,-1,"n"],[1,0,"e"]],XU=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function P_(t,e,n){var r=t.props.clipRelative,i=t.state,s=i.width,o=i.height,a=e,l=a.type,u=a.poses,c=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(R){return"".concat(kr(R[0],s,r)," ").concat(kr(R[1],o,r))});if(c||l==="inset"){var f=n[1][1],p=n[3][0],v=n[7][0],m=n[5][1];if(c)return[f,p,m,v].map(function(R){return"".concat(R,"px")});var E=[f,s-p,o-m,v].map(function(R,x){return kr(R,x%2?s:o,r)});if(n.length>8){var y=B(Ce(n[4],n[0]),2),_=y[0],S=y[1];E.push.apply(E,ce(["round"],B(A_(u.slice(8).map(function(R,x){return V(V({},R),{pos:n[x]})}),r,_,S,v,f,p,m).styles),!1))}return E}else if(d||l==="ellipse"){var b=n[0],N=kr(re(n[1][1]-b[1]),d?Math.sqrt((s*s+o*o)/2):o,r),E=d?[N]:[kr(re(n[2][0]-b[0]),s,r),N];return E.push("at",kr(b[0],s,r),kr(b[1],o,r)),E}}function ph(t,e,n,r){var i=[r,(r+e)/2,e],s=[t,(t+n)/2,n];return XU.map(function(o){var a=B(o,3),l=a[0],u=a[1],c=a[2],d=i[l+1],f=s[u+1];return{vertical:re(u),horizontal:re(l),direction:c,pos:[d,f]}})}function wP(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[re(e[1]-e[0]),re(n[1]-n[0])]}function tx(t,e,n,r,i){var s,o,a,l,u,c,d,f,p;if(t){var v=i;if(!v){var m=Qn(t),E=m("clipPath");v=E!=="none"?E:m("clip")}if(!((!v||v==="none"||v==="auto")&&(v=r,!v))){var y=iA(v),_=y.prefix,S=_===void 0?v:_,b=y.value,N=b===void 0?"":b,R=S==="circle",x=" ";if(S==="polygon"){var w=po(N||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var C=w.map(function(et){var ct=B(et.split(" "),2),at=ct[0],Oe=ct[1];return{vertical:1,horizontal:1,pos:[st(at,e),st(Oe,n)]}}),I=No(C.map(function(et){return et.pos}));return{type:S,clipText:v,poses:C,splitter:x,left:I.minX,right:I.maxX,top:I.minY,bottom:I.maxY}}else if(R||S==="ellipse"){var A="",O="",P=0,F=0,w=Ls(N);if(R){var U="";s=B(w,4),o=s[0],U=o===void 0?"50%":o,a=s[2],A=a===void 0?"50%":a,l=s[3],O=l===void 0?"50%":l,P=st(U,Math.sqrt((e*e+n*n)/2)),F=P}else{var q="",H="";u=B(w,5),c=u[0],q=c===void 0?"50%":c,d=u[1],H=d===void 0?"50%":d,f=u[3],A=f===void 0?"50%":f,p=u[4],O=p===void 0?"50%":p,P=st(q,e),F=st(H,n)}var L=[st(A,e),st(O,n)],C=ce([{vertical:1,horizontal:1,pos:L,direction:"nesw"}],B(KU.slice(0,R?1:2).map(function(at){return{vertical:re(at[1]),horizontal:at[0],direction:at[2],sub:!0,pos:[L[0]+at[0]*P,L[1]+at[1]*F]}})),!1);return{type:S,clipText:v,radiusX:P,radiusY:F,left:L[0]-P,top:L[1]-F,right:L[0]+P,bottom:L[1]+F,poses:C,splitter:x}}else if(S==="inset"){var w=Ls(N||"0 0 0 0"),j=w.indexOf("round"),z=(j>-1?w.slice(0,j):w).length,$=w.slice(z+1),K=B(w.slice(0,z),4),J=K[0],te=K[1],ie=te===void 0?J:te,X=K[2],ue=X===void 0?J:X,me=K[3],Se=me===void 0?ie:me,xe=B([J,ue].map(function(at){return st(at,n)}),2),se=xe[0],de=xe[1],Pe=B([Se,ie].map(function(at){return st(at,e)}),2),Y=Pe[0],oe=Pe[1],he=e-oe,be=n-de,je=_P($,he-Y,be-se,Y,se),C=ce(ce([],B(ph(se,he,be,Y)),!1),B(je),!1);return{type:"inset",clipText:v,poses:C,top:se,left:Y,right:he,bottom:be,radius:$,splitter:x}}else if(S==="rect"){var w=po(N||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));x=",";var Ee=B(w.map(function(Je){var Ue=Cc(Je).value;return Ue}),4),ke=Ee[0],oe=Ee[1],de=Ee[2],Y=Ee[3],C=ph(ke,oe,de,Y);return{type:"rect",clipText:v,poses:C,top:ke,right:oe,bottom:de,left:Y,values:w,splitter:x}}}}}function QU(t,e,n,r,i){var s=t[e],o=s.direction,a=s.sub,l=t.map(function(){return[0,0]}),u=o?o.split(""):[];if(r&&e<8){var c=u.filter(function(P){return P==="w"||P==="e"}),d=u.filter(function(P){return P==="n"||P==="s"}),f=c[0],p=d[0];l[e]=n;var v=B(wP(t),2),m=v[0],E=v[1],y=m&&E?m/E:0;if(y&&i){var _=(e+4)%8,S=t[_].pos,b=[0,0];o.indexOf("w")>-1?b[0]=-1:o.indexOf("e")>-1&&(b[0]=1),o.indexOf("n")>-1?b[1]=-1:o.indexOf("s")>-1&&(b[1]=1);var N=dP([m,E],n,y,b,!0),R=m+N[0],x=E+N[1],w=S[1],C=S[1],I=S[0],A=S[0];b[0]===-1?I=A-R:b[0]===1?A=I+R:(I=I-R/2,A=A+R/2),b[1]===-1?w=C-x:(b[1]===1||(w=C-x/2),C=w+x);var O=ph(w,A,C,I);t.forEach(function(P,F){l[F][0]=O[F].pos[0]-P.pos[0],l[F][1]=O[F].pos[1]-P.pos[1]})}else t.forEach(function(P,F){var U=P.direction;U&&(U.indexOf(f)>-1&&(l[F][0]=n[0]),U.indexOf(p)>-1&&(l[F][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),p&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else o&&!a?u.forEach(function(P){var F=P==="n"||P==="s";t.forEach(function(U,q){var H=U.direction,L=U.horizontal,j=U.vertical;!H||H.indexOf(P)===-1||(l[q]=[F||!L?0:n[0],!F||!j?0:n[1]])})}):l[e]=n;return l}function JU(t,e){var n=B(TA(t,e),2),r=n[0],i=n[1],s=e.datas,o=s.clipPath,a=s.clipIndex,l=o,u=l.type,c=l.poses,d=l.splitter,f=c.map(function(_){return _.pos});if(u==="polygon")f.splice(a,0,[r,i]);else if(u==="inset"){var p=GU.indexOf(a),v=HU.indexOf(a),m=c.length;if(qU(c,f,8,p,v,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),m===c.length)return}else return;var E=P_(t,o,f),y="".concat(u,"(").concat(E.join(d),")");ye(t,"onClip",Le(t,e,V({clipEventType:"added",clipType:u,poses:f,clipStyles:E,clipStyle:y,distX:0,distY:0},On({clipPath:y},e))))}function ZU(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,s=r,o=s.type,a=s.poses,l=s.splitter,u=a.map(function(p){return p.pos}),c=u.length;if(o==="polygon")a.splice(i,1),u.splice(i,1);else if(o==="inset"){if(i<8||(WU(a,u,i,8,c),c===a.length))return}else return;var d=P_(t,r,u),f="".concat(o,"(").concat(d.join(l),")");ye(t,"onClip",Le(t,e,V({clipEventType:"removed",clipType:o,poses:u,clipStyles:d,clipStyle:f,distX:0,distY:0},On({clipPath:f},e))))}var e5={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,s=n.clipArea,o=n.zoom,a=n.groupable,l=t.getState(),u=l.target,c=l.width,d=l.height,f=l.allMatrix,p=l.is3d,v=l.left,m=l.top,E=l.pos1,y=l.pos2,_=l.pos3,S=l.pos4,b=l.clipPathState,N=l.snapBoundInfos,R=l.rotation;if(!u||a)return[];var x=tx(u,c,d,i||"inset",b||r);if(!x)return[];var w=p?4:3,C=x.type,I=x.poses,A=I.map(function(oe){var he=Tt(f,oe.pos,w);return[he[0]-v,he[1]-m]}),O=[],P=[],F=C==="rect",U=C==="inset",q=C==="polygon";if(F||U||q){var H=U?A.slice(0,8):A;P=H.map(function(oe,he){var be=he===0?H[H.length-1]:H[he-1],je=Mt(be,oe),Ee=nP(be,oe);return e.createElement("div",{key:"clipLine".concat(he),className:Te("line","clip-line","snap-control"),"data-clip-index":he,style:{width:"".concat(Ee,"px"),transform:"translate(".concat(be[0],"px, ").concat(be[1],"px) rotate(").concat(je,"rad) scaleY(").concat(o,")")}})})}if(O=A.map(function(oe,he){return e.createElement("div",{key:"clipControl".concat(he),className:Te("control","clip-control","snap-control"),"data-clip-index":he,style:{transform:"translate(".concat(oe[0],"px, ").concat(oe[1],"px) rotate(").concat(R,"rad) scale(").concat(o,")")}})}),U&&O.push.apply(O,ce([],B(A.slice(8).map(function(oe,he){return e.createElement("div",{key:"clipRadiusControl".concat(he),className:Te("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+he,style:{transform:"translate(".concat(oe[0],"px, ").concat(oe[1],"px) rotate(").concat(R,"rad) scale(").concat(o,")")}})})),!1)),C==="circle"||C==="ellipse"){var L=x.left,j=x.top,z=x.radiusX,$=x.radiusY,K=B(Ce(Tt(f,[L,j],w),Tt(f,[0,0],w)),2),J=K[0],te=K[1],ie="none";if(!s){for(var X=Math.max(10,z/5,$/5),ue=[],me=0;me<=X;++me){var Se=Math.PI*2/X*me;ue.push([z+(z-o)*Math.cos(Se),$+($-o)*Math.sin(Se)])}ue.push([z,-2]),ue.push([-2,-2]),ue.push([-2,$*2+2]),ue.push([z*2+2,$*2+2]),ue.push([z*2+2,-2]),ue.push([z,-2]),ie="polygon(".concat(ue.map(function(oe){return"".concat(oe[0],"px ").concat(oe[1],"px")}).join(", "),")")}O.push(e.createElement("div",{key:"clipEllipse",className:Te("clip-ellipse","snap-control"),style:{width:"".concat(z*2,"px"),height:"".concat($*2,"px"),clipPath:ie,transform:"translate(".concat(-v+J,"px, ").concat(-m+te,"px) ").concat(Ep(f))}}))}if(s){var xe=wr(ce([E,y,_,S],B(A),!1)),se=xe.width,de=xe.height,Pe=xe.left,Y=xe.top;if(q||F||U){var ue=U?A.slice(0,8):A;O.push(e.createElement("div",{key:"clipArea",className:Te("clip-area","snap-control"),style:{width:"".concat(se,"px"),height:"".concat(de,"px"),transform:"translate(".concat(Pe,"px, ").concat(Y,"px)"),clipPath:"polygon(".concat(ue.map(function(he){return"".concat(he[0]-Pe,"px ").concat(he[1]-Y,"px")}).join(", "),")")}}))}}return N&&["vertical","horizontal"].forEach(function(oe){var he=N[oe],be=oe==="horizontal";he.isSnap&&P.push.apply(P,ce([],B(he.snap.posInfos.map(function(je,Ee){var ke=je.pos,et=Ce(Tt(f,be?[0,ke]:[ke,0],w),[v,m]),ct=Ce(Tt(f,be?[c,ke]:[ke,d],w),[v,m]);return ec(e,"",et,ct,o,"clip".concat(oe,"snap").concat(Ee),"guideline")})),!1)),he.isBound&&P.push.apply(P,ce([],B(he.bounds.map(function(je,Ee){var ke=je.pos,et=Ce(Tt(f,be?[0,ke]:[ke,0],w),[v,m]),ct=Ce(Tt(f,be?[c,ke]:[ke,d],w),[v,m]);return ec(e,"",et,ct,o,"clip".concat(oe,"bounds").concat(Ee),"guideline","bounds","bold")})),!1))}),ce(ce([],B(O),!1),B(P),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,V(V({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,s=r.customClipPath,o=n.target,a=n.width,l=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",d=e.datas,f=tx(o,a,l,i||"inset",s);if(!f)return!1;var p=f.clipText,v=f.type,m=f.poses,E=ye(t,"onClipStart",Le(t,e,{clipType:v,clipStyle:p,poses:m.map(function(y){return y.pos})}));return E===!1?(d.isClipStart=!1,!1):(d.isControl=c&&c.indexOf("clip-control")>-1,d.isLine=c.indexOf("clip-line")>-1,d.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,d.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=p,zo(t,e),!0)},dragControl:function(t,e){var n,r,i,s=e.datas,o=e.originalDatas,a=e.isDragTarget;if(!s.isClipStart)return!1;var l=s,u=l.isControl,c=l.isLine,d=l.isArea,f=l.clipIndex,p=l.clipPath;if(!p)return!1;var v=Oo(t.props,"clippable"),m=v.keepRatio,E=0,y=0,_=o.draggable,S=hi(e);a&&_?(n=B(_.prevBeforeDist,2),E=n[0],y=n[1]):(r=B(S,2),E=r[0],y=r[1]);var b=[E,y],N=t.state,R=N.width,x=N.height,w=!d&&!u&&!c,C=p.type,I=p.poses,A=p.splitter,O=I.map(function(Fe){return Fe.pos});w&&(E=-E,y=-y);var P=!u||I[f].direction==="nesw",F=C==="inset"||C==="rect",U=I.map(function(){return[0,0]});if(u&&!P){var q=I[f],H=q.horizontal,L=q.vertical,j=[E*re(H),y*re(L)];U=QU(I,f,j,F,m)}else P&&(U=O.map(function(){return[E,y]}));var z=O.map(function(Fe,Ze){return Ye(Fe,U[Ze])}),$=ce([],B(z),!1);N.snapBoundInfos=null;var K=p.type==="circle",J=p.type==="ellipse";if(K||J){var te=wr(z),ie=re(te.bottom-te.top),X=re(J?te.right-te.left:ie),ue=z[0][1]+ie,me=z[0][0]-X,Se=z[0][0]+X;K&&($.push([Se,te.bottom]),U.push([1,0])),$.push([te.left,ue]),U.push([0,1]),$.push([me,te.bottom]),U.push([1,0])}var xe=XA((v.clipHorizontalGuidelines||[]).map(function(Fe){return st("".concat(Fe),x)}),(v.clipVerticalGuidelines||[]).map(function(Fe){return st("".concat(Fe),R)}),R,x),se=[],de=[];if(K||J)se=[$[4][0],$[2][0]],de=[$[1][1],$[3][1]];else if(F){var Pe=[$[0],$[2],$[4],$[6]],Y=[U[0],U[2],U[4],U[6]];se=Pe.filter(function(Fe,Ze){return Y[Ze][0]}).map(function(Fe){return Fe[0]}),de=Pe.filter(function(Fe,Ze){return Y[Ze][1]}).map(function(Fe){return Fe[1]})}else se=$.filter(function(Fe,Ze){return U[Ze][0]}).map(function(Fe){return Fe[0]}),de=$.filter(function(Fe,Ze){return U[Ze][1]}).map(function(Fe){return Fe[1]});var oe=[0,0],he=FS(xe,v.clipTargetBounds&&{left:0,top:0,right:R,bottom:x},se,de,5,5),be=he.horizontal,je=he.vertical,Ee=be.offset,ke=je.offset;if(be.isBound&&(oe[1]+=Ee),je.isBound&&(oe[0]+=ke),(J||K)&&U[0][0]===0&&U[0][1]===0){var te=wr(z),et=te.bottom-te.top,ct=J?te.right-te.left:et,at=je.isBound?re(ke):je.snapIndex===0?-ke:ke,Oe=be.isBound?re(Ee):be.snapIndex===0?-Ee:Ee;ct-=at,et-=Oe,K&&(et=UA(je,be)>0?et:ct,ct=et);var rt=$[0];$[1][1]=rt[1]-et,$[2][0]=rt[0]+ct,$[3][1]=rt[1]+et,$[4][0]=rt[0]-ct}else if(F&&m&&u){var Je=B(wP(I),2),Ue=Je[0],Z=Je[1],G=Ue&&Z?Ue/Z:0,ae=I[f],pe=ae.direction||"",_e=$[1][1],ue=$[5][1],me=$[7][0],Se=$[3][0];re(Ee)<=re(ke)?Ee=Nn(Ee)*re(ke)/G:ke=Nn(ke)*re(Ee)*G,pe.indexOf("w")>-1?me-=ke:pe.indexOf("e")>-1?Se-=ke:(me+=ke/2,Se-=ke/2),pe.indexOf("n")>-1?_e-=Ee:pe.indexOf("s")>-1?ue-=Ee:(_e+=Ee/2,ue-=Ee/2);var Ke=ph(_e,Se,ue,me);$.forEach(function(wt,tt){var Gt;Gt=B(Ke[tt].pos,2),wt[0]=Gt[0],wt[1]=Gt[1]})}else $.forEach(function(Fe,Ze){var ze=U[Ze];ze[0]&&(Fe[0]-=ke),ze[1]&&(Fe[1]-=Ee)});var Lt=P_(t,p,z),_t="".concat(C,"(").concat(Lt.join(A),")");if(N.clipPathState=_t,K||J)se=[$[4][0],$[2][0]],de=[$[1][1],$[3][1]];else if(F){var Pe=[$[0],$[2],$[4],$[6]];se=Pe.map(function(Ze){return Ze[0]}),de=Pe.map(function(Ze){return Ze[1]})}else se=$.map(function(Fe){return Fe[0]}),de=$.map(function(Fe){return Fe[1]});if(N.snapBoundInfos=FS(xe,v.clipTargetBounds&&{left:0,top:0,right:R,bottom:x},se,de,1,1),_){var cr=N.is3d,Wr=N.allMatrix,Jn=cr?4:3,Zn=oe;a&&(Zn=[b[0]+oe[0]-S[0],b[1]+oe[1]-S[1]]),_.deltaOffset=ot(Wr,[Zn[0],Zn[1],0,0],Jn)}return ye(t,"onClip",Le(t,e,V({clipEventType:"changed",clipType:C,poses:z,clipStyle:_t,clipStyles:Lt,distX:E,distY:y},On((i={},i[C==="rect"?"clip":"clipPath"]=_t,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,s=r.isLine,o=r.isClipStart,a=r.isControl;return o?(ye(t,"onClipEnd",ar(t,e,{})),i&&(a?ZU(t,e):s&&JU(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},t5={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":qt(e.inputEvent.target,Te("origin"))},dragControlStart:function(t,e){var n=e.datas;zo(t,e);var r=Le(t,e,{dragStart:Dn.dragStart(t,new Ka().dragStart([0,0],e))}),i=ye(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var s=B(hi(e),2),o=s[0],a=s[1],l=t.state,u=l.width,c=l.height,d=l.offsetMatrix,f=l.targetMatrix,p=l.is3d,v=t.props.originRelative,m=v===void 0?!0:v,E=p?4:3,y=[o,a];if(i){var _=e.distOrigin;(_[0]||_[1])&&(y=_)}var S=Ye(n.startOrigin,y),b=Ye(n.startTargetOrigin,y),N=Ce(y,n.prevOrigin),R=kc(d,f,S,E),x=t.getRect(),w=wr(Bo(R,u,c,E)),C=[x.left-w.left,x.top-w.top];n.prevOrigin=y;var I=[kr(b[0],u,m),kr(b[1],c,m)].join(" "),A=Dn.drag(t,Pc(e,t.state,C,!!r)),O=Le(t,e,V(V({width:u,height:c,origin:S,dist:y,delta:N,transformOrigin:I,drag:A},On({transformOrigin:I,transform:A.transform},e)),{afterTransform:A.transform}));return ye(t,"onDragOrigin",O),O},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(ye(t,"onDragOriginEnd",ar(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,s=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(o[0]+=a.deltaOrigin[0],o[1]+=a.deltaOrigin[1]):"origin"in a?(o[0]=a.origin[0]-s[0],o[1]=a.origin[1]-s[1]):("x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function n5(t,e,n,r){var i=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,s=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(s===0?o=4:s<4&&(o=7)),e===1&&(s<=1?o=5:s<=2&&(o=6)),!(o===-1||!t[o].virtual)){var a=t[o];r5(t,o),o<4?a.pos[0]=n:a.pos[1]=r}}function r5(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function i5(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function nx(t,e,n,r,i){r===void 0&&(r=[0,0]);var s=[];return!t||t==="0px"?s=[]:s=Ls(t),_P(s,e,n,0,0,r,i)}function rx(t,e,n,r,i){var s=t.state,o=s.width,a=s.height,l=A_(i,t.props.roundRelative,o,a),u=l.raws,c=l.styles,d=l.radiusPoses,f=YU(d,u),p=f.horizontals,v=f.verticals,m=c.join(" ");s.borderRadiusState=m;var E=Le(t,e,V({horizontals:p,verticals:v,borderRadius:m,width:o,height:a,delta:r,dist:n},On({borderRadius:m},e)));return ye(t,"onRound",E),E}function ix(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var s=t.moveables[0],o=t.getTargets()[0];o&&((s==null?void 0:s.props.target)===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=T_(o).borderRadius,r.borderRadius=i))}return i}var s5={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Te("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,s=n.height,o=n.allMatrix,a=n.is3d,l=n.left,u=n.top,c=n.borderRadiusState,d=t.props,f=d.minRoundControls,p=f===void 0?[0,0]:f,v=d.maxRoundControls,m=v===void 0?[4,4]:v,E=d.zoom,y=d.roundPadding,_=y===void 0?0:y,S=d.isDisplayShadowRoundControls,b=d.groupable;if(!r)return null;var N=c||ix(t),R=a?4:3,x=nx(N,i,s,p,!0);if(!x)return null;var w=0,C=0,I=b?[0,0]:[l,u];return x.map(function(A,O){var P=A.horizontal,F=A.vertical,U=A.direction||"",q=ce([],B(A.pos),!1);C+=Math.abs(P),w+=Math.abs(F),P&&U.indexOf("n")>-1&&(q[1]-=_),F&&U.indexOf("w")>-1&&(q[0]-=_),P&&U.indexOf("s")>-1&&(q[1]+=_),F&&U.indexOf("e")>-1&&(q[0]+=_);var H=Ce(Tt(o,q,R),I),L=S&&S!=="horizontal",j=A.vertical?w<=m[1]&&(L||!A.virtual):C<=m[0]&&(S||!A.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(O),className:Te("control","border-radius",A.vertical?"vertical":"",A.virtual?"virtual":""),"data-radius-index":O,style:{display:j?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(E,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,s=i.getAttribute("class")||"",o=s.indexOf("border-radius")>-1,a=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!o&&!a)return!1;var d=Le(t,e,{}),f=ye(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=u,r.controlIndex=l,r.isControl=o,r.isLine=a,zo(t,e);var p=t.props,v=p.roundRelative,m=p.minRoundControls,E=m===void 0?[0,0]:m,y=t.state,_=y.width,S=y.height;r.isRound=!0,r.prevDist=[0,0];var b=ix(t),N=nx(b||"",_,S,E,!0)||[];return r.controlPoses=N,y.borderRadiusState=A_(N,v,_,S).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,s=B(hi(e),2),o=s[0],a=s[1],l=[o,a],u=Ce(l,n.prevDist),c=t.props.maxRoundControls,d=c===void 0?[4,4]:c,f=t.state,p=f.width,v=f.height,m=r[i],E=m.vertical,y=m.horizontal,_=r.map(function(b){var N=b.horizontal,R=b.vertical,x=[N*y*l[0],R*E*l[1]];if(N){if(d[0]===1)return x;if(d[0]<4&&N!==y)return x}else{if(d[1]===0)return x[1]=R*y*l[0]/p*v,x;if(E){if(d[1]===1)return x;if(d[1]<4&&R!==E)return x}}return[0,0]});_[i]=l;var S=r.map(function(b,N){return V(V({},b),{pos:Ye(b.pos,_[N])})});return i<4?S.slice(0,i+1).forEach(function(b){b.virtual=!1}):S.slice(4,i+1).forEach(function(b){b.virtual=!1}),n.prevDist=[o,a],rx(t,e,l,u,S)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var s=r.isControl,o=r.controlIndex,a=r.isLine,l=r.lineIndex,u=r.controlPoses,c=u.filter(function(y){var _=y.virtual;return _}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(i&&f){if(s&&(f===!0||f==="control"))i5(u,o);else if(a&&(f===!0||f==="line")){var p=B(TA(t,e),2),v=p[0],m=p[1];n5(u,l,v,m)}c!==u.filter(function(y){var _=y.virtual;return _}).length&&rx(t,e,[0,0],[0,0],u)}var E=ar(t,e,{});return ye(t,"onRoundEnd",E),n.borderRadiusState="",E},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,s=Lr(t,"roundable",e),o=V({targets:t.props.targets,events:s.map(function(a,l){return V(V({},a),{target:i[l],moveable:r[l],currentTarget:r[l]})})},n);return ye(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,s=Lr(t,"roundable",e),o=V({targets:t.props.targets,events:s.map(function(a,l){return V(V(V({},a),{target:i[l],moveable:r[l],currentTarget:r[l]}),On({borderRadius:n.borderRadius},a))})},n);return ye(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=Lr(t,"roundable",e);Sp(t,"onRound",function(a){var l=V({targets:t.props.targets,events:i.map(function(u,c){return V(V(V({},u),{target:r[c],moveable:n[c],currentTarget:n[c]}),On({borderRadius:a.borderRadius},u))})},a);ye(t,"onRoundGroup",l)});var s=this.dragControlEnd(t,e);if(!s)return!1;var o=V({targets:t.props.targets,events:i.map(function(a,l){var u;return V(V({},a),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},s);return ye(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function o5(t,e){var n=e?4:3,r=vt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var EP={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,s=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(fA(i,!0),")"),a=!s||s==="none"?o:s;e.datas.startTransforms=o5(a,r)?[]:Ls(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Le(t,e,{setTransform:function(n){e.datas.startTransforms=rn(n)?n:Ls(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Le(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ye(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ye(t,"onBeforeRender",Le(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ye(t,"onBeforeRenderEnd",Le(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=Lr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.setTransform(l,o),n.resetStyle(o),n.fillDragStartParams(l,o)});ye(t,"onBeforeRenderGroupStart",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:s}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=Lr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.resetStyle(o),n.fillDragParams(l,o)});ye(t,"onBeforeRenderGroup",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:s}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ye(t,"onBeforeRenderGroupEnd",Le(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},SP={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ye(t,"onRenderStart",Le(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ye(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ye(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ye(t,"onRenderGroupStart",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=Lr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.fillDragParams(l,o)});ye(t,"onRenderGroup",Le(t,e,V(V({isPinch:!!e.isPinch,targets:t.props.targets,transform:Rd(e),transformObject:{}},On(Ad(e))),{events:s})))},dragGroupEnd:function(t,e){var n=this,r=Lr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.fillDragEndParams(l,o)});ye(t,"onRenderGroupEnd",Le(t,e,V({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:s,transformObject:{},transform:Rd(e)},On(Ad(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Ya(ah(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Le(t,e,V({isPinch:!!e.isPinch,transformObject:n,transform:Rd(e)},On(Ad(e))))},fillDragEndParams:function(t,e){var n={};return Ya(ah(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Le(t,e,V({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Rd(e)},On(Ad(e))))}};function wu(t,e,n,r,i,s,o){s.clientDistX=s.distX,s.clientDistY=s.distY;var a=i==="Start",l=i==="End",u=i==="After",c=t.state.target,d=s.isRequest,f=r.indexOf("Control")>-1;if(!c||a&&f&&!d&&t.areaElement===s.inputEvent.target)return!1;var p=ce([],B(e),!1);if(d){var v=s.requestAble;p.some(function(O){return O.name===v})||p.push.apply(p,ce([],B(t.props.ables.filter(function(O){return O.name===v})),!1))}if(!p.length||p.every(function(O){return O.dragRelation}))return!1;var m=s.inputEvent,E;l&&m&&(E=document.elementFromPoint(s.clientX,s.clientY)||m.target);var y=!1,_=function(){var O;y=!0,(O=s.stop)===null||O===void 0||O.call(s)},S=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());S&&t.updateRect(i,!0,!1);var b=s.datas,N=f?"controlGesto":"targetGesto",R=t[N],x=function(O,P,F){if(!(P in O)||R!==t[N])return!1;var U=O.name,q=b[U]||(b[U]={});if(a&&(q.isEventStart=!F||!O[F]||O[F](t,s)),!q.isEventStart)return!1;var H=O[P](t,V(V({},s),{stop:_,datas:q,originalDatas:b,inputTarget:E}));return t._emitter.off(),a&&H===!1&&(q.isEventStart=!1),H};S&&p.forEach(function(O){O.unset&&O.unset(t)}),x(EP,"drag".concat(r).concat(i));var w=0,C=0;n.forEach(function(O){if(y)return!1;var P="".concat(O).concat(r).concat(i),F="".concat(O).concat(r,"Condition");i===""&&!d&&AU(t.state,s);var U=p.filter(function(L){return L[P]});U=U.filter(function(L,j){return L.name&&U.indexOf(L)===j});var q=U.filter(function(L){return x(L,P,F)}),H=q.length;y&&++w,H&&++C,!y&&a&&U.length&&!H&&(w+=U.filter(function(L){var j=L.name,z=b[j];return z.isEventStart?L.dragRelation!=="strong":!1}).length?1:0)}),(!u||C)&&x(SP,"drag".concat(r).concat(i));var I=R!==t[N]||w===n.length;if((l||y||I)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}}),p.forEach(function(O){O.unset&&O.unset(t)})),a&&!I&&!d&&C&&t.props.preventDefault&&(s==null||s.preventDefault()),t.isUnmounted||I)return!1;if(!a&&C&&!o||l){var A=t.props.flushSync||ZA;A(function(){t.updateRect(l?i:"",!0,!1),t.forceUpdate()})}return!a&&!l&&!u&&C&&!o&&wu(t,e,n,r,i+"After",s),!0}function k_(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var s=r,o=t.areaElement,a=t._dragTarget;return!a||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:s===a||a.contains(s)||s===o||!t.isMoveableElement(s)&&!t.controlBox.contains(s)||qt(s,"moveable-area")||qt(s,"moveable-padding")||qt(s,"moveable-edgeDraggable")}}function xP(t,e,n){var r=t.controlBox,i=[],s=t.props,o=s.dragArea,a=t.state.target,l=s.dragTarget;i.push(r),(!o||l)&&i.push(e),!o&&l&&a&&e!==a&&s.dragTargetSelf&&i.push(a);var u=k_(t);return CP(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function TP(t,e){var n=t.controlBox,r=[];r.push(n);var i=k_(t,!0),s=function(o,a){if(a===void 0&&(a=o.inputEvent.target),a===n)return!0;var l=i(o,a);return!l};return CP(t,r,"controlAbles",e,{dragStart:s,pinchStart:s})}function CP(t,e,n,r,i){i===void 0&&(i={});var s=n==="targetAbles",o=t.props,a=o.pinchOutside,l=o.pinchThreshold,u=o.preventClickEventOnDrag,c=o.preventClickDefault,d=o.checkInput,f=o.dragFocusedInput,p=o.preventDefault,v=p===void 0?!0:p,m=o.preventRightClick,E=m===void 0?!0:m,y=o.preventWheelClick,_=y===void 0?!0:y,S=o.dragContainer,b=si(S,!0),N={preventDefault:v,preventRightClick:E,preventWheelClick:_,container:b||Is(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:s?u:!1,preventClickEventOnDragStart:s?c:!1,preventClickEventByCondition:s?null:function(w){return t.controlBox.contains(w.target)},checkInput:s?d:!1,dragFocusedInput:f},R=new DB(e,N),x=r==="Control";return["drag","pinch"].forEach(function(w){["Start","","End"].forEach(function(C){R.on("".concat(w).concat(C),function(I){var A,O=I.eventType,P=w==="drag"&&I.isPinch;if(i[O]&&!i[O](I)){I.stop();return}if(!P){var F=w==="drag"?[w]:["drag",w],U=ce([],B(t[n]),!1),q=wu(t,U,F,r,C,I);q?(t.props.stopPropagation||C==="Start"&&x)&&((A=I==null?void 0:I.inputEvent)===null||A===void 0||A.stopPropagation()):I.stop()}})})}),R}var a5=function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(s){var o=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(l){l[o](a,{inputEvent:s})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function l5(t,e,n,r){var i;n===void 0&&(n=e);var s=PA(t,e),o=s.matrixes,a=s.is3d,l=s.targetMatrix,u=s.transformOrigin,c=s.targetOrigin,d=s.offsetContainer,f=s.hasFixed,p=s.zoom,v=S6(d,n),m=v.matrixes,E=v.is3d,y=v.offsetContainer,_=v.zoom,S=r,b=4,N=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,R=l,x=vt(b),w=vt(b),C=vt(b),I=vt(b),A=o.length,O=m.map(function(j){return V(V({},j),{matrix:j.matrix?ce([],B(j.matrix),!1):void 0})}).reverse();o.reverse(),!a&&S&&(R=Ur(R,3,4),Om(o)),!E&&S&&Om(O),O.forEach(function(j){w=ot(w,j.matrix,b)});var P=n||Ws(t),F=((i=O[0])===null||i===void 0?void 0:i.target)||tc(P,P,!0).offsetParent,U=O.slice(1).reduce(function(j,z){return ot(j,z.matrix,b)},vt(b));o.forEach(function(j,z){if(A-2===z&&(C=x.slice()),A-1===z&&(I=x.slice()),!j.matrix){var $=o[z+1],K=CU(j,$,F,b,ot(U,x,b));j.matrix=Do(K,b)}x=ot(x,j.matrix,b)});var q=!N&&a;R||(R=vt(q?4:3));var H=Ep(N&&R.length===16?Ur(R,4,3):R,q),L=w;return w=cA(w,b,b),{hasZoom:p!==1||_!==1,hasFixed:f,matrixes:o,rootMatrix:w,originalRootMatrix:L,beforeMatrix:C,offsetMatrix:I,allMatrix:x,targetMatrix:R,targetTransform:H,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:c,is3d:S,offsetContainer:d,offsetRootContainer:y}}function u5(t,e,n,r){n===void 0&&(n=e);var i=0,s=0,o=0,a={},l=rP(t);if(t&&(i=l.offsetWidth,s=l.offsetHeight),t){var u=l5(t,e,n,r),c=Pa(u.allMatrix,u.transformOrigin,i,s);a=V(V({},u),c);var d=Pa(u.allMatrix,[50,50],100,100);o=iP([d.pos1,d.pos2],d.direction)}var f=4;return V(V(V({hasZoom:!1,width:i,height:s,rotation:o},l),{originalRootMatrix:vt(f),rootMatrix:vt(f),beforeMatrix:vt(f),offsetMatrix:vt(f),allMatrix:vt(f),targetMatrix:vt(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function Vm(t,e,n,r,i,s){s===void 0&&(s=[]);var o=1,a=[0,0],l=kd(),u=kd(),c=kd(),d=kd(),f=[0,0],p={},v=u5(e,n,i,!0);if(e){var m=Qn(e);s.forEach(function(O){p[O]=m(O)});var E=v.is3d?4:3,y=Pa(v.offsetMatrix,Ye(v.transformOrigin,dA(v.targetMatrix,E)),v.width,v.height);o=y.direction,a=Ye(y.origin,[y.left-v.left,y.top-v.top]),d=_u(v.offsetRootContainer);var _=tc(r,r,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var S=Pa(ot(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),b=Pa(v.originalRootMatrix,dh(Qn(_)("transformOrigin")).map(function(O){return parseFloat(O)}),_.offsetWidth,_.offsetHeight);if(l=Vg(S,d),c=Vg(b,d,_,!0),t){var N=S.left,R=S.top;u=Vg({left:N,top:R,bottom:R,right:R},d)}}else{l=_u(e),c=E6(_),t&&(u=_u(t));var x=c.left,w=c.top,C=c.clientLeft,I=c.clientTop,A=[l.left-x,l.top-w];f=Ce(Ja(v.rootMatrix,A,4),[C+v.left,I+v.top])}}return V({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:d,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:p,offsetDelta:f},v)}function sx(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var s=No([e,n,r,i]),o=[s.minX,s.minY],a=Ce(t.origin,o);return e=Ce(e,o),n=Ce(n,o),r=Ce(r,o),i=Ce(i,o),V(V({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var Za=function(t){Rc(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=V({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Vm(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new u_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Wz(n._observerId),n._observerId=sA(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,s=n.className,o=n.target,a=n.zoom,l=n.cspNonce,u=n.translateZ,c=n.cssStyled,d=n.groupable,f=n.linePadding,p=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var v=B(i||[0,0],2),m=v[0],E=v[1],y=r.left,_=r.top,S=r.target,b=r.direction,N=r.hasFixed,R=r.offsetDelta,x=n.targets,w=this.isDragging(),C={};this.getEnabledAbles().forEach(function(U){C["data-able-".concat(U.name.toLowerCase())]=!0});var I=this._getAbleClassName(),A=x&&x.length&&(S||d)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,P=[y-m,_-E];!d&&n.useAccuratePosition&&(P[0]+=R[0],P[1]+=R[1]);var F={position:N?"fixed":"absolute",display:A?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(P[0],"px, ").concat(P[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return f&&(F["--moveable-line-padding"]=f),p&&(F["--moveable-control-padding"]=p),D.createElement(c,V({cspNonce:l,ref:_o(this,"controlBox"),className:"".concat(Te("control-box",b===-1?"reverse":"",w?"dragging":"")," ").concat(I," ").concat(s)},C,{onClick:this._onPreventClick,style:F}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),ma(this,!1),ma(this,!0);var s=this.events;for(var o in s){var a=s[o];a&&a.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return or(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,s=n.container;return s||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(f_)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,s=this.controlGesto;return i&&k_(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):s&&this.isMoveableElement(r)&&(s.isFlag()||s.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,s=r.pos1,o=r.pos2,a=r.pos3,l=r.pos4,u=r.targetClientRect;if(!i)return 0;var c;if(s_(n)){var d=n.getBoundingClientRect();c={left:d.left,top:d.top,width:d.width,height:d.height}}else c=V({width:0,height:0},n);var f=c.left,p=c.top,v=c.width,m=c.height,E=RS([s,o,l,a],u),y=IB(E,[[f,p],[f+v,p],[f+v,p+m],[f,p+m]]),_=gA(E);return!y||!_?0:Math.min(100,y/_*100)},e.prototype.isInside=function(n,r){var i=this.state,s=i.target,o=i.pos1,a=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;return s?Em([n,r],RS([o,a,u,l],c)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var s=this.props,o=!s.parentPosition&&!s.wrapperMoveable;o&&Xa(!0);var a=s.parentMoveable,l=this.state,u=l.target||s.target,c=this.getContainer(),d=a?a._rootContainer:this._rootContainer,f=Vm(this.controlBox,u,c,c,d||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var p=sx(s.persistData);for(var v in p)f[v]=p[v]}o&&Xa(),this.updateState(f,a?!1:i)},e.prototype.isDragging=function(n){var r,i,s=this.targetGesto,o=this.controlGesto;if(s!=null&&s.isFlag()){if(!n)return!0;var a=s.getEventData();return!!(!((r=a[n])===null||r===void 0)&&r.isEventStart)}if(o!=null&&o.isFlag()){if(!n)return!0;var a=o.getEventData();return!!(!((i=a[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Tr(this.state),i=B(r,4),s=i[0],o=i[1],a=i[2],l=i[3],u=wr(r),c=n.width,d=n.height,f=u.width,p=u.height,v=u.left,m=u.top,E=[n.left,n.top],y=Ye(E,n.origin),_=Ye(E,n.beforeOrigin),S=n.transformOrigin;return{width:f,height:p,left:v,top:m,pos1:s,pos2:o,pos3:a,pos4:l,offsetWidth:c,offsetHeight:d,beforeOrigin:_,origin:y,transformOrigin:S,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;(r==null?void 0:r.isIdle())===!1&&Mm(this,!1),r==null||r.stop()}if(!n||n==="control"){var r=this.controlGesto;(r==null?void 0:r.isIdle())===!1&&Mm(this,!0),r==null||r.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,s=n.direction;return DU(r,i,s)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var s=this,o=s.props,a=o.parentMoveable||o.wrapperMoveable||s,l=a.props.ables,u=o.groupable,c=or(l,function(y){return y.name===n});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var d=c.request(s),f=i||r.isInstant,p=d.isControl?"controlAbles":"targetAbles",v="".concat(u?"Group":"").concat(d.isControl?"Control":""),m=ce([],B(a[p]),!1),E={request:function(y){return wu(s,m,["drag"],v,"",V(V({},d.request(y)),{requestAble:n,isRequest:!0}),f),E},requestEnd:function(){return wu(s,m,["drag"],v,"End",V(V({},d.requestEnd()),{requestAble:n,isRequest:!0}),f),E}};return wu(s,m,["drag"],v,"Start",V(V({},d.requestStart(r)),{requestAble:n,isRequest:!0}),f),f?E.request(r).requestEnd():E},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,s=n.originalBeforeOrigin,o=n.transformOrigin,a=n.allMatrix,l=n.is3d,u=n.pos1,c=n.pos2,d=n.pos3,f=n.pos4,p=n.left,v=n.top,m=n.isPersisted,E=r.zoom||1;if(!i&&E<=1){n.renderPoses=[u,c,d,f],n.renderLines=[[u,c],[c,f],[f,d],[d,u]];return}var y=pP(i||{}),_=y.left,S=y.top,b=y.bottom,N=y.right,R=l?4:3,x=[];m?x=o:this.controlBox&&r.groupable?x=s:x=Ye(s,[p,v]);var w=sh(R,Do(x.map(function(F){return-F}),R),a,Do(o,R)),C=dr(w,u,[-_,-S],R),I=dr(w,c,[N,-S],R),A=dr(w,d,[-_,b],R),O=dr(w,f,[N,b],R);n.renderPoses=[C,I,A,O],n.renderLines=[[C,I],[I,O],[O,A],[A,C]];{var P=E/2;n.renderLines=[[dr(w,u,[-_-P,-S],R),dr(w,c,[N+P,-S],R)],[dr(w,c,[N,-S-P],R),dr(w,f,[N,b+P],R)],[dr(w,f,[N+P,b],R),dr(w,d,[-_-P,b],R)],[dr(w,d,[-_,b+P],R),dr(w,u,[-_,-S-P],R)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,s=n.parentMoveable,o=this.state,a=o.target,l=o.container;if(!(!a&&!r)){this.updateAbles();var u=!Lm(a,r),c=u||!Lm(l,i);if(c){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:r,container:i}),!s&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var s=i[n];return s&&s(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,s=n+r;return i[s]||(i[s]=yA(n,r)),i[s]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var a=sx(s);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),a="drag".concat(r,"Start"),l="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),c=Dd(o,[a,l],s),d=Dd(o,[u],s);this.enabledAbles=o,this.targetAbles=c,this.controlAbles=d},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var s in n)i[s]=n[s]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,s={createElement:D.createElement};return this.renderState={},RU(cP(Dd(this.getEnabledAbles(),["render"],i).map(function(o){var a=o.render;return a(n,s)||[]})).filter(function(o){return o}),function(o){var a=o.key;return a}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var s,o,a=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return ce(ce([],B(r),!1),B(a),!1)},ce([],B(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,s=!n&&this.targetGesto||this._isTargetChanged(!0);s&&(ma(this,!1),this.updateState({gestos:{}})),r||ma(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=xP(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=TP(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=si(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,s=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,a=r.parentMoveable;if(s||a&&o)return[];var l=this.getState(),u={createElement:D.createElement};return l.renderLines.map(function(c,d){return ec(u,"",c[0],c[1],i,"render-line-".concat(d))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,s=this._prevOriginalDragTarget,o=this._prevDragArea,a=r.dragArea,l=!a&&s!==i,u=(n||a)&&o!==a;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,s=this.events,o=gl(s);if(this._isTargetChanged())for(var a in s){var l=s[a];l&&l.destroy(),s[a]=null}if(i){var u=this.enabledAbles;o.forEach(function(c){var d=Dd(u,[c]),f=d.length>0,p=s[c];if(!f){p&&(p.destroy(),s[c]=null);return}p||(p=new a5(i,n,c),s[c]=p),p.setAbles(d)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=si(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=si(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(ce(ce([],B(this._getAbleViewClassNames()),!1),[this.isDragging()?FU:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=uP(n.filter(Boolean),function(u){return u}).map(function(u){var c=B(u,1),d=c[0];return d}),s=this._viewClassNames,o=l_(s,i),a=o.removed,l=o.added;a.forEach(function(u){lA(r,s[u])}),l.forEach(function(u){aA(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,a=s!=null&&s.isFlag()?s.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(u){var c,d,f,p=u.name,v=((c=u.className)===null||c===void 0?void 0:c.call(u,r))||"";return(!((d=a[p])===null||d===void 0)&&d.isEventStart||!((f=l[p])===null||f===void 0)&&f.isEventStart)&&(v+=" ".concat(Te("".concat(p).concat(n,"-dragging")))),v.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,s=i.target,o=Is(this.getControlBoxElement());if(!o.ResizeObserver||!s||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===s&&this._reiszeObserver)){var a=new o.ResizeObserver(this.checkUpdateRect);a.observe(s,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(n){var r=this,i,s=this.props,o=s.target,a=Is(this.getControlBoxElement());if(!a.MutationObserver||!o||!s.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,d;try{for(var f=$B(u),p=f.next();!p.done;p=f.next()){var v=p.value;v.type==="attributes"&&v.attributeName==="style"&&r.checkUpdateRect()}}catch(m){c={error:m}}finally{try{p&&!p.done&&(d=f.return)&&d.call(f)}finally{if(c)throw c.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:ZA,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(D.PureComponent),D_={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],s=t.getState(),o=s.left,a=s.top,l=s.isPersisted,u=r.zoom||1,c=t.renderGroupRects,d=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];l?i=d.map(function(){return null}):d=[];var f=ya(t,"parentPosition",[o,a],function(v){return v.join(",")}),p=ya(t,"requestStyles",t.getRequestChildStyles(),function(v){return v.join(",")});return t.moveables=t.moveables.slice(0,i.length),ce(ce([],B(i.map(function(v,m){return e.createElement(Za,{key:"moveable"+m,ref:tA(t,"moveables",m),target:v,origin:!1,requestStyles:p,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,a],persistData:d[m],zoom:u})})),!1),B(cP(c.map(function(v,m){var E=v.pos1,y=v.pos2,_=v.pos3,S=v.pos4,b=[E,y,_,S];return[[0,1],[1,3],[3,2],[2,0]].map(function(N,R){var x=B(N,2),w=x[0],C=x[1];return ec(e,"",Ce(b[w],f),Ce(b[C],f),u,"group-rect-".concat(m,"-").concat(R))})}))),!1)}},c5=Ac("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,s=t.isMoveableElement(i),o=!s&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var a=n.contains(i);ye(t,"onClick",Le(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,s=i.indexOf(r),o=s>-1,a=!1;s===-1&&(s=zi(i,function(l){return l.contains(r)}),a=s>-1),ye(t,"onClickGroup",Le(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:s,isTarget:o,containsTarget:a,moveableTarget:i[s]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function qo(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),V(V({},t),{datas:e})}var d5=Ac("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?NA(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qt(i,Te("direction"))&&qt(i,Te("edge"))&&qt(i,Te("edgeDraggable"))},dragStart:function(t,e){return Dn.dragStart(t,qo(e))},drag:function(t,e){return Dn.drag(t,qo(e))},dragEnd:function(t,e){return Dn.dragEnd(t,qo(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&qt(i,Te("direction"))&&qt(i,Te("line"))},dragGroupStart:function(t,e){return Dn.dragGroupStart(t,qo(e))},dragGroup:function(t,e){return Dn.dragGroup(t,qo(e))},dragGroupEnd:function(t,e){return Dn.dragGroupEnd(t,qo(e))},unset:function(t){return Dn.unset(t)}}),IP={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},f5=[EP,mP,gU,OU,Dn,d5,km,MU,jU,Q6,UU,$U,zU,t5,e5,s5,D_,IP,c5,vP,SP];function ox(t,e){var n=B(t,3),r=n[0],i=n[1],s=n[2];return(r*e[0]+i*e[1]+s)/Math.sqrt(r*r+i*i)}function Md(t,e){var n=B(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function ax(t,e){return Math.max.apply(Math,ce([],B(t.map(function(n){var r=B(n,4),i=r[0],s=r[1],o=r[2],a=r[3];return Math.max(i[e],s[e],o[e],a[e])})),!1))}function lx(t,e){return Math.min.apply(Math,ce([],B(t.map(function(n){var r=B(n,4),i=r[0],s=r[1],o=r[2],a=r[3];return Math.min(i[e],s[e],o[e],a[e])})),!1))}function h5(t,e){var n,r,i,s=[0,0],o=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!t.length)return{pos1:s,pos2:o,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var d=Ne(e,Ln);if(d%90){var f=d/180*Math.PI,p=Math.tan(f),v=-1/p,m=[bm,kS],E=[[0,0],[0,0]],y=[bm,kS],_=[[0,0],[0,0]];t.forEach(function(J){J.forEach(function(te){var ie=ox([-p,1,0],te),X=ox([-v,1,0],te);m[0]>ie&&(E[0]=te,m[0]=ie),m[1]<ie&&(E[1]=te,m[1]=ie),y[0]>X&&(_[0]=te,y[0]=X),y[1]<X&&(_[1]=te,y[1]=X)})});var S=B(E,2),b=S[0],N=S[1],R=B(_,2),x=R[0],w=R[1],C=[-p,1,Md([-p,1],b)],I=[-p,1,Md([-p,1],N)],A=[-v,1,Md([-v,1],x)],O=[-v,1,Md([-v,1],w)];n=B([[C,A],[C,O],[I,A],[I,O]].map(function(J){var te=B(J,2),ie=te[0],X=te[1];return c_(ie,X)[0]}),4),s=n[0],o=n[1],a=n[2],l=n[3],u=y[1]-y[0],c=m[1]-m[0]}else{var P=lx(t,0),F=lx(t,1),U=ax(t,0),q=ax(t,1);if(s=[P,F],o=[U,F],a=[P,q],l=[U,q],u=U-P,c=q-F,d%180){var H=[a,s,l,o];r=B(H,4),s=r[0],o=r[1],a=r[2],l=r[3],u=q-F,c=U-P}}if(d%360>180){var H=[l,a,o,s];i=B(H,4),s=i[0],o=i[1],a=i[2],l=i[3]}var L=No([s,o,a,l]),j=L.minX,z=L.minY,$=L.maxX,K=L.maxY;return{pos1:s,pos2:o,pos3:a,pos4:l,width:u,height:c,minX:j,minY:z,maxX:$,maxY:K,rotation:e}}function bP(t,e){var n=e.map(function(r){if(rn(r)){var i=bP(t,r),s=i.length;return s>1?i:s===1?i[0]:null}else{var o=or(t,function(a){var l=a.manager;return l.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&rn(n[0])?n[0]:n}var p5=function(t){Rc(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new pA,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Xa(!0),this.moveables.forEach(function(me){me.updateRect(n,!1,!1)});var a=this.props,l=this.moveables,u=o.target||a.target,c=l.map(function(me){return{finded:!1,manager:me}}),d=this.props.targetGroups||[],f=bP(c,d),p=a.useDefaultGroupRotate;f.push.apply(f,ce([],B(c.filter(function(me){var Se=me.finded;return!Se}).map(function(me){var Se=me.manager;return Se})),!1));var v=[],m=!r||n!==""&&a.updateGroup,E=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var y=(s=a.persistData)===null||s===void 0?void 0:s.rotation;y!=null&&(E=y)}function _(me,Se,xe){var se=me.map(function(je){if(rn(je)){var Ee=_(je,Se),ke=[Ee.pos1,Ee.pos2,Ee.pos3,Ee.pos4];return v.push(Ee),{poses:ke,rotation:Ee.rotation}}else return{poses:Tr(je.state),rotation:je.getRotation()}}),de=se.map(function(je){var Ee=je.rotation;return Ee}),Pe=0,Y=de[0],oe=de.every(function(je){return Math.abs(Y-je)<.1});m?Pe=!p&&oe?Y:E:Pe=!p&&!xe&&oe?Y:Se;var he=se.map(function(je){var Ee=je.poses;return Ee}),be=h5(he,Pe);return be}var S=_(f,this.rotation,!0);m&&(this.rotation=S.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=v;var b=this.transformOrigin,N=this.rotation,R=this.scale,x=S.width,w=S.height,C=S.minX,I=S.minY,A=NU([[0,0],[x,0],[0,w],[x,w]],R_(b,x,w),this.rotation/180*Math.PI),O=No(A.result),P=O.minX,F=O.minY,U=" rotate(".concat(N,"deg)")+" scale(".concat(Nn(R[0]),", ").concat(Nn(R[1]),")"),q="translate(".concat(-P,"px, ").concat(-F,"px)").concat(U);this.controlBox.style.transform="translate3d(".concat(C,"px, ").concat(I,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(b,";")+"width:".concat(x,"px;height:").concat(w,"px;")+"transform: ".concat(q),o.width=x,o.height=w;var H=this.getContainer(),L=Vm(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||H,[]),j=[L.left,L.top],z=B(Tr(L),4),$=z[0],K=z[1],J=z[2],te=z[3],ie=No([$,K,J,te]),X=[ie.minX,ie.minY],ue=Nn(R[0]*R[1]);L.pos1=Ce($,X),L.pos2=Ce(K,X),L.pos3=Ce(J,X),L.pos4=Ce(te,X),L.left=C-L.left+X[0],L.top=I-L.top+X[1],L.origin=Ce(Ye(j,L.origin),X),L.beforeOrigin=Ce(Ye(j,L.beforeOrigin),X),L.originalBeforeOrigin=Ye(j,L.originalBeforeOrigin),L.transformOrigin=Ce(Ye(j,L.transformOrigin),X),u.style.transform="translate(".concat(-P-X[0],"px, ").concat(-F-X[1],"px)")+U,Xa(),this.updateState(V(V({},L),{posDelta:X,direction:ue,beforeDirection:ue}),i)},e.prototype.getRect=function(){return V(V({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var s,o,a=(o=(s=i.requestChildStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return ce(ce([],B(r),!1),B(a),!1)},[]);return n},e.prototype.getMoveables=function(){return ce([],B(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,ce(ce([],B(this.props.ables),!1),[D_],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=si(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,s=r.dragTarget||this.areaElement,o=r.targets,a=this.differ.update(o),l=a.added,u=a.changed,c=a.removed,d=l.length||c.length;(d||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ma(this,!1),ma(this,!0),this.updateState({gestos:{}})),i!==s&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=xP(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=TP(this,"GroupControl")));var f=!Lm(n.container,r.container);f&&(n.container=r.container),(f||d||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||o.length&&!hP(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},e.prototype._updateObserver=function(){},e.defaultProps=V(V({},Za.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(Za),g5=function(t){Rc(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,s=i.cspNonce,o=i.cssStyled,a=i.persistData,l=i.targets||[],u=l.length,c=this.isUnmounted||!u,d=(r=a==null?void 0:a.children)!==null&&r!==void 0?r:[];return c&&!u&&d.length?l=d.map(function(){return null}):c||(d=[]),D.createElement(o,{cspNonce:s,ref:_o(this,"controlBox"),className:Te("control-box")},l.map(function(f,p){var v,m,E=(m=(v=i.individualGroupableProps)===null||v===void 0?void 0:v.call(i,f,p))!==null&&m!==void 0?m:{};return D.createElement(Za,V({key:"moveable"+p,ref:tA(n,"moveables",p)},i,E,{target:f,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:d[p]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Xa(!0),this.moveables.forEach(function(s){s.updateRect(n,r,i)}),Xa()},e.prototype.getRect=function(){return V(V({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var s=this.moveables.map(function(l){return l.request(n,V(V({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,a={request:function(l){return s.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return s.forEach(function(l){return l.requestEnd()}),this}};return o?a.request(r).requestEnd():a},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,s=or(this.moveables,function(o){var a=o.getTargets()[0],l=o.getControlBoxElement(),u=o.getDragElement();return!a||!u?!1:u===i||u.contains(i)||u!==a&&a===i||a.contains(i)||l===i||l.contains(i)});return s&&s.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return ce([],B(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(Za);function RP(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,ce([],B(e[r]),!1));return}rn(r)?n.push.apply(n,ce([],B(RP(r,e)),!1)):n.push(r)}}),n}function AP(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,ce([],B(e[r]),!1));return}rn(r)?n.push(AP(r,e)):n.push(r)}}),n}function PP(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?rn(n)&&rn(i)?PP(n,i):!0:!1})}var v5=function(t){Rc(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new pA,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(s){var o=s.css;o&&o.forEach(function(a){n[a]=!0})});var i=gl(n).join(`
`);this.defaultStyled=yA("div",Oz(f_,e6+i))},e.getTotalAbles=function(){return ce([mP,D_,IP,vP],B(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,s=i.ables,o=i.props,a=BB(i,["ables","props"]),l=B(this._updateRefs(!0),2),u=l[0],c=l[1],d=RP(u,c),f=d.length>1,p=r.getTotalAbles(),v=ce(ce([],B(p),!1),B(s||[]),!1),m=V(V(V({},a),o||{}),{ables:v,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=d;var E=null,y=this.moveable,_=a.persistData;if(_!=null&&_.children&&(f=!0),a.individualGroupable)return D.createElement(g5,V({key:"individual-group",ref:_o(this,"moveable")},m,{target:null,targets:d}));if(f){var S=AP(u,c);if(y&&!y.props.groupable&&!y.props.individualGroupable){var b=y.props.target;b&&d.indexOf(b)>-1&&(E=V({},y.state))}return D.createElement(p5,V({key:"group",ref:_o(this,"moveable")},m,(n=a.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:d,targetGroups:S,firstRenderState:E}))}else{var N=d[0];if(y&&(y.props.groupable||y.props.individualGroupable)){var R=y.moveables||[],x=or(R,function(w){return w.props.target===N});x&&(E=V({},x.state))}return D.createElement(Za,V({key:"single",ref:_o(this,"moveable")},m,{target:N,firstRenderState:E}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=b_(this.props.target||this.props.targets),s=typeof document<"u",o=PP(r,i),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Hi(c)){var d=a[c];d?l[c]=a[c]:s&&(o=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else rn(c)&&c.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),o=s.added,a=s.removed,l=o.length||a.length;l&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=B(this._updateRefs(),3),c=u[0],d=u[1],f=u[2];this.refTargets=c,this.selectorMap=d,f&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,UB([Mz(r6)],e.prototype,"moveable",void 0),e}(D.PureComponent),m5=function(t){Rc(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=f5,e}(v5);const xp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _l(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function N_(t){return"nodeType"in t}function Fn(t){var e,n;return t?_l(t)?t:N_(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function O_(t){const{Document:e}=Fn(t);return t instanceof e}function Dc(t){return _l(t)?!1:t instanceof Fn(t).HTMLElement}function kP(t){return t instanceof Fn(t).SVGElement}function wl(t){return t?_l(t)?t.document:N_(t)?O_(t)?t:Dc(t)||kP(t)?t.ownerDocument:document:document:document}const Bi=xp?D.useLayoutEffect:D.useEffect;function Tp(t){const e=D.useRef(t);return Bi(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function y5(){const t=D.useRef(null),e=D.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=D.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function nc(t,e){e===void 0&&(e=[t]);const n=D.useRef(t);return Bi(()=>{n.current!==t&&(n.current=t)},e),n}function Nc(t,e){const n=D.useRef();return D.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function gh(t){const e=Tp(t),n=D.useRef(null),r=D.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function vh(t){const e=D.useRef();return D.useEffect(()=>{e.current=t},[t]),e.current}let Bg={};function Cp(t,e){return D.useMemo(()=>{if(e)return e;const n=Bg[t]==null?0:Bg[t]+1;return Bg[t]=n,t+"-"+n},[t,e])}function DP(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const c=s[l];c!=null&&(s[l]=c+t*u)}return s},{...e})}}const ka=DP(1),mh=DP(-1);function _5(t){return"clientX"in t&&"clientY"in t}function M_(t){if(!t)return!1;const{KeyboardEvent:e}=Fn(t.target);return e&&t instanceof e}function w5(t){if(!t)return!1;const{TouchEvent:e}=Fn(t.target);return e&&t instanceof e}function yh(t){if(w5(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return _5(t)?{x:t.clientX,y:t.clientY}:null}const rc=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[rc.Translate.toString(t),rc.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),ux="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function E5(t){return t.matches(ux)?t:t.querySelector(ux)}const S5={display:"none"};function x5(t){let{id:e,value:n}=t;return Nt.createElement("div",{id:e,style:S5},n)}function T5(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Nt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function C5(){const[t,e]=D.useState("");return{announce:D.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const NP=D.createContext(null);function I5(t){const e=D.useContext(NP);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function b5(){const[t]=D.useState(()=>new Set),e=D.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[D.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const R5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},A5={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function P5(t){let{announcements:e=A5,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=R5}=t;const{announce:s,announcement:o}=C5(),a=Cp("DndLiveRegion"),[l,u]=D.useState(!1);if(D.useEffect(()=>{u(!0)},[]),I5(D.useMemo(()=>({onDragStart(d){let{active:f}=d;s(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:p}=d;e.onDragMove&&s(e.onDragMove({active:f,over:p}))},onDragOver(d){let{active:f,over:p}=d;s(e.onDragOver({active:f,over:p}))},onDragEnd(d){let{active:f,over:p}=d;s(e.onDragEnd({active:f,over:p}))},onDragCancel(d){let{active:f,over:p}=d;s(e.onDragCancel({active:f,over:p}))}}),[s,e])),!l)return null;const c=Nt.createElement(Nt.Fragment,null,Nt.createElement(x5,{id:r,value:i.draggable}),Nt.createElement(T5,{id:a,announcement:o}));return n?fa.createPortal(c,n):c}var Wt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Wt||(Wt={}));function _h(){}const $r=Object.freeze({x:0,y:0});function k5(t,e){const n=yh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function D5(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function N5(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function O5(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,c=o*a,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const M5=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=O5(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(D5)};function L5(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function OP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:$r}function j5(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const V5=j5(1);function MP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function F5(t,e,n){const r=MP(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const z5={ignoreTransform:!1};function Oc(t,e){e===void 0&&(e=z5);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=Fn(t).getComputedStyle(t);u&&(n=F5(n,u,c))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function cx(t){return Oc(t,{ignoreTransform:!0})}function B5(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function U5(t,e){return e===void 0&&(e=Fn(t).getComputedStyle(t)),e.position==="fixed"}function $5(t,e){e===void 0&&(e=Fn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function L_(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(O_(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Dc(i)||kP(i)||n.includes(i))return n;const s=Fn(t).getComputedStyle(i);return i!==t&&$5(i,s)&&n.push(i),U5(i,s)?n:r(i.parentNode)}return t?r(t):n}function LP(t){const[e]=L_(t,1);return e??null}function Ug(t){return!xp||!t?null:_l(t)?t:N_(t)?O_(t)||t===wl(t).scrollingElement?window:Dc(t)?t:null:null}function jP(t){return _l(t)?t.scrollX:t.scrollLeft}function VP(t){return _l(t)?t.scrollY:t.scrollTop}function Fm(t){return{x:jP(t),y:VP(t)}}var tn;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(tn||(tn={}));function FP(t){return!xp||!t?!1:t===document.scrollingElement}function zP(t){const e={x:0,y:0},n=FP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const G5={x:.2,y:.2};function H5(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=G5);const{isTop:u,isBottom:c,isLeft:d,isRight:f}=zP(t),p={x:0,y:0},v={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+m.height?(p.y=tn.Backward,v.y=r*Math.abs((e.top+m.height-s)/m.height)):!c&&l>=e.bottom-m.height&&(p.y=tn.Forward,v.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!f&&a>=e.right-m.width?(p.x=tn.Forward,v.x=r*Math.abs((e.right-m.width-a)/m.width)):!d&&o<=e.left+m.width&&(p.x=tn.Backward,v.x=r*Math.abs((e.left+m.width-o)/m.width)),{direction:p,speed:v}}function W5(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function BP(t){return t.reduce((e,n)=>ka(e,Fm(n)),$r)}function q5(t){return t.reduce((e,n)=>e+jP(n),0)}function Y5(t){return t.reduce((e,n)=>e+VP(n),0)}function UP(t,e){if(e===void 0&&(e=Oc),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);LP(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const K5=[["x",["left","right"],q5],["y",["top","bottom"],Y5]];class j_{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=L_(n),i=BP(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of K5)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Eu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function X5(t){const{EventTarget:e}=Fn(t);return t instanceof e?t:wl(t)}function $g(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var fr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(fr||(fr={}));function dx(t){t.preventDefault()}function Q5(t){t.stopPropagation()}var ut;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ut||(ut={}));const $P={start:[ut.Space,ut.Enter],cancel:[ut.Esc],end:[ut.Space,ut.Enter,ut.Tab]},J5=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case ut.Right:return{...n,x:n.x+25};case ut.Left:return{...n,x:n.x-25};case ut.Down:return{...n,y:n.y+25};case ut.Up:return{...n,y:n.y-25}}};class GP{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Eu(wl(n)),this.windowListeners=new Eu(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&UP(r),n($r)}handleKeyDown(e){if(M_(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=$P,coordinateGetter:o=J5,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:$r;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:n,context:r.current,currentCoordinates:c});if(d){const f=mh(d,c),p={x:0,y:0},{scrollableAncestors:v}=r.current;for(const m of v){const E=e.code,{isTop:y,isRight:_,isLeft:S,isBottom:b,maxScroll:N,minScroll:R}=zP(m),x=W5(m),w={x:Math.min(E===ut.Right?x.right-x.width/2:x.right,Math.max(E===ut.Right?x.left:x.left+x.width/2,d.x)),y:Math.min(E===ut.Down?x.bottom-x.height/2:x.bottom,Math.max(E===ut.Down?x.top:x.top+x.height/2,d.y))},C=E===ut.Right&&!_||E===ut.Left&&!S,I=E===ut.Down&&!b||E===ut.Up&&!y;if(C&&w.x!==d.x){const A=m.scrollLeft+f.x,O=E===ut.Right&&A<=N.x||E===ut.Left&&A>=R.x;if(O&&!f.y){m.scrollTo({left:A,behavior:a});return}O?p.x=m.scrollLeft-A:p.x=E===ut.Right?m.scrollLeft-N.x:m.scrollLeft-R.x,p.x&&m.scrollBy({left:-p.x,behavior:a});break}else if(I&&w.y!==d.y){const A=m.scrollTop+f.y,O=E===ut.Down&&A<=N.y||E===ut.Up&&A>=R.y;if(O&&!f.x){m.scrollTo({top:A,behavior:a});return}O?p.y=m.scrollTop-A:p.y=E===ut.Down?m.scrollTop-N.y:m.scrollTop-R.y,p.y&&m.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,ka(mh(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}GP.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=$P,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function fx(t){return!!(t&&"distance"in t)}function hx(t){return!!(t&&"delay"in t)}class V_{constructor(e,n,r){var i;r===void 0&&(r=X5(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=wl(o),this.documentListeners=new Eu(this.document),this.listeners=new Eu(r),this.windowListeners=new Eu(Fn(o)),this.initialCoordinates=(i=yh(s))!=null?i:$r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.DragStart,dx),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),this.windowListeners.add(fr.ContextMenu,dx),this.documentListeners.add(fr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(hx(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(fx(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(fr.Click,Q5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=yh(e))!=null?n:$r,u=mh(i,l);if(!r&&a){if(fx(a)){if(a.tolerance!=null&&$g(u,a.tolerance))return this.handleCancel();if($g(u,a.distance))return this.handleStart()}if(hx(a)&&$g(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===ut.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Z5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class HP extends V_{constructor(e){const{event:n}=e,r=wl(n.target);super(e,Z5,r)}}HP.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const e9={move:{name:"mousemove"},end:{name:"mouseup"}};var zm;(function(t){t[t.RightClick=2]="RightClick"})(zm||(zm={}));class t9 extends V_{constructor(e){super(e,e9,wl(e.event.target))}}t9.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===zm.RightClick?!1:(r==null||r({event:n}),!0)}}];const Gg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class n9 extends V_{constructor(e){super(e,Gg)}static setup(){return window.addEventListener(Gg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Gg.move.name,e)};function e(){}}}n9.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Su;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Su||(Su={}));var wh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(wh||(wh={}));function r9(t){let{acceleration:e,activator:n=Su.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=wh.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:f}=t;const p=s9({delta:d,disabled:!s}),[v,m]=y5(),E=D.useRef({x:0,y:0}),y=D.useRef({x:0,y:0}),_=D.useMemo(()=>{switch(n){case Su.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Su.DraggableRect:return i}},[n,i,l]),S=D.useRef(null),b=D.useCallback(()=>{const R=S.current;if(!R)return;const x=E.current.x*y.current.x,w=E.current.y*y.current.y;R.scrollBy(x,w)},[]),N=D.useMemo(()=>a===wh.TreeOrder?[...u].reverse():u,[a,u]);D.useEffect(()=>{if(!s||!u.length||!_){m();return}for(const R of N){if((r==null?void 0:r(R))===!1)continue;const x=u.indexOf(R),w=c[x];if(!w)continue;const{direction:C,speed:I}=H5(R,w,_,e,f);for(const A of["x","y"])p[A][C[A]]||(I[A]=0,C[A]=0);if(I.x>0||I.y>0){m(),S.current=R,v(b,o),E.current=I,y.current=C;return}}E.current={x:0,y:0},y.current={x:0,y:0},m()},[e,b,r,m,s,o,JSON.stringify(_),JSON.stringify(p),v,u,N,c,JSON.stringify(f)])}const i9={x:{[tn.Backward]:!1,[tn.Forward]:!1},y:{[tn.Backward]:!1,[tn.Forward]:!1}};function s9(t){let{delta:e,disabled:n}=t;const r=vh(e);return Nc(i=>{if(n||!r||!i)return i9;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[tn.Backward]:i.x[tn.Backward]||s.x===-1,[tn.Forward]:i.x[tn.Forward]||s.x===1},y:{[tn.Backward]:i.y[tn.Backward]||s.y===-1,[tn.Forward]:i.y[tn.Forward]||s.y===1}}},[n,e,r])}function o9(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Nc(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function a9(t,e){return D.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var ic;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ic||(ic={}));var Bm;(function(t){t.Optimized="optimized"})(Bm||(Bm={}));const px=new Map;function l9(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=D.useState(null),{frequency:a,measure:l,strategy:u}=i,c=D.useRef(t),d=E(),f=nc(d),p=D.useCallback(function(y){y===void 0&&(y=[]),!f.current&&o(_=>_===null?y:_.concat(y.filter(S=>!_.includes(S))))},[f]),v=D.useRef(null),m=Nc(y=>{if(d&&!n)return px;if(!y||y===px||c.current!==t||s!=null){const _=new Map;for(let S of t){if(!S)continue;if(s&&s.length>0&&!s.includes(S.id)&&S.rect.current){_.set(S.id,S.rect.current);continue}const b=S.node.current,N=b?new j_(l(b),b):null;S.rect.current=N,N&&_.set(S.id,N)}return _}return y},[t,s,n,d,l]);return D.useEffect(()=>{c.current=t},[t]),D.useEffect(()=>{d||p()},[n,d]),D.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),D.useEffect(()=>{d||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{p(),v.current=null},a))},[a,d,p,...r]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:s!=null};function E(){switch(u){case ic.Always:return!1;case ic.BeforeDragging:return n;default:return!n}}}function F_(t,e){return Nc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function u9(t,e){return F_(t,e)}function c9(t){let{callback:e,disabled:n}=t;const r=Tp(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return D.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Ip(t){let{callback:e,disabled:n}=t;const r=Tp(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return D.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function d9(t){return new j_(Oc(t),t)}function gx(t,e,n){e===void 0&&(e=d9);const[r,i]=D.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c})}const o=c9({callback(l){if(t)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=Ip({callback:s});return Bi(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function f9(t){const e=F_(t);return OP(t,e)}const vx=[];function h9(t){const e=D.useRef(t),n=Nc(r=>t?r&&r!==vx&&t&&e.current&&t.parentNode===e.current.parentNode?r:L_(t):vx,[t]);return D.useEffect(()=>{e.current=t},[t]),n}function p9(t){const[e,n]=D.useState(null),r=D.useRef(t),i=D.useCallback(s=>{const o=Ug(s.target);o&&n(a=>a?(a.set(o,Fm(o)),new Map(a)):null)},[]);return D.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=Ug(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,Fm(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=Ug(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),D.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>ka(s,o),$r):BP(t):$r,[t,e])}function mx(t,e){e===void 0&&(e=[]);const n=D.useRef(null);return D.useEffect(()=>{n.current=null},e),D.useEffect(()=>{const r=t!==$r;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?mh(t,n.current):$r}function g9(t){D.useEffect(()=>{if(!xp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function v9(t,e){return D.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function WP(t){return D.useMemo(()=>t?B5(t):null,[t])}const yx=[];function m9(t,e){e===void 0&&(e=Oc);const[n]=t,r=WP(n?Fn(n):null),[i,s]=D.useState(yx);function o(){s(()=>t.length?t.map(l=>FP(l)?r:new j_(e(l),l)):yx)}const a=Ip({callback:o});return Bi(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function qP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Dc(e)?e:t}function y9(t){let{measure:e}=t;const[n,r]=D.useState(null),i=D.useCallback(u=>{for(const{target:c}of u)if(Dc(c)){r(d=>{const f=e(c);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),s=Ip({callback:i}),o=D.useCallback(u=>{const c=qP(u);s==null||s.disconnect(),c&&(s==null||s.observe(c)),r(c?e(c):null)},[e,s]),[a,l]=gh(o);return D.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const _9=[{sensor:HP,options:{}},{sensor:GP,options:{}}],w9={current:{}},df={draggable:{measure:cx},droppable:{measure:cx,strategy:ic.WhileDragging,frequency:Bm.Optimized},dragOverlay:{measure:Oc}};class xu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const E9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new xu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:_h},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:df,measureDroppableContainers:_h,windowRect:null,measuringScheduled:!1},YP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:_h,draggableNodes:new Map,over:null,measureDroppableContainers:_h},Mc=D.createContext(YP),KP=D.createContext(E9);function S9(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new xu}}}function x9(t,e){switch(e.type){case Wt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Wt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Wt.DragEnd:case Wt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Wt.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new xu(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Wt.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new xu(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Wt.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new xu(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function T9(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=D.useContext(Mc),s=vh(r),o=vh(n==null?void 0:n.id);return D.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!M_(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=E5(c);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function XP(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function C9(t){return D.useMemo(()=>({draggable:{...df.draggable,...t==null?void 0:t.draggable},droppable:{...df.droppable,...t==null?void 0:t.droppable},dragOverlay:{...df.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function I9(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=D.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Bi(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const c=n(u),d=OP(c,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=LP(u);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const bp=D.createContext({...$r,scaleX:1,scaleY:1});var ts;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ts||(ts={}));const b9=D.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:c=_9,collisionDetection:d=M5,measuring:f,modifiers:p,...v}=e;const m=D.useReducer(x9,void 0,S9),[E,y]=m,[_,S]=b5(),[b,N]=D.useState(ts.Uninitialized),R=b===ts.Initialized,{draggable:{active:x,nodes:w,translate:C},droppable:{containers:I}}=E,A=x!=null?w.get(x):null,O=D.useRef({initial:null,translated:null}),P=D.useMemo(()=>{var ze;return x!=null?{id:x,data:(ze=A==null?void 0:A.data)!=null?ze:w9,rect:O}:null},[x,A]),F=D.useRef(null),[U,q]=D.useState(null),[H,L]=D.useState(null),j=nc(v,Object.values(v)),z=Cp("DndDescribedBy",o),$=D.useMemo(()=>I.getEnabled(),[I]),K=C9(f),{droppableRects:J,measureDroppableContainers:te,measuringScheduled:ie}=l9($,{dragging:R,dependencies:[C.x,C.y],config:K.droppable}),X=o9(w,x),ue=D.useMemo(()=>H?yh(H):null,[H]),me=Ze(),Se=u9(X,K.draggable.measure);I9({activeNode:x!=null?w.get(x):null,config:me.layoutShiftCompensation,initialRect:Se,measure:K.draggable.measure});const xe=gx(X,K.draggable.measure,Se),se=gx(X?X.parentElement:null),de=D.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=I.getNodeFor((n=de.current.over)==null?void 0:n.id),Y=y9({measure:K.dragOverlay.measure}),oe=(r=Y.nodeRef.current)!=null?r:X,he=R?(i=Y.rect)!=null?i:xe:null,be=!!(Y.nodeRef.current&&Y.rect),je=f9(be?null:xe),Ee=WP(oe?Fn(oe):null),ke=h9(R?Pe??X:null),et=m9(ke),ct=XP(p,{transform:{x:C.x-je.x,y:C.y-je.y,scaleX:1,scaleY:1},activatorEvent:H,active:P,activeNodeRect:xe,containerNodeRect:se,draggingNodeRect:he,over:de.current.over,overlayNodeRect:Y.rect,scrollableAncestors:ke,scrollableAncestorRects:et,windowRect:Ee}),at=ue?ka(ue,C):null,Oe=p9(ke),rt=mx(Oe),Je=mx(Oe,[xe]),Ue=ka(ct,rt),Z=he?V5(he,ct):null,G=P&&Z?d({active:P,collisionRect:Z,droppableRects:J,droppableContainers:$,pointerCoordinates:at}):null,ae=N5(G,"id"),[pe,_e]=D.useState(null),Ke=be?ct:ka(ct,Je),Lt=L5(Ke,(s=pe==null?void 0:pe.rect)!=null?s:null,xe),_t=D.useRef(null),cr=D.useCallback((ze,wt)=>{let{sensor:tt,options:Gt}=wt;if(F.current==null)return;const kt=w.get(F.current);if(!kt)return;const Qt=ze.nativeEvent,Jt=new tt({active:F.current,activeNode:kt,event:Qt,options:Gt,context:de,onAbort(We){if(!w.get(We))return;const{onDragAbort:pn}=j.current,Rn={id:We};pn==null||pn(Rn),_({type:"onDragAbort",event:Rn})},onPending(We,Ir,pn,Rn){if(!w.get(We))return;const{onDragPending:Ys}=j.current,An={id:We,constraint:Ir,initialCoordinates:pn,offset:Rn};Ys==null||Ys(An),_({type:"onDragPending",event:An})},onStart(We){const Ir=F.current;if(Ir==null)return;const pn=w.get(Ir);if(!pn)return;const{onDragStart:Rn}=j.current,qs={activatorEvent:Qt,active:{id:Ir,data:pn.data,rect:O}};fa.unstable_batchedUpdates(()=>{Rn==null||Rn(qs),N(ts.Initializing),y({type:Wt.DragStart,initialCoordinates:We,active:Ir}),_({type:"onDragStart",event:qs}),q(_t.current),L(Qt)})},onMove(We){y({type:Wt.DragMove,coordinates:We})},onEnd:Cr(Wt.DragEnd),onCancel:Cr(Wt.DragCancel)});_t.current=Jt;function Cr(We){return async function(){const{active:pn,collisions:Rn,over:qs,scrollAdjustedTranslate:Ys}=de.current;let An=null;if(pn&&Ys){const{cancelDrop:Ks}=j.current;An={activatorEvent:Qt,active:pn,collisions:Rn,delta:Ys,over:qs},We===Wt.DragEnd&&typeof Ks=="function"&&await Promise.resolve(Ks(An))&&(We=Wt.DragCancel)}F.current=null,fa.unstable_batchedUpdates(()=>{y({type:We}),N(ts.Uninitialized),_e(null),q(null),L(null),_t.current=null;const Ks=We===Wt.DragEnd?"onDragEnd":"onDragCancel";if(An){const El=j.current[Ks];El==null||El(An),_({type:Ks,event:An})}})}}},[w]),Wr=D.useCallback((ze,wt)=>(tt,Gt)=>{const kt=tt.nativeEvent,Qt=w.get(Gt);if(F.current!==null||!Qt||kt.dndKit||kt.defaultPrevented)return;const Jt={active:Qt};ze(tt,wt.options,Jt)===!0&&(kt.dndKit={capturedBy:wt.sensor},F.current=Gt,cr(tt,wt))},[w,cr]),Jn=a9(c,Wr);g9(c),Bi(()=>{xe&&b===ts.Initializing&&N(ts.Initialized)},[xe,b]),D.useEffect(()=>{const{onDragMove:ze}=j.current,{active:wt,activatorEvent:tt,collisions:Gt,over:kt}=de.current;if(!wt||!tt)return;const Qt={active:wt,activatorEvent:tt,collisions:Gt,delta:{x:Ue.x,y:Ue.y},over:kt};fa.unstable_batchedUpdates(()=>{ze==null||ze(Qt),_({type:"onDragMove",event:Qt})})},[Ue.x,Ue.y]),D.useEffect(()=>{const{active:ze,activatorEvent:wt,collisions:tt,droppableContainers:Gt,scrollAdjustedTranslate:kt}=de.current;if(!ze||F.current==null||!wt||!kt)return;const{onDragOver:Qt}=j.current,Jt=Gt.get(ae),Cr=Jt&&Jt.rect.current?{id:Jt.id,rect:Jt.rect.current,data:Jt.data,disabled:Jt.disabled}:null,We={active:ze,activatorEvent:wt,collisions:tt,delta:{x:kt.x,y:kt.y},over:Cr};fa.unstable_batchedUpdates(()=>{_e(Cr),Qt==null||Qt(We),_({type:"onDragOver",event:We})})},[ae]),Bi(()=>{de.current={activatorEvent:H,active:P,activeNode:X,collisionRect:Z,collisions:G,droppableRects:J,draggableNodes:w,draggingNode:oe,draggingNodeRect:he,droppableContainers:I,over:pe,scrollableAncestors:ke,scrollAdjustedTranslate:Ue},O.current={initial:he,translated:Z}},[P,X,G,Z,w,oe,he,J,I,pe,ke,Ue]),r9({...me,delta:C,draggingRect:Z,pointerCoordinates:at,scrollableAncestors:ke,scrollableAncestorRects:et});const Zn=D.useMemo(()=>({active:P,activeNode:X,activeNodeRect:xe,activatorEvent:H,collisions:G,containerNodeRect:se,dragOverlay:Y,draggableNodes:w,droppableContainers:I,droppableRects:J,over:pe,measureDroppableContainers:te,scrollableAncestors:ke,scrollableAncestorRects:et,measuringConfiguration:K,measuringScheduled:ie,windowRect:Ee}),[P,X,xe,H,G,se,Y,w,I,J,pe,te,ke,et,K,ie,Ee]),Fe=D.useMemo(()=>({activatorEvent:H,activators:Jn,active:P,activeNodeRect:xe,ariaDescribedById:{draggable:z},dispatch:y,draggableNodes:w,over:pe,measureDroppableContainers:te}),[H,Jn,P,xe,y,z,w,pe,te]);return Nt.createElement(NP.Provider,{value:S},Nt.createElement(Mc.Provider,{value:Fe},Nt.createElement(KP.Provider,{value:Zn},Nt.createElement(bp.Provider,{value:Lt},u)),Nt.createElement(T9,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Nt.createElement(P5,{...a,hiddenTextDescribedById:z}));function Ze(){const ze=(U==null?void 0:U.autoScrollEnabled)===!1,wt=typeof l=="object"?l.enabled===!1:l===!1,tt=R&&!ze&&!wt;return typeof l=="object"?{...l,enabled:tt}:{enabled:tt}}}),R9=D.createContext(null),_x="button",A9="Draggable";function P9(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Cp(A9),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:f}=D.useContext(Mc),{role:p=_x,roleDescription:v="draggable",tabIndex:m=0}=i??{},E=(l==null?void 0:l.id)===e,y=D.useContext(E?bp:R9),[_,S]=gh(),[b,N]=gh(),R=v9(o,e),x=nc(n);Bi(()=>(d.set(e,{id:e,key:s,node:_,activatorNode:b,data:x}),()=>{const C=d.get(e);C&&C.key===s&&d.delete(e)}),[d,e]);const w=D.useMemo(()=>({role:p,tabIndex:m,"aria-disabled":r,"aria-pressed":E&&p===_x?!0:void 0,"aria-roledescription":v,"aria-describedby":c.draggable}),[r,p,m,E,v,c.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:w,isDragging:E,listeners:r?void 0:R,node:_,over:f,setNodeRef:S,setActivatorNodeRef:N,transform:y}}function k9(){return D.useContext(KP)}const D9="Droppable",N9={timeout:25};function O9(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Cp(D9),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=D.useContext(Mc),c=D.useRef({disabled:n}),d=D.useRef(!1),f=D.useRef(null),p=D.useRef(null),{disabled:v,updateMeasurementsFor:m,timeout:E}={...N9,...i},y=nc(m??r),_=D.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),p.current=null},E)},[E]),S=Ip({callback:_,disabled:v||!o}),b=D.useCallback((w,C)=>{S&&(C&&(S.unobserve(C),d.current=!1),w&&S.observe(w))},[S]),[N,R]=gh(b),x=nc(e);return D.useEffect(()=>{!S||!N.current||(S.disconnect(),d.current=!1,S.observe(N.current))},[N,S]),D.useEffect(()=>(a({type:Wt.RegisterDroppable,element:{id:r,key:s,disabled:n,node:N,rect:f,data:x}}),()=>a({type:Wt.UnregisterDroppable,key:s,id:r})),[r]),D.useEffect(()=>{n!==c.current.disabled&&(a({type:Wt.SetDroppableDisabled,id:r,key:s,disabled:n}),c.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:N,over:l,setNodeRef:R}}function M9(t){let{animation:e,children:n}=t;const[r,i]=D.useState(null),[s,o]=D.useState(null),a=vh(n);return!n&&!r&&a&&i(a),Bi(()=>{if(!s)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,r,s]),Nt.createElement(Nt.Fragment,null,n,r?D.cloneElement(r,{ref:o}):null)}const L9={x:0,y:0,scaleX:1,scaleY:1};function j9(t){let{children:e}=t;return Nt.createElement(Mc.Provider,{value:YP},Nt.createElement(bp.Provider,{value:L9},e))}const V9={position:"fixed",touchAction:"none"},F9=t=>M_(t)?"transform 250ms ease":void 0,z9=D.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:u,transition:c=F9}=t;if(!a)return null;const d=i?u:{...u,scaleX:1,scaleY:1},f={...V9,width:a.width,height:a.height,top:a.top,left:a.left,transform:rc.Transform.toString(d),transformOrigin:i&&r?k5(r,a):void 0,transition:typeof c=="function"?c(r):c,...l};return Nt.createElement(n,{className:o,style:f,ref:e},s)}),B9=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,u]of Object.entries(i))n.node.style.setProperty(l,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},U9=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:rc.Transform.toString(e)},{transform:rc.Transform.toString(n)}]},$9={duration:250,easing:"ease",keyframes:U9,sideEffects:B9({styles:{active:{opacity:"0"}}})};function G9(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Tp((s,o)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const u=qP(o);if(!u)return;const{transform:c}=Fn(o).getComputedStyle(o),d=MP(c);if(!d)return;const f=typeof e=="function"?e:H9(e);return UP(l,i.draggable.measure),f({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function H9(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...$9,...t};return s=>{let{active:o,dragOverlay:a,transform:l,...u}=s;if(!e)return;const c={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},f={x:l.x-c.x,y:l.y-c.y,...d},p=i({...u,active:o,dragOverlay:a,transform:{initial:l,final:f}}),[v]=p,m=p[p.length-1];if(JSON.stringify(v)===JSON.stringify(m))return;const E=r==null?void 0:r({active:o,dragOverlay:a,...u}),y=a.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(_=>{y.onfinish=()=>{E==null||E(),_()}})}}let wx=0;function W9(t){return D.useMemo(()=>{if(t!=null)return wx++,wx},[t])}const q9=Nt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:u=999}=t;const{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:p,draggableNodes:v,droppableContainers:m,dragOverlay:E,over:y,measuringConfiguration:_,scrollableAncestors:S,scrollableAncestorRects:b,windowRect:N}=k9(),R=D.useContext(bp),x=W9(d==null?void 0:d.id),w=XP(o,{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:E.rect,over:y,overlayNodeRect:E.rect,scrollableAncestors:S,scrollableAncestorRects:b,transform:R,windowRect:N}),C=F_(f),I=G9({config:r,draggableNodes:v,droppableContainers:m,measuringConfiguration:_}),A=C?E.setRef:void 0;return Nt.createElement(j9,null,Nt.createElement(M9,{animation:I},d&&x?Nt.createElement(z9,{key:x,id:d.id,ref:A,as:a,activatorEvent:c,adjustScale:e,className:l,transition:s,rect:C,style:{zIndex:u,...i},transform:w},n):null))}),QP=144,Ld=t=>t*(QP/72),jd=t=>t*(72/QP),zl=(t=[0,0,0,0])=>[Ld(t[0]),Ld(t[1]),Ld(t[2]),Ld(t[3])],to=(t=[0,0,0,0])=>[jd(t[0]),jd(t[1]),jd(t[2]),jd(t[3])],Hg=(t,e=8)=>Math.round(t/e)*e,Y9=t=>{if(!Array.isArray(t)||t.length<4)return[0,0,100,20];const[e,n,r,i]=t.map(s=>Number(s)||0);return r<500&&i<200?[e,n,e+r,n+i]:[e,n,r,i]},K9=(t,e=1)=>{if(!(t!=null&&t.current))return{w:0,h:0};const n=t.current.getBoundingClientRect();return{w:n.width/e,h:n.height/e}},Wg=(t,e,n=1)=>{const{w:r,h:i}=K9(e,n),[s,o,a,l]=t;return[Math.max(0,Math.min(s,r)),Math.max(0,Math.min(o,i)),Math.max(0,Math.min(a,r)),Math.max(0,Math.min(l,i))]},Ex=(t,e=24,n=16)=>{let[r,i,s,o]=t;const a=s-r,l=o-i;if(a<e){const u=(r+s)/2;r=u-e/2,s=u+e/2}if(l<n){const u=(i+o)/2;i=u-n/2,o=u+n/2}return[r,i,s,o]},X9=(t,e,n,r=1,i=[100,30])=>{if(!(n!=null&&n.current))return[0,0,100,30];const s=n.current.getBoundingClientRect(),[o,a]=i,l=(t-s.left)/r,u=(e-s.top)/r,c=l-o/2,d=u-a/2,f=c+o,p=d+a;return[c,d,f,p]},Vd=hp("python"),Sx=t=>t.replace(/\s+/g,"_"),Bn={SAVED:"saved",SAVING:"saving",UNSAVED:"unsaved",ERROR:"error"};function Q9(){var Ue;const{user:t,loading:e,isAdmin:n}=bn(),r=WC(),i=r.app||r.appId,s=r.form||r.formId,o=Sx(i),a=Sx(s),[l,u]=D.useState({fields:[]}),[c,d]=D.useState(0),[f,p]=D.useState(1),[v,m]=D.useState(null),[E,y]=D.useState(null),[_,S]=D.useState(null),[b,N]=D.useState(""),[R,x]=D.useState("all"),[w,C]=D.useState(1),[I,A]=D.useState([]),[O,P]=D.useState(!1),[F,U]=D.useState("idle"),[q,H]=D.useState(0),[L,j]=D.useState(null),[z,$]=D.useState([]),[K,J]=D.useState(null),[te,ie]=D.useState(Bn.SAVED),[X,ue]=D.useState(null),me=D.useRef(null),Se=D.useRef(null),xe=D.useRef(null);if(e)return g.jsx("div",{className:"loading-container",children:g.jsx("div",{className:"loading-spinner"})});if(!t||!n)return g.jsxs("div",{className:"access-denied",children:[g.jsx("h1",{className:"denied-title",children:"Access Denied"}),g.jsx("p",{className:"denied-message",children:"Admin privileges required to access the Field Mapper."}),g.jsx(Uu,{to:"/dashboard",className:"return-button",children:" Return to Dashboard"})]});const se=Z=>Z.map((G,ae)=>{const pe=Y9(G.rect),_e=pe[2]-pe[0],Ke=pe[3]-pe[1];return{id:`ai_field_${ae+1}`,label:G.label||`Field ${ae+1}`,page:G.page||0,type:G.type||"text",rect:pe,fontSize:G.fontSize||11,align:G.align||"left",shrink:G.shrink!==!1,confidence:G.confidence||.5,aiReasoning:G.reasoning||"AI detected form field",originalRect:G.rect,width:_e,height:Ke}}),de=async Z=>{const G=Z.target.files[0];if(!G||!G.type.includes("pdf")){j("Please select a valid PDF file");return}P(!0),U("analyzing"),H(0),j(null);try{H(20);const ae=new FormData;ae.append("pdf",G);const pe=await fetch(qy.AI_ANALYZE_PDF(),{method:"POST",body:ae});if(!pe.ok){const _t=await pe.text();throw new Error(`Failed to upload PDF for analysis: ${pe.status} ${_t}`)}const _e=await pe.json();H(60),U("mapping");const Ke=se(_e.fields);A(Ke),H(80),U("reviewing");const Lt=Ke.filter(_t=>_t.confidence>.8);$(Lt.map(_t=>_t.id)),H(100)}catch(ae){j(ae.message),U("idle")}finally{P(!1)}},Pe=(Z,G)=>{$(G?ae=>[...ae,Z]:ae=>ae.filter(pe=>pe!==Z))},Y=()=>{if(z.length===0){j("Please select at least one field to apply");return}U("fields-ready"),j(null)},oe=D.useCallback(()=>{X&&clearTimeout(X),ie(Bn.UNSAVED);const Z=setTimeout(()=>{he()},2e3);ue(Z)},[X]);async function he(){if(te!==Bn.SAVING){ie(Bn.SAVING);try{const Z={...l,fields:(l.fields||[]).map(pe=>({...pe,rect:to(pe.rect)}))},G=new FormData;G.append("overlay_json",JSON.stringify(Z));const ae=await fetch(`${Vd}/api/apps/${o}/forms/${a}/template`,{method:"POST",body:G});if(!ae.ok)throw new Error(`Save failed: ${ae.status}`);ie(Bn.SAVED),X&&(clearTimeout(X),ue(null))}catch{ie(Bn.ERROR)}}}const be=Z=>{J(Z.active.id)},je=Z=>{const{active:G,over:ae}=Z;if(J(null),ae&&ae.id==="pdf-canvas"){const pe=G.id,_e=I.find(Ke=>Ke.id===pe);if(_e&&E){const Ke=Z.activatorEvent.clientX,Lt=Z.activatorEvent.clientY,_t=X9(Ke,Lt,Se,w,[_e.width,_e.height]),cr=Wg(_t,Se,w),Wr=Ex(cr,24,16),Jn=to(Wr).map(Fe=>Hg(Fe)),Zn={id:`field_${Date.now()}`,label:_e.label,page:c,type:_e.type,rect:Jn,fontSize:_e.fontSize||11,align:_e.align||"left",shrink:_e.shrink!==!1};u(Fe=>({...Fe,fields:[...Fe.fields,Zn]})),S(Zn.id),oe()}}},Ee=Z=>{u(G=>({...G,fields:G.fields.map(ae=>ae.id===Z.id?Z:ae)})),oe()},ke=Z=>{u(G=>({...G,fields:G.fields.filter(ae=>ae.id!==Z)})),_===Z&&S(null),oe()};D.useEffect(()=>{(async()=>{const G=await(await fetch(`${Vd}/api/apps/${o}/forms/${a}/template`)).json(),ae=Array.isArray(G==null?void 0:G.fields)?G.fields.map(pe=>({...pe,rect:zl(pe.rect)})):[];u({fields:ae}),ie(Bn.SAVED)})()},[o,a]),D.useEffect(()=>{const Z=ae=>new URLSearchParams(ae).toString();async function G(){const ae=await fetch(`${Vd}/${o}/forms/${a}/page-metrics?${Z({page:c,dpi:144})}`).then(_e=>_e.json());y(ae),p(ae.pages||1);const pe=await fetch(`${Vd}/${o}/forms/${a}/preview-page?${Z({page:c,dpi:144})}`).then(_e=>_e.blob());m(URL.createObjectURL(pe))}return G(),()=>m(null)},[o,a,c]),D.useEffect(()=>{const Z=G=>{(G.ctrlKey||G.metaKey)&&G.key==="s"&&(G.preventDefault(),he()),G.key==="Delete"&&_&&(G.preventDefault(),ke(_)),G.key==="Escape"&&S(null),G.key==="n"&&!G.ctrlKey&&!G.metaKey&&(G.preventDefault(),rt())};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[_]);const et=({field:Z})=>{const G=F==="fields-ready"&&z.includes(Z.id),{attributes:ae,listeners:pe,setNodeRef:_e,transform:Ke,isDragging:Lt}=P9({id:Z.id,disabled:!G}),_t=Ke?{transform:`translate3d(${Ke.x}px, ${Ke.y}px, 0)`,opacity:Lt?.5:1}:{};return g.jsxs("div",{ref:_e,style:_t,...pe,...ae,className:`field-item ${z.includes(Z.id)?"selected":""} ${G?"":"disabled"}`,children:[g.jsxs("div",{className:"field-header",children:[g.jsx("input",{type:"checkbox",checked:z.includes(Z.id),onChange:cr=>Pe(Z.id,cr.target.checked),className:"field-checkbox"}),g.jsx("span",{className:"field-name",children:Z.label}),g.jsxs("span",{className:`confidence-badge ${Z.confidence>.8?"high":Z.confidence>.6?"medium":"low"}`,children:[Math.round(Z.confidence*100),"%"]})]}),g.jsxs("div",{className:"field-details",children:[g.jsxs("div",{children:["Type: ",Z.type]}),g.jsxs("div",{children:["Size: ",Math.round(Z.width),"",Math.round(Z.height),"px"]})]})]})},ct=({children:Z})=>{const{setNodeRef:G}=O9({id:"pdf-canvas"});return g.jsx("div",{ref:G,className:"relative",children:Z})},at=({field:Z,isSelected:G,onUpdate:ae,onSelect:pe})=>{const _e=zl(Z.rect),[Ke,Lt,_t,cr]=_e,Wr=_t-Ke,Jn=cr-Lt,Zn=({target:Ze,transform:ze})=>{const wt=to([ze.x,ze.y,ze.x+Wr,ze.y+Jn]).map(kt=>Hg(kt)),tt=Wg(zl(wt),Se,w),Gt=to(tt);ae({...Z,rect:Gt})},Fe=({target:Ze,width:ze,height:wt,drag:tt})=>{const Gt=to([tt.x,tt.y,tt.x+ze,tt.y+wt]).map(Cr=>Hg(Cr)),kt=Wg(zl(Gt),Se,w),Qt=Ex(kt,24,16),Jt=to(Qt);ae({...Z,rect:Jt})};return g.jsxs(g.Fragment,{children:[g.jsx("div",{"data-field-id":Z.id,className:`field-box ${G?"selected":""}`,style:{position:"absolute",left:Ke,top:Lt,width:Wr,height:Jn,cursor:"move"},onClick:()=>pe(Z.id),children:g.jsxs("div",{className:"field-label",children:[g.jsx("div",{className:"field-type-indicator",children:Z.type}),Z.label||Z.id]})}),G&&g.jsx(m5,{target:document.querySelector(`[data-field-id="${Z.id}"]`),draggable:!0,resizable:!0,snappable:!0,snapGridWidth:8,snapGridHeight:8,bounds:Se.current,zoom:w,onDrag:Zn,onResize:Fe,renderDirections:["nw","n","ne","w","e","sw","s","se"],elementGuidelines:l.fields.filter(Ze=>Ze.id!==Z.id&&Ze.page===c).map(Ze=>{const ze=zl(Ze.rect);return{element:document.querySelector(`[data-field-id="${Ze.id}"]`),rect:{left:ze[0],top:ze[1],width:ze[2]-ze[0],height:ze[3]-ze[1]}}})})]})},Oe=l.fields.find(Z=>Z.id===_),rt=()=>{const Z={id:`field_${Date.now()}`,label:"New Field",page:c,type:"text",rect:to([50,50,200,75]),fontSize:11,align:"left",shrink:!0,required:!1,placeholder:"",validation:{minLength:0,maxLength:100,pattern:"",customMessage:""}};u(G=>({...G,fields:[...G.fields,Z]})),S(Z.id),oe()},Je=()=>{confirm("Delete all fields? This cannot be undone.")&&(u({fields:[]}),S(null),oe())};return g.jsxs(b9,{onDragStart:be,onDragEnd:je,children:[g.jsxs("div",{className:"mapper-container",children:[g.jsx("div",{className:"mapper-header",children:g.jsxs("div",{className:"header-content",children:[g.jsxs("div",{className:"header-left",children:[g.jsx("h1",{className:"header-title",children:"Field Mapper"}),g.jsxs("span",{className:"header-subtitle",children:[i,"/",s]}),g.jsxs("div",{className:"field-summary",children:[g.jsxs("span",{className:"total-fields",children:[l.fields.length," total fields"]}),g.jsxs("span",{className:"page-fields",children:[l.fields.filter(Z=>Z.page===c).length," on this page"]})]})]}),g.jsxs("div",{className:"header-right",children:[g.jsx("div",{className:`save-status ${te===Bn.SAVED?"saved":te===Bn.SAVING?"saving":te===Bn.UNSAVED?"unsaved":"error"}`,children:te===Bn.SAVED?" Saved":te===Bn.SAVING?" Saving...":te===Bn.UNSAVED?" Unsaved":" Error"}),g.jsx("button",{onClick:()=>he(),disabled:te===Bn.SAVING,className:"btn-primary",children:"Save Now"}),g.jsx(Uu,{to:"/admin",className:"btn-secondary",children:" Admin"})]})]})}),g.jsx("div",{className:"mapper-toolbar",children:g.jsxs("div",{className:"toolbar-content",children:[g.jsxs("div",{className:"page-navigation",children:[g.jsx("button",{disabled:c<=0,onClick:()=>d(Z=>Math.max(0,Z-1)),className:"btn-nav",children:" Prev"}),g.jsxs("span",{className:"page-info",children:["Page ",c+1," / ",f]}),g.jsx("button",{disabled:c>=f-1,onClick:()=>d(Z=>Math.min(f-1,Z+1)),className:"btn-nav",children:"Next "})]}),g.jsx("div",{className:"divider"}),g.jsxs("div",{className:"zoom-controls",children:[g.jsx("button",{onClick:()=>C(Math.max(.5,w-.1)),className:"btn-zoom",disabled:w<=.5,children:""}),g.jsxs("span",{className:"zoom-level",children:[Math.round(w*100),"%"]}),g.jsx("button",{onClick:()=>C(Math.min(3,w+.1)),className:"btn-zoom",disabled:w>=3,children:"+"})]}),g.jsx("div",{className:"divider"}),g.jsxs("div",{className:"action-buttons",children:[g.jsx("button",{onClick:rt,className:"btn-action btn-add",children:"+ Add Field"}),g.jsx("input",{ref:xe,type:"file",accept:".pdf",onChange:de,className:"hidden"}),g.jsx("button",{onClick:()=>{var Z;return(Z=xe.current)==null?void 0:Z.click()},disabled:O,className:"btn-action btn-ai",children:" AI Detect"}),g.jsx("button",{onClick:Je,className:"btn-action btn-clear",children:"Clear All"})]}),g.jsxs("div",{className:"field-counter",children:[l.fields.filter(Z=>Z.page===c).length," fields on this page"]})]})}),g.jsxs("div",{className:"mapper-content",children:[g.jsx("div",{className:"pdf-canvas-container",children:g.jsx(ct,{children:g.jsxs("div",{ref:Se,className:"pdf-canvas",style:{transform:`scale(${w})`,transformOrigin:"top left"},children:[v&&g.jsx("img",{ref:me,src:v,alt:`Page ${c+1}`,className:"pdf-image"}),l.fields.filter(Z=>Z.page===c).map(Z=>g.jsx(at,{field:Z,isSelected:_===Z.id,onUpdate:Ee,onSelect:S},Z.id))]})})}),g.jsx("div",{className:"mapper-sidebar",children:g.jsxs("div",{className:"sidebar-content",children:[g.jsxs("div",{className:"search-filter-section",children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Search Fields"}),g.jsx("input",{type:"text",value:b,onChange:Z=>N(Z.target.value),className:"form-input",placeholder:"Search field labels..."})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Filter by Type"}),g.jsxs("select",{value:R,onChange:Z=>x(Z.target.value),className:"form-select",children:[g.jsx("option",{value:"all",children:"All Types"}),g.jsx("option",{value:"text",children:"Text Inputs"}),g.jsx("option",{value:"checkbox",children:"Checkboxes"}),g.jsx("option",{value:"signature",children:"Signatures"}),g.jsx("option",{value:"select",children:"Dropdowns"}),g.jsx("option",{value:"date",children:"Date Pickers"})]})]})]}),O&&g.jsxs("div",{className:"ai-progress",children:[g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill",style:{width:`${q}%`}})}),g.jsxs("div",{className:"progress-text",children:[F==="analyzing"&&" AI analyzing PDF...",F==="mapping"&&" Mapping fields...",F==="reviewing"&&" Ready for review"]})]}),L&&g.jsxs("div",{className:"ai-error",children:[" ",L]}),(F==="reviewing"||F==="fields-ready")&&I.length>0&&g.jsxs("div",{className:"ai-field-tray",children:[g.jsxs("div",{className:"tray-header",children:[g.jsx("h3",{className:"tray-title",children:"AI Detected Fields"}),g.jsx("span",{className:"field-count",children:I.length})]}),F==="reviewing"&&g.jsxs("button",{onClick:Y,disabled:z.length===0,className:"apply-button",children:["Enable Dragging (",z.length," selected)"]}),g.jsx("div",{className:"field-list",children:I.map(Z=>g.jsx(et,{field:Z},Z.id))})]}),Oe&&g.jsxs("div",{className:"field-editor",children:[g.jsx("h3",{className:"editor-title",children:"Edit Field"}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Label"}),g.jsx("input",{value:Oe.label||"",onChange:Z=>Ee({...Oe,label:Z.target.value}),className:"form-input"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Type"}),g.jsxs("select",{value:Oe.type||"text",onChange:Z=>Ee({...Oe,type:Z.target.value}),className:"form-select",children:[g.jsx("option",{value:"text",children:"Text Input"}),g.jsx("option",{value:"textarea",children:"Text Area"}),g.jsx("option",{value:"checkbox",children:"Checkbox"}),g.jsx("option",{value:"radio",children:"Radio Button"}),g.jsx("option",{value:"select",children:"Dropdown"}),g.jsx("option",{value:"signature",children:"Signature"}),g.jsx("option",{value:"date",children:"Date Picker"}),g.jsx("option",{value:"number",children:"Number Input"}),g.jsx("option",{value:"email",children:"Email Input"}),g.jsx("option",{value:"phone",children:"Phone Input"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Font Size"}),g.jsx("input",{type:"number",min:"8",max:"72",value:Oe.fontSize||11,onChange:Z=>Ee({...Oe,fontSize:parseInt(Z.target.value)||11}),className:"form-input"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Alignment"}),g.jsxs("select",{value:Oe.align||"left",onChange:Z=>Ee({...Oe,align:Z.target.value}),className:"form-select",children:[g.jsx("option",{value:"left",children:"Left"}),g.jsx("option",{value:"center",children:"Center"}),g.jsx("option",{value:"right",children:"Right"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Required"}),g.jsx("input",{type:"checkbox",checked:Oe.required||!1,onChange:Z=>Ee({...Oe,required:Z.target.checked}),className:"form-checkbox"})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{className:"form-label",children:"Placeholder"}),g.jsx("input",{type:"text",value:Oe.placeholder||"",onChange:Z=>Ee({...Oe,placeholder:Z.target.value}),className:"form-input",placeholder:"Enter placeholder text..."})]}),g.jsx("button",{onClick:()=>ke(Oe.id),className:"delete-button",children:"Delete Field"})]}),g.jsxs("div",{className:"quick-stats",children:[g.jsxs("div",{className:"stat-item",children:[g.jsx("span",{className:"stat-label",children:"Total Fields:"}),g.jsx("span",{className:"stat-value",children:l.fields.length})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("span",{className:"stat-label",children:"This Page:"}),g.jsx("span",{className:"stat-value",children:l.fields.filter(Z=>Z.page===c).length})]}),g.jsxs("div",{className:"stat-item",children:[g.jsx("span",{className:"stat-label",children:"AI Detected:"}),g.jsx("span",{className:"stat-value",children:I.length})]})]}),g.jsxs("div",{className:"keyboard-shortcuts",children:[g.jsx("h4",{className:"shortcuts-title",children:"Keyboard Shortcuts"}),g.jsxs("div",{className:"shortcuts-list",children:[g.jsxs("div",{className:"shortcut-item",children:[g.jsx("span",{className:"shortcut-key",children:"Ctrl/Cmd + S"}),g.jsx("span",{className:"shortcut-desc",children:"Save"})]}),g.jsxs("div",{className:"shortcut-item",children:[g.jsx("span",{className:"shortcut-key",children:"Delete"}),g.jsx("span",{className:"shortcut-desc",children:"Delete Field"})]}),g.jsxs("div",{className:"shortcut-item",children:[g.jsx("span",{className:"shortcut-key",children:"Escape"}),g.jsx("span",{className:"shortcut-desc",children:"Deselect"})]}),g.jsxs("div",{className:"shortcut-item",children:[g.jsx("span",{className:"shortcut-key",children:"N"}),g.jsx("span",{className:"shortcut-desc",children:"New Field"})]})]})]})]})})]})]}),g.jsx(q9,{children:K?g.jsxs("div",{className:"drag-overlay",children:["Dragging: ",(Ue=I.find(Z=>Z.id===K))==null?void 0:Ue.label]}):null})]})}const qg=({children:t})=>{const{user:e,loading:n,isAdmin:r}=bn(),i=ci();return console.log("ProtectedAdminRoute:",{user:e,loading:n,isAdmin:r,location:i.pathname}),n?(console.log("ProtectedAdminRoute: Still loading..."),g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})):!e||!r?(console.log("ProtectedAdminRoute: Access denied, redirecting to dashboard",{user:e==null?void 0:e.email,isAdmin:r}),g.jsx(KC,{to:"/dashboard",state:{from:i},replace:!0})):(console.log("ProtectedAdminRoute: Access granted, rendering admin content"),t)};function J9(){return g.jsxs(D2,{children:[g.jsx(Yo,{path:"/dashboard/*",element:g.jsx(Iz,{})}),g.jsx(Yo,{path:"/admin",element:g.jsx(qg,{children:g.jsx(bz,{})})}),g.jsx(Yo,{path:"/admin/mapper/:appId/:formId",element:g.jsx(qg,{children:g.jsx(Q9,{})})}),g.jsx(Yo,{path:"/admin/interview/:appId/:formId",element:g.jsx(qg,{children:g.jsx(xz,{})})}),g.jsx(Yo,{path:"*",element:g.jsx(KC,{to:"/dashboard",replace:!0})})]})}const Ji={ANIMATING:"animating",SHOWN:"shown",HIDING:"hiding",HIDDEN:"hidden"},vi="fs-loader";function Z9({children:t}){const e=Fh(),n=cI(),[r,i]=D.useState(!1),[s,o]=D.useState(!1),[a,l]=D.useState(!1),[u,c]=D.useState(null),[d,f]=D.useState("spinner-hidden"),[p,v]=D.useState("loader-content-info-hidden"),[m,E]=D.useState(Ji.ANIMATING),y=(u==null?void 0:u.preloader.title)||"",_=(u==null?void 0:u.preloader.subtitle)||"";D.useEffect(()=>{const x=e.resolvePath("/data/settings.json");fetch(x).then(w=>w.json()).then(w=>{c(w)})},[]),D.useEffect(()=>{if(!u)return;const x=u.preloader.enabled;if(i(x),!x){R();return}u&&a&&s&&S()},[a,s,u]);const S=()=>{n.clearAllWithTag(vi),i(!0),n.schedule(()=>{f("")},100,vi),n.schedule(()=>{v("")},500,vi),n.schedule(()=>{E(Ji.SHOWN),e.addClassToBody("body-with-image")},900,vi),n.schedule(()=>{b()},2500,vi)},b=()=>{let x=0;n.interval(()=>{if(x+=.2,x>=5){N();return}if(document.querySelectorAll("img").length<=2)return;e.didLoadAllImages()&&N()},200,vi)},N=()=>{n.clearAllWithTag(vi),E(Ji.HIDING),n.schedule(()=>{E(Ji.HIDDEN),i(!1)},400,vi)},R=()=>{e.addClassToBody("body-with-image"),n.clearAllWithTag(vi),E(Ji.HIDDEN),i(!1)};return console.log("Preloader loaded"),g.jsxs(g.Fragment,{children:[r&&g.jsx("div",{className:`loader loader-${m===Ji.ANIMATING||m===Ji.SHOWN?"visible":"hidden"}`,children:g.jsxs("div",{className:"loader-content text-white",children:[g.jsx("img",{src:e.resolvePath("/images/svg/pacman.svg"),onLoad:()=>{o(!0)},className:`spinner ${d}`,alt:"loader"}),g.jsxs("div",{className:`loader-content-info ${p}`,children:[g.jsxs("div",{className:"title-wrapper",children:[g.jsx("img",{src:e.resolvePath("/images/svg/logo.svg"),onLoad:()=>{l(!0)},className:"logo me-3",alt:"logo"}),g.jsx("h5",{dangerouslySetInnerHTML:{__html:y}})]}),g.jsx("p",{className:"opacity-50 text-4 text-center",dangerouslySetInnerHTML:{__html:_}})]})]})}),m!==Ji.ANIMATING&&g.jsx(g.Fragment,{children:t})]})}jC(document.getElementById("root")).render(g.jsx(D.StrictMode,{children:g.jsx(CO,{children:g.jsx(bO,{children:g.jsx(AO,{children:g.jsx(tO,{children:g.jsx(G3,{children:g.jsx(H3,{children:g.jsx(Z9,{children:g.jsx(J9,{})})})})})})})})}));
