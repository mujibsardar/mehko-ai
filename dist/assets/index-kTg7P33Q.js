(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Tk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ax={exports:{}},xh={},Px={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ac=Symbol.for("react.element"),Ck=Symbol.for("react.portal"),Ik=Symbol.for("react.fragment"),bk=Symbol.for("react.strict_mode"),Rk=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),kk=Symbol.for("react.forward_ref"),Dk=Symbol.for("react.suspense"),Nk=Symbol.for("react.memo"),Ok=Symbol.for("react.lazy"),Aw=Symbol.iterator;function Mk(t){return t===null||typeof t!="object"?null:(t=Aw&&t[Aw]||t["@@iterator"],typeof t=="function"?t:null)}var kx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dx=Object.assign,Nx={};function nl(t,e,n){this.props=t,this.context=e,this.refs=Nx,this.updater=n||kx}nl.prototype.isReactComponent={};nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ox(){}Ox.prototype=nl.prototype;function Ym(t,e,n){this.props=t,this.context=e,this.refs=Nx,this.updater=n||kx}var Km=Ym.prototype=new Ox;Km.constructor=Ym;Dx(Km,nl.prototype);Km.isPureReactComponent=!0;var Pw=Array.isArray,Mx=Object.prototype.hasOwnProperty,Xm={current:null},jx={key:!0,ref:!0,__self:!0,__source:!0};function Lx(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Mx.call(e,r)&&!jx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ac,type:t,key:s,ref:o,props:i,_owner:Xm.current}}function jk(t,e){return{$$typeof:ac,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ac}function Lk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kw=/\/+/g;function Hp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lk(""+t.key):e.toString(36)}function Bd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ac:case Ck:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Hp(o,0):r,Pw(i)?(n="",t!=null&&(n=t.replace(kw,"$&/")+"/"),Bd(i,e,n,"",function(u){return u})):i!=null&&(Qm(i)&&(i=jk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Pw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Hp(s,a);o+=Bd(s,e,n,l,i)}else if(l=Mk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Hp(s,a++),o+=Bd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(t,e,n){if(t==null)return t;var r=[],i=0;return Bd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Vk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},Ud={transition:null},Fk={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:Xm};function Vx(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!Qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Be.Component=nl;Be.Fragment=Ik;Be.Profiler=Rk;Be.PureComponent=Ym;Be.StrictMode=bk;Be.Suspense=Dk;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fk;Be.act=Vx;Be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Mx.call(e,l)&&!jx.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ac,type:t.type,key:i,ref:s,props:r,_owner:o}};Be.createContext=function(t){return t={$$typeof:Pk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ak,_context:t},t.Consumer=t};Be.createElement=Lx;Be.createFactory=function(t){var e=Lx.bind(null,t);return e.type=t,e};Be.createRef=function(){return{current:null}};Be.forwardRef=function(t){return{$$typeof:kk,render:t}};Be.isValidElement=Qm;Be.lazy=function(t){return{$$typeof:Ok,_payload:{_status:-1,_result:t},_init:Vk}};Be.memo=function(t,e){return{$$typeof:Nk,type:t,compare:e===void 0?null:e}};Be.startTransition=function(t){var e=Ud.transition;Ud.transition={};try{t()}finally{Ud.transition=e}};Be.unstable_act=Vx;Be.useCallback=function(t,e){return Ln.current.useCallback(t,e)};Be.useContext=function(t){return Ln.current.useContext(t)};Be.useDebugValue=function(){};Be.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Be.useEffect=function(t,e){return Ln.current.useEffect(t,e)};Be.useId=function(){return Ln.current.useId()};Be.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};Be.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};Be.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};Be.useMemo=function(t,e){return Ln.current.useMemo(t,e)};Be.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};Be.useRef=function(t){return Ln.current.useRef(t)};Be.useState=function(t){return Ln.current.useState(t)};Be.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};Be.useTransition=function(){return Ln.current.useTransition()};Be.version="18.3.1";Px.exports=Be;var D=Px.exports;const Nt=Tk(D);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=D,Bk=Symbol.for("react.element"),Uk=Symbol.for("react.fragment"),$k=Object.prototype.hasOwnProperty,Gk=zk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hk={key:!0,ref:!0,__self:!0,__source:!0};function Fx(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$k.call(e,r)&&!Hk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bk,type:t,key:s,ref:o,props:i,_owner:Gk.current}}xh.Fragment=Uk;xh.jsx=Fx;xh.jsxs=Fx;Ax.exports=xh;var p=Ax.exports,zx={exports:{}},lr={},Bx={exports:{}},Ux={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,L){var B=j.length;j.push(L);e:for(;0<B;){var $=B-1>>>1,K=j[$];if(0<i(K,L))j[$]=L,j[B]=K,B=$;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var L=j[0],B=j.pop();if(B!==L){j[0]=B;e:for(var $=0,K=j.length,ee=K>>>1;$<ee;){var Q=2*($+1)-1,ie=j[Q],te=Q+1,le=j[te];if(0>i(ie,B))te<K&&0>i(le,ie)?(j[$]=le,j[te]=B,$=te):(j[$]=ie,j[Q]=B,$=Q);else if(te<K&&0>i(le,B))j[$]=le,j[te]=B,$=te;else break e}}return L}function i(j,L){var B=j.sortIndex-L.sortIndex;return B!==0?B:j.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,g=!1,v=!1,m=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(j){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=j)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(u)}}function I(j){if(m=!1,E(j),!v)if(n(l)!==null)v=!0,Y(N);else{var L=n(u);L!==null&&H(I,L.startTime-j)}}function N(j,L){v=!1,m&&(m=!1,_(w),w=-1),g=!0;var B=f;try{for(E(L),d=n(l);d!==null&&(!(d.expirationTime>L)||j&&!k());){var $=d.callback;if(typeof $=="function"){d.callback=null,f=d.priorityLevel;var K=$(d.expirationTime<=L);L=t.unstable_now(),typeof K=="function"?d.callback=K:d===n(l)&&r(l),E(L)}else r(l);d=n(l)}if(d!==null)var ee=!0;else{var Q=n(u);Q!==null&&H(I,Q.startTime-L),ee=!1}return ee}finally{d=null,f=B,g=!1}}var R=!1,x=null,w=-1,C=5,b=-1;function k(){return!(t.unstable_now()-b<C)}function O(){if(x!==null){var j=t.unstable_now();b=j;var L=!0;try{L=x(!0,j)}finally{L?A():(R=!1,x=null)}}else R=!1}var A;if(typeof y=="function")A=function(){y(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=O,A=function(){G.postMessage(null)}}else A=function(){S(O,0)};function Y(j){x=j,R||(R=!0,A())}function H(j,L){w=S(function(){j(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Y(N))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var B=f;f=L;try{return j()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,L){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=f;f=j;try{return L()}finally{f=B}},t.unstable_scheduleCallback=function(j,L,B){var $=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?$+B:$):B=$,j){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=B+K,j={id:c++,callback:L,priorityLevel:j,startTime:B,expirationTime:K,sortIndex:-1},B>$?(j.sortIndex=B,e(u,j),n(l)===null&&j===n(u)&&(m?(_(w),w=-1):m=!0,H(I,B-$))):(j.sortIndex=K,e(l,j),v||g||(v=!0,Y(N))),j},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(j){var L=f;return function(){var B=f;f=L;try{return j.apply(this,arguments)}finally{f=B}}}})(Ux);Bx.exports=Ux;var Wk=Bx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=D,sr=Wk;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $x=new Set,bu={};function Mo(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(bu[t]=e,t=0;t<e.length;t++)$x.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zg=Object.prototype.hasOwnProperty,Yk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dw={},Nw={};function Kk(t){return Zg.call(Nw,t)?!0:Zg.call(Dw,t)?!1:Yk.test(t)?Nw[t]=!0:(Dw[t]=!0,!1)}function Xk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qk(t,e,n,r){if(e===null||typeof e>"u"||Xk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jm,Zm);fn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jm,Zm);fn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jm,Zm);fn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function e0(t,e,n,r){var i=fn.hasOwnProperty(e)?fn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qk(e,n,i,r)&&(n=null),r||i===null?Kk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bi=qk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),ta=Symbol.for("react.portal"),na=Symbol.for("react.fragment"),t0=Symbol.for("react.strict_mode"),ev=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Hx=Symbol.for("react.context"),n0=Symbol.for("react.forward_ref"),tv=Symbol.for("react.suspense"),nv=Symbol.for("react.suspense_list"),r0=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),Wx=Symbol.for("react.offscreen"),Ow=Symbol.iterator;function Nl(t){return t===null||typeof t!="object"?null:(t=Ow&&t[Ow]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,Wp;function Gl(t){if(Wp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wp=e&&e[1]||""}return`
`+Wp+t}var qp=!1;function Yp(t,e){if(!t||qp)return"";qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gl(t):""}function Jk(t){switch(t.tag){case 5:return Gl(t.type);case 16:return Gl("Lazy");case 13:return Gl("Suspense");case 19:return Gl("SuspenseList");case 0:case 2:case 15:return t=Yp(t.type,!1),t;case 11:return t=Yp(t.type.render,!1),t;case 1:return t=Yp(t.type,!0),t;default:return""}}function rv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case na:return"Fragment";case ta:return"Portal";case ev:return"Profiler";case t0:return"StrictMode";case tv:return"Suspense";case nv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hx:return(t.displayName||"Context")+".Consumer";case Gx:return(t._context.displayName||"Context")+".Provider";case n0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case r0:return e=t.displayName||null,e!==null?e:rv(t.type)||"Memo";case Zi:e=t._payload,t=t._init;try{return rv(t(e))}catch{}}return null}function Zk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rv(e);case 8:return e===t0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eD(t){var e=qx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zc(t){t._valueTracker||(t._valueTracker=eD(t))}function Yx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function iv(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Kx(t,e){e=e.checked,e!=null&&e0(t,"checked",e,!1)}function sv(t,e){Kx(t,e);var n=bs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ov(t,e.type,n):e.hasOwnProperty("defaultValue")&&ov(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ov(t,e,n){(e!=="number"||pf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hl=Array.isArray;function wa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function av(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Hl(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function Xx(t,e){var n=bs(e.value),r=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,Jx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ru(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tD=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(t){tD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ru[e]=ru[t]})});function Zx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ru.hasOwnProperty(t)&&ru[t]?(""+e).trim():e+"px"}function eT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Zx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nD=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uv(t,e){if(e){if(nD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function cv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dv=null;function i0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fv=null,Ea=null,Sa=null;function Fw(t){if(t=cc(t)){if(typeof fv!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Rh(e),fv(t.stateNode,t.type,e))}}function tT(t){Ea?Sa?Sa.push(t):Sa=[t]:Ea=t}function nT(){if(Ea){var t=Ea,e=Sa;if(Sa=Ea=null,Fw(t),e)for(t=0;t<e.length;t++)Fw(e[t])}}function rT(t,e){return t(e)}function iT(){}var Kp=!1;function sT(t,e,n){if(Kp)return t(e,n);Kp=!0;try{return rT(t,e,n)}finally{Kp=!1,(Ea!==null||Sa!==null)&&(iT(),nT())}}function Au(t,e){var n=t.stateNode;if(n===null)return null;var r=Rh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var hv=!1;if(Ri)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){hv=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{hv=!1}function rD(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var iu=!1,gf=null,vf=!1,pv=null,iD={onError:function(t){iu=!0,gf=t}};function sD(t,e,n,r,i,s,o,a,l){iu=!1,gf=null,rD.apply(iD,arguments)}function oD(t,e,n,r,i,s,o,a,l){if(sD.apply(this,arguments),iu){if(iu){var u=gf;iu=!1,gf=null}else throw Error(oe(198));vf||(vf=!0,pv=u)}}function jo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function oT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zw(t){if(jo(t)!==t)throw Error(oe(188))}function aD(t){var e=t.alternate;if(!e){if(e=jo(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zw(i),t;if(s===r)return zw(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function aT(t){return t=aD(t),t!==null?lT(t):null}function lT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lT(t);if(e!==null)return e;t=t.sibling}return null}var uT=sr.unstable_scheduleCallback,Bw=sr.unstable_cancelCallback,lD=sr.unstable_shouldYield,uD=sr.unstable_requestPaint,Ot=sr.unstable_now,cD=sr.unstable_getCurrentPriorityLevel,s0=sr.unstable_ImmediatePriority,cT=sr.unstable_UserBlockingPriority,mf=sr.unstable_NormalPriority,dD=sr.unstable_LowPriority,dT=sr.unstable_IdlePriority,Th=null,Jr=null;function fD(t){if(Jr&&typeof Jr.onCommitFiberRoot=="function")try{Jr.onCommitFiberRoot(Th,t,void 0,(t.current.flags&128)===128)}catch{}}var Or=Math.clz32?Math.clz32:gD,hD=Math.log,pD=Math.LN2;function gD(t){return t>>>=0,t===0?32:31-(hD(t)/pD|0)|0}var td=64,nd=4194304;function Wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Wl(a):(s&=o,s!==0&&(r=Wl(s)))}else o=n&~i,o!==0?r=Wl(o):s!==0&&(r=Wl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Or(e),i=1<<n,r|=t[n],e&=~i;return r}function vD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Or(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=vD(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function gv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fT(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function Xp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Or(e),t[e]=n}function yD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Or(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function o0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Or(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rt=0;function hT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pT,a0,gT,vT,mT,vv=!1,rd=[],hs=null,ps=null,gs=null,Pu=new Map,ku=new Map,ns=[],_D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uw(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function Ml(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cc(e),e!==null&&a0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wD(t,e,n,r,i){switch(e){case"focusin":return hs=Ml(hs,t,e,n,r,i),!0;case"dragenter":return ps=Ml(ps,t,e,n,r,i),!0;case"mouseover":return gs=Ml(gs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pu.set(s,Ml(Pu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ku.set(s,Ml(ku.get(s)||null,t,e,n,r,i)),!0}return!1}function yT(t){var e=co(t.target);if(e!==null){var n=jo(e);if(n!==null){if(e=n.tag,e===13){if(e=oT(n),e!==null){t.blockedOn=e,mT(t.priority,function(){gT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dv=r,n.target.dispatchEvent(r),dv=null}else return e=cc(n),e!==null&&a0(e),t.blockedOn=n,!1;e.shift()}return!0}function $w(t,e,n){$d(t)&&n.delete(e)}function ED(){vv=!1,hs!==null&&$d(hs)&&(hs=null),ps!==null&&$d(ps)&&(ps=null),gs!==null&&$d(gs)&&(gs=null),Pu.forEach($w),ku.forEach($w)}function jl(t,e){t.blockedOn===e&&(t.blockedOn=null,vv||(vv=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,ED)))}function Du(t){function e(i){return jl(i,t)}if(0<rd.length){jl(rd[0],t);for(var n=1;n<rd.length;n++){var r=rd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&jl(hs,t),ps!==null&&jl(ps,t),gs!==null&&jl(gs,t),Pu.forEach(e),ku.forEach(e),n=0;n<ns.length;n++)r=ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ns.length&&(n=ns[0],n.blockedOn===null);)yT(n),n.blockedOn===null&&ns.shift()}var xa=Bi.ReactCurrentBatchConfig,_f=!0;function SD(t,e,n,r){var i=rt,s=xa.transition;xa.transition=null;try{rt=1,l0(t,e,n,r)}finally{rt=i,xa.transition=s}}function xD(t,e,n,r){var i=rt,s=xa.transition;xa.transition=null;try{rt=4,l0(t,e,n,r)}finally{rt=i,xa.transition=s}}function l0(t,e,n,r){if(_f){var i=mv(t,e,n,r);if(i===null)og(t,e,r,wf,n),Uw(t,r);else if(wD(i,t,e,n,r))r.stopPropagation();else if(Uw(t,r),e&4&&-1<_D.indexOf(t)){for(;i!==null;){var s=cc(i);if(s!==null&&pT(s),s=mv(t,e,n,r),s===null&&og(t,e,r,wf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else og(t,e,r,null,n)}}var wf=null;function mv(t,e,n,r){if(wf=null,t=i0(r),t=co(t),t!==null)if(e=jo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=oT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wf=t,null}function _T(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cD()){case s0:return 1;case cT:return 4;case mf:case dD:return 16;case dT:return 536870912;default:return 16}default:return 16}}var ls=null,u0=null,Gd=null;function wT(){if(Gd)return Gd;var t,e=u0,n=e.length,r,i="value"in ls?ls.value:ls.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gd=i.slice(t,1<r?1-r:void 0)}function Hd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function id(){return!0}function Gw(){return!1}function ur(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?id:Gw,this.isPropagationStopped=Gw,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=id)},persist:function(){},isPersistent:id}),e}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c0=ur(rl),uc=It({},rl,{view:0,detail:0}),TD=ur(uc),Qp,Jp,Ll,Ch=It({},uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ll&&(Ll&&t.type==="mousemove"?(Qp=t.screenX-Ll.screenX,Jp=t.screenY-Ll.screenY):Jp=Qp=0,Ll=t),Qp)},movementY:function(t){return"movementY"in t?t.movementY:Jp}}),Hw=ur(Ch),CD=It({},Ch,{dataTransfer:0}),ID=ur(CD),bD=It({},uc,{relatedTarget:0}),Zp=ur(bD),RD=It({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),AD=ur(RD),PD=It({},rl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kD=ur(PD),DD=It({},rl,{data:0}),Ww=ur(DD),ND={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MD[t])?!!e[t]:!1}function d0(){return jD}var LD=It({},uc,{key:function(t){if(t.key){var e=ND[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d0,charCode:function(t){return t.type==="keypress"?Hd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VD=ur(LD),FD=It({},Ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qw=ur(FD),zD=It({},uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d0}),BD=ur(zD),UD=It({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),$D=ur(UD),GD=It({},Ch,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HD=ur(GD),WD=[9,13,27,32],f0=Ri&&"CompositionEvent"in window,su=null;Ri&&"documentMode"in document&&(su=document.documentMode);var qD=Ri&&"TextEvent"in window&&!su,ET=Ri&&(!f0||su&&8<su&&11>=su),Yw=" ",Kw=!1;function ST(t,e){switch(t){case"keyup":return WD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ra=!1;function YD(t,e){switch(t){case"compositionend":return xT(e);case"keypress":return e.which!==32?null:(Kw=!0,Yw);case"textInput":return t=e.data,t===Yw&&Kw?null:t;default:return null}}function KD(t,e){if(ra)return t==="compositionend"||!f0&&ST(t,e)?(t=wT(),Gd=u0=ls=null,ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ET&&e.locale!=="ko"?null:e.data;default:return null}}var XD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XD[t.type]:e==="textarea"}function TT(t,e,n,r){tT(r),e=Ef(e,"onChange"),0<e.length&&(n=new c0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ou=null,Nu=null;function QD(t){MT(t,0)}function Ih(t){var e=oa(t);if(Yx(e))return t}function JD(t,e){if(t==="change")return e}var CT=!1;if(Ri){var eg;if(Ri){var tg="oninput"in document;if(!tg){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),tg=typeof Qw.oninput=="function"}eg=tg}else eg=!1;CT=eg&&(!document.documentMode||9<document.documentMode)}function Jw(){ou&&(ou.detachEvent("onpropertychange",IT),Nu=ou=null)}function IT(t){if(t.propertyName==="value"&&Ih(Nu)){var e=[];TT(e,Nu,t,i0(t)),sT(QD,e)}}function ZD(t,e,n){t==="focusin"?(Jw(),ou=e,Nu=n,ou.attachEvent("onpropertychange",IT)):t==="focusout"&&Jw()}function eN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ih(Nu)}function tN(t,e){if(t==="click")return Ih(e)}function nN(t,e){if(t==="input"||t==="change")return Ih(e)}function rN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Lr=typeof Object.is=="function"?Object.is:rN;function Ou(t,e){if(Lr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zg.call(e,i)||!Lr(t[i],e[i]))return!1}return!0}function Zw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e1(t,e){var n=Zw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zw(n)}}function bT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RT(){for(var t=window,e=pf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pf(t.document)}return e}function h0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iN(t){var e=RT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bT(n.ownerDocument.documentElement,n)){if(r!==null&&h0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=e1(n,s);var o=e1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sN=Ri&&"documentMode"in document&&11>=document.documentMode,ia=null,yv=null,au=null,_v=!1;function t1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_v||ia==null||ia!==pf(r)||(r=ia,"selectionStart"in r&&h0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&Ou(au,r)||(au=r,r=Ef(yv,"onSelect"),0<r.length&&(e=new c0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ia)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sa={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},ng={},AT={};Ri&&(AT=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function bh(t){if(ng[t])return ng[t];if(!sa[t])return t;var e=sa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AT)return ng[t]=e[n];return t}var PT=bh("animationend"),kT=bh("animationiteration"),DT=bh("animationstart"),NT=bh("transitionend"),OT=new Map,n1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){OT.set(t,e),Mo(e,[t])}for(var rg=0;rg<n1.length;rg++){var ig=n1[rg],oN=ig.toLowerCase(),aN=ig[0].toUpperCase()+ig.slice(1);zs(oN,"on"+aN)}zs(PT,"onAnimationEnd");zs(kT,"onAnimationIteration");zs(DT,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(NT,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function r1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oD(r,e,void 0,t),t.currentTarget=null}function MT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;r1(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;r1(i,a,u),s=l}}}if(vf)throw t=pv,vf=!1,pv=null,t}function gt(t,e){var n=e[Tv];n===void 0&&(n=e[Tv]=new Set);var r=t+"__bubble";n.has(r)||(jT(e,t,2,!1),n.add(r))}function sg(t,e,n){var r=0;e&&(r|=4),jT(n,t,r,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function Mu(t){if(!t[od]){t[od]=!0,$x.forEach(function(n){n!=="selectionchange"&&(lN.has(n)||sg(n,!1,t),sg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,sg("selectionchange",!1,e))}}function jT(t,e,n,r){switch(_T(e)){case 1:var i=SD;break;case 4:i=xD;break;default:i=l0}n=i.bind(null,e,n,t),i=void 0,!hv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function og(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=co(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}sT(function(){var u=s,c=i0(n),d=[];e:{var f=OT.get(t);if(f!==void 0){var g=c0,v=t;switch(t){case"keypress":if(Hd(n)===0)break e;case"keydown":case"keyup":g=VD;break;case"focusin":v="focus",g=Zp;break;case"focusout":v="blur",g=Zp;break;case"beforeblur":case"afterblur":g=Zp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=ID;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=BD;break;case PT:case kT:case DT:g=AD;break;case NT:g=$D;break;case"scroll":g=TD;break;case"wheel":g=HD;break;case"copy":case"cut":case"paste":g=kD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=qw}var m=(e&4)!==0,S=!m&&t==="scroll",_=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,E;y!==null;){E=y;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,_!==null&&(I=Au(y,_),I!=null&&m.push(ju(y,I,E)))),S)break;y=y.return}0<m.length&&(f=new g(f,v,null,n,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==dv&&(v=n.relatedTarget||n.fromElement)&&(co(v)||v[Ai]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?co(v):null,v!==null&&(S=jo(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(m=Hw,I="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=qw,I="onPointerLeave",_="onPointerEnter",y="pointer"),S=g==null?f:oa(g),E=v==null?f:oa(v),f=new m(I,y+"leave",g,n,c),f.target=S,f.relatedTarget=E,I=null,co(c)===u&&(m=new m(_,y+"enter",v,n,c),m.target=E,m.relatedTarget=S,I=m),S=I,g&&v)t:{for(m=g,_=v,y=0,E=m;E;E=Ho(E))y++;for(E=0,I=_;I;I=Ho(I))E++;for(;0<y-E;)m=Ho(m),y--;for(;0<E-y;)_=Ho(_),E--;for(;y--;){if(m===_||_!==null&&m===_.alternate)break t;m=Ho(m),_=Ho(_)}m=null}else m=null;g!==null&&i1(d,f,g,m,!1),v!==null&&S!==null&&i1(d,S,v,m,!0)}}e:{if(f=u?oa(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var N=JD;else if(Xw(f))if(CT)N=nN;else{N=eN;var R=ZD}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=tN);if(N&&(N=N(t,u))){TT(d,N,n,c);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&ov(f,"number",f.value)}switch(R=u?oa(u):window,t){case"focusin":(Xw(R)||R.contentEditable==="true")&&(ia=R,yv=u,au=null);break;case"focusout":au=yv=ia=null;break;case"mousedown":_v=!0;break;case"contextmenu":case"mouseup":case"dragend":_v=!1,t1(d,n,c);break;case"selectionchange":if(sN)break;case"keydown":case"keyup":t1(d,n,c)}var x;if(f0)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ra?ST(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(ET&&n.locale!=="ko"&&(ra||w!=="onCompositionStart"?w==="onCompositionEnd"&&ra&&(x=wT()):(ls=c,u0="value"in ls?ls.value:ls.textContent,ra=!0)),R=Ef(u,w),0<R.length&&(w=new Ww(w,t,null,n,c),d.push({event:w,listeners:R}),x?w.data=x:(x=xT(n),x!==null&&(w.data=x)))),(x=qD?YD(t,n):KD(t,n))&&(u=Ef(u,"onBeforeInput"),0<u.length&&(c=new Ww("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=x))}MT(d,e)})}function ju(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ef(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Au(t,n),s!=null&&r.unshift(ju(t,s,i)),s=Au(t,e),s!=null&&r.push(ju(t,s,i))),t=t.return}return r}function Ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Au(n,s),l!=null&&o.unshift(ju(n,l,a))):i||(l=Au(n,s),l!=null&&o.push(ju(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uN=/\r\n?/g,cN=/\u0000|\uFFFD/g;function s1(t){return(typeof t=="string"?t:""+t).replace(uN,`
`).replace(cN,"")}function ad(t,e,n){if(e=s1(e),s1(t)!==e&&n)throw Error(oe(425))}function Sf(){}var wv=null,Ev=null;function Sv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xv=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,fN=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(t){return o1.resolve(null).then(t).catch(hN)}:xv;function hN(t){setTimeout(function(){throw t})}function ag(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Du(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Du(e)}function vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var il=Math.random().toString(36).slice(2),Qr="__reactFiber$"+il,Lu="__reactProps$"+il,Ai="__reactContainer$"+il,Tv="__reactEvents$"+il,pN="__reactListeners$"+il,gN="__reactHandles$"+il;function co(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ai]||n[Qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a1(t);t!==null;){if(n=t[Qr])return n;t=a1(t)}return e}t=n,n=t.parentNode}return null}function cc(t){return t=t[Qr]||t[Ai],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Rh(t){return t[Lu]||null}var Cv=[],aa=-1;function Bs(t){return{current:t}}function yt(t){0>aa||(t.current=Cv[aa],Cv[aa]=null,aa--)}function ft(t,e){aa++,Cv[aa]=t.current,t.current=e}var Rs={},Tn=Bs(Rs),qn=Bs(!1),Eo=Rs;function Oa(t,e){var n=t.type.contextTypes;if(!n)return Rs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(t){return t=t.childContextTypes,t!=null}function xf(){yt(qn),yt(Tn)}function l1(t,e,n){if(Tn.current!==Rs)throw Error(oe(168));ft(Tn,e),ft(qn,n)}function LT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,Zk(t)||"Unknown",i));return It({},n,r)}function Tf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rs,Eo=Tn.current,ft(Tn,t),ft(qn,qn.current),!0}function u1(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=LT(t,e,Eo),r.__reactInternalMemoizedMergedChildContext=t,yt(qn),yt(Tn),ft(Tn,t)):yt(qn),ft(qn,n)}var mi=null,Ah=!1,lg=!1;function VT(t){mi===null?mi=[t]:mi.push(t)}function vN(t){Ah=!0,VT(t)}function Us(){if(!lg&&mi!==null){lg=!0;var t=0,e=rt;try{var n=mi;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}mi=null,Ah=!1}catch(i){throw mi!==null&&(mi=mi.slice(t+1)),uT(s0,Us),i}finally{rt=e,lg=!1}}return null}var la=[],ua=0,Cf=null,If=0,hr=[],pr=0,So=null,yi=1,_i="";function ro(t,e){la[ua++]=If,la[ua++]=Cf,Cf=t,If=e}function FT(t,e,n){hr[pr++]=yi,hr[pr++]=_i,hr[pr++]=So,So=t;var r=yi;t=_i;var i=32-Or(r)-1;r&=~(1<<i),n+=1;var s=32-Or(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,yi=1<<32-Or(e)+i|n<<i|r,_i=s+t}else yi=1<<s|n<<i|r,_i=t}function p0(t){t.return!==null&&(ro(t,1),FT(t,1,0))}function g0(t){for(;t===Cf;)Cf=la[--ua],la[ua]=null,If=la[--ua],la[ua]=null;for(;t===So;)So=hr[--pr],hr[pr]=null,_i=hr[--pr],hr[pr]=null,yi=hr[--pr],hr[pr]=null}var ir=null,nr=null,wt=!1,Dr=null;function zT(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ir=t,nr=vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ir=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=So!==null?{id:yi,overflow:_i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ir=t,nr=null,!0):!1;default:return!1}}function Iv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bv(t){if(wt){var e=nr;if(e){var n=e;if(!c1(t,e)){if(Iv(t))throw Error(oe(418));e=vs(n.nextSibling);var r=ir;e&&c1(t,e)?zT(r,n):(t.flags=t.flags&-4097|2,wt=!1,ir=t)}}else{if(Iv(t))throw Error(oe(418));t.flags=t.flags&-4097|2,wt=!1,ir=t}}}function d1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ir=t}function ld(t){if(t!==ir)return!1;if(!wt)return d1(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sv(t.type,t.memoizedProps)),e&&(e=nr)){if(Iv(t))throw BT(),Error(oe(418));for(;e;)zT(t,e),e=vs(e.nextSibling)}if(d1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=ir?vs(t.stateNode.nextSibling):null;return!0}function BT(){for(var t=nr;t;)t=vs(t.nextSibling)}function Ma(){nr=ir=null,wt=!1}function v0(t){Dr===null?Dr=[t]:Dr.push(t)}var mN=Bi.ReactCurrentBatchConfig;function Vl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function ud(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f1(t){var e=t._init;return e(t._payload)}function UT(t){function e(_,y){if(t){var E=_.deletions;E===null?(_.deletions=[y],_.flags|=16):E.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=ws(_,y),_.index=0,_.sibling=null,_}function s(_,y,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<y?(_.flags|=2,y):E):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,E,I){return y===null||y.tag!==6?(y=gg(E,_.mode,I),y.return=_,y):(y=i(y,E),y.return=_,y)}function l(_,y,E,I){var N=E.type;return N===na?c(_,y,E.props.children,I,E.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zi&&f1(N)===y.type)?(I=i(y,E.props),I.ref=Vl(_,y,E),I.return=_,I):(I=Jd(E.type,E.key,E.props,null,_.mode,I),I.ref=Vl(_,y,E),I.return=_,I)}function u(_,y,E,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=vg(E,_.mode,I),y.return=_,y):(y=i(y,E.children||[]),y.return=_,y)}function c(_,y,E,I,N){return y===null||y.tag!==7?(y=mo(E,_.mode,I,N),y.return=_,y):(y=i(y,E),y.return=_,y)}function d(_,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=gg(""+y,_.mode,E),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Jc:return E=Jd(y.type,y.key,y.props,null,_.mode,E),E.ref=Vl(_,null,y),E.return=_,E;case ta:return y=vg(y,_.mode,E),y.return=_,y;case Zi:var I=y._init;return d(_,I(y._payload),E)}if(Hl(y)||Nl(y))return y=mo(y,_.mode,E,null),y.return=_,y;ud(_,y)}return null}function f(_,y,E,I){var N=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:a(_,y,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jc:return E.key===N?l(_,y,E,I):null;case ta:return E.key===N?u(_,y,E,I):null;case Zi:return N=E._init,f(_,y,N(E._payload),I)}if(Hl(E)||Nl(E))return N!==null?null:c(_,y,E,I,null);ud(_,E)}return null}function g(_,y,E,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(E)||null,a(y,_,""+I,N);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Jc:return _=_.get(I.key===null?E:I.key)||null,l(y,_,I,N);case ta:return _=_.get(I.key===null?E:I.key)||null,u(y,_,I,N);case Zi:var R=I._init;return g(_,y,E,R(I._payload),N)}if(Hl(I)||Nl(I))return _=_.get(E)||null,c(y,_,I,N,null);ud(y,I)}return null}function v(_,y,E,I){for(var N=null,R=null,x=y,w=y=0,C=null;x!==null&&w<E.length;w++){x.index>w?(C=x,x=null):C=x.sibling;var b=f(_,x,E[w],I);if(b===null){x===null&&(x=C);break}t&&x&&b.alternate===null&&e(_,x),y=s(b,y,w),R===null?N=b:R.sibling=b,R=b,x=C}if(w===E.length)return n(_,x),wt&&ro(_,w),N;if(x===null){for(;w<E.length;w++)x=d(_,E[w],I),x!==null&&(y=s(x,y,w),R===null?N=x:R.sibling=x,R=x);return wt&&ro(_,w),N}for(x=r(_,x);w<E.length;w++)C=g(x,_,w,E[w],I),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?w:C.key),y=s(C,y,w),R===null?N=C:R.sibling=C,R=C);return t&&x.forEach(function(k){return e(_,k)}),wt&&ro(_,w),N}function m(_,y,E,I){var N=Nl(E);if(typeof N!="function")throw Error(oe(150));if(E=N.call(E),E==null)throw Error(oe(151));for(var R=N=null,x=y,w=y=0,C=null,b=E.next();x!==null&&!b.done;w++,b=E.next()){x.index>w?(C=x,x=null):C=x.sibling;var k=f(_,x,b.value,I);if(k===null){x===null&&(x=C);break}t&&x&&k.alternate===null&&e(_,x),y=s(k,y,w),R===null?N=k:R.sibling=k,R=k,x=C}if(b.done)return n(_,x),wt&&ro(_,w),N;if(x===null){for(;!b.done;w++,b=E.next())b=d(_,b.value,I),b!==null&&(y=s(b,y,w),R===null?N=b:R.sibling=b,R=b);return wt&&ro(_,w),N}for(x=r(_,x);!b.done;w++,b=E.next())b=g(x,_,w,b.value,I),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?w:b.key),y=s(b,y,w),R===null?N=b:R.sibling=b,R=b);return t&&x.forEach(function(O){return e(_,O)}),wt&&ro(_,w),N}function S(_,y,E,I){if(typeof E=="object"&&E!==null&&E.type===na&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jc:e:{for(var N=E.key,R=y;R!==null;){if(R.key===N){if(N=E.type,N===na){if(R.tag===7){n(_,R.sibling),y=i(R,E.props.children),y.return=_,_=y;break e}}else if(R.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Zi&&f1(N)===R.type){n(_,R.sibling),y=i(R,E.props),y.ref=Vl(_,R,E),y.return=_,_=y;break e}n(_,R);break}else e(_,R);R=R.sibling}E.type===na?(y=mo(E.props.children,_.mode,I,E.key),y.return=_,_=y):(I=Jd(E.type,E.key,E.props,null,_.mode,I),I.ref=Vl(_,y,E),I.return=_,_=I)}return o(_);case ta:e:{for(R=E.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){n(_,y.sibling),y=i(y,E.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=vg(E,_.mode,I),y.return=_,_=y}return o(_);case Zi:return R=E._init,S(_,y,R(E._payload),I)}if(Hl(E))return v(_,y,E,I);if(Nl(E))return m(_,y,E,I);ud(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,E),y.return=_,_=y):(n(_,y),y=gg(E,_.mode,I),y.return=_,_=y),o(_)):n(_,y)}return S}var ja=UT(!0),$T=UT(!1),bf=Bs(null),Rf=null,ca=null,m0=null;function y0(){m0=ca=Rf=null}function _0(t){var e=bf.current;yt(bf),t._currentValue=e}function Rv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ta(t,e){Rf=t,m0=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(m0!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(Rf===null)throw Error(oe(308));ca=t,Rf.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var fo=null;function w0(t){fo===null?fo=[t]:fo.push(t)}function GT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,w0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pi(t,r)}function Pi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function E0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Si(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pi(t,n)}return i=r.interleaved,i===null?(e.next=e,w0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pi(t,n)}function Wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o0(t,n)}}function h1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Af(t,e,n,r){var i=t.updateQueue;es=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,m=a;switch(f=e,g=n,m.tag){case 1:if(v=m.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=m.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=It({},d,f);break e;case 2:es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);To|=o,t.lanes=o,t.memoizedState=d}}function p1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var dc={},Zr=Bs(dc),Vu=Bs(dc),Fu=Bs(dc);function ho(t){if(t===dc)throw Error(oe(174));return t}function S0(t,e){switch(ft(Fu,e),ft(Vu,t),ft(Zr,dc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lv(e,t)}yt(Zr),ft(Zr,e)}function La(){yt(Zr),yt(Vu),yt(Fu)}function WT(t){ho(Fu.current);var e=ho(Zr.current),n=lv(e,t.type);e!==n&&(ft(Vu,t),ft(Zr,n))}function x0(t){Vu.current===t&&(yt(Zr),yt(Vu))}var xt=Bs(0);function Pf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ug=[];function T0(){for(var t=0;t<ug.length;t++)ug[t]._workInProgressVersionPrimary=null;ug.length=0}var qd=Bi.ReactCurrentDispatcher,cg=Bi.ReactCurrentBatchConfig,xo=0,Ct=null,Gt=null,Zt=null,kf=!1,lu=!1,zu=0,yN=0;function mn(){throw Error(oe(321))}function C0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Lr(t[n],e[n]))return!1;return!0}function I0(t,e,n,r,i,s){if(xo=s,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qd.current=t===null||t.memoizedState===null?SN:xN,t=n(r,i),lu){s=0;do{if(lu=!1,zu=0,25<=s)throw Error(oe(301));s+=1,Zt=Gt=null,e.updateQueue=null,qd.current=TN,t=n(r,i)}while(lu)}if(qd.current=Df,e=Gt!==null&&Gt.next!==null,xo=0,Zt=Gt=Ct=null,kf=!1,e)throw Error(oe(300));return t}function b0(){var t=zu!==0;return zu=0,t}function Kr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Ct.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function Sr(){if(Gt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var e=Zt===null?Ct.memoizedState:Zt.next;if(e!==null)Zt=e,Gt=t;else{if(t===null)throw Error(oe(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Zt===null?Ct.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function Bu(t,e){return typeof e=="function"?e(t):e}function dg(t){var e=Sr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((xo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ct.lanes|=c,To|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Lr(r,e.memoizedState)||(Wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ct.lanes|=s,To|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fg(t){var e=Sr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Lr(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function qT(){}function YT(t,e){var n=Ct,r=Sr(),i=e(),s=!Lr(r.memoizedState,i);if(s&&(r.memoizedState=i,Wn=!0),r=r.queue,R0(QT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Zt!==null&&Zt.memoizedState.tag&1){if(n.flags|=2048,Uu(9,XT.bind(null,n,r,i,e),void 0,null),tn===null)throw Error(oe(349));xo&30||KT(n,e,i)}return i}function KT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XT(t,e,n,r){e.value=n,e.getSnapshot=r,JT(e)&&ZT(t)}function QT(t,e,n){return n(function(){JT(e)&&ZT(t)})}function JT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Lr(t,n)}catch{return!0}}function ZT(t){var e=Pi(t,1);e!==null&&Mr(e,t,1,-1)}function g1(t){var e=Kr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:t},e.queue=t,t=t.dispatch=EN.bind(null,Ct,t),[e.memoizedState,t]}function Uu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function eC(){return Sr().memoizedState}function Yd(t,e,n,r){var i=Kr();Ct.flags|=t,i.memoizedState=Uu(1|e,n,void 0,r===void 0?null:r)}function Ph(t,e,n,r){var i=Sr();r=r===void 0?null:r;var s=void 0;if(Gt!==null){var o=Gt.memoizedState;if(s=o.destroy,r!==null&&C0(r,o.deps)){i.memoizedState=Uu(e,n,s,r);return}}Ct.flags|=t,i.memoizedState=Uu(1|e,n,s,r)}function v1(t,e){return Yd(8390656,8,t,e)}function R0(t,e){return Ph(2048,8,t,e)}function tC(t,e){return Ph(4,2,t,e)}function nC(t,e){return Ph(4,4,t,e)}function rC(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iC(t,e,n){return n=n!=null?n.concat([t]):null,Ph(4,4,rC.bind(null,e,t),n)}function A0(){}function sC(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function oC(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&C0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function aC(t,e,n){return xo&21?(Lr(n,e)||(n=fT(),Ct.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=n)}function _N(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=cg.transition;cg.transition={};try{t(!1),e()}finally{rt=n,cg.transition=r}}function lC(){return Sr().memoizedState}function wN(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uC(t))cC(e,n);else if(n=GT(t,e,n,r),n!==null){var i=Mn();Mr(n,t,r,i),dC(n,e,r)}}function EN(t,e,n){var r=_s(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uC(t))cC(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Lr(a,o)){var l=e.interleaved;l===null?(i.next=i,w0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=GT(t,e,i,r),n!==null&&(i=Mn(),Mr(n,t,r,i),dC(n,e,r))}}function uC(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function cC(t,e){lu=kf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dC(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,o0(t,n)}}var Df={readContext:Er,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},SN={readContext:Er,useCallback:function(t,e){return Kr().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:v1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yd(4194308,4,rC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yd(4,2,t,e)},useMemo:function(t,e){var n=Kr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wN.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=Kr();return t={current:t},e.memoizedState=t},useState:g1,useDebugValue:A0,useDeferredValue:function(t){return Kr().memoizedState=t},useTransition:function(){var t=g1(!1),e=t[0];return t=_N.bind(null,t[1]),Kr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ct,i=Kr();if(wt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),tn===null)throw Error(oe(349));xo&30||KT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,v1(QT.bind(null,r,s,t),[t]),r.flags|=2048,Uu(9,XT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Kr(),e=tn.identifierPrefix;if(wt){var n=_i,r=yi;n=(r&~(1<<32-Or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xN={readContext:Er,useCallback:sC,useContext:Er,useEffect:R0,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:oC,useReducer:dg,useRef:eC,useState:function(){return dg(Bu)},useDebugValue:A0,useDeferredValue:function(t){var e=Sr();return aC(e,Gt.memoizedState,t)},useTransition:function(){var t=dg(Bu)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:qT,useSyncExternalStore:YT,useId:lC,unstable_isNewReconciler:!1},TN={readContext:Er,useCallback:sC,useContext:Er,useEffect:R0,useImperativeHandle:iC,useInsertionEffect:tC,useLayoutEffect:nC,useMemo:oC,useReducer:fg,useRef:eC,useState:function(){return fg(Bu)},useDebugValue:A0,useDeferredValue:function(t){var e=Sr();return Gt===null?e.memoizedState=t:aC(e,Gt.memoizedState,t)},useTransition:function(){var t=fg(Bu)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:qT,useSyncExternalStore:YT,useId:lC,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Av(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kh={isMounted:function(t){return(t=t._reactInternals)?jo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=_s(t),s=Si(r,i);s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,i),e!==null&&(Mr(e,t,i,r),Wd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=_s(t),s=Si(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ms(t,s,i),e!==null&&(Mr(e,t,i,r),Wd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=_s(t),i=Si(n,r);i.tag=2,e!=null&&(i.callback=e),e=ms(t,i,r),e!==null&&(Mr(e,t,r,n),Wd(e,t,r))}};function m1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ou(n,r)||!Ou(i,s):!0}function fC(t,e,n){var r=!1,i=Rs,s=e.contextType;return typeof s=="object"&&s!==null?s=Er(s):(i=Yn(e)?Eo:Tn.current,r=e.contextTypes,s=(r=r!=null)?Oa(t,i):Rs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function y1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kh.enqueueReplaceState(e,e.state,null)}function Pv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},E0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Er(s):(s=Yn(e)?Eo:Tn.current,i.context=Oa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Av(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kh.enqueueReplaceState(i,i.state,null),Af(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Va(t,e){try{var n="",r=e;do n+=Jk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function kv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CN=typeof WeakMap=="function"?WeakMap:Map;function hC(t,e,n){n=Si(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Of||(Of=!0,Bv=r),kv(t,e)},n}function pC(t,e,n){n=Si(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){kv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){kv(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=FN.bind(null,t,e,n),e.then(t,t))}function w1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Si(-1,1),e.tag=2,ms(n,e,1))),n.lanes|=1),t)}var IN=Bi.ReactCurrentOwner,Wn=!1;function kn(t,e,n,r){e.child=t===null?$T(e,null,n,r):ja(e,t.child,n,r)}function S1(t,e,n,r,i){n=n.render;var s=e.ref;return Ta(e,i),r=I0(t,e,n,r,s,i),n=b0(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(wt&&n&&p0(e),e.flags|=1,kn(t,e,r,i),e.child)}function x1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!L0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,gC(t,e,s,r,i)):(t=Jd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ou,n(o,r)&&t.ref===e.ref)return ki(t,e,i)}return e.flags|=1,t=ws(s,r),t.ref=e.ref,t.return=e,e.child=t}function gC(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ou(s,r)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,ki(t,e,i)}return Dv(t,e,n,r,i)}function vC(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(fa,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(fa,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ft(fa,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ft(fa,tr),tr|=r;return kn(t,e,i,n),e.child}function mC(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Dv(t,e,n,r,i){var s=Yn(n)?Eo:Tn.current;return s=Oa(e,s),Ta(e,i),n=I0(t,e,n,r,s,i),r=b0(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ki(t,e,i)):(wt&&r&&p0(e),e.flags|=1,kn(t,e,n,i),e.child)}function T1(t,e,n,r,i){if(Yn(n)){var s=!0;Tf(e)}else s=!1;if(Ta(e,i),e.stateNode===null)Kd(t,e),fC(e,n,r),Pv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Er(u):(u=Yn(n)?Eo:Tn.current,u=Oa(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&y1(e,o,r,u),es=!1;var f=e.memoizedState;o.state=f,Af(e,r,o,i),l=e.memoizedState,a!==r||f!==l||qn.current||es?(typeof c=="function"&&(Av(e,n,c,r),l=e.memoizedState),(a=es||m1(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ar(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Er(l):(l=Yn(n)?Eo:Tn.current,l=Oa(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&y1(e,o,r,l),es=!1,f=e.memoizedState,o.state=f,Af(e,r,o,i);var v=e.memoizedState;a!==d||f!==v||qn.current||es?(typeof g=="function"&&(Av(e,n,g,r),v=e.memoizedState),(u=es||m1(e,n,u,r,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Nv(t,e,n,r,s,i)}function Nv(t,e,n,r,i,s){mC(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&u1(e,n,!1),ki(t,e,s);r=e.stateNode,IN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ja(e,t.child,null,s),e.child=ja(e,null,a,s)):kn(t,e,a,s),e.memoizedState=r.state,i&&u1(e,n,!0),e.child}function yC(t){var e=t.stateNode;e.pendingContext?l1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l1(t,e.context,!1),S0(t,e.containerInfo)}function C1(t,e,n,r,i){return Ma(),v0(i),e.flags|=256,kn(t,e,n,r),e.child}var Ov={dehydrated:null,treeContext:null,retryLane:0};function Mv(t){return{baseLanes:t,cachePool:null,transitions:null}}function _C(t,e,n){var r=e.pendingProps,i=xt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ft(xt,i&1),t===null)return bv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Oh(o,r,0,null),t=mo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mv(n),e.memoizedState=Ov,t):P0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bN(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ws(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ws(a,s):(s=mo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Mv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ov,r}return s=t.child,t=s.sibling,r=ws(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function P0(t,e){return e=Oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,n,r){return r!==null&&v0(r),ja(e,t.child,null,n),t=P0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hg(Error(oe(422))),cd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Oh({mode:"visible",children:r.children},i,0,null),s=mo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ja(e,t.child,null,o),e.child.memoizedState=Mv(o),e.memoizedState=Ov,s);if(!(e.mode&1))return cd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=hg(s,r,void 0),cd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wn||a){if(r=tn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pi(t,i),Mr(r,t,i,-1))}return j0(),r=hg(Error(oe(421))),cd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zN.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,nr=vs(i.nextSibling),ir=e,wt=!0,Dr=null,t!==null&&(hr[pr++]=yi,hr[pr++]=_i,hr[pr++]=So,yi=t.id,_i=t.overflow,So=e),e=P0(e,r.children),e.flags|=4096,e)}function I1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Rv(t.return,e,n)}function pg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wC(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kn(t,e,r.children,n),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I1(t,n,e);else if(t.tag===19)I1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ft(xt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),pg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}pg(e,!0,n,null,s);break;case"together":pg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=ws(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ws(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RN(t,e,n){switch(e.tag){case 3:yC(e),Ma();break;case 5:WT(e);break;case 1:Yn(e.type)&&Tf(e);break;case 4:S0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ft(bf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ft(xt,xt.current&1),e.flags|=128,null):n&e.child.childLanes?_C(t,e,n):(ft(xt,xt.current&1),t=ki(t,e,n),t!==null?t.sibling:null);ft(xt,xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ft(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,vC(t,e,n)}return ki(t,e,n)}var EC,jv,SC,xC;EC=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jv=function(){};SC=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ho(Zr.current);var s=null;switch(n){case"input":i=iv(t,i),r=iv(t,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=av(t,i),r=av(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sf)}uv(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&gt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};xC=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fl(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AN(t,e,n){var r=e.pendingProps;switch(g0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(e),null;case 1:return Yn(e.type)&&xf(),yn(e),null;case 3:return r=e.stateNode,La(),yt(qn),yt(Tn),T0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(Gv(Dr),Dr=null))),jv(t,e),yn(e),null;case 5:x0(e);var i=ho(Fu.current);if(n=e.type,t!==null&&e.stateNode!=null)SC(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return yn(e),null}if(t=ho(Zr.current),ld(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qr]=e,r[Lu]=s,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(i=0;i<ql.length;i++)gt(ql[i],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":Mw(r,s),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gt("invalid",r);break;case"textarea":Lw(r,s),gt("invalid",r)}uv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ad(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ad(r.textContent,a,t),i=["children",""+a]):bu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",r)}switch(n){case"input":Zc(r),jw(r,s,!0);break;case"textarea":Zc(r),Vw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qr]=e,t[Lu]=r,EC(t,e,!1,!1),e.stateNode=t;e:{switch(o=cv(n,r),n){case"dialog":gt("cancel",t),gt("close",t),i=r;break;case"iframe":case"object":case"embed":gt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ql.length;i++)gt(ql[i],t);i=r;break;case"source":gt("error",t),i=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),i=r;break;case"details":gt("toggle",t),i=r;break;case"input":Mw(t,r),i=iv(t,r),gt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),gt("invalid",t);break;case"textarea":Lw(t,r),i=av(t,r),gt("invalid",t);break;default:i=r}uv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?eT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Jx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ru(t,l):typeof l=="number"&&Ru(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gt("scroll",t):l!=null&&e0(t,s,l,o))}switch(n){case"input":Zc(t),jw(t,r,!1);break;case"textarea":Zc(t),Vw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wa(t,!!r.multiple,s,!1):r.defaultValue!=null&&wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yn(e),null;case 6:if(t&&e.stateNode!=null)xC(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ho(Fu.current),ho(Zr.current),ld(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,(s=r.nodeValue!==n)&&(t=ir,t!==null))switch(t.tag){case 3:ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=e,e.stateNode=r}return yn(e),null;case 13:if(yt(xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&nr!==null&&e.mode&1&&!(e.flags&128))BT(),Ma(),e.flags|=98560,s=!1;else if(s=ld(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[Qr]=e}else Ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yn(e),s=!1}else Dr!==null&&(Gv(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xt.current&1?Yt===0&&(Yt=3):j0())),e.updateQueue!==null&&(e.flags|=4),yn(e),null);case 4:return La(),jv(t,e),t===null&&Mu(e.stateNode.containerInfo),yn(e),null;case 10:return _0(e.type._context),yn(e),null;case 17:return Yn(e.type)&&xf(),yn(e),null;case 19:if(yt(xt),s=e.memoizedState,s===null)return yn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fl(s,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pf(t),o!==null){for(e.flags|=128,Fl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(xt,xt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ot()>Fa&&(e.flags|=128,r=!0,Fl(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wt)return yn(e),null}else 2*Ot()-s.renderingStartTime>Fa&&n!==1073741824&&(e.flags|=128,r=!0,Fl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ot(),e.sibling=null,n=xt.current,ft(xt,r?n&1|2:n&1),e):(yn(e),null);case 22:case 23:return M0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(yn(e),e.subtreeFlags&6&&(e.flags|=8192)):yn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function PN(t,e){switch(g0(e),e.tag){case 1:return Yn(e.type)&&xf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return La(),yt(qn),yt(Tn),T0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x0(e),null;case 13:if(yt(xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(xt),null;case 4:return La(),null;case 10:return _0(e.type._context),null;case 22:case 23:return M0(),null;case 24:return null;default:return null}}var dd=!1,Sn=!1,kN=typeof WeakSet=="function"?WeakSet:Set,_e=null;function da(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){At(t,e,r)}else n.current=null}function Lv(t,e,n){try{n()}catch(r){At(t,e,r)}}var b1=!1;function DN(t,e){if(wv=_f,t=RT(),h0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ev={focusedElem:t,selectionRange:n},_f=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var m=v.memoizedProps,S=v.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ar(e.type,m),S);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(I){At(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return v=b1,b1=!1,v}function uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Lv(e,n,s)}i=i.next}while(i!==r)}}function Dh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TC(t){var e=t.alternate;e!==null&&(t.alternate=null,TC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[Lu],delete e[Tv],delete e[pN],delete e[gN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CC(t){return t.tag===5||t.tag===3||t.tag===4}function R1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sf));else if(r!==4&&(t=t.child,t!==null))for(Fv(t,e,n),t=t.sibling;t!==null;)Fv(t,e,n),t=t.sibling}function zv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zv(t,e,n),t=t.sibling;t!==null;)zv(t,e,n),t=t.sibling}var an=null,Pr=!1;function Ki(t,e,n){for(n=n.child;n!==null;)IC(t,e,n),n=n.sibling}function IC(t,e,n){if(Jr&&typeof Jr.onCommitFiberUnmount=="function")try{Jr.onCommitFiberUnmount(Th,n)}catch{}switch(n.tag){case 5:Sn||da(n,e);case 6:var r=an,i=Pr;an=null,Ki(t,e,n),an=r,Pr=i,an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):an.removeChild(n.stateNode));break;case 18:an!==null&&(Pr?(t=an,n=n.stateNode,t.nodeType===8?ag(t.parentNode,n):t.nodeType===1&&ag(t,n),Du(t)):ag(an,n.stateNode));break;case 4:r=an,i=Pr,an=n.stateNode.containerInfo,Pr=!0,Ki(t,e,n),an=r,Pr=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lv(n,e,o),i=i.next}while(i!==r)}Ki(t,e,n);break;case 1:if(!Sn&&(da(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){At(n,e,a)}Ki(t,e,n);break;case 21:Ki(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,Ki(t,e,n),Sn=r):Ki(t,e,n);break;default:Ki(t,e,n)}}function A1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kN),e.forEach(function(r){var i=BN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Rr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,Pr=!1;break e;case 3:an=a.stateNode.containerInfo,Pr=!0;break e;case 4:an=a.stateNode.containerInfo,Pr=!0;break e}a=a.return}if(an===null)throw Error(oe(160));IC(s,o,i),an=null,Pr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){At(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bC(e,t),e=e.sibling}function bC(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),Yr(t),r&4){try{uu(3,t,t.return),Dh(3,t)}catch(m){At(t,t.return,m)}try{uu(5,t,t.return)}catch(m){At(t,t.return,m)}}break;case 1:Rr(e,t),Yr(t),r&512&&n!==null&&da(n,n.return);break;case 5:if(Rr(e,t),Yr(t),r&512&&n!==null&&da(n,n.return),t.flags&32){var i=t.stateNode;try{Ru(i,"")}catch(m){At(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Kx(i,s),cv(a,o);var u=cv(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?eT(i,d):c==="dangerouslySetInnerHTML"?Jx(i,d):c==="children"?Ru(i,d):e0(i,c,d,u)}switch(a){case"input":sv(i,s);break;case"textarea":Xx(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?wa(i,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?wa(i,!!s.multiple,s.defaultValue,!0):wa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lu]=s}catch(m){At(t,t.return,m)}}break;case 6:if(Rr(e,t),Yr(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){At(t,t.return,m)}}break;case 3:if(Rr(e,t),Yr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Du(e.containerInfo)}catch(m){At(t,t.return,m)}break;case 4:Rr(e,t),Yr(t);break;case 13:Rr(e,t),Yr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(N0=Ot())),r&4&&A1(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(u=Sn)||c,Rr(e,t),Sn=u):Rr(e,t),Yr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(_e=t,c=t.child;c!==null;){for(d=_e=c;_e!==null;){switch(f=_e,g=f.child,f.tag){case 0:case 11:case 14:case 15:uu(4,f,f.return);break;case 1:da(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(m){At(r,n,m)}}break;case 5:da(f,f.return);break;case 22:if(f.memoizedState!==null){k1(d);continue}}g!==null?(g.return=f,_e=g):k1(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Zx("display",o))}catch(m){At(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){At(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rr(e,t),Yr(t),r&4&&A1(t);break;case 21:break;default:Rr(e,t),Yr(t)}}function Yr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CC(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ru(i,""),r.flags&=-33);var s=R1(t);zv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=R1(t);Fv(t,a,o);break;default:throw Error(oe(161))}}catch(l){At(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NN(t,e,n){_e=t,RC(t)}function RC(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var i=_e,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Sn;a=dd;var u=Sn;if(dd=o,(Sn=l)&&!u)for(_e=i;_e!==null;)o=_e,l=o.child,o.tag===22&&o.memoizedState!==null?D1(i):l!==null?(l.return=o,_e=l):D1(i);for(;s!==null;)_e=s,RC(s),s=s.sibling;_e=i,dd=a,Sn=u}P1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,_e=s):P1(t)}}function P1(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||Dh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&p1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Du(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Sn||e.flags&512&&Vv(e)}catch(f){At(e,e.return,f)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function k1(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function D1(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dh(4,e)}catch(l){At(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){At(e,i,l)}}var s=e.return;try{Vv(e)}catch(l){At(e,s,l)}break;case 5:var o=e.return;try{Vv(e)}catch(l){At(e,o,l)}}}catch(l){At(e,e.return,l)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var ON=Math.ceil,Nf=Bi.ReactCurrentDispatcher,k0=Bi.ReactCurrentOwner,yr=Bi.ReactCurrentBatchConfig,Ke=0,tn=null,Vt=null,dn=0,tr=0,fa=Bs(0),Yt=0,$u=null,To=0,Nh=0,D0=0,cu=null,Gn=null,N0=0,Fa=1/0,vi=null,Of=!1,Bv=null,ys=null,fd=!1,us=null,Mf=0,du=0,Uv=null,Xd=-1,Qd=0;function Mn(){return Ke&6?Ot():Xd!==-1?Xd:Xd=Ot()}function _s(t){return t.mode&1?Ke&2&&dn!==0?dn&-dn:mN.transition!==null?(Qd===0&&(Qd=fT()),Qd):(t=rt,t!==0||(t=window.event,t=t===void 0?16:_T(t.type)),t):1}function Mr(t,e,n,r){if(50<du)throw du=0,Uv=null,Error(oe(185));lc(t,n,r),(!(Ke&2)||t!==tn)&&(t===tn&&(!(Ke&2)&&(Nh|=n),Yt===4&&rs(t,dn)),Kn(t,r),n===1&&Ke===0&&!(e.mode&1)&&(Fa=Ot()+500,Ah&&Us()))}function Kn(t,e){var n=t.callbackNode;mD(t,e);var r=yf(t,t===tn?dn:0);if(r===0)n!==null&&Bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Bw(n),e===1)t.tag===0?vN(N1.bind(null,t)):VT(N1.bind(null,t)),fN(function(){!(Ke&6)&&Us()}),n=null;else{switch(hT(r)){case 1:n=s0;break;case 4:n=cT;break;case 16:n=mf;break;case 536870912:n=dT;break;default:n=mf}n=jC(n,AC.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AC(t,e){if(Xd=-1,Qd=0,Ke&6)throw Error(oe(327));var n=t.callbackNode;if(Ca()&&t.callbackNode!==n)return null;var r=yf(t,t===tn?dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jf(t,r);else{e=r;var i=Ke;Ke|=2;var s=kC();(tn!==t||dn!==e)&&(vi=null,Fa=Ot()+500,vo(t,e));do try{LN();break}catch(a){PC(t,a)}while(!0);y0(),Nf.current=s,Ke=i,Vt!==null?e=0:(tn=null,dn=0,e=Yt)}if(e!==0){if(e===2&&(i=gv(t),i!==0&&(r=i,e=$v(t,i))),e===1)throw n=$u,vo(t,0),rs(t,r),Kn(t,Ot()),n;if(e===6)rs(t,r);else{if(i=t.current.alternate,!(r&30)&&!MN(i)&&(e=jf(t,r),e===2&&(s=gv(t),s!==0&&(r=s,e=$v(t,s))),e===1))throw n=$u,vo(t,0),rs(t,r),Kn(t,Ot()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:io(t,Gn,vi);break;case 3:if(rs(t,r),(r&130023424)===r&&(e=N0+500-Ot(),10<e)){if(yf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xv(io.bind(null,t,Gn,vi),e);break}io(t,Gn,vi);break;case 4:if(rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Or(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ON(r/1960))-r,10<r){t.timeoutHandle=xv(io.bind(null,t,Gn,vi),r);break}io(t,Gn,vi);break;case 5:io(t,Gn,vi);break;default:throw Error(oe(329))}}}return Kn(t,Ot()),t.callbackNode===n?AC.bind(null,t):null}function $v(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(vo(t,e).flags|=256),t=jf(t,e),t!==2&&(e=Gn,Gn=n,e!==null&&Gv(e)),t}function Gv(t){Gn===null?Gn=t:Gn.push.apply(Gn,t)}function MN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rs(t,e){for(e&=~D0,e&=~Nh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Or(e),r=1<<n;t[n]=-1,e&=~r}}function N1(t){if(Ke&6)throw Error(oe(327));Ca();var e=yf(t,0);if(!(e&1))return Kn(t,Ot()),null;var n=jf(t,e);if(t.tag!==0&&n===2){var r=gv(t);r!==0&&(e=r,n=$v(t,r))}if(n===1)throw n=$u,vo(t,0),rs(t,e),Kn(t,Ot()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,io(t,Gn,vi),Kn(t,Ot()),null}function O0(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(Fa=Ot()+500,Ah&&Us())}}function Co(t){us!==null&&us.tag===0&&!(Ke&6)&&Ca();var e=Ke;Ke|=1;var n=yr.transition,r=rt;try{if(yr.transition=null,rt=1,t)return t()}finally{rt=r,yr.transition=n,Ke=e,!(Ke&6)&&Us()}}function M0(){tr=fa.current,yt(fa)}function vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dN(n)),Vt!==null)for(n=Vt.return;n!==null;){var r=n;switch(g0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xf();break;case 3:La(),yt(qn),yt(Tn),T0();break;case 5:x0(r);break;case 4:La();break;case 13:yt(xt);break;case 19:yt(xt);break;case 10:_0(r.type._context);break;case 22:case 23:M0()}n=n.return}if(tn=t,Vt=t=ws(t.current,null),dn=tr=e,Yt=0,$u=null,D0=Nh=To=0,Gn=cu=null,fo!==null){for(e=0;e<fo.length;e++)if(n=fo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}fo=null}return t}function PC(t,e){do{var n=Vt;try{if(y0(),qd.current=Df,kf){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}kf=!1}if(xo=0,Zt=Gt=Ct=null,lu=!1,zu=0,k0.current=null,n===null||n.return===null){Yt=1,$u=e,Vt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=w1(o);if(g!==null){g.flags&=-257,E1(g,o,a,s,e),g.mode&1&&_1(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var m=new Set;m.add(l),e.updateQueue=m}else v.add(l);break e}else{if(!(e&1)){_1(s,u,e),j0();break e}l=Error(oe(426))}}else if(wt&&a.mode&1){var S=w1(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),E1(S,o,a,s,e),v0(Va(l,a));break e}}s=l=Va(l,a),Yt!==4&&(Yt=2),cu===null?cu=[s]:cu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=hC(s,l,e);h1(s,_);break e;case 1:a=l;var y=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ys===null||!ys.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=pC(s,a,e);h1(s,I);break e}}s=s.return}while(s!==null)}NC(n)}catch(N){e=N,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function kC(){var t=Nf.current;return Nf.current=Df,t===null?Df:t}function j0(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),tn===null||!(To&268435455)&&!(Nh&268435455)||rs(tn,dn)}function jf(t,e){var n=Ke;Ke|=2;var r=kC();(tn!==t||dn!==e)&&(vi=null,vo(t,e));do try{jN();break}catch(i){PC(t,i)}while(!0);if(y0(),Ke=n,Nf.current=r,Vt!==null)throw Error(oe(261));return tn=null,dn=0,Yt}function jN(){for(;Vt!==null;)DC(Vt)}function LN(){for(;Vt!==null&&!lD();)DC(Vt)}function DC(t){var e=MC(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?NC(t):Vt=e,k0.current=null}function NC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PN(n,e),n!==null){n.flags&=32767,Vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Vt=null;return}}else if(n=AN(n,e,tr),n!==null){Vt=n;return}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);Yt===0&&(Yt=5)}function io(t,e,n){var r=rt,i=yr.transition;try{yr.transition=null,rt=1,VN(t,e,n,r)}finally{yr.transition=i,rt=r}return null}function VN(t,e,n,r){do Ca();while(us!==null);if(Ke&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yD(t,s),t===tn&&(Vt=tn=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fd||(fd=!0,jC(mf,function(){return Ca(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yr.transition,yr.transition=null;var o=rt;rt=1;var a=Ke;Ke|=4,k0.current=null,DN(t,n),bC(n,t),iN(Ev),_f=!!wv,Ev=wv=null,t.current=n,NN(n),uD(),Ke=a,rt=o,yr.transition=s}else t.current=n;if(fd&&(fd=!1,us=t,Mf=i),s=t.pendingLanes,s===0&&(ys=null),fD(n.stateNode),Kn(t,Ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Of)throw Of=!1,t=Bv,Bv=null,t;return Mf&1&&t.tag!==0&&Ca(),s=t.pendingLanes,s&1?t===Uv?du++:(du=0,Uv=t):du=0,Us(),null}function Ca(){if(us!==null){var t=hT(Mf),e=yr.transition,n=rt;try{if(yr.transition=null,rt=16>t?16:t,us===null)var r=!1;else{if(t=us,us=null,Mf=0,Ke&6)throw Error(oe(331));var i=Ke;for(Ke|=4,_e=t.current;_e!==null;){var s=_e,o=s.child;if(_e.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(_e=u;_e!==null;){var c=_e;switch(c.tag){case 0:case 11:case 15:uu(8,c,s)}var d=c.child;if(d!==null)d.return=c,_e=d;else for(;_e!==null;){c=_e;var f=c.sibling,g=c.return;if(TC(c),c===u){_e=null;break}if(f!==null){f.return=g,_e=f;break}_e=g}}}var v=s.alternate;if(v!==null){var m=v.child;if(m!==null){v.child=null;do{var S=m.sibling;m.sibling=null,m=S}while(m!==null)}}_e=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_e=o;else e:for(;_e!==null;){if(s=_e,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,_e=_;break e}_e=s.return}}var y=t.current;for(_e=y;_e!==null;){o=_e;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,_e=E;else e:for(o=y;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dh(9,a)}}catch(N){At(a,a.return,N)}if(a===o){_e=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,_e=I;break e}_e=a.return}}if(Ke=i,Us(),Jr&&typeof Jr.onPostCommitFiberRoot=="function")try{Jr.onPostCommitFiberRoot(Th,t)}catch{}r=!0}return r}finally{rt=n,yr.transition=e}}return!1}function O1(t,e,n){e=Va(n,e),e=hC(t,e,1),t=ms(t,e,1),e=Mn(),t!==null&&(lc(t,1,e),Kn(t,e))}function At(t,e,n){if(t.tag===3)O1(t,t,n);else for(;e!==null;){if(e.tag===3){O1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=Va(n,t),t=pC(e,t,1),e=ms(e,t,1),t=Mn(),e!==null&&(lc(e,1,t),Kn(e,t));break}}e=e.return}}function FN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,tn===t&&(dn&n)===n&&(Yt===4||Yt===3&&(dn&130023424)===dn&&500>Ot()-N0?vo(t,0):D0|=n),Kn(t,e)}function OC(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=Mn();t=Pi(t,e),t!==null&&(lc(t,e,n),Kn(t,n))}function zN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OC(t,n)}function BN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),OC(t,n)}var MC;MC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qn.current)Wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wn=!1,RN(t,e,n);Wn=!!(t.flags&131072)}else Wn=!1,wt&&e.flags&1048576&&FT(e,If,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kd(t,e),t=e.pendingProps;var i=Oa(e,Tn.current);Ta(e,n),i=I0(null,e,r,t,i,n);var s=b0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(s=!0,Tf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,E0(e),i.updater=kh,e.stateNode=i,i._reactInternals=e,Pv(e,r,t,n),e=Nv(null,e,r,!0,s,n)):(e.tag=0,wt&&s&&p0(e),kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=$N(r),t=Ar(r,t),i){case 0:e=Dv(null,e,r,t,n);break e;case 1:e=T1(null,e,r,t,n);break e;case 11:e=S1(null,e,r,t,n);break e;case 14:e=x1(null,e,r,Ar(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),Dv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),T1(t,e,r,i,n);case 3:e:{if(yC(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,HT(t,e),Af(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Va(Error(oe(423)),e),e=C1(t,e,r,n,i);break e}else if(r!==i){i=Va(Error(oe(424)),e),e=C1(t,e,r,n,i);break e}else for(nr=vs(e.stateNode.containerInfo.firstChild),ir=e,wt=!0,Dr=null,n=$T(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),r===i){e=ki(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return WT(e),t===null&&bv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sv(r,i)?o=null:s!==null&&Sv(r,s)&&(e.flags|=32),mC(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&bv(e),null;case 13:return _C(t,e,n);case 4:return S0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ja(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),S1(t,e,r,i,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ft(bf,r._currentValue),r._currentValue=o,s!==null)if(Lr(s.value,o)){if(s.children===i.children&&!qn.current){e=ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Si(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Rv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Rv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ta(e,n),i=Er(i),r=r(i),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,i=Ar(r,e.pendingProps),i=Ar(r.type,i),x1(t,e,r,i,n);case 15:return gC(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ar(r,i),Kd(t,e),e.tag=1,Yn(r)?(t=!0,Tf(e)):t=!1,Ta(e,n),fC(e,r,i),Pv(e,r,i,n),Nv(null,e,r,!0,t,n);case 19:return wC(t,e,n);case 22:return vC(t,e,n)}throw Error(oe(156,e.tag))};function jC(t,e){return uT(t,e)}function UN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new UN(t,e,n,r)}function L0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $N(t){if(typeof t=="function")return L0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===n0)return 11;if(t===r0)return 14}return 2}function ws(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")L0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case na:return mo(n.children,i,s,e);case t0:o=8,i|=8;break;case ev:return t=mr(12,n,e,i|2),t.elementType=ev,t.lanes=s,t;case tv:return t=mr(13,n,e,i),t.elementType=tv,t.lanes=s,t;case nv:return t=mr(19,n,e,i),t.elementType=nv,t.lanes=s,t;case Wx:return Oh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gx:o=10;break e;case Hx:o=9;break e;case n0:o=11;break e;case r0:o=14;break e;case Zi:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function mo(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function Oh(t,e,n,r){return t=mr(22,t,r,e),t.elementType=Wx,t.lanes=n,t.stateNode={isHidden:!1},t}function gg(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function vg(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xp(0),this.expirationTimes=Xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function V0(t,e,n,r,i,s,o,a,l){return t=new GN(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},E0(s),t}function HN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LC(t){if(!t)return Rs;t=t._reactInternals;e:{if(jo(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Yn(n))return LT(t,n,e)}return e}function VC(t,e,n,r,i,s,o,a,l){return t=V0(n,r,!0,t,i,s,o,a,l),t.context=LC(null),n=t.current,r=Mn(),i=_s(n),s=Si(r,i),s.callback=e??null,ms(n,s,i),t.current.lanes=i,lc(t,i,r),Kn(t,r),t}function Mh(t,e,n,r){var i=e.current,s=Mn(),o=_s(i);return n=LC(n),e.context===null?e.context=n:e.pendingContext=n,e=Si(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ms(i,e,o),t!==null&&(Mr(t,i,o,s),Wd(t,i,o)),o}function Lf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function M1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function F0(t,e){M1(t,e),(t=t.alternate)&&M1(t,e)}function WN(){return null}var FC=typeof reportError=="function"?reportError:function(t){console.error(t)};function z0(t){this._internalRoot=t}jh.prototype.render=z0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Mh(t,e,null,null)};jh.prototype.unmount=z0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Co(function(){Mh(null,t,null,null)}),e[Ai]=null}};function jh(t){this._internalRoot=t}jh.prototype.unstable_scheduleHydration=function(t){if(t){var e=vT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ns.length&&e!==0&&e<ns[n].priority;n++);ns.splice(n,0,t),n===0&&yT(t)}};function B0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j1(){}function qN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Lf(o);s.call(u)}}var o=VC(e,r,t,0,null,!1,!1,"",j1);return t._reactRootContainer=o,t[Ai]=o.current,Mu(t.nodeType===8?t.parentNode:t),Co(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Lf(l);a.call(u)}}var l=V0(t,0,!1,null,null,!1,!1,"",j1);return t._reactRootContainer=l,t[Ai]=l.current,Mu(t.nodeType===8?t.parentNode:t),Co(function(){Mh(e,l,n,r)}),l}function Vh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Lf(o);a.call(l)}}Mh(e,o,t,i)}else o=qN(n,e,t,i,r);return Lf(o)}pT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wl(e.pendingLanes);n!==0&&(o0(e,n|1),Kn(e,Ot()),!(Ke&6)&&(Fa=Ot()+500,Us()))}break;case 13:Co(function(){var r=Pi(t,1);if(r!==null){var i=Mn();Mr(r,t,1,i)}}),F0(t,1)}};a0=function(t){if(t.tag===13){var e=Pi(t,134217728);if(e!==null){var n=Mn();Mr(e,t,134217728,n)}F0(t,134217728)}};gT=function(t){if(t.tag===13){var e=_s(t),n=Pi(t,e);if(n!==null){var r=Mn();Mr(n,t,e,r)}F0(t,e)}};vT=function(){return rt};mT=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};fv=function(t,e,n){switch(e){case"input":if(sv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Rh(r);if(!i)throw Error(oe(90));Yx(r),sv(r,i)}}}break;case"textarea":Xx(t,n);break;case"select":e=n.value,e!=null&&wa(t,!!n.multiple,e,!1)}};rT=O0;iT=Co;var YN={usingClientEntryPoint:!1,Events:[cc,oa,Rh,tT,nT,O0]},zl={findFiberByHostInstance:co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KN={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=aT(t),t===null?null:t.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||WN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Th=hd.inject(KN),Jr=hd}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YN;lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!B0(e))throw Error(oe(200));return HN(t,e,null,n)};lr.createRoot=function(t,e){if(!B0(t))throw Error(oe(299));var n=!1,r="",i=FC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=V0(t,1,!1,null,null,n,!1,r,i),t[Ai]=e.current,Mu(t.nodeType===8?t.parentNode:t),new z0(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=aT(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return Co(t)};lr.hydrate=function(t,e,n){if(!Lh(e))throw Error(oe(200));return Vh(null,t,e,!0,n)};lr.hydrateRoot=function(t,e,n){if(!B0(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=FC;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=VC(e,null,t,1,n??null,i,!1,s,o),t[Ai]=e.current,Mu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new jh(e)};lr.render=function(t,e,n){if(!Lh(e))throw Error(oe(200));return Vh(null,t,e,!1,n)};lr.unmountComponentAtNode=function(t){if(!Lh(t))throw Error(oe(40));return t._reactRootContainer?(Co(function(){Vh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ai]=null})}),!0):!1};lr.unstable_batchedUpdates=O0;lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lh(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Vh(t,e,n,!1,r)};lr.version="18.3.1-next-f1338f8080-20240426";function zC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zC)}catch(t){console.error(t)}}zC(),zx.exports=lr;var ha=zx.exports,BC,L1=ha;BC=L1.createRoot,L1.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var V1="popstate";function XN(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Hv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gu(i)}return JN(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QN(){return Math.random().toString(36).substring(2,10)}function F1(t,e){return{usr:t.state,key:t.key,idx:e}}function Hv(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sl(e):e,state:n,key:e&&e.key||r||QN()}}function Gu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function JN(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let S=c(),_=S==null?null:S-u;u=S,l&&l({action:a,location:m.location,delta:_})}function f(S,_){a="PUSH";let y=Hv(m.location,S,_);u=c()+1;let E=F1(y,u),I=m.createHref(y);try{o.pushState(E,"",I)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(I)}s&&l&&l({action:a,location:m.location,delta:1})}function g(S,_){a="REPLACE";let y=Hv(m.location,S,_);u=c();let E=F1(y,u),I=m.createHref(y);o.replaceState(E,"",I),s&&l&&l({action:a,location:m.location,delta:0})}function v(S){return ZN(S)}let m={get action(){return a},get location(){return t(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(V1,d),l=S,()=>{i.removeEventListener(V1,d),l=null}},createHref(S){return e(i,S)},createURL:v,encodeLocation(S){let _=v(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:g,go(S){return o.go(S)}};return m}function ZN(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Gu(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function UC(t,e,n="/"){return e2(t,e,n,!1)}function e2(t,e,n,r){let i=typeof e=="string"?sl(e):e,s=Di(i.pathname||"/",n);if(s==null)return null;let o=$C(t);t2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=f2(s);a=c2(o[l],u,r)}return a}function $C(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;Et(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=xi([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(Et(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),$C(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:l2(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of GC(o.path))s(o,a,!0,u)}),e}function GC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=GC(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function t2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:u2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var n2=/^:[\w-]+$/,r2=3,i2=2,s2=1,o2=10,a2=-2,z1=t=>t==="*";function l2(t,e){let n=t.split("/"),r=n.length;return n.some(z1)&&(r+=a2),e&&(r+=i2),n.filter(i=>!z1(i)).reduce((i,s)=>i+(n2.test(s)?r2:s===""?s2:o2),r)}function u2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function c2(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Vf({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Vf({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:xi([s,d.pathname]),pathnameBase:v2(xi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=xi([s,d.pathnameBase]))}return o}function Vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=d2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[f];return d&&!g?u[c]=void 0:u[c]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function d2(t,e=!1,n=!0){Vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function f2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Di(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function h2(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?sl(t):t;return{pathname:n?n.startsWith("/")?n:p2(n,e):e,search:m2(r),hash:y2(i)}}function p2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mg(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U0(t){let e=g2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function $0(t,e,n,r=!1){let i;typeof t=="string"?i=sl(t):(i={...t},Et(!i.pathname||!i.pathname.includes("?"),mg("?","pathname","search",i)),Et(!i.pathname||!i.pathname.includes("#"),mg("#","pathname","hash",i)),Et(!i.search||!i.search.includes("#"),mg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=h2(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var xi=t=>t.join("/").replace(/\/\/+/g,"/"),v2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),m2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,y2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var HC=["POST","PUT","PATCH","DELETE"];new Set(HC);var w2=["GET",...HC];new Set(w2);var ol=D.createContext(null);ol.displayName="DataRouter";var Fh=D.createContext(null);Fh.displayName="DataRouterState";D.createContext(!1);var WC=D.createContext({isTransitioning:!1});WC.displayName="ViewTransition";var E2=D.createContext(new Map);E2.displayName="Fetchers";var S2=D.createContext(null);S2.displayName="Await";var Gr=D.createContext(null);Gr.displayName="Navigation";var fc=D.createContext(null);fc.displayName="Location";var Hr=D.createContext({outlet:null,matches:[],isDataRoute:!1});Hr.displayName="Route";var G0=D.createContext(null);G0.displayName="RouteError";function x2(t,{relative:e}={}){Et(al(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Gr),{hash:i,pathname:s,search:o}=hc(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:xi([n,s])),r.createHref({pathname:a,search:o,hash:i})}function al(){return D.useContext(fc)!=null}function ci(){return Et(al(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(fc).location}var qC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YC(t){D.useContext(Gr).static||D.useLayoutEffect(t)}function KC(){let{isDataRoute:t}=D.useContext(Hr);return t?j2():T2()}function T2(){Et(al(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(ol),{basename:e,navigator:n}=D.useContext(Gr),{matches:r}=D.useContext(Hr),{pathname:i}=ci(),s=JSON.stringify(U0(r)),o=D.useRef(!1);return YC(()=>{o.current=!0}),D.useCallback((l,u={})=>{if(Vr(o.current,qC),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=$0(l,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:xi([e,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[e,n,s,i,t])}D.createContext(null);function XC(){let{matches:t}=D.useContext(Hr),e=t[t.length-1];return e?e.params:{}}function hc(t,{relative:e}={}){let{matches:n}=D.useContext(Hr),{pathname:r}=ci(),i=JSON.stringify(U0(n));return D.useMemo(()=>$0(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function C2(t,e){return QC(t,e)}function QC(t,e,n,r,i){var y;Et(al(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(Gr),{matches:o}=D.useContext(Hr),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let E=d&&d.path||"";JC(u,!d||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=ci(),g;if(e){let E=typeof e=="string"?sl(e):e;Et(c==="/"||((y=E.pathname)==null?void 0:y.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=f;let v=g.pathname||"/",m=v;if(c!=="/"){let E=c.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=UC(t,{pathname:m});Vr(d||S!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Vr(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=P2(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:xi([c,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?c:xi([c,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,r,i);return e&&_?D.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},_):_}function I2(){let t=M2(),e=_2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=D.createElement(D.Fragment,null,D.createElement("p",null,"💿 Hey developer 👋"),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,o)}var b2=D.createElement(I2,null),R2=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(Hr.Provider,{value:this.props.routeContext},D.createElement(G0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function A2({routeContext:t,match:e,children:n}){let r=D.useContext(ol);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(Hr.Provider,{value:t},n)}function P2(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);Et(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:d,errors:f}=n,g=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||g){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,d)=>{let f,g=!1,v=null,m=null;n&&(f=o&&c.route.id?o[c.route.id]:void 0,v=c.route.errorElement||b2,a&&(l<0&&d===0?(JC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,m=null):l===d&&(g=!0,m=c.route.hydrateFallbackElement||null)));let S=e.concat(s.slice(0,d+1)),_=()=>{let y;return f?y=v:g?y=m:c.route.Component?y=D.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=u,D.createElement(A2,{match:c,routeContext:{outlet:u,matches:S,isDataRoute:n!=null},children:y})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?D.createElement(R2,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:r}):_()},null)}function H0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k2(t){let e=D.useContext(ol);return Et(e,H0(t)),e}function D2(t){let e=D.useContext(Fh);return Et(e,H0(t)),e}function N2(t){let e=D.useContext(Hr);return Et(e,H0(t)),e}function W0(t){let e=N2(t),n=e.matches[e.matches.length-1];return Et(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function O2(){return W0("useRouteId")}function M2(){var r;let t=D.useContext(G0),e=D2("useRouteError"),n=W0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function j2(){let{router:t}=k2("useNavigate"),e=W0("useNavigate"),n=D.useRef(!1);return YC(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{Vr(n.current,qC),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var B1={};function JC(t,e,n){!e&&!B1[t]&&(B1[t]=!0,Vr(!1,n))}D.memo(L2);function L2({routes:t,future:e,state:n,unstable_onError:r}){return QC(t,void 0,n,r,e)}function ZC({to:t,replace:e,state:n,relative:r}){Et(al(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(Gr);Vr(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(Hr),{pathname:o}=ci(),a=KC(),l=$0(t,U0(s),o,r==="path"),u=JSON.stringify(l);return D.useEffect(()=>{a(JSON.parse(u),{replace:e,state:n,relative:r})},[a,u,r,e,n]),null}function Yo(t){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function V2({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Et(!al(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=sl(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:f="default"}=n,g=D.useMemo(()=>{let v=Di(l,o);return v==null?null:{location:{pathname:v,search:u,hash:c,state:d,key:f},navigationType:r}},[o,l,u,c,d,f,r]);return Vr(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:D.createElement(Gr.Provider,{value:a},D.createElement(fc.Provider,{children:e,value:g}))}function F2({children:t,location:e}){return C2(Wv(t),e)}function Wv(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Wv(r.props.children,s));return}Et(r.type===Yo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wv(r.props.children,s)),n.push(o)}),n}var Zd="get",ef="application/x-www-form-urlencoded";function zh(t){return t!=null&&typeof t.tagName=="string"}function z2(t){return zh(t)&&t.tagName.toLowerCase()==="button"}function B2(t){return zh(t)&&t.tagName.toLowerCase()==="form"}function U2(t){return zh(t)&&t.tagName.toLowerCase()==="input"}function $2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function G2(t,e){return t.button===0&&(!e||e==="_self")&&!$2(t)}var pd=null;function H2(){if(pd===null)try{new FormData(document.createElement("form"),0),pd=!1}catch{pd=!0}return pd}var W2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yg(t){return t!=null&&!W2.has(t)?(Vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ef}"`),null):t}function q2(t,e){let n,r,i,s,o;if(B2(t)){let a=t.getAttribute("action");r=a?Di(a,e):null,n=t.getAttribute("method")||Zd,i=yg(t.getAttribute("enctype"))||ef,s=new FormData(t)}else if(z2(t)||U2(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Di(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Zd,i=yg(t.getAttribute("formenctype"))||yg(a.getAttribute("enctype"))||ef,s=new FormData(a,t),!H2()){let{name:u,type:c,value:d}=t;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(zh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zd,r=null,i=ef,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function q0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Y2(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Di(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function K2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function X2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Q2(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await K2(s,n);return o.links?o.links():[]}return[]}));return tO(r.flat(1).filter(X2).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function U1(t,e,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>{var c;return n[u].pathname!==l.pathname||((c=n[u].route.path)==null?void 0:c.endsWith("*"))&&n[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var d;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function J2(t,e,{includeHydrateFallback:n}={}){return Z2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Z2(t){return[...new Set(t)]}function eO(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function tO(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(eO(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function eI(){let t=D.useContext(ol);return q0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nO(){let t=D.useContext(Fh);return q0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Y0=D.createContext(void 0);Y0.displayName="FrameworkContext";function tI(){let t=D.useContext(Y0);return q0(t,"You must render this element inside a <HydratedRouter> element"),t}function rO(t,e){let n=D.useContext(Y0),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=D.useRef(null);D.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let m=_=>{_.forEach(y=>{o(y.isIntersecting)})},S=new IntersectionObserver(m,{threshold:.5});return f.current&&S.observe(f.current),()=>{S.disconnect()}}},[t]),D.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let g=()=>{i(!0)},v=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,f,{}]:[s,f,{onFocus:Bl(a,g),onBlur:Bl(l,v),onMouseEnter:Bl(u,g),onMouseLeave:Bl(c,v),onTouchStart:Bl(d,g)}]:[!1,f,{}]}function Bl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function iO({page:t,...e}){let{router:n}=eI(),r=D.useMemo(()=>UC(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(oO,{page:t,matches:r,...e}):null}function sO(t){let{manifest:e,routeModules:n}=tI(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return Q2(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function oO({page:t,matches:e,...n}){let r=ci(),{manifest:i,routeModules:s}=tI(),{basename:o}=eI(),{loaderData:a,matches:l}=nO(),u=D.useMemo(()=>U1(t,e,l,i,r,"data"),[t,e,l,i,r]),c=D.useMemo(()=>U1(t,e,l,i,r,"assets"),[t,e,l,i,r]),d=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,m=!1;if(e.forEach(_=>{var E;let y=i.routes[_.route.id];!y||!y.hasLoader||(!u.some(I=>I.route.id===_.route.id)&&_.route.id in a&&((E=s[_.route.id])!=null&&E.shouldRevalidate)||y.hasClientLoader?m=!0:v.add(_.route.id))}),v.size===0)return[];let S=Y2(t,o,"data");return m&&v.size>0&&S.searchParams.set("_routes",e.filter(_=>v.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[o,a,r,i,u,e,t,s]),f=D.useMemo(()=>J2(c,i),[c,i]),g=sO(c);return D.createElement(D.Fragment,null,d.map(v=>D.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),f.map(v=>D.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:m})=>D.createElement("link",{key:v,nonce:n.nonce,...m})))}function aO(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var nI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nI&&(window.__reactRouterVersion="7.8.2")}catch{}function lO({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=XN({window:n,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(V2,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var rI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,za=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},g){let{basename:v}=D.useContext(Gr),m=typeof u=="string"&&rI.test(u),S,_=!1;if(typeof u=="string"&&m&&(S=u,nI))try{let C=new URL(window.location.href),b=u.startsWith("//")?new URL(C.protocol+u):new URL(u),k=Di(b.pathname,v);b.origin===C.origin&&k!=null?u=k+b.search+b.hash:_=!0}catch{Vr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=x2(u,{relative:i}),[E,I,N]=rO(r,f),R=fO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function x(C){e&&e(C),C.defaultPrevented||R(C)}let w=D.createElement("a",{...f,...N,href:S||y,onClick:_||s?e:x,ref:aO(g,I),target:l,"data-discover":!m&&n==="render"?"true":void 0});return E&&!m?D.createElement(D.Fragment,null,w,D.createElement(iO,{page:y})):w});za.displayName="Link";var uO=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=hc(o,{relative:u.relative}),f=ci(),g=D.useContext(Fh),{navigator:v,basename:m}=D.useContext(Gr),S=g!=null&&mO(d)&&a===!0,_=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,y=f.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(y=y.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&m&&(E=Di(E,m)||E);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let N=y===_||!i&&y.startsWith(_)&&y.charAt(I)==="/",R=E!=null&&(E===_||!i&&E.startsWith(_)&&E.charAt(_.length)==="/"),x={isActive:N,isPending:R,isTransitioning:S},w=N?e:void 0,C;typeof r=="function"?C=r(x):C=[r,N?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let b=typeof s=="function"?s(x):s;return D.createElement(za,{...u,"aria-current":w,className:C,ref:c,style:b,to:o,viewTransition:a},typeof l=="function"?l(x):l)});uO.displayName="NavLink";var cO=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Zd,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},g)=>{let v=gO(),m=vO(a,{relative:u}),S=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&rI.test(a),y=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let I=E.nativeEvent.submitter,N=(I==null?void 0:I.getAttribute("formmethod"))||o;v(I||E.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d})};return D.createElement("form",{ref:g,method:S,action:m,onSubmit:r?l:y,...f,"data-discover":!_&&t==="render"?"true":void 0})});cO.displayName="Form";function dO(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iI(t){let e=D.useContext(ol);return Et(e,dO(t)),e}function fO(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=KC(),l=ci(),u=hc(t,{relative:s});return D.useCallback(c=>{if(G2(c,e)){c.preventDefault();let d=n!==void 0?n:Gu(l)===Gu(u);a(t,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,e,t,i,s,o])}var hO=0,pO=()=>`__${String(++hO)}__`;function gO(){let{router:t}=iI("useSubmit"),{basename:e}=D.useContext(Gr),n=O2();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=q2(r,e);if(i.navigate===!1){let c=i.fetcherKey||pO();await t.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function vO(t,{relative:e}={}){let{basename:n}=D.useContext(Gr),r=D.useContext(Hr);Et(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...hc(t||".",{relative:e})},o=ci();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:xi([n,s.pathname])),Gu(s)}function mO(t,{relative:e}={}){let n=D.useContext(WC);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iI("useViewTransitionState"),i=hc(t,{relative:e});if(!n.isTransitioning)return!1;let s=Di(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Di(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Vf(i.pathname,o)!=null||Vf(i.pathname,s)!=null}const Bh=()=>{const t="/".replace(/\/$/,""),e=["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(197,176,255)","rgb(142, 227, 197)","rgb(238, 183, 154)","rgb(164,205,253)","rgb(246,169,255)","rgb(171, 235, 198)","rgb(255, 201, 214)","rgb(209, 247, 200)","rgb(235, 214, 169)","rgb(174, 229, 248)","rgb(246, 224, 196)","rgb(255, 217, 232)"],n=k=>{document.body.classList.add(k)},r=k=>{document.body.classList.remove(k)},i=(k,O,A)=>Math.min(Math.max(k,O),A),s=k=>{const O=document.documentElement;return getComputedStyle(O).getPropertyValue("--bs-"+k).trim()},o=k=>{const O=document.documentElement;return getComputedStyle(O).getPropertyValue("--"+k).trim()},a=k=>k?(k.charAt(0)!=="/"&&(k="/"+k),t+k):null,l=(k,O)=>k?O:"",u=k=>k+new Date().getTime()+"-r-"+Math.random().toFixed(3).replace(".",""),c=(k,O)=>{if(O=O||0,!k)return!0;const A=k.getBoundingClientRect();return A?A.bottom+O<0||A.right+O<0||A.left-O>window.innerWidth||A.top-O>window.innerHeight:!0},d=()=>{const k=window.navigator.userAgent.toLowerCase();return/android/.test(k)},f=()=>{const k=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(k)},g=()=>{const k=window.navigator.userAgent.toLowerCase();return/ipad/.test(k)},v=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,m=()=>{const k=navigator.userAgent||navigator.vendor||window.opera;return/CriOS/.test(k)},S=()=>{const k=navigator.userAgent||navigator.vendor||window.opera;return/Firefox/.test(k)},_=()=>{const k=navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(k)},y=k=>{if(typeof k!="string")return k;let O=k;return O=O.replace(/\*\*(.*?)\*\*/g,'<span class="text-highlight">$1</span>'),O},E=(k,O)=>k.length<=O?k:k.substring(0,O-5)+"(...)",I=k=>{const O=document.querySelectorAll(k||"img");let A=!0;return O.forEach(F=>{(!F.complete||F.naturalHeight===0)&&(A=!1)}),A},N=(k,O,A,F)=>{if(!k||k==="")return"";if(!k.includes("/"))return k;const G={year:"numeric",month:A?"short":"numeric",day:F?void 0:"numeric"},Y=new Date(k);Y.setDate(Y.getDate()+1);let H=Y.toLocaleString(O,G);return H=H.charAt(0).toUpperCase()+H.slice(1),H};return{addClassToBody:n,removeClassFromBody:r,clamp:i,getBootstrapColor:s,getRootSCSSVariable:o,resolvePath:a,strIf:l,randomTag:u,isElementOutsideBounds:c,isAndroid:d,isIOS:f,isIPad:g,isTouchDevice:v,isChrome:m,isFirefox:S,isSafari:_,parseJsonText:y,limitTextSize:E,didLoadAllImages:I,formatDate:N,formatDateInterval:(k,O,A,F,G)=>{let Y="";const H=N(k,A,F,G),j=N(O,A,F,G);return H!==""&&(Y+=H),j!==""&&(Y.length!==0&&(Y+=" ➔ "),Y+=j),Y},getYearsPassedSince:k=>{if(!k)return 0;const O=new Date(k),F=new Date-O,G=365.25*24*60*60*1e3;return F/G},isUrlExternal:k=>{const O=document.createElement("a");return O.href=k,O.hostname!==window.location.hostname},setPageScrollingEnabled:k=>{const O=document.body;k?(O.classList.remove("body-no-scroll"),O.classList.remove("position-fixed"),window.savedScrollY&&(window.scrollTo(0,window.savedScrollY),window.savedScrollY=null)):(window.savedScrollY=window.scrollY,O.classList.add("body-no-scroll"),f()&&O.classList.add("position-fixed"))},getColorForChart:k=>e[k]}};class pc{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const yO=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},un={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:yO()},K0=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},_O=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=K0(t);un.publicKey=n.publicKey,un.blockHeadless=n.blockHeadless,un.storageProvider=n.storageProvider,un.blockList=n.blockList,un.limitRate=n.limitRate,un.origin=n.origin||e},sI=async(t,e,n={})=>{const r=await fetch(un.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),s=new pc(r.status,i);if(r.ok)return s;throw s},oI=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},wO=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},aI=t=>t.webdriver||!t.languages||t.languages.length===0,lI=()=>new pc(451,"Unavailable For Headless Browser"),EO=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},SO=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},xO=(t,e)=>t instanceof FormData?t.get(e):t[e],uI=(t,e)=>{if(SO(t))return!1;EO(t.list,t.watchVariable);const n=xO(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},cI=()=>new pc(403,"Forbidden"),TO=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},CO=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},dI=async(t,e,n)=>{if(!e.throttle||!n)return!1;TO(e.throttle,e.id);const r=e.id||t;return await CO(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},fI=()=>new pc(429,"Too Many Requests"),IO=async(t,e,n,r)=>{const i=K0(r),s=i.publicKey||un.publicKey,o=i.blockHeadless||un.blockHeadless,a=i.storageProvider||un.storageProvider,l={...un.blockList,...i.blockList},u={...un.limitRate,...i.limitRate};return o&&aI(navigator)?Promise.reject(lI()):(oI(s,t,e),wO(n),n&&uI(l,n)?Promise.reject(cI()):await dI(location.pathname,u,a)?Promise.reject(fI()):sI("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},bO=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},RO=t=>typeof t=="string"?document.querySelector(t):t,AO=async(t,e,n,r)=>{const i=K0(r),s=i.publicKey||un.publicKey,o=i.blockHeadless||un.blockHeadless,a=un.storageProvider||i.storageProvider,l={...un.blockList,...i.blockList},u={...un.limitRate,...i.limitRate};if(o&&aI(navigator))return Promise.reject(lI());const c=RO(n);oI(s,t,e),bO(c);const d=new FormData(c);return uI(l,d)?Promise.reject(cI()):await dI(location.pathname,u,a)?Promise.reject(fI()):(d.append("lib_version","4.4.1"),d.append("service_id",t),d.append("template_id",e),d.append("user_id",s),sI("/api/v1.0/email/send-form",d))},$1={init:_O,send:IO,sendForm:AO,EmailJSResponseStatus:pc},Ul={didInit:!1,config:null},PO=()=>{const t=r=>{$1.init(r.publicKey),Ul.config=r,Ul.didInit=!0},e=()=>Ul.didInit;return{init:t,isInitialized:e,sendContactEmail:async(r,i,s,o)=>{if(!e())return;const a={from_name:r,from_email:i,custom_subject:s,message:o};try{const l=await $1.send(Ul.config.serviceId,Ul.config.templateId,a);return!0}catch{return!1}}}},hI=D.createContext(null),kO=()=>D.useContext(hI),G1={NOT_LOADED:0,LOADED:1},DO=({children:t})=>{const e=Bh(),n=PO(),[r,i]=D.useState(G1.NOT_LOADED),[s,o]=D.useState({settings:{},strings:{},sections:[],categories:[]}),[a,l]=D.useState(!1);D.useEffect(()=>{u().then(y=>{})},[]),D.useEffect(()=>{s.settings&&(a||c(),s.settings.emailjs&&n.init(s.settings.emailjs))},[s]);const u=async()=>{const y=await d("/data/settings.json"),E=await d("/data/strings.json"),I=await d("/data/structure.json"),N=I.categories,R=I.sections;for(const w of R){const C=N.find(b=>b.id===w.categoryId);if(!C)throw new Error(`[DataProvider] The section with id "${w.id}" has an invalid categoryId "${w.categoryId}". There's no such category.`);w.category=C,w.content=await d(w.jsonPath)}const x=N.filter(w=>R.find(C=>C.categoryId===w.id));o(w=>({...w,settings:y,strings:E,categories:x,sections:I.sections})),i(G1.LOADED)},c=()=>{s.sections.length&&l(!0)},d=async y=>{const E=e.resolvePath(y);return(await fetch(E)).json()},f=()=>s.settings,g=()=>s.strings,v=()=>s.sections,m=()=>s.categories,S=y=>y?s.sections.filter(E=>E.categoryId===y.id):[],_=()=>{const y=f(),E=v(),I=[e.resolvePath(y.profile.logoUrl),e.resolvePath(y.profile.profilePictureUrl)];return E.forEach(N=>{!N.content||!N.content.articles||N.content.articles.forEach(R=>{R.items&&R.items.forEach(x=>{!x.icon||!x.icon.img||I.push(e.resolvePath(x.icon.img))})})}),I};return p.jsx(hI.Provider,{value:{getSettings:f,getStrings:g,getSections:v,getCategories:m,getCategorySections:S,listImagesForCache:_},children:t})},NO=D.createContext(null),OO=({children:t})=>{const e=Bh(),{getSettings:n}=kO(),r=n(),[i,s]=D.useState([]),[o,a]=D.useState(!0),[l,u]=D.useState(!0),[c,d]=D.useState(null),[f,g]=D.useState(null),[v,m]=D.useState(null),[S,_]=D.useState(null);D.useEffect(()=>{a(!e.isTouchDevice()&&r.animatedCursorEnabled)},[]);const y=(j,L)=>{if(i.find($=>$.id===j))return;const B={id:j,message:L};s($=>[...$,B])},E=()=>i.length,I=()=>i,N=j=>{s(L=>L.filter(B=>B.id!==j))},R=()=>o,x=()=>l,w=()=>{u(!l)},C=(j,L,B)=>{d({type:j,title:L,message:B})},b=()=>{d(null)},k=(j,L,B)=>{g({url:j,title:L,description:B})},O=()=>{g(null)},A=(j,L,B,$,K)=>{_({title:j,message:L,cancelButtonLabel:B,confirmButtonLabel:$,onConfirm:K})},F=()=>{_(null)},G=(j,L,B,$)=>{m({screenshots:j,aspectRatio:L,title:B,description:$})},Y=()=>{m(null)},H=()=>E()||f||v||S;return p.jsx(NO.Provider,{value:{isShowingSpinner:E,listSpinnerActivities:I,showActivitySpinner:y,hideActivitySpinner:N,isAnimatedCursorEnabled:R,isAnimatedCursorActive:x,toggleAnimatedCursorActive:w,displayingNotification:c,displayNotification:C,killNotification:b,displayingYoutubeVideo:f,displayYoutubeVideo:k,hideYoutubeVideo:O,displayingGallery:v,displayGallery:G,hideGallery:Y,pendingConfirmation:S,showConfirmationDialog:A,hideConfirmationDialog:F,isModalOpen:H},children:t})},eo=[],to=[],pI=()=>({schedule:(i,s,o)=>{const a=setTimeout(i,s);eo.push({id:a,tag:o})},interval:(i,s,o)=>{const a=setInterval(i,s);to.push({id:a,tag:o})},clearAllWithTag:i=>{for(let s=eo.length-1;s>=0;s--)eo[s].tag===i&&(clearTimeout(eo[s].id),eo.splice(s,1));for(let s=to.length-1;s>=0;s--)to[s].tag===i&&(clearInterval(to[s].id),to.splice(s,1))},clearAll:()=>{eo.forEach(i=>{clearTimeout(i.id)}),to.forEach(i=>{clearInterval(i.id)}),eo.length=0,to.length=0}}),MO=D.createContext(null),Wo={xxs:0,xs:360,sm:576,md:768,lg:992,xl:1200,xxl:1400},H1=.1,gd=Bh(),_g=pI(),jO=({children:t})=>{const[e,n]=D.useState(0),[r,i]=D.useState(0),[s,o]=D.useState(window.innerWidth),[a,l]=D.useState(window.innerHeight),[u,c]=D.useState(0),[d,f]=D.useState(!1);D.useEffect(()=>(g(),()=>{v()}),[]);const g=()=>{window.addEventListener("scroll",m,{passive:!0}),window.addEventListener("resize",S),window.addEventListener("keydown",y),m(),S(),_g.clearAllWithTag("window-provider"),_g.interval(()=>{_()},H1*1e3,"window-provider"),f(!0)},v=()=>{window.removeEventListener("scroll",m),window.removeEventListener("resize",S),window.removeEventListener("keydown",y),_g.clearAllWithTag("window-provider"),f(!1)},m=()=>{n(window.scrollX),i(window.scrollY)},S=()=>{o(window.innerWidth),l(window.innerHeight)},_=()=>{c(w=>w+H1)},y=w=>{switch(w.key){case"ArrowUp":case"ArrowDown":x();break}},E=w=>s>=Wo[w],I=()=>{const w=s;return w<Wo.sm?"xs":w<Wo.md?"sm":w<Wo.lg?"md":w<Wo.xl?"lg":w<Wo.xxl?"xl":"xxl"},N=()=>!E(gd.getRootSCSSVariable("mobile-layout-breakpoint")||"md"),R=()=>gd.isIOS()&&gd.isChrome(),x=()=>{const w=document.querySelector(".custom-scrollable"),C=document.querySelector(".custom-modal");!w||gd.isTouchDevice()||C||w.focus()};return p.jsx(MO.Provider,{value:{scrollX:e,scrollY:r,innerWidth:s,innerHeight:a,currentTimeSpan:u,isBreakpoint:E,getBreakpoint:I,isMobileLayout:N,hasFooterOffset:R,focusMainView:x},children:d&&p.jsx(p.Fragment,{children:t})})},LO=()=>{};var W1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),r.push(n[c],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new FO;const f=s<<2|a>>4;if(r.push(f),u!==64){const g=a<<4&240|u>>2;if(r.push(g),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zO=function(t){const e=gI(t);return vI.encodeByteArray(e,!0)},Ff=function(t){return zO(t).replace(/\./g,"")},mI=function(t){try{return vI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO=()=>BO().__FIREBASE_DEFAULTS__,$O=()=>{if(typeof process>"u"||typeof W1>"u")return;const t=W1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mI(t[1]);return e&&JSON.parse(e)},Uh=()=>{try{return LO()||UO()||$O()||GO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yI=t=>{var e,n;return(n=(e=Uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HO=t=>{const e=yI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_I=()=>{var t;return(t=Uh())===null||t===void 0?void 0:t.config},wI=t=>{var e;return(e=Uh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ff(JSON.stringify(n)),Ff(JSON.stringify(o)),""].join(".")}const fu={};function YO(){const t={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?t.emulator.push(e):t.prod.push(e);return t}function KO(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let q1=!1;function SI(t,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||fu[t]===e||fu[t]||q1)return;fu[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=YO().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{q1=!0,o()},f}function c(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=KO(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),m=n("learnmore"),S=document.getElementById(m)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const E=f.element;a(E),c(S,m);const I=u();l(y,_),E.append(y,v,S,I),document.body.appendChild(E)}s?(v.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function QO(){var t;const e=(t=Uh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tM(){const t=Cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nM(){return!QO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rM(){try{return typeof indexedDB=="object"}catch{return!1}}function iM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="FirebaseError";class Ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sM,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?oM(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ui(i,a,r)}}function oM(t,e){return t.replace(aM,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aM=/\{\$([^}]+)}/g;function lM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ni(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Y1(s)&&Y1(o)){if(!Ni(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Y1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Kl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uM(t,e){const n=new cM(t,e);return n.subscribe.bind(n)}class cM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dM(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wg),i.error===void 0&&(i.error=wg),i.complete===void 0&&(i.complete=wg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(t){return t&&t._delegate?t._delegate:t}class Io{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pM(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hM(t){return t===so?void 0:t}function pM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ge||(Ge={}));const vM={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},mM=Ge.INFO,yM={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},_M=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yM[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class X0{constructor(e){this.name=e,this._logLevel=mM,this._logHandler=_M,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const wM=(t,e)=>e.some(n=>t instanceof n);let K1,X1;function EM(){return K1||(K1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SM(){return X1||(X1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xI=new WeakMap,qv=new WeakMap,TI=new WeakMap,Eg=new WeakMap,Q0=new WeakMap;function xM(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Es(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xI.set(n,t)}).catch(()=>{}),Q0.set(e,t),e}function TM(t){if(qv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qv.set(t,e)}let Yv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CM(t){Yv=t(Yv)}function IM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sg(this),e,...n);return TI.set(r,e.sort?e.sort():[e]),Es(r)}:SM().includes(t)?function(...e){return t.apply(Sg(this),e),Es(xI.get(this))}:function(...e){return Es(t.apply(Sg(this),e))}}function bM(t){return typeof t=="function"?IM(t):(t instanceof IDBTransaction&&TM(t),wM(t,EM())?new Proxy(t,Yv):t)}function Es(t){if(t instanceof IDBRequest)return xM(t);if(Eg.has(t))return Eg.get(t);const e=bM(t);return e!==t&&(Eg.set(t,e),Q0.set(e,t)),e}const Sg=t=>Q0.get(t);function RM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Es(o.result),l.oldVersion,l.newVersion,Es(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const AM=["get","getKey","getAll","getAllKeys","count"],PM=["put","add","delete","clear"],xg=new Map;function Q1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return xg.set(e,s),s}CM(t=>({...t,get:(e,n,r)=>Q1(e,n)||t.get(e,n,r),has:(e,n)=>!!Q1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kv="@firebase/app",J1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new X0("@firebase/app"),NM="@firebase/app-compat",OM="@firebase/analytics-compat",MM="@firebase/analytics",jM="@firebase/app-check-compat",LM="@firebase/app-check",VM="@firebase/auth",FM="@firebase/auth-compat",zM="@firebase/database",BM="@firebase/data-connect",UM="@firebase/database-compat",$M="@firebase/functions",GM="@firebase/functions-compat",HM="@firebase/installations",WM="@firebase/installations-compat",qM="@firebase/messaging",YM="@firebase/messaging-compat",KM="@firebase/performance",XM="@firebase/performance-compat",QM="@firebase/remote-config",JM="@firebase/remote-config-compat",ZM="@firebase/storage",ej="@firebase/storage-compat",tj="@firebase/firestore",nj="@firebase/ai",rj="@firebase/firestore-compat",ij="firebase",sj="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="[DEFAULT]",oj={[Kv]:"fire-core",[NM]:"fire-core-compat",[MM]:"fire-analytics",[OM]:"fire-analytics-compat",[LM]:"fire-app-check",[jM]:"fire-app-check-compat",[VM]:"fire-auth",[FM]:"fire-auth-compat",[zM]:"fire-rtdb",[BM]:"fire-data-connect",[UM]:"fire-rtdb-compat",[$M]:"fire-fn",[GM]:"fire-fn-compat",[HM]:"fire-iid",[WM]:"fire-iid-compat",[qM]:"fire-fcm",[YM]:"fire-fcm-compat",[KM]:"fire-perf",[XM]:"fire-perf-compat",[QM]:"fire-rc",[JM]:"fire-rc-compat",[ZM]:"fire-gcs",[ej]:"fire-gcs-compat",[tj]:"fire-fst",[rj]:"fire-fst-compat",[nj]:"fire-vertex","fire-js":"fire-js",[ij]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new Map,aj=new Map,Qv=new Map;function Z1(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ba(t){const e=t.name;if(Qv.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Qv.set(e,t);for(const n of zf.values())Z1(n,t);for(const n of aj.values())Z1(n,t);return!0}function J0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new gc("app","Firebase",lj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=sj;function CI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ss.create("bad-app-name",{appName:String(i)});if(n||(n=_I()),!n)throw Ss.create("no-options");const s=zf.get(i);if(s){if(Ni(n,s.options)&&Ni(r,s.config))return s;throw Ss.create("duplicate-app",{appName:i})}const o=new gM(i);for(const l of Qv.values())o.addComponent(l);const a=new uj(n,r,o);return zf.set(i,a),a}function II(t=Xv){const e=zf.get(t);if(!e&&t===Xv&&_I())return CI();if(!e)throw Ss.create("no-app",{appName:t});return e}function xs(t,e,n){var r;let i=(r=oj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(a.join(" "));return}Ba(new Io(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj="firebase-heartbeat-database",dj=1,Hu="firebase-heartbeat-store";let Tg=null;function bI(){return Tg||(Tg=RM(cj,dj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ss.create("idb-open",{originalErrorMessage:t.message})})),Tg}async function fj(t){try{const n=(await bI()).transaction(Hu),r=await n.objectStore(Hu).get(RI(t));return await n.done,r}catch(e){if(e instanceof Ui)Oi.warn(e.message);else{const n=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function eE(t,e){try{const r=(await bI()).transaction(Hu,"readwrite");await r.objectStore(Hu).put(e,RI(t)),await r.done}catch(n){if(n instanceof Ui)Oi.warn(n.message);else{const r=Ss.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(r.message)}}}function RI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=1024,pj=30;class gj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>pj){const o=yj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tE(),{heartbeatsToSend:r,unsentEntries:i}=vj(this._heartbeatsCache.heartbeats),s=Ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Oi.warn(n),""}}}function tE(){return new Date().toISOString().substring(0,10)}function vj(t,e=hj){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),nE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),nE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rM()?iM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return eE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nE(t){return Ff(JSON.stringify({version:2,heartbeats:t})).length}function yj(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(t){Ba(new Io("platform-logger",e=>new kM(e),"PRIVATE")),Ba(new Io("heartbeat",e=>new gj(e),"PRIVATE")),xs(Kv,J1,t),xs(Kv,J1,"esm2017"),xs("fire-js","")}_j("");var wj="firebase",Ej="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(wj,Ej,"app");function Z0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Sj=AI,PI=new gc("auth","Firebase",AI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf=new X0("@firebase/auth");function xj(t,...e){Bf.logLevel<=Ge.WARN&&Bf.warn(`Auth (${ul}): ${t}`,...e)}function tf(t,...e){Bf.logLevel<=Ge.ERROR&&Bf.error(`Auth (${ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw ey(t,...e)}function ei(t,...e){return ey(t,...e)}function kI(t,e,n){const r=Object.assign(Object.assign({},Sj()),{[e]:n});return new gc("auth","Firebase",r).create(e,{appName:t.name})}function Ti(t){return kI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ey(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return PI.create(t,...e)}function Ae(t,e,...n){if(!t)throw ey(e,...n)}function wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tf(e),new Error(e)}function Mi(t,e){t||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Tj(){return rE()==="http:"||rE()==="https:"}function rE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Tj()||ZO()||"connection"in navigator)?navigator.onLine:!0}function Ij(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mi(n>e,"Short delay should be less than long delay!"),this.isMobile=XO()||eM()}get(){return Cj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t,e){Mi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Aj=new mc(3e4,6e4);function $i(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function di(t,e,n,r,i={}){return NI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=vc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return JO()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ll(t.emulatorConfig.host)&&(u.credentials="include"),DI.fetch()(await OI(t,t.config.apiHost,n,a),u)})}async function NI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},bj),e);try{const i=new kj(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw vd(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw kI(t,c,u);Fr(t,c)}}catch(i){if(i instanceof Ui)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function yc(t,e,n,r,i={}){const s=await di(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function OI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ty(t.config,i):`${t.config.apiScheme}://${i}`;return Rj.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function Pj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),Aj.get())})}}function vd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ei(t,e,r);return i.customData._tokenResponse=n,i}function iE(t){return t!==void 0&&t.enterprise!==void 0}class Dj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Pj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Nj(t,e){return di(t,"GET","/v2/recaptchaConfig",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return di(t,"POST","/v1/accounts:delete",e)}async function Uf(t,e){return di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Mj(t,e=!1){const n=Ut(t),r=await n.getIdToken(e),i=ny(r);Ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hu(Cg(i.auth_time)),issuedAtTime:hu(Cg(i.iat)),expirationTime:hu(Cg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cg(t){return Number(t)*1e3}function ny(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const i=mI(n);return i?JSON.parse(i):(tf("Failed to decode base64 JWT payload"),null)}catch(i){return tf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function sE(t){const e=ny(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ui&&jj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function jj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hu(this.lastLoginAt),this.creationTime=hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ua(t,Uf(n,{idToken:r}));Ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?MI(s.providerUserInfo):[],a=Fj(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zv(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Vj(t){const e=Ut(t);await $f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Fj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function MI(t){return t.map(e=>{var{providerId:n}=e,r=Z0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zj(t,e){const n=await NI(t,{},async()=>{const r=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await OI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ll(t.emulatorConfig.host)&&(l.credentials="include"),DI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Bj(t,e){return di(t,"POST","/v2/accounts:revokeToken",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=sE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zj(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ia;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Z0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Mj(this,e)}reload(){return Vj(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $f(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await Ua(this,Oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:I,isAnonymous:N,providerData:R,stsTokenManager:x}=n;Ae(E&&x,e,"internal-error");const w=Ia.fromJSON(this.name,x);Ae(typeof E=="string",e,"internal-error"),Xi(d,e.name),Xi(f,e.name),Ae(typeof I=="boolean",e,"internal-error"),Ae(typeof N=="boolean",e,"internal-error"),Xi(g,e.name),Xi(v,e.name),Xi(m,e.name),Xi(S,e.name),Xi(_,e.name),Xi(y,e.name);const C=new Nr({uid:E,auth:e,email:f,emailVerified:I,displayName:d,isAnonymous:N,photoURL:v,phoneNumber:g,tenantId:m,stsTokenManager:w,createdAt:_,lastLoginAt:y});return R&&Array.isArray(R)&&(C.providerData=R.map(b=>Object.assign({},b))),S&&(C._redirectEventId=S),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ia;i.updateFromServerResponse(n);const s=new Nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $f(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?MI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ia;a.updateFromIdToken(r);const l=new Nr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Zv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=new Map;function Ei(t){Mi(t instanceof Function,"Expected a class definition");let e=oE.get(t);return e?(Mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}jI.type="NONE";const aE=jI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=nf(this.userKey,i.apiKey,s),this.fullPersistenceKey=nf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Uf(this.auth,{idToken:e}).catch(()=>{});return n?Nr._fromGetAccountInfoResponse(this.auth,n,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ba(Ei(aE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Ei(aE);const o=nf(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await Uf(e,{idToken:c}).catch(()=>{});if(!f)break;d=await Nr._fromGetAccountInfoResponse(e,f,c)}else d=Nr._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ba(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new ba(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if($I(e))return"Webos";if(VI(e))return"Safari";if((e.includes("chrome/")||FI(e))&&!e.includes("edge/"))return"Chrome";if(BI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LI(t=Cn()){return/firefox\//i.test(t)}function VI(t=Cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FI(t=Cn()){return/crios\//i.test(t)}function zI(t=Cn()){return/iemobile/i.test(t)}function BI(t=Cn()){return/android/i.test(t)}function UI(t=Cn()){return/blackberry/i.test(t)}function $I(t=Cn()){return/webos/i.test(t)}function ry(t=Cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Uj(t=Cn()){var e;return ry(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $j(){return tM()&&document.documentMode===10}function GI(t=Cn()){return ry(t)||BI(t)||$I(t)||UI(t)||/windows phone/i.test(t)||zI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e=[]){let n;switch(t){case"Browser":n=lE(Cn());break;case"Worker":n=`${lE(Cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hj(t,e={}){return di(t,"GET","/v2/passwordPolicy",$i(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=6;class qj{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Wj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uE(this),this.idTokenSubscription=new uE(this),this.beforeStateQueue=new Gj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uf(this,{idToken:e}),r=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $f(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ij()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(Ti(this));const n=e?Ut(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Hj(this),n=new qj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Bj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $s(t){return Ut(t)}class uE{constructor(e){this.auth=e,this.observer=null,this.addObserver=uM(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kj(t){$h=t}function WI(t){return $h.loadJS(t)}function Xj(){return $h.recaptchaEnterpriseScript}function Qj(){return $h.gapiScript}function Jj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Zj{constructor(){this.enterprise=new eL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tL="recaptcha-enterprise",qI="NO_RECAPTCHA";class nL{constructor(e){this.type=tL,this.auth=$s(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Nj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new Dj(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;iE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(qI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zj().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&iE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Xj();l.length!==0&&(l+=a),WI(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function cE(t,e,n,r=!1,i=!1){const s=new nL(t);let o;if(i)o=qI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Gf(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await cE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await cE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t,e){const n=J0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ni(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function iL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ei);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sL(t,e,n){const r=$s(t);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=YI(e),{host:o,port:a}=oL(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Ni(u,r.config.emulator)&&Ni(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,ll(o)?(EI(`${s}//${o}${l}`),SI("Auth",!0)):aL()}function YI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oL(t){const e=YI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dE(o)}}}function dE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,n){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function lL(t,e){return di(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){return yc(t,"POST","/v1/accounts:signInWithPassword",$i(t,e))}async function cL(t,e){return di(t,"POST","/v1/accounts:sendOobCode",$i(t,e))}async function dL(t,e){return cL(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}async function hL(t,e){return yc(t,"POST","/v1/accounts:signInWithEmailLink",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends iy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Wu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Wu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,n,"signInWithPassword",uL);case"emailLink":return fL(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,r,"signUpPassword",lL);case"emailLink":return hL(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return yc(t,"POST","/v1/accounts:signInWithIdp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="http://localhost";class bo extends iy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Z0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ra(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:pL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vL(t){const e=Yl(Kl(t)).link,n=e?Yl(Kl(e)).deep_link_id:null,r=Yl(Kl(t)).deep_link_id;return(r?Yl(Kl(r)).link:null)||r||n||e||t}class sy{constructor(e){var n,r,i,s,o,a;const l=Yl(Kl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=gL((i=l.mode)!==null&&i!==void 0?i:null);Ae(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vL(e);try{return new sy(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,n){return Wu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=sy.parseLink(n);return Ae(r,"argument-error"),Wu._fromEmailAndCode(e,r.code,r.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends KI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends _c{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bo._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends _c{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends _c{constructor(){super("twitter.com")}static credential(e,n){return bo._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return as.credential(n,r)}catch{return null}}}as.TWITTER_SIGN_IN_METHOD="twitter.com";as.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e){return yc(t,"POST","/v1/accounts:signUp",$i(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nr._fromIdTokenResponse(e,r,i),o=fE(r);return new Ro({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=fE(r);return new Ro({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function fE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf extends Ui{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hf(e,n,r,i)}}function XI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hf._fromErrorAndOperation(t,s,e,r):s})}async function yL(t,e,n=!1){const r=await Ua(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ro._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e,n=!1){const{auth:r}=t;if(gr(r.app))return Promise.reject(Ti(r));const i="reauthenticate";try{const s=await Ua(t,XI(r,i,e,t),n);Ae(s.idToken,r,"internal-error");const o=ny(s.idToken);Ae(o,r,"internal-error");const{sub:a}=o;return Ae(t.uid===a,r,"user-mismatch"),Ro._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e,n=!1){if(gr(t.app))return Promise.reject(Ti(t));const r="signIn",i=await XI(t,r,e),s=await Ro._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function wL(t,e){return QI($s(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(t){const e=$s(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EL(t,e,n){const r=$s(t);await Gf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dL)}async function SL(t,e,n){if(gr(t.app))return Promise.reject(Ti(t));const r=$s(t),o=await Gf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&JI(t),l}),a=await Ro._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function ZI(t,e,n){return gr(t.app)?Promise.reject(Ti(t)):wL(Ut(t),cl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e){return di(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ut(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ua(r,xL(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function CL(t,e,n,r){return Ut(t).onIdTokenChanged(e,n,r)}function IL(t,e,n){return Ut(t).beforeAuthStateChanged(e,n)}function bL(t,e,n,r){return Ut(t).onAuthStateChanged(e,n,r)}function RL(t){return Ut(t).signOut()}const Wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1e3,PL=10;class tb extends eb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);$j()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tb.type="LOCAL";const kL=tb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends eb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}nb.type="SESSION";const rb=nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await DL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=oy("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function OL(t){ti().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function ML(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LL(){return ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="firebaseLocalStorageDb",VL=1,qf="firebaseLocalStorage",ob="fbase_key";class wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hh(t,e){return t.transaction([qf],e?"readwrite":"readonly").objectStore(qf)}function FL(){const t=indexedDB.deleteDatabase(sb);return new wc(t).toPromise()}function em(){const t=indexedDB.open(sb,VL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qf,{keyPath:ob})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qf)?e(r):(r.close(),await FL(),e(await em()))})})}async function hE(t,e,n){const r=Hh(t,!0).put({[ob]:e,value:n});return new wc(r).toPromise()}async function zL(t,e){const n=Hh(t,!1).get(e),r=await new wc(n).toPromise();return r===void 0?null:r.value}function pE(t,e){const n=Hh(t,!0).delete(e);return new wc(n).toPromise()}const BL=800,UL=3;class ab{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await em(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gh._getInstance(LL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await ML(),!this.activeServiceWorker)return;this.sender=new NL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await em();return await hE(e,Wf,"1"),await pE(e,Wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Hh(i,!1).getAll();return new wc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ab.type="LOCAL";const $L=ab;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t,e){return e?Ei(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends iy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HL(t){return QI(t.auth,new ay(t),t.bypassAuthState)}function WL(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),_L(n,new ay(t),t.bypassAuthState)}async function qL(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),yL(n,new ay(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HL;case"linkViaPopup":case"linkViaRedirect":return qL;case"reauthViaPopup":case"reauthViaRedirect":return WL;default:Fr(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=new mc(2e3,1e4);class pa extends lb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=oy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YL.get())};e()}}pa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="pendingRedirect",rf=new Map;class XL extends lb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const r=await QL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QL(t,e){const n=eV(e),r=ZL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function JL(t,e){rf.set(t._key(),e)}function ZL(t){return Ei(t._redirectPersistence)}function eV(t){return nf(KL,t.config.apiKey,t.name)}async function tV(t,e,n=!1){if(gr(t.app))return Promise.reject(Ti(t));const r=$s(t),i=GL(r,e),o=await new XL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=10*60*1e3;class rV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!ub(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nV&&this.cachedEventUids.clear(),this.cachedEventUids.has(gE(e))}saveEventToCache(e){this.cachedEventUids.add(gE(e)),this.lastProcessedEventTime=Date.now()}}function gE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ub({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ub(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(t,e={}){return di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aV=/^https?/;async function lV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sV(t);for(const n of e)try{if(uV(n))return}catch{}Fr(t,"unauthorized-domain")}function uV(t){const e=Jv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aV.test(n))return!1;if(oV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new mc(3e4,6e4);function vE(){const t=ti().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dV(t){return new Promise((e,n)=>{var r,i,s;function o(){vE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vE(),n(ei(t,"network-request-failed"))},timeout:cV.get()})}if(!((i=(r=ti().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ti().gapi)===null||s===void 0)&&s.load)o();else{const a=Jj("iframefcb");return ti()[a]=()=>{gapi.load?o():n(ei(t,"network-request-failed"))},WI(`${Qj()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sf=null,e})}let sf=null;function fV(t){return sf=sf||dV(t),sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new mc(5e3,15e3),pV="__/auth/iframe",gV="emulator/auth/iframe",vV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yV(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ty(e,gV):`https://${t.config.authDomain}/${pV}`,r={apiKey:e.apiKey,appName:t.name,v:ul},i=mV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vc(r).slice(1)}`}async function _V(t){const e=await fV(t),n=ti().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:yV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ei(t,"network-request-failed"),a=ti().setTimeout(()=>{s(o)},hV.get());function l(){ti().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EV=500,SV=600,xV="_blank",TV="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CV(t,e,n,r=EV,i=SV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wV),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Cn().toLowerCase();n&&(a=FI(u)?xV:n),LI(u)&&(e=e||TV,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(Uj(u)&&a!=="_self")return IV(e||"",a),new mE(null);const d=window.open(e||"",a,c);Ae(d,t,"popup-blocked");try{d.focus()}catch{}return new mE(d)}function IV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="__/auth/handler",RV="emulator/auth/handler",AV=encodeURIComponent("fac");async function yE(t,e,n,r,i,s){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ul,eventId:i};if(e instanceof KI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(e instanceof _c){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${AV}=${encodeURIComponent(l)}`:"";return`${PV(t)}?${vc(a).slice(1)}${u}`}function PV({config:t}){return t.emulator?ty(t,RV):`https://${t.authDomain}/${bV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="webStorageSupport";class kV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rb,this._completeRedirectFn=tV,this._overrideRedirectResult=JL}async _openPopup(e,n,r,i){var s;Mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yE(e,n,r,Jv(),i);return CV(e,o,oy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await yE(e,n,r,Jv(),i);return OL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Mi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _V(e),r=new rV(e);return n.register("authEvent",i=>(Ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ig,{type:Ig},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ig];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GI()||VI()||ry()}}const DV=kV;var _E="@firebase/auth",wE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function MV(t){Ba(new Io("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HI(t)},u=new Yj(r,i,s,l);return iL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ba(new Io("auth-internal",e=>{const n=$s(e.getProvider("auth").getImmediate());return(r=>new NV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(_E,wE,OV(t)),xs(_E,wE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=5*60,LV=wI("authIdTokenMaxAge")||jV;let EE=null;const VV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LV)return;const i=n==null?void 0:n.token;EE!==i&&(EE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function FV(t=II()){const e=J0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rL(t,{popupRedirectResolver:DV,persistence:[$L,kL,rb]}),r=wI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=VV(s.toString());IL(n,o,()=>o(n.currentUser)),CL(n,a=>o(a))}}const i=yI("auth");return i&&sL(n,`http://${i}`),n}function zV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Kj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ei("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",zV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});MV("Browser");var SE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ts,cb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function C(){}C.prototype=w.prototype,x.D=w.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(b,k,O){for(var A=Array(arguments.length-2),F=2;F<arguments.length;F++)A[F-2]=arguments[F];return w.prototype[k].apply(b,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,w,C){C||(C=0);var b=Array(16);if(typeof w=="string")for(var k=0;16>k;++k)b[k]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(k=0;16>k;++k)b[k]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=x.g[0],C=x.g[1],k=x.g[2];var O=x.g[3],A=w+(O^C&(k^O))+b[0]+3614090360&4294967295;w=C+(A<<7&4294967295|A>>>25),A=O+(k^w&(C^k))+b[1]+3905402710&4294967295,O=w+(A<<12&4294967295|A>>>20),A=k+(C^O&(w^C))+b[2]+606105819&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(w^k&(O^w))+b[3]+3250441966&4294967295,C=k+(A<<22&4294967295|A>>>10),A=w+(O^C&(k^O))+b[4]+4118548399&4294967295,w=C+(A<<7&4294967295|A>>>25),A=O+(k^w&(C^k))+b[5]+1200080426&4294967295,O=w+(A<<12&4294967295|A>>>20),A=k+(C^O&(w^C))+b[6]+2821735955&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(w^k&(O^w))+b[7]+4249261313&4294967295,C=k+(A<<22&4294967295|A>>>10),A=w+(O^C&(k^O))+b[8]+1770035416&4294967295,w=C+(A<<7&4294967295|A>>>25),A=O+(k^w&(C^k))+b[9]+2336552879&4294967295,O=w+(A<<12&4294967295|A>>>20),A=k+(C^O&(w^C))+b[10]+4294925233&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(w^k&(O^w))+b[11]+2304563134&4294967295,C=k+(A<<22&4294967295|A>>>10),A=w+(O^C&(k^O))+b[12]+1804603682&4294967295,w=C+(A<<7&4294967295|A>>>25),A=O+(k^w&(C^k))+b[13]+4254626195&4294967295,O=w+(A<<12&4294967295|A>>>20),A=k+(C^O&(w^C))+b[14]+2792965006&4294967295,k=O+(A<<17&4294967295|A>>>15),A=C+(w^k&(O^w))+b[15]+1236535329&4294967295,C=k+(A<<22&4294967295|A>>>10),A=w+(k^O&(C^k))+b[1]+4129170786&4294967295,w=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(w^C))+b[6]+3225465664&4294967295,O=w+(A<<9&4294967295|A>>>23),A=k+(w^C&(O^w))+b[11]+643717713&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^w&(k^O))+b[0]+3921069994&4294967295,C=k+(A<<20&4294967295|A>>>12),A=w+(k^O&(C^k))+b[5]+3593408605&4294967295,w=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(w^C))+b[10]+38016083&4294967295,O=w+(A<<9&4294967295|A>>>23),A=k+(w^C&(O^w))+b[15]+3634488961&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^w&(k^O))+b[4]+3889429448&4294967295,C=k+(A<<20&4294967295|A>>>12),A=w+(k^O&(C^k))+b[9]+568446438&4294967295,w=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(w^C))+b[14]+3275163606&4294967295,O=w+(A<<9&4294967295|A>>>23),A=k+(w^C&(O^w))+b[3]+4107603335&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^w&(k^O))+b[8]+1163531501&4294967295,C=k+(A<<20&4294967295|A>>>12),A=w+(k^O&(C^k))+b[13]+2850285829&4294967295,w=C+(A<<5&4294967295|A>>>27),A=O+(C^k&(w^C))+b[2]+4243563512&4294967295,O=w+(A<<9&4294967295|A>>>23),A=k+(w^C&(O^w))+b[7]+1735328473&4294967295,k=O+(A<<14&4294967295|A>>>18),A=C+(O^w&(k^O))+b[12]+2368359562&4294967295,C=k+(A<<20&4294967295|A>>>12),A=w+(C^k^O)+b[5]+4294588738&4294967295,w=C+(A<<4&4294967295|A>>>28),A=O+(w^C^k)+b[8]+2272392833&4294967295,O=w+(A<<11&4294967295|A>>>21),A=k+(O^w^C)+b[11]+1839030562&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^w)+b[14]+4259657740&4294967295,C=k+(A<<23&4294967295|A>>>9),A=w+(C^k^O)+b[1]+2763975236&4294967295,w=C+(A<<4&4294967295|A>>>28),A=O+(w^C^k)+b[4]+1272893353&4294967295,O=w+(A<<11&4294967295|A>>>21),A=k+(O^w^C)+b[7]+4139469664&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^w)+b[10]+3200236656&4294967295,C=k+(A<<23&4294967295|A>>>9),A=w+(C^k^O)+b[13]+681279174&4294967295,w=C+(A<<4&4294967295|A>>>28),A=O+(w^C^k)+b[0]+3936430074&4294967295,O=w+(A<<11&4294967295|A>>>21),A=k+(O^w^C)+b[3]+3572445317&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^w)+b[6]+76029189&4294967295,C=k+(A<<23&4294967295|A>>>9),A=w+(C^k^O)+b[9]+3654602809&4294967295,w=C+(A<<4&4294967295|A>>>28),A=O+(w^C^k)+b[12]+3873151461&4294967295,O=w+(A<<11&4294967295|A>>>21),A=k+(O^w^C)+b[15]+530742520&4294967295,k=O+(A<<16&4294967295|A>>>16),A=C+(k^O^w)+b[2]+3299628645&4294967295,C=k+(A<<23&4294967295|A>>>9),A=w+(k^(C|~O))+b[0]+4096336452&4294967295,w=C+(A<<6&4294967295|A>>>26),A=O+(C^(w|~k))+b[7]+1126891415&4294967295,O=w+(A<<10&4294967295|A>>>22),A=k+(w^(O|~C))+b[14]+2878612391&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~w))+b[5]+4237533241&4294967295,C=k+(A<<21&4294967295|A>>>11),A=w+(k^(C|~O))+b[12]+1700485571&4294967295,w=C+(A<<6&4294967295|A>>>26),A=O+(C^(w|~k))+b[3]+2399980690&4294967295,O=w+(A<<10&4294967295|A>>>22),A=k+(w^(O|~C))+b[10]+4293915773&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~w))+b[1]+2240044497&4294967295,C=k+(A<<21&4294967295|A>>>11),A=w+(k^(C|~O))+b[8]+1873313359&4294967295,w=C+(A<<6&4294967295|A>>>26),A=O+(C^(w|~k))+b[15]+4264355552&4294967295,O=w+(A<<10&4294967295|A>>>22),A=k+(w^(O|~C))+b[6]+2734768916&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~w))+b[13]+1309151649&4294967295,C=k+(A<<21&4294967295|A>>>11),A=w+(k^(C|~O))+b[4]+4149444226&4294967295,w=C+(A<<6&4294967295|A>>>26),A=O+(C^(w|~k))+b[11]+3174756917&4294967295,O=w+(A<<10&4294967295|A>>>22),A=k+(w^(O|~C))+b[2]+718787259&4294967295,k=O+(A<<15&4294967295|A>>>17),A=C+(O^(k|~w))+b[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+O&4294967295}r.prototype.u=function(x,w){w===void 0&&(w=x.length);for(var C=w-this.blockSize,b=this.B,k=this.h,O=0;O<w;){if(k==0)for(;O<=C;)i(this,x,O),O+=this.blockSize;if(typeof x=="string"){for(;O<w;)if(b[k++]=x.charCodeAt(O++),k==this.blockSize){i(this,b),k=0;break}}else for(;O<w;)if(b[k++]=x[O++],k==this.blockSize){i(this,b),k=0;break}}this.h=k,this.o+=w},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;var C=8*this.o;for(w=x.length-8;w<x.length;++w)x[w]=C&255,C/=256;for(this.u(x),x=Array(16),w=C=0;4>w;++w)for(var b=0;32>b;b+=8)x[C++]=this.g[w]>>>b&255;return x};function s(x,w){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=w(x)}function o(x,w){this.h=w;for(var C=[],b=!0,k=x.length-1;0<=k;k--){var O=x[k]|0;b&&O==w||(C[k]=O,b=!1)}this.g=C}var a={};function l(x){return-128<=x&&128>x?s(x,function(w){return new o([w|0],0>w?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return S(u(-x));for(var w=[],C=1,b=0;x>=C;b++)w[b]=x/C|0,C*=4294967296;return new o(w,0)}function c(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return S(c(x.substring(1),w));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(w,8)),b=d,k=0;k<x.length;k+=8){var O=Math.min(8,x.length-k),A=parseInt(x.substring(k,k+O),w);8>O?(O=u(Math.pow(w,O)),b=b.j(O).add(u(A))):(b=b.j(C),b=b.add(u(A)))}return b}var d=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-S(this).m();for(var x=0,w=1,C=0;C<this.g.length;C++){var b=this.i(C);x+=(0<=b?b:4294967296+b)*w,w*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(m(this))return"-"+S(this).toString(x);for(var w=u(Math.pow(x,6)),C=this,b="";;){var k=I(C,w).g;C=_(C,k.j(w));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=k,v(C))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function m(x){return x.h==-1}t.l=function(x){return x=_(this,x),m(x)?-1:v(x)?0:1};function S(x){for(var w=x.g.length,C=[],b=0;b<w;b++)C[b]=~x.g[b];return new o(C,~x.h).add(f)}t.abs=function(){return m(this)?S(this):this},t.add=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],b=0,k=0;k<=w;k++){var O=b+(this.i(k)&65535)+(x.i(k)&65535),A=(O>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);b=A>>>16,O&=65535,A&=65535,C[k]=A<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(x,w){return x.add(S(w))}t.j=function(x){if(v(this)||v(x))return d;if(m(this))return m(x)?S(this).j(S(x)):S(S(this).j(x));if(m(x))return S(this.j(S(x)));if(0>this.l(g)&&0>x.l(g))return u(this.m()*x.m());for(var w=this.g.length+x.g.length,C=[],b=0;b<2*w;b++)C[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<x.g.length;k++){var O=this.i(b)>>>16,A=this.i(b)&65535,F=x.i(k)>>>16,G=x.i(k)&65535;C[2*b+2*k]+=A*G,y(C,2*b+2*k),C[2*b+2*k+1]+=O*G,y(C,2*b+2*k+1),C[2*b+2*k+1]+=A*F,y(C,2*b+2*k+1),C[2*b+2*k+2]+=O*F,y(C,2*b+2*k+2)}for(b=0;b<w;b++)C[b]=C[2*b+1]<<16|C[2*b];for(b=w;b<2*w;b++)C[b]=0;return new o(C,0)};function y(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function E(x,w){this.g=x,this.h=w}function I(x,w){if(v(w))throw Error("division by zero");if(v(x))return new E(d,d);if(m(x))return w=I(S(x),w),new E(S(w.g),S(w.h));if(m(w))return w=I(x,S(w)),new E(S(w.g),w.h);if(30<x.g.length){if(m(x)||m(w))throw Error("slowDivide_ only works with positive integers.");for(var C=f,b=w;0>=b.l(x);)C=N(C),b=N(b);var k=R(C,1),O=R(b,1);for(b=R(b,2),C=R(C,2);!v(b);){var A=O.add(b);0>=A.l(x)&&(k=k.add(C),O=A),b=R(b,1),C=R(C,1)}return w=_(x,k.j(w)),new E(k,w)}for(k=d;0<=x.l(w);){for(C=Math.max(1,Math.floor(x.m()/w.m())),b=Math.ceil(Math.log(C)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=u(C),A=O.j(w);m(A)||0<A.l(x);)C-=b,O=u(C),A=O.j(w);v(O)&&(O=f),k=k.add(O),x=_(x,A)}return new E(k,x)}t.A=function(x){return I(this,x).h},t.and=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],b=0;b<w;b++)C[b]=this.i(b)&x.i(b);return new o(C,this.h&x.h)},t.or=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],b=0;b<w;b++)C[b]=this.i(b)|x.i(b);return new o(C,this.h|x.h)},t.xor=function(x){for(var w=Math.max(this.g.length,x.g.length),C=[],b=0;b<w;b++)C[b]=this.i(b)^x.i(b);return new o(C,this.h^x.h)};function N(x){for(var w=x.g.length+1,C=[],b=0;b<w;b++)C[b]=x.i(b)<<1|x.i(b-1)>>>31;return new o(C,x.h)}function R(x,w){var C=w>>5;w%=32;for(var b=x.g.length-C,k=[],O=0;O<b;O++)k[O]=0<w?x.i(O+C)>>>w|x.i(O+C+1)<<32-w:x.i(O+C);return new o(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,cb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Ts=o}).apply(typeof SE<"u"?SE:typeof self<"u"?self:typeof window<"u"?window:{});var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var db,Xl,fb,of,tm,hb,pb,gb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,P){return h==Array.prototype||h==Object.prototype||(h[T]=P.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof md=="object"&&md];for(var T=0;T<h.length;++T){var P=h[T];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(h,T){if(T)e:{var P=r;h=h.split(".");for(var M=0;M<h.length-1;M++){var W=h[M];if(!(W in P))break e;P=P[W]}h=h[h.length-1],M=P[h],T=T(M),T!=M&&T!=null&&e(P,h,{configurable:!0,writable:!0,value:T})}}function s(h,T){h instanceof String&&(h+="");var P=0,M=!1,W={next:function(){if(!M&&P<h.length){var X=P++;return{value:T(X,h[X]),done:!1}}return M=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(h){return h||function(){return s(this,function(T,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function u(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function c(h,T,P){return h.call.apply(h.bind,arguments)}function d(h,T,P){if(!h)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,M),h.apply(T,W)}}return function(){return h.apply(T,arguments)}}function f(h,T,P){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function g(h,T){var P=Array.prototype.slice.call(arguments,1);return function(){var M=P.slice();return M.push.apply(M,arguments),h.apply(this,M)}}function v(h,T){function P(){}P.prototype=T.prototype,h.aa=T.prototype,h.prototype=new P,h.prototype.constructor=h,h.Qb=function(M,W,X){for(var de=Array(arguments.length-2),at=2;at<arguments.length;at++)de[at-2]=arguments[at];return T.prototype[W].apply(M,de)}}function m(h){const T=h.length;if(0<T){const P=Array(T);for(let M=0;M<T;M++)P[M]=h[M];return P}return[]}function S(h,T){for(let P=1;P<arguments.length;P++){const M=arguments[P];if(l(M)){const W=h.length||0,X=M.length||0;h.length=W+X;for(let de=0;de<X;de++)h[W+de]=M[de]}else h.push(M)}}class _{constructor(T,P){this.i=T,this.j=P,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function y(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var N=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function R(h,T,P){for(const M in h)T.call(P,h[M],M,h)}function x(h,T){for(const P in h)T.call(void 0,h[P],P,h)}function w(h){const T={};for(const P in h)T[P]=h[P];return T}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(h,T){let P,M;for(let W=1;W<arguments.length;W++){M=arguments[W];for(P in M)h[P]=M[P];for(let X=0;X<C.length;X++)P=C[X],Object.prototype.hasOwnProperty.call(M,P)&&(h[P]=M[P])}}function k(h){var T=1;h=h.split(":");const P=[];for(;0<T&&h.length;)P.push(h.shift()),T--;return h.length&&P.push(h.join(":")),P}function O(h){a.setTimeout(()=>{throw h},0)}function A(){var h=L;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class F{constructor(){this.h=this.g=null}add(T,P){const M=G.get();M.set(T,P),this.h?this.h.next=M:this.g=M,this.h=M}}var G=new _(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(T,P){this.h=T,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let H,j=!1,L=new F,B=()=>{const h=a.Promise.resolve(void 0);H=()=>{h.then($)}};var $=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(P){O(P)}var T=G;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}j=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const P=()=>{};a.addEventListener("test",P,T),a.removeEventListener("test",P,T)}catch{}return h}();function ie(h,T){if(ee.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var P=this.type=h.type,M=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(N){e:{try{I(T.nodeName);var W=!0;break e}catch{}W=!1}W||(T=null)}}else P=="mouseover"?T=h.fromElement:P=="mouseout"&&(T=h.toElement);this.relatedTarget=T,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:te[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ie.aa.h.call(this)}}v(ie,ee);var te={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ue=0;function Ee(h,T,P,M,W){this.listener=h,this.proxy=null,this.src=T,this.type=P,this.capture=!!M,this.ha=W,this.key=++ue,this.da=this.fa=!1}function xe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,T,P,M,W){var X=h.toString();h=this.g[X],h||(h=this.g[X]=[],this.h++);var de=ke(h,T,M,W);return-1<de?(T=h[de],P||(T.fa=!1)):(T=new Ee(T,this.src,X,!!M,W),T.fa=P,h.push(T)),T};function ce(h,T){var P=T.type;if(P in h.g){var M=h.g[P],W=Array.prototype.indexOf.call(M,T,void 0),X;(X=0<=W)&&Array.prototype.splice.call(M,W,1),X&&(xe(T),h.g[P].length==0&&(delete h.g[P],h.h--))}}function ke(h,T,P,M){for(var W=0;W<h.length;++W){var X=h[W];if(!X.da&&X.listener==T&&X.capture==!!P&&X.ha==M)return W}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),we={};function q(h,T,P,M,W){if(Array.isArray(T)){for(var X=0;X<T.length;X++)q(h,T[X],P,M,W);return null}return P=nt(P),h&&h[le]?h.K(T,P,u(M)?!!M.capture:!1,W):pe(h,T,P,!1,M,W)}function pe(h,T,P,M,W,X){if(!T)throw Error("Invalid event type");var de=u(W)?!!W.capture:!!W,at=ot(h);if(at||(h[Se]=at=new se(h)),P=at.add(T,P,M,de,X),P.proxy)return P;if(M=Ce(),P.proxy=M,M.src=h,M.listener=P,h.addEventListener)Q||(W=de),W===void 0&&(W=!1),h.addEventListener(T.toString(),M,W);else if(h.attachEvent)h.attachEvent(Ue(T.toString()),M);else if(h.addListener&&h.removeListener)h.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Ce(){function h(P){return T.call(h.src,h.listener,P)}const T=ut;return h}function ve(h,T,P,M,W){if(Array.isArray(T))for(var X=0;X<T.length;X++)ve(h,T[X],P,M,W);else M=u(M)?!!M.capture:!!M,P=nt(P),h&&h[le]?(h=h.i,T=String(T).toString(),T in h.g&&(X=h.g[T],P=ke(X,P,M,W),-1<P&&(xe(X[P]),Array.prototype.splice.call(X,P,1),X.length==0&&(delete h.g[T],h.h--)))):h&&(h=ot(h))&&(T=h.g[T.toString()],h=-1,T&&(h=ke(T,P,M,W)),(P=-1<h?T[h]:null)&&Re(P))}function Re(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[le])ce(T.i,h);else{var P=h.type,M=h.proxy;T.removeEventListener?T.removeEventListener(P,M,h.capture):T.detachEvent?T.detachEvent(Ue(P),M):T.addListener&&T.removeListener&&T.removeListener(M),(P=ot(T))?(ce(P,h),P.h==0&&(P.src=null,T[Se]=null)):xe(h)}}}function Ue(h){return h in we?we[h]:we[h]="on"+h}function ut(h,T){if(h.da)h=!0;else{T=new ie(T,this);var P=h.listener,M=h.ha||h.src;h.fa&&Re(h),h=P.call(M,T)}return h}function ot(h){return h=h[Se],h instanceof se?h:null}var Oe="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(h){return typeof h=="function"?h:(h[Oe]||(h[Oe]=function(T){return h.handleEvent(T)}),h[Oe])}function Je(){K.call(this),this.i=new se(this),this.M=this,this.F=null}v(Je,K),Je.prototype[le]=!0,Je.prototype.removeEventListener=function(h,T,P,M){ve(this,h,T,P,M)};function $e(h,T){var P,M=h.F;if(M)for(P=[];M;M=M.F)P.push(M);if(h=h.M,M=T.type||T,typeof T=="string")T=new ee(T,h);else if(T instanceof ee)T.target=T.target||h;else{var W=T;T=new ee(M,h),b(T,W)}if(W=!0,P)for(var X=P.length-1;0<=X;X--){var de=T.g=P[X];W=z(de,M,!0,T)&&W}if(de=T.g=h,W=z(de,M,!0,T)&&W,W=z(de,M,!1,T)&&W,P)for(X=0;X<P.length;X++)de=T.g=P[X],W=z(de,M,!1,T)&&W}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var P=h.g[T],M=0;M<P.length;M++)xe(P[M]);delete h.g[T],h.h--}}this.F=null},Je.prototype.K=function(h,T,P,M){return this.i.add(String(h),T,!1,P,M)},Je.prototype.L=function(h,T,P,M){return this.i.add(String(h),T,!0,P,M)};function z(h,T,P,M){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var W=!0,X=0;X<T.length;++X){var de=T[X];if(de&&!de.da&&de.capture==P){var at=de.listener,sn=de.ha||de.src;de.fa&&ce(h.i,de),W=at.call(sn,M)!==!1&&W}}return W&&!M.defaultPrevented}function J(h,T,P){if(typeof h=="function")P&&(h=f(h,P));else if(h&&typeof h.handleEvent=="function")h=f(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(h,T||0)}function ge(h){h.g=J(()=>{h.g=null,h.i&&(h.i=!1,ge(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class fe extends K{constructor(T,P){super(),this.m=T,this.l=P,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(h){K.call(this),this.h=h,this.g={}}v(je,K);var ct=[];function rn(h){R(h.g,function(T,P){this.g.hasOwnProperty(P)&&Re(T)},h),h.g={}}je.prototype.N=function(){je.aa.N.call(this),rn(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var St=a.JSON.stringify,cr=a.JSON.parse,qr=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Jn(){}Jn.prototype.h=null;function Zn(h){return h.h||(h.h=h.i())}function Fe(){}var Ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ze(){ee.call(this,"d")}v(ze,ee);function _t(){ee.call(this,"c")}v(_t,ee);var et={},$t=null;function kt(){return $t=$t||new Je}et.La="serverreachability";function Xt(h){ee.call(this,et.La,h)}v(Xt,ee);function Qt(h){const T=kt();$e(T,new Xt(T))}et.STAT_EVENT="statevent";function Cr(h,T){ee.call(this,et.STAT_EVENT,h),this.stat=T}v(Cr,ee);function Ye(h){const T=kt();$e(T,new Cr(T,h))}et.Ma="timingevent";function Ir(h,T){ee.call(this,et.Ma,h),this.size=T}v(Ir,ee);function pn(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},T)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function Ys(h,T,P,M,W,X){h.info(function(){if(h.g)if(X)for(var de="",at=X.split("&"),sn=0;sn<at.length;sn++){var Qe=at[sn].split("=");if(1<Qe.length){var gn=Qe[0];Qe=Qe[1];var vn=gn.split("_");de=2<=vn.length&&vn[1]=="type"?de+(gn+"="+Qe+"&"):de+(gn+"=redacted&")}}else de=null;else de=X;return"XMLHTTP REQ ("+M+") [attempt "+W+"]: "+T+`
`+P+`
`+de})}function Ks(h,T,P,M,W,X,de){h.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+W+"]: "+T+`
`+P+`
`+X+" "+de})}function An(h,T,P,M){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+Tl(h,P)+(M?" "+M:"")})}function Xs(h,T){h.info(function(){return"TIMEOUT: "+T})}Rn.prototype.info=function(){};function Tl(h,T){if(!h.g)return T;if(!T)return null;try{var P=JSON.parse(T);if(P){for(h=0;h<P.length;h++)if(Array.isArray(P[h])){var M=P[h];if(!(2>M.length)){var W=M[1];if(Array.isArray(W)&&!(1>W.length)){var X=W[0];if(X!="noop"&&X!="stop"&&X!="close")for(var de=1;de<W.length;de++)W[de]=""}}}}return St(P)}catch{return T}}var Lc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},G_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Np;function Vc(){}v(Vc,Jn),Vc.prototype.g=function(){return new XMLHttpRequest},Vc.prototype.i=function(){return{}},Np=new Vc;function Wi(h,T,P,M){this.j=h,this.i=T,this.l=P,this.R=M||1,this.U=new je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new H_}function H_(){this.i=null,this.g="",this.h=!1}var W_={},Op={};function Mp(h,T,P){h.L=1,h.v=Uc(hi(T)),h.m=P,h.P=!0,q_(h,null)}function q_(h,T){h.F=Date.now(),Fc(h),h.A=hi(h.v);var P=h.A,M=h.R;Array.isArray(M)||(M=[String(M)]),aw(P.i,"t",M),h.C=0,P=h.j.J,h.h=new H_,h.g=Cw(h.j,P?T:null,!h.m),0<h.O&&(h.M=new fe(f(h.Y,h,h.g),h.O)),T=h.U,P=h.g,M=h.ca;var W="readystatechange";Array.isArray(W)||(W&&(ct[0]=W.toString()),W=ct);for(var X=0;X<W.length;X++){var de=q(P,W[X],M||T.handleEvent,!1,T.h||T);if(!de)break;T.g[de.key]=de}T=h.H?w(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Qt(),Ys(h.i,h.u,h.A,h.l,h.R,h.m)}Wi.prototype.ca=function(h){h=h.target;const T=this.M;T&&pi(h)==3?T.j():this.Y(h)},Wi.prototype.Y=function(h){try{if(h==this.g)e:{const vn=pi(this.g);var T=this.g.Ba();const Go=this.g.Z();if(!(3>vn)&&(vn!=3||this.g&&(this.h.h||this.g.oa()||pw(this.g)))){this.J||vn!=4||T==7||(T==8||0>=Go?Qt(3):Qt(2)),jp(this);var P=this.g.Z();this.X=P;t:if(Y_(this)){var M=pw(this.g);h="";var W=M.length,X=pi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qs(this),Cl(this);var de="";break t}this.h.i=new a.TextDecoder}for(T=0;T<W;T++)this.h.h=!0,h+=this.h.i.decode(M[T],{stream:!(X&&T==W-1)});M.length=0,this.h.g+=h,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=P==200,Ks(this.i,this.u,this.A,this.l,this.R,vn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var at,sn=this.g;if((at=sn.g?sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(at)){var Qe=at;break t}}Qe=null}if(P=Qe)An(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lp(this,P);else{this.o=!1,this.s=3,Ye(12),Qs(this),Cl(this);break e}}if(this.P){P=!0;let br;for(;!this.J&&this.C<de.length;)if(br=sk(this,de),br==Op){vn==4&&(this.s=4,Ye(14),P=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(br==W_){this.s=4,Ye(15),An(this.i,this.l,de,"[Invalid Chunk]"),P=!1;break}else An(this.i,this.l,br,null),Lp(this,br);if(Y_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vn!=4||de.length!=0||this.h.h||(this.s=1,Ye(16),P=!1),this.o=this.o&&P,!P)An(this.i,this.l,de,"[Invalid Chunked Response]"),Qs(this),Cl(this);else if(0<de.length&&!this.W){this.W=!0;var gn=this.j;gn.g==this&&gn.ba&&!gn.M&&(gn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),$p(gn),gn.M=!0,Ye(11))}}else An(this.i,this.l,de,null),Lp(this,de);vn==4&&Qs(this),this.o&&!this.J&&(vn==4?Ew(this.j,this):(this.o=!1,Fc(this)))}else Sk(this.g),P==400&&0<de.indexOf("Unknown SID")?(this.s=3,Ye(12)):(this.s=0,Ye(13)),Qs(this),Cl(this)}}}catch{}finally{}};function Y_(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function sk(h,T){var P=h.C,M=T.indexOf(`
`,P);return M==-1?Op:(P=Number(T.substring(P,M)),isNaN(P)?W_:(M+=1,M+P>T.length?Op:(T=T.slice(M,M+P),h.C=M+P,T)))}Wi.prototype.cancel=function(){this.J=!0,Qs(this)};function Fc(h){h.S=Date.now()+h.I,K_(h,h.I)}function K_(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pn(f(h.ba,h),T)}function jp(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Wi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xs(this.i,this.A),this.L!=2&&(Qt(),Ye(17)),Qs(this),this.s=2,Cl(this)):K_(this,this.S-h)};function Cl(h){h.j.G==0||h.J||Ew(h.j,h)}function Qs(h){jp(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,rn(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function Lp(h,T){try{var P=h.j;if(P.G!=0&&(P.g==h||Vp(P.h,h))){if(!h.K&&Vp(P.h,h)&&P.G==3){try{var M=P.Da.g.parse(T)}catch{M=null}if(Array.isArray(M)&&M.length==3){var W=M;if(W[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<h.F)Yc(P),Wc(P);else break e;Up(P),Ye(18)}}else P.za=W[1],0<P.za-P.T&&37500>W[2]&&P.F&&P.v==0&&!P.C&&(P.C=pn(f(P.Za,P),6e3));if(1>=J_(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Zs(P,11)}else if((h.K||P.g==h)&&Yc(P),!y(T))for(W=P.Da.g.parse(T),T=0;T<W.length;T++){let Qe=W[T];if(P.T=Qe[0],Qe=Qe[1],P.G==2)if(Qe[0]=="c"){P.K=Qe[1],P.ia=Qe[2];const gn=Qe[3];gn!=null&&(P.la=gn,P.j.info("VER="+P.la));const vn=Qe[4];vn!=null&&(P.Aa=vn,P.j.info("SVER="+P.Aa));const Go=Qe[5];Go!=null&&typeof Go=="number"&&0<Go&&(M=1.5*Go,P.L=M,P.j.info("backChannelRequestTimeoutMs_="+M)),M=P;const br=h.g;if(br){const Xc=br.g?br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xc){var X=M.h;X.g||Xc.indexOf("spdy")==-1&&Xc.indexOf("quic")==-1&&Xc.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Fp(X,X.h),X.h=null))}if(M.D){const Gp=br.g?br.g.getResponseHeader("X-HTTP-Session-Id"):null;Gp&&(M.ya=Gp,pt(M.I,M.D,Gp))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-h.F,P.j.info("Handshake RTT: "+P.R+"ms")),M=P;var de=h;if(M.qa=Tw(M,M.J?M.ia:null,M.W),de.K){Z_(M.h,de);var at=de,sn=M.L;sn&&(at.I=sn),at.B&&(jp(at),Fc(at)),M.g=de}else _w(M);0<P.i.length&&qc(P)}else Qe[0]!="stop"&&Qe[0]!="close"||Zs(P,7);else P.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Zs(P,7):Bp(P):Qe[0]!="noop"&&P.l&&P.l.ta(Qe),P.v=0)}}Qt(4)}catch{}}var ok=class{constructor(h,T){this.g=h,this.map=T}};function X_(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Q_(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function J_(h){return h.h?1:h.g?h.g.size:0}function Vp(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function Fp(h,T){h.g?h.g.add(T):h.h=T}function Z_(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}X_.prototype.cancel=function(){if(this.i=ew(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ew(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const P of h.g.values())T=T.concat(P.D);return T}return m(h.i)}function ak(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var T=[],P=h.length,M=0;M<P;M++)T.push(h[M]);return T}T=[],P=0;for(M in h)T[P++]=h[M];return T}function lk(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var T=[];h=h.length;for(var P=0;P<h;P++)T.push(P);return T}T=[],P=0;for(const M in h)T[P++]=M;return T}}}function tw(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var P=lk(h),M=ak(h),W=M.length,X=0;X<W;X++)T.call(void 0,M[X],P&&P[X],h)}var nw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uk(h,T){if(h){h=h.split("&");for(var P=0;P<h.length;P++){var M=h[P].indexOf("="),W=null;if(0<=M){var X=h[P].substring(0,M);W=h[P].substring(M+1)}else X=h[P];T(X,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Js(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Js){this.h=h.h,zc(this,h.j),this.o=h.o,this.g=h.g,Bc(this,h.s),this.l=h.l;var T=h.i,P=new Rl;P.i=T.i,T.g&&(P.g=new Map(T.g),P.h=T.h),rw(this,P),this.m=h.m}else h&&(T=String(h).match(nw))?(this.h=!1,zc(this,T[1]||"",!0),this.o=Il(T[2]||""),this.g=Il(T[3]||"",!0),Bc(this,T[4]),this.l=Il(T[5]||"",!0),rw(this,T[6]||"",!0),this.m=Il(T[7]||"")):(this.h=!1,this.i=new Rl(null,this.h))}Js.prototype.toString=function(){var h=[],T=this.j;T&&h.push(bl(T,iw,!0),":");var P=this.g;return(P||T=="file")&&(h.push("//"),(T=this.o)&&h.push(bl(T,iw,!0),"@"),h.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&h.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&h.push("/"),h.push(bl(P,P.charAt(0)=="/"?fk:dk,!0))),(P=this.i.toString())&&h.push("?",P),(P=this.m)&&h.push("#",bl(P,pk)),h.join("")};function hi(h){return new Js(h)}function zc(h,T,P){h.j=P?Il(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function Bc(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function rw(h,T,P){T instanceof Rl?(h.i=T,gk(h.i,h.h)):(P||(T=bl(T,hk)),h.i=new Rl(T,h.h))}function pt(h,T,P){h.i.set(T,P)}function Uc(h){return pt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Il(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bl(h,T,P){return typeof h=="string"?(h=encodeURI(h).replace(T,ck),P&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ck(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var iw=/[#\/\?@]/g,dk=/[#\?:]/g,fk=/[#\?]/g,hk=/[#\?@]/g,pk=/#/g;function Rl(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function qi(h){h.g||(h.g=new Map,h.h=0,h.i&&uk(h.i,function(T,P){h.add(decodeURIComponent(T.replace(/\+/g," ")),P)}))}t=Rl.prototype,t.add=function(h,T){qi(this),this.i=null,h=Uo(this,h);var P=this.g.get(h);return P||this.g.set(h,P=[]),P.push(T),this.h+=1,this};function sw(h,T){qi(h),T=Uo(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function ow(h,T){return qi(h),T=Uo(h,T),h.g.has(T)}t.forEach=function(h,T){qi(this),this.g.forEach(function(P,M){P.forEach(function(W){h.call(T,W,M,this)},this)},this)},t.na=function(){qi(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),P=[];for(let M=0;M<T.length;M++){const W=h[M];for(let X=0;X<W.length;X++)P.push(T[M])}return P},t.V=function(h){qi(this);let T=[];if(typeof h=="string")ow(this,h)&&(T=T.concat(this.g.get(Uo(this,h))));else{h=Array.from(this.g.values());for(let P=0;P<h.length;P++)T=T.concat(h[P])}return T},t.set=function(h,T){return qi(this),this.i=null,h=Uo(this,h),ow(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},t.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function aw(h,T,P){sw(h,T),0<P.length&&(h.i=null,h.g.set(Uo(h,T),m(P)),h.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var P=0;P<T.length;P++){var M=T[P];const X=encodeURIComponent(String(M)),de=this.V(M);for(M=0;M<de.length;M++){var W=X;de[M]!==""&&(W+="="+encodeURIComponent(String(de[M]))),h.push(W)}}return this.i=h.join("&")};function Uo(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function gk(h,T){T&&!h.j&&(qi(h),h.i=null,h.g.forEach(function(P,M){var W=M.toLowerCase();M!=W&&(sw(this,M),aw(this,W,P))},h)),h.j=T}function vk(h,T){const P=new Rn;if(a.Image){const M=new Image;M.onload=g(Yi,P,"TestLoadImage: loaded",!0,T,M),M.onerror=g(Yi,P,"TestLoadImage: error",!1,T,M),M.onabort=g(Yi,P,"TestLoadImage: abort",!1,T,M),M.ontimeout=g(Yi,P,"TestLoadImage: timeout",!1,T,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=h}else T(!1)}function mk(h,T){const P=new Rn,M=new AbortController,W=setTimeout(()=>{M.abort(),Yi(P,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:M.signal}).then(X=>{clearTimeout(W),X.ok?Yi(P,"TestPingServer: ok",!0,T):Yi(P,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(W),Yi(P,"TestPingServer: error",!1,T)})}function Yi(h,T,P,M,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),M(P)}catch{}}function yk(){this.g=new qr}function _k(h,T,P){const M=P||"";try{tw(h,function(W,X){let de=W;u(W)&&(de=St(W)),T.push(M+X+"="+encodeURIComponent(de))})}catch(W){throw T.push(M+"type="+encodeURIComponent("_badmap")),W}}function $c(h){this.l=h.Ub||null,this.j=h.eb||!1}v($c,Jn),$c.prototype.g=function(){return new Gc(this.l,this.j)},$c.prototype.i=function(h){return function(){return h}}({});function Gc(h,T){Je.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Gc,Je),t=Gc.prototype,t.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,Pl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Al(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lw(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function lw(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?Al(this):Pl(this),this.readyState==3&&lw(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,Al(this))},t.Qa=function(h){this.g&&(this.response=h,Al(this))},t.ga=function(){this.g&&Al(this)};function Al(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Pl(h)}t.setRequestHeader=function(h,T){this.u.append(h,T)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var P=T.next();!P.done;)P=P.value,h.push(P[0]+": "+P[1]),P=T.next();return h.join(`\r
`)};function Pl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function uw(h){let T="";return R(h,function(P,M){T+=M,T+=":",T+=P,T+=`\r
`}),T}function zp(h,T,P){e:{for(M in P){var M=!1;break e}M=!0}M||(P=uw(P),typeof h=="string"?P!=null&&encodeURIComponent(String(P)):pt(h,T,P))}function Rt(h){Je.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Rt,Je);var wk=/^https?$/i,Ek=["POST","PUT"];t=Rt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,T,P,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Np.g(),this.v=this.o?Zn(this.o):Zn(Np),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(X){cw(this,X);return}if(h=P||"",P=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var W in M)P.set(W,M[W]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const X of M.keys())P.set(X,M.get(X));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(P.keys()).find(X=>X.toLowerCase()=="content-type"),W=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ek,T,void 0))||M||W||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of P)this.g.setRequestHeader(X,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hw(this),this.u=!0,this.g.send(h),this.u=!1}catch(X){cw(this,X)}};function cw(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,dw(h),Hc(h)}function dw(h){h.A||(h.A=!0,$e(h,"complete"),$e(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,$e(this,"complete"),$e(this,"abort"),Hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hc(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fw(this):this.bb())},t.bb=function(){fw(this)};function fw(h){if(h.h&&typeof o<"u"&&(!h.v[1]||pi(h)!=4||h.Z()!=2)){if(h.u&&pi(h)==4)J(h.Ea,0,h);else if($e(h,"readystatechange"),pi(h)==4){h.h=!1;try{const de=h.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var P;if(!(P=T)){var M;if(M=de===0){var W=String(h.D).match(nw)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),M=!wk.test(W?W.toLowerCase():"")}P=M}if(P)$e(h,"complete"),$e(h,"success");else{h.m=6;try{var X=2<pi(h)?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.Z()+"]",dw(h)}}finally{Hc(h)}}}}function Hc(h,T){if(h.g){hw(h);const P=h.g,M=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||$e(h,"ready");try{P.onreadystatechange=M}catch{}}}function hw(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function pi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<pi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),cr(T)}};function pw(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Sk(h){const T={};h=(h.g&&2<=pi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<h.length;M++){if(y(h[M]))continue;var P=k(h[M]);const W=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const X=T[W]||[];T[W]=X,X.push(P)}x(T,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kl(h,T,P){return P&&P.internalChannelParams&&P.internalChannelParams[h]||T}function gw(h){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kl("baseRetryDelayMs",5e3,h),this.cb=kl("retryDelaySeedMs",1e4,h),this.Wa=kl("forwardChannelMaxRetries",2,h),this.wa=kl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new X_(h&&h.concurrentRequestLimit),this.Da=new yk,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gw.prototype,t.la=8,t.G=1,t.connect=function(h,T,P,M){Ye(0),this.W=h,this.H=T||{},P&&M!==void 0&&(this.H.OSID=P,this.H.OAID=M),this.F=this.X,this.I=Tw(this,null,this.W),qc(this)};function Bp(h){if(vw(h),h.G==3){var T=h.U++,P=hi(h.I);if(pt(P,"SID",h.K),pt(P,"RID",T),pt(P,"TYPE","terminate"),Dl(h,P),T=new Wi(h,h.j,T),T.L=2,T.v=Uc(hi(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=T.v,P=!0),P||(T.g=Cw(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Fc(T)}xw(h)}function Wc(h){h.g&&($p(h),h.g.cancel(),h.g=null)}function vw(h){Wc(h),h.u&&(a.clearTimeout(h.u),h.u=null),Yc(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function qc(h){if(!Q_(h.h)&&!h.s){h.s=!0;var T=h.Ga;H||B(),j||(H(),j=!0),L.add(T,h),h.B=0}}function xk(h,T){return J_(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pn(f(h.Ga,h,T),Sw(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const W=new Wi(this,this.j,h);let X=this.o;if(this.S&&(X?(X=w(X),b(X,this.S)):X=this.S),this.m!==null||this.O||(W.H=X,X=null),this.P)e:{for(var T=0,P=0;P<this.i.length;P++){t:{var M=this.i[P];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(T+=M,4096<T){T=P;break e}if(T===4096||P===this.i.length-1){T=P+1;break e}}T=1e3}else T=1e3;T=yw(this,W,T),P=hi(this.I),pt(P,"RID",h),pt(P,"CVER",22),this.D&&pt(P,"X-HTTP-Session-Id",this.D),Dl(this,P),X&&(this.O?T="headers="+encodeURIComponent(String(uw(X)))+"&"+T:this.m&&zp(P,this.m,X)),Fp(this.h,W),this.Ua&&pt(P,"TYPE","init"),this.P?(pt(P,"$req",T),pt(P,"SID","null"),W.T=!0,Mp(W,P,null)):Mp(W,P,T),this.G=2}}else this.G==3&&(h?mw(this,h):this.i.length==0||Q_(this.h)||mw(this))};function mw(h,T){var P;T?P=T.l:P=h.U++;const M=hi(h.I);pt(M,"SID",h.K),pt(M,"RID",P),pt(M,"AID",h.T),Dl(h,M),h.m&&h.o&&zp(M,h.m,h.o),P=new Wi(h,h.j,P,h.B+1),h.m===null&&(P.H=h.o),T&&(h.i=T.D.concat(h.i)),T=yw(h,P,1e3),P.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Fp(h.h,P),Mp(P,M,T)}function Dl(h,T){h.H&&R(h.H,function(P,M){pt(T,M,P)}),h.l&&tw({},function(P,M){pt(T,M,P)})}function yw(h,T,P){P=Math.min(h.i.length,P);var M=h.l?f(h.l.Na,h.l,h):null;e:{var W=h.i;let X=-1;for(;;){const de=["count="+P];X==-1?0<P?(X=W[0].g,de.push("ofs="+X)):X=0:de.push("ofs="+X);let at=!0;for(let sn=0;sn<P;sn++){let Qe=W[sn].g;const gn=W[sn].map;if(Qe-=X,0>Qe)X=Math.max(0,W[sn].g-100),at=!1;else try{_k(gn,de,"req"+Qe+"_")}catch{M&&M(gn)}}if(at){M=de.join("&");break e}}}return h=h.i.splice(0,P),T.D=h,M}function _w(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;H||B(),j||(H(),j=!0),L.add(T,h),h.v=0}}function Up(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pn(f(h.Fa,h),Sw(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,ww(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pn(f(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ye(10),Wc(this),ww(this))};function $p(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function ww(h){h.g=new Wi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=hi(h.qa);pt(T,"RID","rpc"),pt(T,"SID",h.K),pt(T,"AID",h.T),pt(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&pt(T,"TO",h.ja),pt(T,"TYPE","xmlhttp"),Dl(h,T),h.m&&h.o&&zp(T,h.m,h.o),h.L&&(h.g.I=h.L);var P=h.g;h=h.ia,P.L=1,P.v=Uc(hi(T)),P.m=null,P.P=!0,q_(P,h)}t.Za=function(){this.C!=null&&(this.C=null,Wc(this),Up(this),Ye(19))};function Yc(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Ew(h,T){var P=null;if(h.g==T){Yc(h),$p(h),h.g=null;var M=2}else if(Vp(h.h,T))P=T.D,Z_(h.h,T),M=1;else return;if(h.G!=0){if(T.o)if(M==1){P=T.m?T.m.length:0,T=Date.now()-T.F;var W=h.B;M=kt(),$e(M,new Ir(M,P)),qc(h)}else _w(h);else if(W=T.s,W==3||W==0&&0<T.X||!(M==1&&xk(h,T)||M==2&&Up(h)))switch(P&&0<P.length&&(T=h.h,T.i=T.i.concat(P)),W){case 1:Zs(h,5);break;case 4:Zs(h,10);break;case 3:Zs(h,6);break;default:Zs(h,2)}}}function Sw(h,T){let P=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(P*=2),P*T}function Zs(h,T){if(h.j.info("Error code "+T),T==2){var P=f(h.fb,h),M=h.Xa;const W=!M;M=new Js(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zc(M,"https"),Uc(M),W?vk(M.toString(),P):mk(M.toString(),P)}else Ye(2);h.G=0,h.l&&h.l.sa(T),xw(h),vw(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function xw(h){if(h.G=0,h.ka=[],h.l){const T=ew(h.h);(T.length!=0||h.i.length!=0)&&(S(h.ka,T),S(h.ka,h.i),h.h.i.length=0,m(h.i),h.i.length=0),h.l.ra()}}function Tw(h,T,P){var M=P instanceof Js?hi(P):new Js(P);if(M.g!="")T&&(M.g=T+"."+M.g),Bc(M,M.s);else{var W=a.location;M=W.protocol,T=T?T+"."+W.hostname:W.hostname,W=+W.port;var X=new Js(null);M&&zc(X,M),T&&(X.g=T),W&&Bc(X,W),P&&(X.l=P),M=X}return P=h.D,T=h.ya,P&&T&&pt(M,P,T),pt(M,"VER",h.la),Dl(h,M),M}function Cw(h,T,P){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new Rt(new $c({eb:P})):new Rt(h.pa),T.Ha(h.J),T}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iw(){}t=Iw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kc(){}Kc.prototype.g=function(h,T){return new er(h,T)};function er(h,T){Je.call(this),this.g=new gw(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!y(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!y(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new $o(this)}v(er,Je),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Bp(this.g)},er.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var P={};P.__data__=h,h=P}else this.u&&(P={},P.__data__=St(h),h=P);T.i.push(new ok(T.Ya++,h)),T.G==3&&qc(T)},er.prototype.N=function(){this.g.l=null,delete this.j,Bp(this.g),delete this.g,er.aa.N.call(this)};function bw(h){ze.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){e:{for(const P in T){h=P;break e}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}v(bw,ze);function Rw(){_t.call(this),this.status=1}v(Rw,_t);function $o(h){this.g=h}v($o,Iw),$o.prototype.ua=function(){$e(this.g,"a")},$o.prototype.ta=function(h){$e(this.g,new bw(h))},$o.prototype.sa=function(h){$e(this.g,new Rw)},$o.prototype.ra=function(){$e(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,gb=function(){return new Kc},pb=function(){return kt()},hb=et,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lc.NO_ERROR=0,Lc.TIMEOUT=8,Lc.HTTP_ERROR=6,of=Lc,G_.COMPLETE="complete",fb=G_,Fe.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",Je.prototype.listen=Je.prototype.K,Xl=Fe,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,db=Rt}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore",TE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new X0("@firebase/firestore");function Ko(){return Ao.logLevel}function me(t,...e){if(Ao.logLevel<=Ge.DEBUG){const n=e.map(ly);Ao.debug(`Firestore (${dl}): ${t}`,...n)}}function ji(t,...e){if(Ao.logLevel<=Ge.ERROR){const n=e.map(ly);Ao.error(`Firestore (${dl}): ${t}`,...n)}}function As(t,...e){if(Ao.logLevel<=Ge.WARN){const n=e.map(ly);Ao.warn(`Firestore (${dl}): ${t}`,...n)}}function ly(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vb(t,r,n)}function vb(t,e,n){let r=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ji(r),new Error(r)}function tt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||vb(e,i,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class UV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $V{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ci,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ci)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tt(typeof r.accessToken=="string",31837,{l:r}),new mb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class GV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HV{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WV{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tt(this.o===void 0,3512);const r=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new CE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(tt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=qV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function nm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Ve(r,i);{const s=yb(),o=YV(s.encode(IE(t,n)),s.encode(IE(e,n)));return o!==0?o:Ve(r,i)}}n+=r>65535?2:1}return Ve(t.length,e.length)}function IE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function YV(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ve(t[n],e[n]);return Ve(t.length,e.length)}function $a(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="__name__";class Xr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Pe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Xr.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Xr.isNumericId(e),i=Xr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xr.extractNumericId(e).compare(Xr.extractNumericId(n)):nm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ts.fromString(e.substring(4,e.length-2))}}class dt extends Xr{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const KV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Xr{construct(e,n,r){return new cn(e,n,r)}static isValidIdentifier(e){return KV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bE}static keyField(){return new cn([bE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(n)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(dt.fromString(e))}static fromName(e){return new be(dt.fromString(e).popFirst(5))}static empty(){return new be(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e,n){if(!n)throw new he(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XV(t,e,n,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function RE(t){if(!be.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function AE(t){if(be.isDocumentKey(t))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function Xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(t);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ec(t,e){if(!wb(t))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new he(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,kE=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*kE);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PE)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:Bt("string",vt._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new vt(0,0))}static max(){return new De(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=-1;function QV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new Ps(i,be.empty(),e)}function JV(t){return new Ps(t.readTime,t.key,qu)}class Ps{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ps(De.min(),be.empty(),qu)}static max(){return new Ps(De.max(),be.empty(),qu)}}function ZV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==eF)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function nF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}qh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=-1;function Yh(t){return t==null}function Yf(t){return t===0&&1/t==-1/0}function rF(t){return typeof t=="number"&&Number.isInteger(t)&&!Yf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="";function iF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=DE(e)),e=sF(t.get(n),e);return DE(e)}function sF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Eb:n+="";break;default:n+=s}}return n}function DE(t){return t+Eb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Sb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=s??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ln(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new OE(this.data.getIterator())}getIteratorFrom(e){return new OE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class OE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new rr([])}unionWith(e){let n=new Kt(cn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xb("Invalid base64 string: "+s):s}}(e);return new hn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const oF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(tt(!!t,39018),typeof t=="string"){let e=0;const n=oF.exec(t);if(tt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ds(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="server_timestamp",Cb="__type__",Ib="__previous_value__",bb="__local_write_time__";function dy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Cb])===null||n===void 0?void 0:n.stringValue)===Tb}function Kh(t){const e=t.mapValue.fields[Ib];return dy(e)?Kh(e):e}function Yu(t){const e=ks(t.mapValue.fields[bb].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Kf="(default)";class Ku{constructor(e,n){this.projectId=e,this.database=n||Kf}static empty(){return new Ku("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="__type__",lF="__max__",_d={mapValue:{}},Ab="__vector__",Xf="value";function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dy(t)?4:cF(t)?9007199254740991:uF(t)?10:11:Pe(28295,{value:t})}function ai(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yu(t).isEqual(Yu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ks(i.timestampValue),a=ks(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ds(i.bytesValue).isEqual(Ds(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Dt(i.doubleValue),a=Dt(s.doubleValue);return o===a?Yf(o)===Yf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return $a(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(NE(o)!==NE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ai(o[l],a[l])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function Xu(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function Ga(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Dt(s.integerValue||s.doubleValue),l=Dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ME(t.timestampValue,e.timestampValue);case 4:return ME(Yu(t),Yu(e));case 5:return nm(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ds(s),l=Ds(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Ve(a[u],l[u]);if(c!==0)return c}return Ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ve(Dt(s.latitude),Dt(o.latitude));return a!==0?a:Ve(Dt(s.longitude),Dt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},f=o.fields||{},g=(a=d[Xf])===null||a===void 0?void 0:a.arrayValue,v=(l=f[Xf])===null||l===void 0?void 0:l.arrayValue,m=Ve(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:jE(g,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===_d.mapValue&&o===_d.mapValue)return 0;if(s===_d.mapValue)return 1;if(o===_d.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=nm(l[d],c[d]);if(f!==0)return f;const g=Ga(a[l[d]],u[c[d]]);if(g!==0)return g}return Ve(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{le:n})}}function ME(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=ks(t),r=ks(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function jE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ga(n[i],r[i]);if(s)return s}return Ve(n.length,r.length)}function Ha(t){return rm(t)}function rm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ds(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rm(n.fields[o])}`;return i+"}"}(t.mapValue):Pe(61005,{value:t})}function af(t){switch(Ns(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kh(t);return e?16+af(e):16;case 5:return 2*t.stringValue.length;case 6:return Ds(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+af(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Gs(r.fields,(s,o)=>{i+=s.length+af(o)}),i}(t.mapValue);default:throw Pe(13486,{value:t})}}function LE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function im(t){return!!t&&"integerValue"in t}function fy(t){return!!t&&"arrayValue"in t}function VE(t){return!!t&&"nullValue"in t}function FE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function uF(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[Rb])===null||n===void 0?void 0:n.stringValue)===Ab}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function cF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lF}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=cn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hn(pu(this.value))}}function Pb(t){const e=[];return Gs(t.fields,(n,r)=>{const i=new cn([n]);if(lf(r)){const s=Pb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xn(e,0,De.min(),De.min(),De.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,i){return new xn(e,1,n,De.min(),r,i,0)}static newNoDocument(e,n){return new xn(e,2,n,De.min(),De.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new xn(e,3,n,De.min(),De.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.position=e,this.inclusive=n}}function zE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(o.referenceValue),n.key):r=Ga(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function BE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function dF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{}class Ft extends kb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hF(e,n,r):n==="array-contains"?new vF(e,r):n==="in"?new mF(e,r):n==="not-in"?new yF(e,r):n==="array-contains-any"?new _F(e,r):new Ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pF(e,r):new gF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ga(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ga(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zr extends kb{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new zr(e,n)}matches(e){return Db(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Db(t){return t.op==="and"}function Nb(t){return fF(t)&&Db(t)}function fF(t){for(const e of t.filters)if(e instanceof zr)return!1;return!0}function sm(t){if(t instanceof Ft)return t.field.canonicalString()+t.op.toString()+Ha(t.value);if(Nb(t))return t.filters.map(e=>sm(e)).join(",");{const e=t.filters.map(n=>sm(n)).join(",");return`${t.op}(${e})`}}function Ob(t,e){return t instanceof Ft?function(r,i){return i instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&ai(r.value,i.value)}(t,e):t instanceof zr?function(r,i){return i instanceof zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Ob(o,i.filters[a]),!0):!1}(t,e):void Pe(19439)}function Mb(t){return t instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(t):t instanceof zr?function(n){return n.op.toString()+" {"+n.getFilters().map(Mb).join(" ,")+"}"}(t):"Filter"}class hF extends Ft{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class pF extends Ft{constructor(e,n){super(e,"in",n),this.keys=jb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gF extends Ft{constructor(e,n){super(e,"not-in",n),this.keys=jb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class vF extends Ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fy(n)&&Xu(n.arrayValue,this.value)}}class mF extends Ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xu(this.value.arrayValue,n)}}class yF extends Ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xu(this.value.arrayValue,n)}}class _F extends Ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function UE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new wF(t,e,n,r,i,s,o)}function hy(t){const e=Me(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Yh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ha(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ha(r)).join(",")),e.Pe=n}return e.Pe}function py(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ob(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BE(t.startAt,e.startAt)&&BE(t.endAt,e.endAt)}function om(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function EF(t,e,n,r,i,s,o,a){return new pl(t,e,n,r,i,s,o,a)}function Xh(t){return new pl(t)}function $E(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lb(t){return t.collectionGroup!==null}function gu(t){const e=Me(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(cn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Qu(s,r))}),n.has(cn.keyField().canonicalString())||e.Te.push(new Qu(cn.keyField(),r))}return e.Te}function ni(t){const e=Me(t);return e.Ie||(e.Ie=SF(e,gu(t))),e.Ie}function SF(t,e){if(t.limitType==="F")return UE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qu(i.field,s)});const n=t.endAt?new Qf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Qf(t.startAt.position,t.startAt.inclusive):null;return UE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function am(t,e){const n=t.filters.concat([e]);return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lm(t,e,n){return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qh(t,e){return py(ni(t),ni(e))&&t.limitType===e.limitType}function Vb(t){return`${hy(ni(t))}|lt:${t.limitType}`}function Xo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Mb(i)).join(", ")}]`),Yh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ha(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ha(i)).join(",")),`Target(${r})`}(ni(t))}; limitType=${t.limitType})`}function Jh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of gu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=zE(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,gu(r),i)||r.endAt&&!function(o,a,l){const u=zE(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,gu(r),i))}(t,e)}function xF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fb(t){return(e,n)=>{let r=!1;for(const i of gu(t)){const s=TF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function TF(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ga(l,u):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Sb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new bt(be.comparator);function Li(){return CF}const zb=new bt(be.comparator);function Ql(...t){let e=zb;for(const n of t)e=e.insert(n.key,n);return e}function Bb(t){let e=zb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function po(){return vu()}function Ub(){return vu()}function vu(){return new Lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const IF=new bt(be.comparator),bF=new Kt(be.comparator);function He(...t){let e=bF;for(const n of t)e=e.add(n);return e}const RF=new Kt(Ve);function AF(){return RF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yf(e)?"-0":e}}function $b(t){return{integerValue:""+t}}function PF(t,e){return rF(e)?$b(e):gy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this._=void 0}}function kF(t,e,n){return t instanceof Ju?function(i,s){const o={fields:{[Cb]:{stringValue:Tb},[bb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dy(s)&&(s=Kh(s)),s&&(o.fields[Ib]=s),{mapValue:o}}(n,e):t instanceof Wa?Hb(t,e):t instanceof qa?Wb(t,e):function(i,s){const o=Gb(i,s),a=GE(o)+GE(i.Ee);return im(o)&&im(i.Ee)?$b(a):gy(i.serializer,a)}(t,e)}function DF(t,e,n){return t instanceof Wa?Hb(t,e):t instanceof qa?Wb(t,e):n}function Gb(t,e){return t instanceof Jf?function(r){return im(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ju extends Zh{}class Wa extends Zh{constructor(e){super(),this.elements=e}}function Hb(t,e){const n=qb(e);for(const r of t.elements)n.some(i=>ai(i,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends Zh{constructor(e){super(),this.elements=e}}function Wb(t,e){let n=qb(e);for(const r of t.elements)n=n.filter(i=>!ai(i,r));return{arrayValue:{values:n}}}class Jf extends Zh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function GE(t){return Dt(t.integerValue||t.doubleValue)}function qb(t){return fy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.field=e,this.transform=n}}function NF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wa&&i instanceof Wa||r instanceof qa&&i instanceof qa?$a(r.elements,i.elements,ai):r instanceof Jf&&i instanceof Jf?ai(r.Ee,i.Ee):r instanceof Ju&&i instanceof Ju}(t.transform,e.transform)}class OF{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ep{}function Yb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new my(t.key,_r.none()):new Sc(t.key,t.data,_r.none());{const n=t.data,r=Hn.empty();let i=new Kt(cn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hs(t.key,r,new rr(i.toArray()),_r.none())}}function MF(t,e,n){t instanceof Sc?function(i,s,o){const a=i.value.clone(),l=WE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hs?function(i,s,o){if(!uf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=WE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Kb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,r){return t instanceof Sc?function(s,o,a,l){if(!uf(s.precondition,o))return a;const u=s.value.clone(),c=qE(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hs?function(s,o,a,l){if(!uf(s.precondition,o))return a;const u=qE(s.fieldTransforms,l,o),c=o.data;return c.setAll(Kb(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return uf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Gb(r.transform,i||null);s!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,s))}return n||null}function HE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$a(r,i,(s,o)=>NF(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sc extends ep{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends ep{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Kb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function WE(t,e,n){const r=new Map;tt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,DF(o,a,n[i]))}return r}function qE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,kF(s,o,e))}return r}class my extends ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LF extends ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&MF(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ub();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Yb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(n,r)=>HE(n,r))&&$a(this.baseMutations,e.baseMutations,(n,r)=>HE(n,r))}}class yy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){tt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return IF}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,We;function BF(t){switch(t){case Z.OK:return Pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function Xb(t){if(t===void 0)return ji("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Lt.OK:return Z.OK;case Lt.CANCELLED:return Z.CANCELLED;case Lt.UNKNOWN:return Z.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return Z.INTERNAL;case Lt.UNAVAILABLE:return Z.UNAVAILABLE;case Lt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Lt.NOT_FOUND:return Z.NOT_FOUND;case Lt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Lt.ABORTED:return Z.ABORTED;case Lt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Lt.DATA_LOSS:return Z.DATA_LOSS;default:return Pe(39323,{code:t})}}(We=Lt||(Lt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=new Ts([4294967295,4294967295],0);function YE(t){const e=yb().encode(t),n=new cb;return n.update(e),new Uint8Array(n.digest())}function KE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ts([n,r],0),new Ts([i,s],0)]}class _y{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Ts.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Ts.fromNumber(r)));return i.compare(UF)===1&&(i=new Ts([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=YE(e),[r,i]=KE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new _y(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=YE(e),[r,i]=KE(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tp(De.min(),i,new bt(Ve),Li(),He())}}class xc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xc(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class Qb{constructor(e,n){this.targetId=e,this.De=n}}class Jb{constructor(e,n,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class XE{constructor(){this.ve=0,this.Ce=QE(),this.Fe=hn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=He(),n=He(),r=He();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:s})}}),new xc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=QE()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class $F{constructor(e){this.We=e,this.Ge=new Map,this.ze=Li(),this.je=wd(),this.Je=wd(),this.He=new bt(Ve)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(om(s))if(r===0){const o=new be(s.path);this.Xe(n,o,xn.newNoDocument(o,De.min()))}else tt(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ds(r).toUint8Array()}catch(l){if(l instanceof xb)return As("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _y(o,i,s)}catch(l){return As(l instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&om(a.target)){const l=new be(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,xn.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=He();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new tp(e,n,this.He,this.ze,r);return this.ze=Li(),this.je=wd(),this.Je=wd(),this.He=new bt(Ve),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new XE,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Kt(Ve),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Kt(Ve),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new XE),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function wd(){return new bt(be.comparator)}function QE(){return new bt(be.comparator)}const GF={asc:"ASCENDING",desc:"DESCENDING"},HF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WF={and:"AND",or:"OR"};class qF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function um(t,e){return t.useProto3Json||Yh(e)?e:{value:e}}function Zf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YF(t,e){return Zf(t,e.toTimestamp())}function ri(t){return tt(!!t,49232),De.fromTimestamp(function(n){const r=ks(n);return new vt(r.seconds,r.nanos)}(t))}function wy(t,e){return cm(t,e).canonicalString()}function cm(t,e){const n=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eR(t){const e=dt.fromString(t);return tt(sR(e),10190,{key:e.toString()}),e}function dm(t,e){return wy(t.databaseId,e.path)}function bg(t,e){const n=eR(e);if(n.get(1)!==t.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(nR(n))}function tR(t,e){return wy(t.databaseId,e)}function KF(t){const e=eR(t);return e.length===4?dt.emptyPath():nR(e)}function fm(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nR(t){return tt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function JE(t,e,n){return{name:dm(t,e),fields:n.value.mapValue.fields}}function XF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Pe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(tt(c===void 0||typeof c=="string",58123),hn.fromBase64String(c||"")):(tt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),hn.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Z.UNKNOWN:Xb(u.code);return new he(c,u.message||"")}(o);n=new Jb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bg(t,r.document.name),s=ri(r.document.updateTime),o=r.document.createTime?ri(r.document.createTime):De.min(),a=new Hn({mapValue:{fields:r.document.fields}}),l=xn.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new cf(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bg(t,r.document),s=r.readTime?ri(r.readTime):De.min(),o=xn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new cf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bg(t,r.document),s=r.removedTargetIds||[];n=new cf([],s,i,null)}else{if(!("filter"in e))return Pe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zF(i,s),a=r.targetId;n=new Qb(a,o)}}return n}function QF(t,e){let n;if(e instanceof Sc)n={update:JE(t,e.key,e.value)};else if(e instanceof my)n={delete:dm(t,e.key)};else if(e instanceof Hs)n={update:JE(t,e.key,e.data),updateMask:o4(e.fieldMask)};else{if(!(e instanceof LF))return Pe(16599,{Rt:e.type});n={verify:dm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ju)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jf)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Pe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:YF(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe(27497)}(t,e.precondition)),n}function JF(t,e){return t&&t.length>0?(tt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ri(i.updateTime):ri(s);return o.isEqual(De.min())&&(o=ri(s)),new OF(o,i.transformResults||[])}(n,e))):[]}function ZF(t,e){return{documents:[tR(t,e.path)]}}function e4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tR(t,i);const s=function(u){if(u.length!==0)return iR(zr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:Qo(f.field),direction:r4(f.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=um(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i}}function t4(t){let e=KF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tt(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=rR(d);return f instanceof zr&&Nb(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Qu(Jo(v.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Yh(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,g=d.values||[];return new Qf(g,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,g=d.values||[];return new Qf(g,f)}(n.endAt)),EF(e,i,o,s,a,"F",l,u)}function n4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jo(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jo(n.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jo(n.unaryFilter.field);return Ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jo(n.unaryFilter.field);return Ft.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ft.create(Jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zr.create(n.compositeFilter.filters.map(r=>rR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function r4(t){return GF[t]}function i4(t){return HF[t]}function s4(t){return WF[t]}function Qo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return cn.fromServerFormat(t.fieldPath)}function iR(t){return t instanceof Ft?function(n){if(n.op==="=="){if(FE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NAN"}};if(VE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NAN"}};if(VE(n.value))return{unaryFilter:{field:Qo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qo(n.field),op:i4(n.op),value:n.value}}}(t):t instanceof zr?function(n){const r=n.getFilters().map(i=>iR(i));return r.length===1?r[0]:{compositeFilter:{op:s4(n.op),filters:r}}}(t):Pe(54877,{filter:t})}function o4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,i,s=De.min(),o=De.min(),a=hn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.gt=e}}function l4(t){const e=t4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.Dn=new c4}addToCollectionParentIndex(e,n){return this.Dn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ps.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class c4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oR=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(oR,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ya(0)}static ur(){return new Ya(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="LruGarbageCollector",d4=1048576;function tS([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class f4{constructor(e){this.Tr=e,this.buffer=new Kt(tS),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class h4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){me(eS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hl(n)?me(eS,"Ignoring IndexedDB error during garbage collection: ",n):await fl(n)}await this.Rr(3e5)})}}class p4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(qh.ue);const r=new f4(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(ZE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZE):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Ko()<=Ge.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function g4(t,e){return new p4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.changes=new Lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mu(r.mutation,i,rr.empty(),vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const i=po();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ql();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Li();const o=vu(),a=function(){return vu()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Hs)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),mu(c.mutation,u,c.mutation.getFieldMask(),vt.now())):o.set(u.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new m4(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vu();let i=new bt((o,a)=>o-a),s=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||rr.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||He()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=Ub();c.forEach(f=>{if(!s.has(f)){const g=Yb(n.get(f),r.get(f));g!==null&&d.set(f,g),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return ne.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(po());let a=qu,l=s;return o.next(u=>ne.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?ne.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,He())).next(c=>({batchId:a,changes:Bb(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=Ql();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ql();return this.indexManager.getCollectionParents(e,s).next(a=>ne.forEach(a,l=>{const u=function(d,f){return new pl(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,xn.newInvalidDocument(c)))});let a=Ql();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&mu(c.mutation,u,rr.empty(),vt.now()),Jh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ri(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:l4(i.bundledQuery),readTime:ri(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.overlays=new bt(be.comparator),this.kr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=po();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=po(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new bt((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=po(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=po(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return ne.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FF(n,r));let s=this.kr.get(n);s===void 0&&(s=He(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.qr=new Kt(Jt.Qr),this.$r=new Kt(Jt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Jt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new be(new dt([])),r=new Jt(n,e),i=new Jt(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new be(new dt([])),r=new Jt(n,e),i=new Jt(n,e+1);let s=He();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Jt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return be.comparator(e.key,n.key)||Ve(e.Hr,n.Hr)}static Ur(e,n){return Ve(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Kt(Jt.Qr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VF(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new Jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ne.resolve(o)}lookupMutationBatch(e,n){return ne.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?cy:this.er-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Ve);return n.forEach(i=>{const s=new Jt(i,0),o=new Jt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),ne.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new be(s),0);let a=new Kt(Ve);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},o),ne.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){tt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ne.forEach(n.mutations,i=>{const s=new Jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Jt(n,0),i=this.Yr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ni=e,this.docs=function(){return new bt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(n))}getEntries(e,n){let r=Li();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():xn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Li();const o=n.path,a=new be(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||ZV(JV(c),r)<=0||(i.has(c.key)||Jh(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe(9500)}ri(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new T4(this)}getSize(e){return ne.resolve(this.size)}}class T4 extends v4{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.persistence=e,this.ii=new Lo(n=>hy(n),py),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.si=0,this.oi=new Ey,this.targetCount=0,this._i=Ya.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ne.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ya(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.hr(n),ne.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.ai={},this.overlays={},this.ui=new qh(0),this.ci=!1,this.ci=!0,this.li=new E4,this.referenceDelegate=e(this),this.hi=new C4(this),this.indexManager=new u4,this.remoteDocumentCache=function(i){return new x4(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new a4(n),this.Ti=new _4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new w4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new S4(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new I4(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return ne.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class I4 extends tF{constructor(e){super(),this.currentSequenceNumber=e}}class Sy{constructor(e){this.persistence=e,this.Ai=new Ey,this.Ri=null}static Vi(e){return new Sy(e)}get mi(){if(this.Ri)return this.Ri;throw Pe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.mi,r=>{const i=be.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,De.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return ne.or([()=>ne.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class eh{constructor(e,n){this.persistence=e,this.gi=new Lo(r=>iF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=g4(this,n)}static Vi(e,n){return new eh(e,n)}Ii(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return ne.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?ne.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,De.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),ne.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=af(e.data.value)),n}Sr(e,n,r){return ne.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return ne.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=He(),i=He();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return nM()?8:nF(Cn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new b4;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ko()<=Ge.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Ko()<=Ge.DEBUG&&me("QueryEngine","Query:",Xo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ko()<=Ge.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):ne.resolve())}ps(e,n){if($E(n))return ne.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lm(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=He(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(e,lm(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,i){return $E(n)||i.isEqual(De.min())?ne.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?ne.resolve(null):(Ko()<=Ge.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xo(n)),this.vs(e,o,n,QV(i,qu)).next(a=>a))})}bs(e,n){let r=new Kt(Fb(e));return n.forEach((i,s)=>{Jh(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return Ko()<=Ge.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Xo(n)),this.gs.getDocumentsMatchingQuery(e,n,Ps.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",A4=3e8;class P4{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new bt(Ve),this.Ms=new Lo(s=>hy(s),py),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y4(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function k4(t,e,n,r){return new P4(t,e,n,r)}async function lR(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=He();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:o,addedBatchIds:a}))})})}function D4(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let g=ne.resolve();return f.forEach(v=>{g=g.next(()=>c.getEntry(l,v)).next(m=>{const S=u.docVersions.get(v);tt(S!==null,48541),m.version.compareTo(S)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=He();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function uR(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function N4(t,e){const n=Me(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.hi.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.hi.addMatchingKeys(s,c.addedDocuments,d)));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(hn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(d,g),function(m,S,_){return m.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=A4?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,g,c)&&a.push(n.hi.updateTargetData(s,g))});let l=Li(),u=He();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(O4(s,o,e.documentUpdates).next(c=>{l=c.Ls,u=c.ks})),!r.isEqual(De.min())){const c=n.hi.getLastRemoteSnapshotVersion(s).next(d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return ne.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Fs=i,s))}function O4(t,e,n){let r=He(),i=He();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Li();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(De.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):me(Ty,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function M4(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j4(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new cs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function hm(t,e,n){const r=Me(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!hl(o))throw o;me(Ty,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function nS(t,e,n){const r=Me(t);let i=De.min(),s=He();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Me(l),f=d.Ms.get(c);return f!==void 0?ne.resolve(d.Fs.get(f)):d.hi.getTargetData(u,c)}(r,o,ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:De.min(),n?s:He())).next(a=>(L4(r,xF(e),a),{documents:a,qs:s})))}function L4(t,e,n){let r=t.xs.get(e)||De.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class rS{constructor(){this.activeTargetIds=AF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V4{constructor(){this.Fo=new rS,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new rS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="ConnectivityMonitor";class sS{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){me(iS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){me(iS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ed=null;function pm(){return Ed===null?Ed=function(){return 268435456+Math.round(2147483648*Math.random())}():Ed++,"0x"+Ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="RestConnection",z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class B4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Kf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=pm(),a=this.Go(e,n.toUriEncodedString());me(Rg,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),c=ll(u);return this.jo(e,a,l,r,c).then(d=>(me(Rg,`Received RPC '${e}' ${o}: `,d),d),d=>{throw As(Rg,`RPC '${e}' ${o} failed with error: `,d,"url: ",a,"request:",r),d})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=z4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class $4 extends B4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=pm();return new Promise((a,l)=>{const u=new db;u.setWithCredentials(!0),u.listenOnce(fb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case of.NO_ERROR:const d=u.getResponseJson();me(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),a(d);break;case of.TIMEOUT:me(_n,`RPC '${e}' ${o} timed out`),l(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const f=u.getStatus();if(me(_n,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const m=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(y)>=0?y:Z.UNKNOWN}(v.status);l(new he(m,v.message))}else l(new he(Z.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{c_:e,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{me(_n,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);me(_n,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}P_(e,n,r){const i=pm(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gb(),a=pb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");me(_n,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.T_(d);let f=!1,g=!1;const v=new U4({Ho:S=>{g?me(_n,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(f||(me(_n,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),me(_n,`RPC '${e}' stream ${i} sending:`,S),d.send(S))},Yo:()=>d.close()}),m=(S,_,y)=>{S.listen(_,E=>{try{y(E)}catch(I){setTimeout(()=>{throw I},0)}})};return m(d,Xl.EventType.OPEN,()=>{g||(me(_n,`RPC '${e}' stream ${i} transport opened.`),v.s_())}),m(d,Xl.EventType.CLOSE,()=>{g||(g=!0,me(_n,`RPC '${e}' stream ${i} transport closed`),v.__(),this.I_(d))}),m(d,Xl.EventType.ERROR,S=>{g||(g=!0,As(_n,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),v.__(new he(Z.UNAVAILABLE,"The operation could not be completed")))}),m(d,Xl.EventType.MESSAGE,S=>{var _;if(!g){const y=S.data[0];tt(!!y,16349);const E=y,I=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(I){me(_n,`RPC '${e}' stream ${i} received error:`,I);const N=I.status;let R=function(C){const b=Lt[C];if(b!==void 0)return Xb(b)}(N),x=I.message;R===void 0&&(R=Z.INTERNAL,x="Unknown error status: "+N+" with message "+I.message),g=!0,v.__(new he(R,x)),d.close()}else me(_n,`RPC '${e}' stream ${i} received:`,y),v.a_(y)}}),m(a,hb.STAT_EVENT,S=>{S.stat===tm.PROXY?me(_n,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===tm.NOPROXY&&me(_n,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.o_()},0),v}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Ag(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){return new qF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="PersistentStream";class dR{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cR(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ji(n.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return me(oS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(me(oS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G4 extends dR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=XF(this.serializer,e),r=function(s){if(!("targetChange"in s))return De.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?De.min():o.readTime?ri(o.readTime):De.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=fm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=om(l)?{documents:ZF(s,l)}:{query:e4(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Zb(s,o.resumeToken);const u=um(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(De.min())>0){a.readTime=Zf(s,o.snapshotVersion.toTimestamp());const u=um(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=n4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=fm(this.serializer),n.removeTarget=e,this.k_(n)}}class H4 extends dR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=JF(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=fm(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{}class q4 extends W4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,cm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(Z.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,cm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Y4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ji(n),this._a=!1):me("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="RemoteStore";class K4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{Vo(this)&&(me(Po,"Restarting streams for network reachability change."),await async function(l){const u=Me(l);u.Ia.add(4),await Tc(u),u.Aa.set("Unknown"),u.Ia.delete(4),await rp(u)}(this))})}),this.Aa=new Y4(r,i)}}async function rp(t){if(Vo(t))for(const e of t.da)await e(!0)}async function Tc(t){for(const e of t.da)await e(!1)}function fR(t,e){const n=Me(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ry(n)?by(n):gl(n).x_()&&Iy(n,e))}function Cy(t,e){const n=Me(t),r=gl(n);n.Ta.delete(e),r.x_()&&hR(n,e),n.Ta.size===0&&(r.x_()?r.B_():Vo(n)&&n.Aa.set("Unknown"))}function Iy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(t).H_(e)}function hR(t,e){t.Ra.$e(e),gl(t).Y_(e)}function by(t){t.Ra=new $F({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),gl(t).start(),t.Aa.aa()}function Ry(t){return Vo(t)&&!gl(t).M_()&&t.Ta.size>0}function Vo(t){return Me(t).Ia.size===0}function pR(t){t.Ra=void 0}async function X4(t){t.Aa.set("Online")}async function Q4(t){t.Ta.forEach((e,n)=>{Iy(t,e)})}async function J4(t,e){pR(t),Ry(t)?(t.Aa.la(e),by(t)):t.Aa.set("Unknown")}async function Z4(t,e,n){if(t.Aa.set("Online"),e instanceof Jb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){me(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await th(t,r)}else if(e instanceof cf?t.Ra.Ye(e):e instanceof Qb?t.Ra.it(e):t.Ra.et(e),!n.isEqual(De.min()))try{const r=await uR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ta.get(u);c&&s.Ta.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Ta.get(l);if(!c)return;s.Ta.set(l,c.withResumeToken(hn.EMPTY_BYTE_STRING,c.snapshotVersion)),hR(s,l);const d=new cs(c.target,l,u,c.sequenceNumber);Iy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){me(Po,"Failed to raise snapshot:",r),await th(t,r)}}async function th(t,e,n){if(!hl(e))throw e;t.Ia.add(1),await Tc(t),t.Aa.set("Offline"),n||(n=()=>uR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(Po,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await rp(t)})}function gR(t,e){return e().catch(n=>th(t,n,e))}async function ip(t){const e=Me(t),n=Os(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:cy;for(;e3(e);)try{const i=await M4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,t3(e,i)}catch(i){await th(e,i)}vR(e)&&mR(e)}function e3(t){return Vo(t)&&t.Pa.length<10}function t3(t,e){t.Pa.push(e);const n=Os(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function vR(t){return Vo(t)&&!Os(t).M_()&&t.Pa.length>0}function mR(t){Os(t).start()}async function n3(t){Os(t).na()}async function r3(t){const e=Os(t);for(const n of t.Pa)e.X_(n.mutations)}async function i3(t,e,n){const r=t.Pa.shift(),i=yy.from(r,e,n);await gR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ip(t)}async function s3(t,e){e&&Os(t).Z_&&await async function(r,i){if(function(o){return BF(o)&&o!==Z.ABORTED}(i.code)){const s=r.Pa.shift();Os(r).N_(),await gR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ip(r)}}(t,e),vR(t)&&mR(t)}async function aS(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),me(Po,"RemoteStore received new credentials");const r=Vo(n);n.Ia.add(3),await Tc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await rp(n)}async function o3(t,e){const n=Me(t);e?(n.Ia.delete(2),await rp(n)):e||(n.Ia.add(2),await Tc(n),n.Aa.set("Unknown"))}function gl(t){return t.Va||(t.Va=function(n,r,i){const s=Me(n);return s.ia(),new G4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:X4.bind(null,t),e_:Q4.bind(null,t),n_:J4.bind(null,t),J_:Z4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ry(t)?by(t):t.Aa.set("Unknown")):(await t.Va.stop(),pR(t))})),t.Va}function Os(t){return t.ma||(t.ma=function(n,r,i){const s=Me(n);return s.ia(),new H4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:n3.bind(null,t),n_:s3.bind(null,t),ea:r3.bind(null,t),ta:i3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await ip(t)):(await t.ma.stop(),t.Pa.length>0&&(me(Po,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ay(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(t,e){if(ji("AsyncQueue",`${e}: ${t}`),hl(t))return new he(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{static emptySet(e){return new Aa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Ql(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.fa=new bt(be.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Pe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ka{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ka(e,n,Aa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class l3{constructor(){this.queries=uS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Me(n),s=i.queries;i.queries=uS(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function uS(){return new Lo(t=>Vb(t),Qh)}async function ky(t,e){const n=Me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new a3,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Py(o,`Initialization of query '${Xo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Ny(n)}async function Dy(t,e){const n=Me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u3(t,e){const n=Me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Ny(n)}function c3(t,e,n){const r=Me(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Ny(t){t.Da.forEach(e=>{e.next()})}var gm,cS;(cS=gm||(gm={})).Fa="default",cS.Cache="cache";class Oy{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.key=e}}class _R{constructor(e){this.key=e}}class d3{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=He(),this.mutatedKeys=He(),this.Xa=Fb(e),this.eu=new Aa(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new lS,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),g=Jh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),m=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;f&&g?f.data.isEqual(g.data)?v!==m&&(r.track({type:3,doc:g}),S=!0):this.iu(f,g)||(r.track({type:2,doc:g}),S=!0,(l&&this.Xa(g,l)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),S=!0):f&&!g&&(r.track({type:1,doc:f}),S=!0,(l||u)&&(a=!0)),S&&(g?(o=o.add(g),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((c,d)=>function(g,v){const m=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{At:S})}};return m(g)-m(v)}(c.type,d.type)||this.Xa(c.doc,d.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new Ka(this.query,e.eu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new lS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=He(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new _R(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new yR(r))}),n}uu(e){this.Ha=e.qs,this.Za=He();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ka.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const My="SyncEngine";class f3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h3{constructor(e){this.key=e,this.lu=!1}}class p3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Lo(a=>Vb(a),Qh),this.Tu=new Map,this.Iu=new Set,this.du=new bt(be.comparator),this.Eu=new Map,this.Au=new Ey,this.Ru={},this.Vu=new Map,this.mu=Ya.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function g3(t,e,n=!0){const r=CR(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await wR(r,e,n,!0),i}async function v3(t,e){const n=CR(t);await wR(n,e,!0,!1)}async function wR(t,e,n,r){const i=await j4(t.localStore,ni(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await m3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&fR(t.remoteStore,i),a}async function m3(t,e,n,r,i){t.gu=(d,f,g)=>async function(m,S,_,y){let E=S.view.nu(_);E.Ds&&(E=await nS(m.localStore,S.query,!1).then(({documents:x})=>S.view.nu(x,E)));const I=y&&y.targetChanges.get(S.targetId),N=y&&y.targetMismatches.get(S.targetId)!=null,R=S.view.applyChanges(E,m.isPrimaryClient,I,N);return fS(m,S.targetId,R._u),R.snapshot}(t,d,f,g);const s=await nS(t.localStore,e,!0),o=new d3(e,s.qs),a=o.nu(s.documents),l=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);fS(t,n,u._u);const c=new f3(e,n,o);return t.Pu.set(e,c),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function y3(t,e,n){const r=Me(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Qh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cy(r.remoteStore,i.targetId),vm(r,i.targetId)}).catch(fl)):(vm(r,i.targetId),await hm(r.localStore,i.targetId,!0))}async function _3(t,e){const n=Me(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cy(n.remoteStore,r.targetId))}async function w3(t,e,n){const r=b3(t);try{const i=await function(o,a){const l=Me(o),u=vt.now(),c=a.reduce((g,v)=>g.add(v.key),He());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Li(),m=He();return l.Os.getEntries(g,c).next(S=>{v=S,v.forEach((_,y)=>{y.isValidDocument()||(m=m.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(S=>{d=S;const _=[];for(const y of a){const E=jF(y,d.get(y.key).overlayedDocument);E!=null&&_.push(new Hs(y.key,E,Pb(E.value.mapValue),_r.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,_,a)}).next(S=>{f=S;const _=S.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(g,S.batchId,_)})}).then(()=>({batchId:f.batchId,changes:Bb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new bt(Ve)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u}(r,i.batchId,n),await Cc(r,i.changes),await ip(r.remoteStore)}catch(i){const s=Py(i,"Failed to persist write");n.reject(s)}}async function ER(t,e){const n=Me(t);try{const r=await N4(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?tt(o.lu,14607):i.removedDocuments.size>0&&(tt(o.lu,42227),o.lu=!1))}),await Cc(n,r,e)}catch(r){await fl(r)}}function dS(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Me(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.wa)f.va(a)&&(u=!0)}),u&&Ny(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E3(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new bt(be.comparator);o=o.insert(s,xn.newNoDocument(s,De.min()));const a=He().add(s),l=new tp(De.min(),new Map,new bt(Ve),o,a);await ER(r,l),r.du=r.du.remove(s),r.Eu.delete(e),jy(r)}else await hm(r.localStore,e,!1).then(()=>vm(r,e,n)).catch(fl)}async function S3(t,e){const n=Me(t),r=e.batch.batchId;try{const i=await D4(n.localStore,e);xR(n,r,null),SR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cc(n,i)}catch(i){await fl(i)}}async function x3(t,e,n){const r=Me(t);try{const i=await function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(tt(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);xR(r,e,n),SR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cc(r,i)}catch(i){await fl(i)}}function SR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function xR(t,e,n){const r=Me(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||TR(t,r)})}function TR(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Cy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),jy(t))}function fS(t,e,n){for(const r of n)r instanceof yR?(t.Au.addReference(r.key,e),T3(t,r)):r instanceof _R?(me(My,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||TR(t,r.key)):Pe(19791,{yu:r})}function T3(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(me(My,"New document in limbo: "+n),t.Iu.add(r),jy(t))}function jy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new be(dt.fromString(e)),r=t.mu.next();t.Eu.set(r,new h3(n)),t.du=t.du.insert(n,r),fR(t.remoteStore,new cs(ni(Xh(n.path)),r,"TargetPurposeLimboResolution",qh.ue))}}async function Cc(t,e,n){const r=Me(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=xy.Es(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,u){const c=Me(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>ne.forEach(u,f=>ne.forEach(f.Is,g=>c.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>ne.forEach(f.ds,g=>c.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!hl(d))throw d;me(Ty,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const g=c.Fs.get(f),v=g.snapshotVersion,m=g.withLastLimboFreeSnapshotVersion(v);c.Fs=c.Fs.insert(f,m)}}}(r.localStore,s))}async function C3(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){me(My,"User change. New user:",e.toKey());const r=await lR(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new he(Z.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cc(n,r.Bs)}}function I3(t,e){const n=Me(t),r=n.Eu.get(e);if(r&&r.lu)return He().add(r.key);{let i=He();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function CR(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ER.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E3.bind(null,e),e.hu.J_=u3.bind(null,e.eventManager),e.hu.pu=c3.bind(null,e.eventManager),e}function b3(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x3.bind(null,e),e}class nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=np(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return k4(this.persistence,new R4,e.initialUser,this.serializer)}Du(e){return new aR(Sy.Vi,this.serializer)}bu(e){return new V4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nh.provider={build:()=>new nh};class R3 extends nh{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){tt(this.persistence.referenceDelegate instanceof eh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new h4(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new aR(r=>eh.Vi(r,n),this.serializer)}}class mm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C3.bind(null,this.syncEngine),await o3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new l3}()}createDatastore(e){const n=np(e.databaseInfo.databaseId),r=function(s){return new $4(s)}(e.databaseInfo);return function(s,o,a,l){return new q4(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new K4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dS(this.syncEngine,n,0),function(){return sS.C()?new sS:new F4}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new p3(i,s,o,a,l,u);return c&&(d.fu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Me(i);me(Po,"RemoteStore shutting down."),s.Ia.add(5),await Tc(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mm.provider={build:()=>new mm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ji("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class A3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=uy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{me(Ms,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(me(Ms,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Py(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Pg(t,e){t.asyncQueue.verifyOperationInProgress(),me(Ms,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{me("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{As("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function hS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await P3(t);me(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>aS(e.remoteStore,i)),t._onlineComponents=e}async function P3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Ms,"Using user provided OfflineComponentProvider");try{await Pg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await Pg(t,new nh)}}else me(Ms,"Using default OfflineComponentProvider"),await Pg(t,new R3(void 0));return t._offlineComponents}async function IR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Ms,"Using user provided OnlineComponentProvider"),await hS(t,t._uninitializedComponentsProvider._online)):(me(Ms,"Using default OnlineComponentProvider"),await hS(t,new mm))),t._onlineComponents}function k3(t){return IR(t).then(e=>e.syncEngine)}async function rh(t){const e=await IR(t),n=e.eventManager;return n.onListen=g3.bind(null,e.syncEngine),n.onUnlisten=y3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_3.bind(null,e.syncEngine),n}function D3(t,e,n={}){const r=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Ly({next:f=>{c.Ou(),o.enqueueAndForget(()=>Dy(s,d));const g=f.docs.has(a);!g&&f.fromCache?u.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?u.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Oy(Xh(a.path),c,{includeMetadataChanges:!0,ka:!0});return ky(s,d)}(await rh(t),t.asyncQueue,e,n,r)),r.promise}function N3(t,e,n={}){const r=new Ci;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Ly({next:f=>{c.Ou(),o.enqueueAndForget(()=>Dy(s,d)),f.fromCache&&l.source==="server"?u.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Oy(a,c,{includeMetadataChanges:!0,ka:!0});return ky(s,d)}(await rh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="firestore.googleapis.com",gS=!0;class vS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RR,this.ssl=gS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:gS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d4)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BV;switch(r.type){case"firstParty":return new HV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pS.get(n);r&&(me("ComponentProvider","Removing Datastore"),pS.delete(n),r.terminate())}(this),Promise.resolve()}}function O3(t,e,n,r={}){var i;t=Xn(t,sp);const s=ll(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(EI(`https://${l}`),SI("Firestore",!0)),o.host!==RR&&o.host!==l&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!Ni(u,a)&&(t._setSettings(u),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=En.MOCK_USER;else{c=qO(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new En(f)}t._authCredentials=new UV(new mb(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ws(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ec(n,Pt._jsonSchema))return new Pt(e,r||null,new be(dt.fromString(n.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:Bt("string",Pt._jsonSchemaVersion),referencePath:Bt("string")};class Cs extends Ws{constructor(e,n,r){super(e,n,Xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new be(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function Wr(t,e,...n){if(t=Ut(t),_b("collection","path",e),t instanceof sp){const r=dt.fromString(e,...n);return AE(r),new Cs(t,null,r)}{if(!(t instanceof Pt||t instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return AE(r),new Cs(t.firestore,null,r)}}function ht(t,e,...n){if(t=Ut(t),arguments.length===1&&(e=uy.newId()),_b("doc","path",e),t instanceof sp){const r=dt.fromString(e,...n);return RE(r),new Pt(t,null,new be(r))}{if(!(t instanceof Pt||t instanceof Cs))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return RE(r),new Pt(t.firestore,t instanceof Cs?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="AsyncQueue";class yS{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cR(this,"async_queue_retry"),this.oc=()=>{const r=Ag();r&&me(mS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Ag();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Ag();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new Ci;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hl(e))throw e;me(mS,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ji("INTERNAL UNHANDLED ERROR: ",_S(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ay.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&Pe(47125,{hc:_S(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function _S(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Vi extends sp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yS(e),this._firestoreClient=void 0,await e}}}function M3(t,e){const n=typeof t=="object"?t:II(),r=typeof t=="string"?t:Kf,i=J0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=HO("firestore");s&&O3(i,...s)}return i}function op(t){if(t._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j3(t),t._firestoreClient}function j3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new aF(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,bR(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new A3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(hn.fromBase64String(e))}catch(n){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:Bt("string",vr._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Bt("string",ii._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new si(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:Bt("string",si._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=/^__.*__$/;class V3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sc(e,this.data,n,this.fieldTransforms)}}class AR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ec:t})}}class lp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ih(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(PR(this.Ec)&&L3.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class F3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||np(e)}Dc(e,n,r,i=!1){return new lp({Ec:e,methodName:n,bc:r,path:cn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function up(t){const e=t._freezeSettings(),n=np(t._databaseId);return new F3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kR(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);By("Data must be an object, but it was:",o,r);const a=NR(r,o);let l,u;if(s.merge)l=new rr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=ym(e,d,n);if(!o.contains(f))throw new he(Z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);MR(c,f)||c.push(f)}l=new rr(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new V3(new Hn(a),l,u)}class cp extends vl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cp}}function DR(t,e,n){return new lp({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Vy extends vl{_toFieldTransform(e){return new vy(e.path,new Ju)}isEqual(e){return e instanceof Vy}}class Fy extends vl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=DR(this,e,!0),r=this.vc.map(s=>Fo(s,n)),i=new Wa(r);return new vy(e.path,i)}isEqual(e){return e instanceof Fy&&Ni(this.vc,e.vc)}}class zy extends vl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=DR(this,e,!0),r=this.vc.map(s=>Fo(s,n)),i=new qa(r);return new vy(e.path,i)}isEqual(e){return e instanceof zy&&Ni(this.vc,e.vc)}}function z3(t,e,n,r){const i=t.Dc(1,e,n);By("Data must be an object, but it was:",i,r);const s=[],o=Hn.empty();Gs(r,(l,u)=>{const c=Uy(e,l,n);u=Ut(u);const d=i.gc(c);if(u instanceof cp)s.push(c);else{const f=Fo(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new rr(s);return new AR(o,a,i.fieldTransforms)}function B3(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[ym(e,r,n)],l=[i];if(s.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(ym(e,s[f])),l.push(s[f+1]);const u=[],c=Hn.empty();for(let f=a.length-1;f>=0;--f)if(!MR(u,a[f])){const g=a[f];let v=l[f];v=Ut(v);const m=o.gc(g);if(v instanceof cp)u.push(g);else{const S=Fo(v,m);S!=null&&(u.push(g),c.set(g,S))}}const d=new rr(u);return new AR(c,d,o.fieldTransforms)}function U3(t,e,n,r=!1){return Fo(n,t.Dc(r?4:3,e))}function Fo(t,e){if(OR(t=Ut(t)))return By("Unsupported field value:",e,t),NR(t,e);if(t instanceof vl)return function(r,i){if(!PR(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Fo(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=vt.fromDate(r);return{timestampValue:Zf(i.serializer,s)}}if(r instanceof vt){const s=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zf(i.serializer,s)}}if(r instanceof ii)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vr)return{bytesValue:Zb(i.serializer,r._byteString)};if(r instanceof Pt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof si)return function(o,a){return{mapValue:{fields:{[Rb]:{stringValue:Ab},[Xf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return gy(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Wh(r)}`)}(t,e)}function NR(t,e){const n={};return Sb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,i)=>{const s=Fo(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function OR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof ii||t instanceof vr||t instanceof Pt||t instanceof vl||t instanceof si)}function By(t,e,n){if(!OR(n)||!wb(n)){const r=Wh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function ym(t,e,n){if((e=Ut(e))instanceof ap)return e._internalPath;if(typeof e=="string")return Uy(t,e);throw ih("Field path arguments must be of type string or ",t,!1,void 0,n)}const $3=new RegExp("[~\\*/\\[\\]]");function Uy(t,e,n){if(e.search($3)>=0)throw ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ih(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new he(Z.INVALID_ARGUMENT,a+t+l)}function MR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G3 extends jR{data(){return super.data()}}function dp(t,e){return typeof e=="string"?Uy(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $y{}class VR extends $y{}function Zo(t,e,...n){let r=[];e instanceof $y&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Gy).length,a=s.filter(l=>l instanceof fp).length;if(o>1||o>0&&a>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class fp extends VR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fp(e,n,r)}_apply(e){const n=this._parse(e);return zR(e._query,n),new Ws(e.firestore,e.converter,am(e._query,n))}_parse(e){const n=up(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){SS(d,c);const v=[];for(const m of d)v.push(ES(l,s,m));f={arrayValue:{values:v}}}else f=ES(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||SS(d,c),f=U3(a,o,d,c==="in"||c==="not-in");return Ft.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sd(t,e,n){const r=e,i=dp("where",t);return fp._create(i,r,n)}class Gy extends $y{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gy(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)zR(o,l),o=am(o,l)}(e._query,n),new Ws(e.firestore,e.converter,am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hy extends VR{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hy(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qu(s,o)}(e._query,this._field,this._direction);return new Ws(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new pl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function FR(t,e="asc"){const n=e,r=dp("orderBy",t);return Hy._create(r,n)}function ES(t,e,n){if(typeof(n=Ut(n))=="string"){if(n==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lb(e)&&n.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(dt.fromString(n));if(!be.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LE(t,new be(r))}if(n instanceof Pt)return LE(t,n._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function SS(t,e){if(!Array.isArray(t)||t.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zR(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class H3{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Xf].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Dt(o.doubleValue));return new si(s)}convertGeoPoint(e){return new ii(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Kh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yu(e));default:return null}}convertTimestamp(e){const n=ks(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);tt(sR(r),9688,{name:e});const i=new Ku(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||ji(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends jR{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:Bt("string",yo._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class df extends yo{data(e={}){return super.data(e)}}class _o{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new df(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new df(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new df(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:W3(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_o._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t){t=Xn(t,Pt);const e=Xn(t.firestore,Vi);return D3(op(e),t._key).then(n=>GR(e,t,n))}_o._jsonSchemaVersion="firestore/querySnapshot/1.0",_o._jsonSchema={type:Bt("string",_o._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Wy extends H3{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function ml(t){t=Xn(t,Ws);const e=Xn(t.firestore,Vi),n=op(e),r=new Wy(e);return LR(t._query),N3(n,t._query).then(i=>new _o(e,r,t,i))}function Gi(t,e,n){t=Xn(t,Pt);const r=Xn(t.firestore,Vi),i=BR(t.converter,e,n);return hp(r,[kR(up(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,_r.none())])}function js(t,e,n,...r){t=Xn(t,Pt);const i=Xn(t.firestore,Vi),s=up(i);let o;return o=typeof(e=Ut(e))=="string"||e instanceof ap?B3(s,"updateDoc",t._key,e,n,r):z3(s,"updateDoc",t._key,e),hp(i,[o.toMutation(t._key,_r.exists(!0))])}function UR(t){return hp(Xn(t.firestore,Vi),[new my(t._key,_r.none())])}function $R(t,e){const n=Xn(t.firestore,Vi),r=ht(t),i=BR(t.converter,e);return hp(n,[kR(up(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}function sh(t,...e){var n,r,i;t=Ut(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wS(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wS(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof Pt)u=Xn(t.firestore,Vi),c=Xh(t._key.path),l={next:d=>{e[o]&&e[o](GR(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Xn(t,Ws);u=Xn(d.firestore,Vi),c=d._query;const f=new Wy(u);l={next:g=>{e[o]&&e[o](new _o(u,f,d,g))},error:e[o+1],complete:e[o+2]},LR(t._query)}return function(f,g,v,m){const S=new Ly(m),_=new Oy(g,S,v);return f.asyncQueue.enqueueAndForget(async()=>ky(await rh(f),_)),()=>{S.Ou(),f.asyncQueue.enqueueAndForget(async()=>Dy(await rh(f),_))}}(op(u),c,a,l)}function hp(t,e){return function(r,i){const s=new Ci;return r.asyncQueue.enqueueAndForget(async()=>w3(await k3(r),i,s)),s.promise}(op(t),e)}function GR(t,e,n){const r=n.docs.get(e._key),i=new Wy(t);return new yo(t,i,e._key,r,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}function pp(){return new Vy("serverTimestamp")}function qy(...t){return new Fy("arrayUnion",t)}function Yy(...t){return new zy("arrayRemove",t)}(function(e,n=!0){(function(i){dl=i})(ul),Ba(new Io("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Vi(new $V(r.getProvider("auth-internal")),new WV(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),xs(xE,TE,e),xs(xE,TE,"esm2017")})();const q3={apiKey:"AIzaSyBYY694nCtOOSKO4rTnYc_jqWqcibc3r5k",authDomain:"mehko-ai.firebaseapp.com",projectId:"mehko-ai"},HR=CI(q3),Pa=FV(HR),qe=M3(HR),WR=D.createContext();function Y3({children:t}){const[e,n]=D.useState(null),[r,i]=D.useState(!0),[s,o]=D.useState(!1);D.useEffect(()=>bL(Pa,async d=>{if(n(d),d)try{if((await d.getIdTokenResult()).claims.admin===!0)o(!0);else{const g=await li(ht(qe,"users",d.uid));g.exists()&&g.data().role==="admin"?o(!0):o(!1)}}catch(f){console.error("Error checking admin status:",f),o(!1)}else o(!1);i(!1)}),[]);const a=(c,d)=>ZI(Pa,c,d),l=()=>RL(Pa),u=async()=>{if(!e)return!1;try{if((await e.getIdTokenResult()).claims.admin===!0)return o(!0),!0;const d=await li(ht(qe,"users",e.uid));return d.exists()&&d.data().role==="admin"?(o(!0),!0):(o(!1),!1)}catch(c){return console.error("Error checking admin status:",c),o(!1),!1}};return p.jsx(WR.Provider,{value:{user:e,loading:r,login:a,logout:l,isAdmin:s,checkAdminStatus:u},children:t})}function bn(){return D.useContext(WR)}const qR=D.createContext(),YR=()=>{const t=D.useContext(qR);if(!t)throw new Error("useAuthModal must be used within an AuthModalProvider");return t},K3=({children:t})=>{const[e,n]=D.useState(!1),s={isOpen:e,openAuthModal:()=>n(!0),closeAuthModal:()=>n(!1)};return p.jsx(qR.Provider,{value:s,children:t})};function X3(){const[t,e]=D.useState({}),[n,r]=D.useState({}),[i,s]=D.useState({});return{collapsedApps:t,collapsedSteps:n,collapsedSupport:i,setCollapsedApps:e,setCollapsedSteps:r,setCollapsedSupport:s,toggle:(a,l,u,c=null)=>{a(d=>({...d,[u]:c!==null?c:!d[u]}))}}}const Q3=({applications:t,activeApplicationId:e,onRemove:n,activeSection:r,setActiveSection:i,onSelect:s,onStepSelect:o,selectedStepId:a,allProgress:l={},getProgressPercentage:u,mobileOpen:c=!1,onMobileClose:d})=>{const{collapsedApps:f,collapsedSteps:g,collapsedSupport:v,setCollapsedApps:m,setCollapsedSteps:S,setCollapsedSupport:_,toggle:y}=X3(),{isAdmin:E}=bn();return p.jsxs("div",{className:`sidebar ${c?"mobile-open":""}`,children:[p.jsxs("div",{className:"sidebar-header",children:[p.jsx("h3",{children:"Your Applications"}),E&&p.jsx("div",{className:"admin-indicator",children:p.jsx("span",{className:"admin-badge",children:"👑"})}),c&&d&&p.jsx("button",{className:"mobile-close-btn",onClick:d,style:{background:"transparent",border:"none",fontSize:"18px",cursor:"pointer",padding:"4px",borderRadius:"4px",color:"#6b7280"},title:"Close menu",children:"✕"})]}),p.jsx("ul",{className:"sidebar-list",children:t.map(I=>{var F,G,Y,H;const N=I.id===e,R=f[I.id],x=g[I.id],w=v[I.id],C=((F=I.steps)==null?void 0:F.length)||0,b=l[I.id]||[],k=b.length,O=u?u(I.id,C):0;console.log(`Sidebar progress for ${I.id}:`,{totalSteps:C,completedSteps:b,completeCount:k,percent:O,allProgress:l[I.id]});const A=!!((G=I.supportTools)!=null&&G.commentsEnabled);return p.jsxs("div",{className:"sidebar-item-wrapper",onClick:()=>{s(I.id),c&&d&&d()},children:[p.jsxs("div",{className:`sidebar-item ${N?"active":""}`,children:[p.jsx("div",{className:"sidebar-app-title",children:I.title}),p.jsxs("div",{className:"sidebar-progress",children:[p.jsx("div",{className:"sidebar-progress-bar",children:p.jsx("div",{className:"sidebar-progress-fill",style:{width:`${O}%`}})}),p.jsxs("div",{className:"progress-info",children:[p.jsxs("small",{children:[k," of ",C," steps complete"]}),p.jsxs("small",{className:"progress-percent",children:[O,"%"]})]})]}),N&&p.jsxs("div",{className:"sidebar-controls",children:[p.jsx("button",{className:"collapse-btn",onClick:j=>{j.stopPropagation(),y(m,f,I.id)},title:R?"Expand":"Collapse",children:R?"▶":"▼"}),k===0&&p.jsx("button",{className:"remove-btn",onClick:j=>{j.stopPropagation(),n(I.id)},title:"Remove Application",children:"✕"})]})]}),!R&&N&&p.jsxs("div",{className:"sidebar-sublist",style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"60vh"},children:[p.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[p.jsxs("li",{className:r==="overview"?"active-nav":"",onClick:j=>{j.stopPropagation(),i("overview"),y(S,g,I.id,!0),y(_,v,I.id,!0)},children:["Overview (",((Y=I.steps)==null?void 0:Y.length)||0," steps)"]}),p.jsx("li",{className:"sidebar-section-label",children:p.jsxs("span",{className:"collapsible-section",onClick:j=>{j.stopPropagation(),y(S,g,I.id)},children:[x?"▶":"▼"," Steps"]})})]}),p.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,flex:1,overflowY:"auto"},children:!x&&((H=I.steps)==null?void 0:H.map((j,L)=>{const B=j.id||j._id||String(L),$=r==="steps"&&a===B;return p.jsxs("li",{className:`step-item ${$?"active-nav":""} ${(l[I.id]||[]).includes(B)?"completed":""}`,onClick:K=>{K.stopPropagation(),o&&o(B)},children:[p.jsxs("div",{className:"step-content",children:[p.jsx("span",{className:"step-icon",children:j.type==="form"?"📝":j.type==="pdf"?"📄":"ℹ️"}),p.jsxs("span",{className:"step-title",children:["Step ",L+1,": ",j.title]})]}),(l[I.id]||[]).includes(B)&&p.jsx("span",{className:"step-status",children:"✓"})]},B)}))}),A&&p.jsx("div",{style:{borderTop:"1px solid #eee",padding:"8px 12px",flexShrink:0},children:p.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[p.jsx("li",{className:"sidebar-section-label",children:p.jsxs("span",{className:"collapsible-section",onClick:j=>{j.stopPropagation(),y(_,v,I.id)},children:[w?"▶":"▼"," Support"]})}),!w&&p.jsxs("li",{className:`sidebar-support-item ${r==="comments"?"active-nav":""}`,onClick:j=>{j.stopPropagation(),i("comments")},children:[p.jsx("span",{className:"nav-icon",children:"💭"}),p.jsx("span",{className:"nav-text",children:"Community Comments"})]})]})})]})]},I.id)})})]})},J3=({application:t,completedSteps:e=[],onClick:n})=>{var r;return(r=t.steps)!=null&&r.length,e.length,p.jsx("div",{className:"application-card",onClick:n,children:p.jsxs("div",{className:"application-card-inner",children:[p.jsx("h3",{children:t.title}),p.jsx("p",{children:t.description}),t.rootDomain&&p.jsx("div",{className:"application-source",children:p.jsxs("small",{children:["Source: ",t.rootDomain]})})]})})},Z3=({onApplicationSelect:t})=>{const[e,n]=D.useState([]),[r,i]=D.useState({}),[s,o]=D.useState(!0),{user:a}=bn();return D.useEffect(()=>{async function l(){try{const u=await ml(Wr(qe,"applications")),c={};u.forEach(d=>{c[d.id]={id:d.id,...d.data()}}),n(c)}catch(u){console.error("Failed to fetch applications:",u)}finally{o(!1)}}l()},[]),p.jsxs("div",{className:"application-card-grid",children:[p.jsx("h2",{className:"grid-title",children:"Select Your Application"}),p.jsxs("div",{className:"card-grid",children:[s&&p.jsx("p",{children:"Loading applications..."}),!s&&Object.keys(e).length===0&&p.jsx("p",{children:"No applications available at this time."}),!s&&Object.values(e).map(l=>p.jsx(J3,{application:l,onClick:()=>t(l)},l.id))]})]})};function ez({steps:t=[]}){return p.jsx("div",{className:"application-steps",children:t.length>0&&p.jsxs("div",{className:"steps-section",children:[p.jsx("h3",{children:"How to Apply"}),p.jsx("ol",{className:"steps-list",children:t.map((e,n)=>p.jsx("li",{children:e.title},n))})]})})}function gp({onClick:t,disabled:e=!1,size:n="medium",variant:r="default",children:i="Report Issue"}){const s=`report-button report-button--${n} report-button--${r}`;return p.jsxs("button",{className:s,onClick:t,disabled:e,title:"Report an issue",children:[p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),p.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),p.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),i]})}const vp="reports";async function tz(t){try{const n={...Object.fromEntries(Object.entries(t).filter(([i,s])=>s!=null)),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"open",assignedTo:null,resolution:null,resolvedAt:null};return(await $R(Wr(qe,vp),n)).id}catch(e){throw console.error("Error submitting report:",e),new Error("Failed to submit report")}}async function KR(t={}){try{let e=Wr(qe,vp);return t.status&&(e=Zo(e,Sd("status","==",t.status))),t.context&&(e=Zo(e,Sd("context","==",t.context))),t.severity&&(e=Zo(e,Sd("severity","==",t.severity))),t.applicationId&&(e=Zo(e,Sd("applicationId","==",t.applicationId))),e=Zo(e,FR("createdAt","desc")),(await ml(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching reports:",e),new Error("Failed to fetch reports")}}async function nz(t,e,n=null,r=null){try{const i=ht(qe,vp,t),s={status:e,updatedAt:new Date().toISOString()};n&&(s.assignedTo=n),r&&(s.resolution=r),(e==="resolved"||e==="closed")&&(s.resolvedAt=new Date().toISOString()),await js(i,s)}catch(i){throw console.error("Error updating report status:",i),new Error("Failed to update report status")}}async function rz(t){try{const e=ht(qe,vp,t);await UR(e)}catch(e){throw console.error("Error deleting report:",e),new Error("Failed to delete report")}}async function iz(){try{const t=await KR(),e={total:t.length,byStatus:{},byContext:{},bySeverity:{},byApplication:{}};return t.forEach(n=>{e.byStatus[n.status]=(e.byStatus[n.status]||0)+1,e.byContext[n.context]=(e.byContext[n.context]||0)+1,e.bySeverity[n.severity]=(e.bySeverity[n.severity]||0)+1,e.byApplication[n.applicationId]=(e.byApplication[n.applicationId]||0)+1}),e}catch(t){throw console.error("Error fetching report stats:",t),new Error("Failed to fetch report statistics")}}function mp({isOpen:t,onClose:e,application:n,step:r=null,onReportSubmitted:i}){const{user:s}=bn(),[o,a]=D.useState({issueType:"general",description:"",severity:"medium"}),[l,u]=D.useState(!1),[c,d]=D.useState(""),f=async m=>{if(m.preventDefault(),!!o.description.trim()){u(!0),d("");try{console.log("ReportModal Debug:",{application:n,step:r,user:s,applicationId:n==null?void 0:n.id,userId:s==null?void 0:s.uid});const S={applicationId:n==null?void 0:n.id,applicationTitle:n==null?void 0:n.title,stepId:(r==null?void 0:r.id)||(r==null?void 0:r._id)||null,stepTitle:(r==null?void 0:r.title)||null,issueType:o.issueType,description:o.description.trim(),severity:o.severity,context:r?"step":"application",userId:s==null?void 0:s.uid,userEmail:s==null?void 0:s.email};if(!S.applicationId||!S.userId)throw console.error("Validation failed:",S),new Error("Missing required fields: applicationId or userId");if(!n||typeof n!="object")throw new Error("Invalid application object");if(!n.id)throw new Error("Application missing ID field");if(!s||!s.uid)throw new Error("User not authenticated");const _=await tz(S);d("success"),setTimeout(()=>{e(),i&&i({...S,id:_})},1500)}catch(S){console.error("Failed to submit report:",S),d("error")}finally{u(!1)}}},g=()=>{l||(a({issueType:"general",description:"",severity:"medium"}),d(""),e())},v=()=>r?`Report an issue with: ${r.title}`:`Report an issue with: ${n==null?void 0:n.title}`;return t?p.jsx("div",{className:"report-modal-overlay",onClick:g,children:p.jsxs("div",{className:"report-modal-content",onClick:m=>m.stopPropagation(),children:[p.jsxs("div",{className:"report-modal-header",children:[p.jsx("h3",{children:"Report an Issue"}),p.jsx("button",{className:"report-modal-close",onClick:g,disabled:l,children:"×"})]}),p.jsxs("div",{className:"report-issue-modal",children:[p.jsx("div",{className:"report-context",children:p.jsx("p",{children:v()})}),p.jsxs("form",{onSubmit:f,className:"report-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"issueType",children:"Issue Type"}),p.jsxs("select",{id:"issueType",value:o.issueType,onChange:m=>a(S=>({...S,issueType:m.target.value})),disabled:l,children:[p.jsx("option",{value:"general",children:"General Issue"}),p.jsx("option",{value:"outdated",children:"Outdated Information"}),p.jsx("option",{value:"broken",children:"Broken Link/Function"}),p.jsx("option",{value:"content",children:"Content Error"}),p.jsx("option",{value:"ui",children:"UI/UX Problem"}),p.jsx("option",{value:"other",children:"Other"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"severity",children:"Severity"}),p.jsxs("select",{id:"severity",value:o.severity,onChange:m=>a(S=>({...S,severity:m.target.value})),disabled:l,children:[p.jsx("option",{value:"low",children:"Low - Minor inconvenience"}),p.jsx("option",{value:"medium",children:"Medium - Affects usability"}),p.jsx("option",{value:"high",children:"High - Blocks progress"}),p.jsx("option",{value:"critical",children:"Critical - Cannot proceed"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"description",children:"Description *"}),p.jsx("textarea",{id:"description",value:o.description,onChange:m=>a(S=>({...S,description:m.target.value})),placeholder:"Please describe the issue you encountered...",rows:4,required:!0,disabled:l})]}),c==="success"&&p.jsx("div",{className:"status-message success",children:"✓ Report submitted successfully! Thank you for your feedback."}),c==="error"&&p.jsx("div",{className:"status-message error",children:"✗ Failed to submit report. Please try again."}),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",onClick:g,disabled:l,className:"btn-secondary",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:l||!o.description.trim(),className:"btn-primary",children:l?"Submitting...":"Submit Report"})]})]})]})]})}):null}function sz({application:t}){const[e,n]=D.useState(!1),{user:r}=bn();if(!t)return null;const i=()=>{r&&n(!0)},s=o=>{console.log("Report submitted:",o)};return p.jsxs("div",{className:"application-view",children:[p.jsxs("div",{className:"application-header",children:[p.jsxs("div",{className:"header-content",children:[p.jsx("h2",{children:t.title}),p.jsx("p",{children:t.description})]}),r&&p.jsx("div",{className:"header-actions",children:p.jsx(gp,{onClick:i,size:"medium",variant:"outline",children:"Report Issue"})})]}),t.steps&&p.jsx(ez,{steps:t.steps}),p.jsx(mp,{isOpen:e,onClose:()=>n(!1),application:t,onReportSubmitted:s})]})}const oz=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,i]=D.useState("login"),[s,o]=D.useState({name:"",email:"",password:"",confirmPassword:""}),[a,l]=D.useState({}),[u,c]=D.useState(!1),[d,f]=D.useState(!1),[g,v]=D.useState(!1);D.useEffect(()=>(t?(getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="hidden"),i("login"),v(!1),l({})):getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="unset"),()=>{getComputedStyle(document.body).position!=="fixed"&&(document.body.style.overflow="unset")}),[t]),D.useEffect(()=>{const R=x=>{x.key==="Escape"&&t&&e()};return t&&document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[t,e]);const m=R=>{const{name:x,value:w}=R.target;o(C=>({...C,[x]:w})),a[x]&&l(C=>({...C,[x]:""}))},S=()=>{const R={};return r==="signup"&&(s.name.trim()?s.name.trim().length<2&&(R.name="Name must be at least 2 characters"):R.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(R.email="Please enter a valid email"):R.email="Email is required",s.password?s.password.length<6&&(R.password="Password must be at least 6 characters"):R.password="Password is required",r==="signup"&&(s.confirmPassword?s.password!==s.confirmPassword&&(R.confirmPassword="Passwords do not match"):R.confirmPassword="Please confirm your password"),l(R),Object.keys(R).length===0},_=async R=>{if(R.preventDefault(),!!S()){c(!0);try{if(r==="login")await ZI(Pa,s.email,s.password),n(),e();else{const w=(await SL(Pa,s.email,s.password)).user;await TL(w,{displayName:s.name.trim()}),await Gi(ht(qe,"users",w.uid),{email:w.email,displayName:s.name.trim(),createdAt:new Date().toISOString()}),n(),e()}}catch(x){let w="An error occurred. Please try again.";switch(x.code){case"auth/user-not-found":w="No account found with this email.";break;case"auth/wrong-password":w="Incorrect password.";break;case"auth/email-already-in-use":w="An account with this email already exists.";break;case"auth/weak-password":w="Password is too weak.";break;case"auth/invalid-email":w="Invalid email address.";break;default:w=x.message}l({general:w})}finally{c(!1)}}},y=()=>{i(r==="login"?"signup":"login"),o({name:"",email:"",password:"",confirmPassword:""}),l({}),v(!1)},E=async R=>{if(R.preventDefault(),!s.email){l({email:"Please enter your email address to reset your password"});return}if(!/\S+@\S+\.\S+/.test(s.email)){l({email:"Please enter a valid email address"});return}c(!0);try{await EL(Pa,s.email),v(!0),l({})}catch(x){let w="An error occurred. Please try again.";switch(x.code){case"auth/user-not-found":w="No account found with this email address.";break;case"auth/invalid-email":w="Please enter a valid email address.";break;case"auth/too-many-requests":w="Too many attempts. Please try again later.";break;default:w=x.message}l({email:w})}finally{c(!1)}},I=()=>{console.log("Going back to login from mode:",r),v(!1),l({}),i("login")},N=()=>{console.log("Switching to reset mode from:",r),i("reset"),l({}),v(!1)};return t?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"auth-modal-backdrop",onClick:e}),p.jsx("div",{className:"auth-modal",children:p.jsxs("div",{className:"auth-modal-content",children:[p.jsx("button",{className:"auth-modal-close",onClick:e,children:p.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),p.jsxs("div",{className:"auth-modal-header",children:[p.jsx("div",{className:"auth-modal-logo",children:p.jsx("div",{className:"auth-modal-logo-icon",children:p.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})})}),p.jsx("h2",{className:"auth-modal-title",children:r==="login"?"Welcome Back":"Create Account"}),p.jsx("p",{className:"auth-modal-subtitle",children:r==="login"?"Sign in to continue your MEHKO application journey":"Join our community and start your MEHKO application"})]}),p.jsxs("form",{onSubmit:_,className:"auth-modal-form",children:[r==="signup"&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),p.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),p.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:m,className:`form-input ${a.name?"error":""}`,placeholder:"Enter your full name"})]}),a.name&&p.jsx("span",{className:"error-message",children:a.name})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),p.jsx("polyline",{points:"22,6 12,13 2,6"})]}),p.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:m,className:`form-input ${a.email?"error":""}`,placeholder:"Enter your email address"})]}),a.email&&p.jsx("span",{className:"error-message",children:a.email})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),p.jsx("circle",{cx:"12",cy:"16",r:"1"}),p.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),p.jsx("input",{id:"password",name:"password",type:d?"text":"password",value:s.password,onChange:m,className:`form-input ${a.password?"error":""}`,placeholder:"Enter your password"}),p.jsx("button",{type:"button",className:"password-toggle",onClick:()=>f(!d),children:p.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d?p.jsxs(p.Fragment,{children:[p.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),p.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):p.jsxs(p.Fragment,{children:[p.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),p.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]}),a.password&&p.jsx("span",{className:"error-message",children:a.password})]}),r==="login"&&p.jsx("div",{className:"forgot-password-section",children:p.jsx("button",{type:"button",onClick:N,className:"forgot-password-link",children:"Forgot your password?"})}),r==="signup"&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),p.jsx("circle",{cx:"12",cy:"16",r:"1"}),p.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),p.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:m,className:`form-input ${a.confirmPassword?"error":""}`,placeholder:"Confirm your password"})]}),a.confirmPassword&&p.jsx("span",{className:"error-message",children:a.confirmPassword})]}),a.general&&p.jsxs("div",{className:"error-banner",children:[p.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("circle",{cx:"12",cy:"12",r:"10"}),p.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),p.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),p.jsx("span",{children:a.general})]}),p.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:u,children:u?p.jsxs("div",{className:"loading-spinner",children:[p.jsx("div",{className:"spinner"}),p.jsx("span",{children:"Processing..."})]}):r==="login"?"Sign In":"Create Account"})]}),r==="reset"&&p.jsx("div",{className:"password-reset-section",children:g?p.jsxs("div",{className:"reset-success",children:[p.jsx("div",{className:"success-icon",children:p.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),p.jsx("polyline",{points:"22,4 12,14.01 9,11.01"})]})}),p.jsx("h3",{className:"success-title",children:"Check Your Email"}),p.jsxs("p",{className:"success-message",children:["We've sent a password reset link to ",p.jsx("strong",{children:s.email})]}),p.jsx("p",{className:"success-note",children:"Please check your email and click the link to reset your password. If you don't see it, check your spam folder."})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"reset-header",children:[p.jsx("h3",{className:"reset-title",children:"Reset Your Password"}),p.jsx("p",{className:"reset-subtitle",children:"Enter your email address and we'll send you a link to reset your password."})]}),p.jsxs("form",{onSubmit:E,className:"reset-form",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"resetEmail",className:"form-label",children:"Email Address"}),p.jsxs("div",{className:"input-wrapper",children:[p.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),p.jsx("polyline",{points:"22,6 12,13 2,6"})]}),p.jsx("input",{id:"resetEmail",name:"email",type:"email",value:s.email,onChange:m,className:`form-input ${a.email?"error":""}`,placeholder:"Enter your email address"})]}),a.email&&p.jsx("span",{className:"error-message",children:a.email})]}),p.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:u,children:u?p.jsxs("div",{className:"loading-spinner",children:[p.jsx("div",{className:"spinner"}),p.jsx("span",{children:"Sending..."})]}):"Send Reset Link"})]})]})}),p.jsx("div",{className:"auth-modal-footer",children:r==="reset"?p.jsx("div",{className:"reset-footer",children:p.jsxs("button",{type:"button",onClick:I,className:"back-to-login-btn",children:[p.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Sign In"]})}):p.jsxs("p",{className:"auth-modal-switch",children:[r==="login"?"Don't have an account?":"Already have an account?",p.jsx("button",{type:"button",onClick:y,className:"switch-btn",children:r==="login"?"Sign up":"Sign in"})]})})]})})]}):null};function az(){const{user:t,logout:e,isAdmin:n}=bn(),{isOpen:r,openAuthModal:i,closeAuthModal:s}=YR(),o=async()=>{await e()},a=()=>{};return p.jsxs("header",{className:"app-header",children:[p.jsxs("div",{className:"header-content",children:[p.jsx("div",{className:"header-left",children:p.jsxs("div",{className:"logo-section",onClick:()=>window.location.reload(),children:[p.jsxs("h1",{className:"app-title",children:[p.jsx("span",{className:"app-icon",children:"🏛️"}),"MEHKO.ai"]}),p.jsx("p",{className:"app-tagline",children:"MEHKO Applications Made Simple"})]})}),p.jsx("div",{className:"header-right",children:t?p.jsxs("div",{className:"user-section",children:[n&&p.jsxs(za,{to:"/admin",className:"admin-dashboard-link",children:[p.jsx("span",{className:"admin-icon",children:"👑"}),p.jsx("span",{className:"admin-text",children:"Admin Dashboard"})]}),p.jsxs("div",{className:"user-info",children:[p.jsx("span",{className:"user-avatar",children:t.displayName?t.displayName.charAt(0).toUpperCase():t.email.charAt(0).toUpperCase()}),p.jsx("span",{className:"user-name",children:t.displayName||t.email})]}),p.jsxs("button",{onClick:o,className:"logout-button",children:[p.jsx("span",{className:"button-icon",children:"🚪"}),p.jsx("span",{className:"button-text",children:"Log Out"})]})]}):p.jsx("div",{className:"auth-section",children:p.jsxs("button",{onClick:i,className:"auth-button",children:[p.jsx("span",{className:"button-icon",children:"🔐"}),"Sign In"]})})})]}),p.jsx(oz,{isOpen:r,onClose:s,onSuccess:a})]})}async function lz(t,e,n){const r=ht(qe,"users",t,"aiChats",e);await Gi(r,{messages:n},{merge:!0})}async function uz(t,e){const n=ht(qe,"users",t,"aiChats",e),r=await li(n);return r.exists()?r.data().messages:[]}async function cz(t,e,n,r){const i=ht(qe,"users",t,"formProgress",e);await Gi(i,{[n]:r},{merge:!0})}async function XR(t,e,n){const r=ht(qe,"users",t,"formProgress",e),i=await li(r);return i.exists()?i.data()[n]||{}:{}}async function dz(t,e,n,r){const i=ht(qe,"users",t,"formProgress",e);await Gi(i,{[n]:r},{merge:!0})}async function Ky(t,e,n="form"){if(!t||!e){console.warn("pinApplication: Missing required parameters",{userId:t,applicationId:e});return}const r=ht(qe,"users",t,"pinnedApplications",e);await Gi(r,{pinnedAt:new Date,triggeredBy:n},{merge:!0})}async function fz(t,e){if(!t||!e){console.warn("unpinApplication: Missing required parameters",{userId:t,applicationId:e});return}const n=ht(qe,"users",t,"pinnedApplications",e);await UR(n)}const QR=location.hostname==="localhost"?"http://localhost":"https://api.mehko.ai",Xy=t=>{const e=t.startsWith("/api")?t:`/api${t}`;return`${QR}${e}`};var bx,Rx;const _m=(((Rx=(bx=import.meta)==null?void 0:bx.env)==null?void 0:Rx.VITE_API_URL)||"").trim()||QR.trim()||"http://127.0.0.1:8000";_m.includes("127.0.0.1")||_m.includes("localhost");const Pn={PYTHON_API:_m},zn=(t,e)=>`${t}${e}`,Qy={APPS:(t=Pn.PYTHON_API)=>zn(t,"/api/apps"),APP_BY_ID:(t=Pn.PYTHON_API,e)=>zn(t,`/api/apps/${encodeURIComponent(e)}`),AI_CHAT:(t=Pn.PYTHON_API)=>zn(t,"/api/ai-chat"),AI_ANALYZE_PDF:(t=Pn.PYTHON_API)=>zn(t,"/api/ai-analyze-pdf"),FORM_FIELDS:(t=Pn.PYTHON_API)=>zn(t,"/api/form-fields"),FILL_PDF:(t=Pn.PYTHON_API)=>zn(t,"/api/fill-pdf"),PROCESS_COUNTY:(t=Pn.PYTHON_API)=>zn(t,"/api/admin/process-county"),GET_COUNTIES:(t=Pn.PYTHON_API)=>zn(t,"/api/admin/counties"),DELETE_COUNTY:(t=Pn.PYTHON_API,e)=>zn(t,`/api/admin/county/${encodeURIComponent(e)}`),CREATE_ACROFORM:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/create-acroform`),GET_ACROFORM_DEFINITION:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/acroform-definition`),GET_ACROFORM_PDF:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/acroform-pdf`),GET_PDF:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/pdf`),FILL_PDF_FORM:(t=Pn.PYTHON_API,e,n)=>zn(t,`/api/apps/${encodeURIComponent(e)}/forms/${encodeURIComponent(n)}/fill`)},yp=(t="default")=>Pn.PYTHON_API,xd=yp("python"),hz=Qy.AI_CHAT(),pz=()=>p.jsxs("div",{className:"ai-chat__loading-spinner",children:[p.jsxs("div",{className:"ai-chat__spinner-dots",children:[p.jsx("div",{className:"ai-chat__spinner-dot"}),p.jsx("div",{className:"ai-chat__spinner-dot"}),p.jsx("div",{className:"ai-chat__spinner-dot"})]}),p.jsx("div",{className:"ai-chat__loading-text",children:"AI is thinking..."})]}),gz=t=>t.replace(/\*\s*\n\s*\*/g,`
`).replace(/\n\s*\*\s*\n/g,`
`).replace(/\*\s*:/g,":").replace(/\n{3,}/g,`

`).replace(/\s+\n/g,`
`).replace(/\n\s+/g,`
`).replace(/([.!?])\s+([A-Z][a-z])/g,`$1

$2`).replace(/([.!?])\s+([A-Z][A-Z\s]+:)/g,`$1

$2`).replace(/(\d+\.)\s+/g,`
$1 `).replace(/(^|\n)([•*-])\s*/g,"$1$2 ").trim();function xS({application:t,currentStep:e,currentStepId:n,completedStepIds:r=[],context:i=null}){const{user:s}=bn(),[o,a]=D.useState([]),[l,u]=D.useState(""),[c,d]=D.useState(!1),[f,g]=D.useState(null),v=D.useRef(null),[m,S]=D.useState({}),[_,y]=D.useState({}),[E,I]=D.useState({}),[N,R]=D.useState({}),[x,w]=D.useState(!1),[C,b]=D.useState(!1);D.useEffect(()=>{if(i&&i.subStepText){const j=`I need help with this sub-step: "${i.subStepText}". Can you provide more detailed guidance?`;u(j)}},[i]);const k=D.useMemo(()=>((t==null?void 0:t.steps)||[]).map(L=>{const B=L.id||L._id;return{...L,_id:B,isComplete:r.includes(B)}}),[t==null?void 0:t.steps,r]),O=D.useMemo(()=>((t==null?void 0:t.steps)||[]).filter(j=>j.type==="pdf"&&j.formId),[t==null?void 0:t.steps]);D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const j={};for(const L of t.steps)if(L.type==="pdf"&&L.formId)try{const B=await fetch(`${xd}/api/apps/${t.id}/forms/${L.formId}/template`);if(!B.ok){console.warn(`Form template not found for ${L.formId} (${B.status}) - this is normal if the form hasn't been uploaded yet`);continue}const $=B.headers.get("content-type");if(!$||!$.includes("application/json")){console.warn(`Form template for ${L.formId} returned non-JSON content (${$}) - skipping`);continue}const K=await B.json();j[L.formId]=K.fields||[]}catch(B){console.error("overlay fetch failed:",L.formId,B)}S(j)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid)||!(t!=null&&t.steps))return;const j={};for(const L of t.steps)if(L.type==="pdf"&&L.formId)try{const B=await XR(s.uid,t.id,L.formId);j[L.formId]=B||{}}catch(B){console.error("loadFormData failed:",L.formId,B)}y(j)})()},[s==null?void 0:s.uid,t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const j={},L={};for(const B of t.steps)if(B.type==="pdf"&&B.formId){try{const $=`${xd}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(B.formId)}/text`;console.log(`Fetching PDF text from: ${$}`);const K=await fetch($);if(K.ok){const ee=K.headers.get("content-type");if(!ee||!ee.includes("application/json")){console.warn(`PDF text for ${B.formId} returned non-JSON content (${ee}) - skipping`);continue}const Q=await K.json();j[B.formId]=Array.isArray(Q.pages)?Q.pages.join(`

---

`):"",console.log(`Successfully loaded text for form: ${B.formId}`)}else console.log(`Form ${B.formId} not found on server (${K.status}) - this is normal if the form hasn't been uploaded yet`)}catch($){console.log(`Could not fetch text for form ${B.formId}: ${$.message}`)}L[B.formId]={title:B.title||B.formId,url:`${xd}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(B.formId)}/pdf?inline=0`,previewBase:`${xd}/api/apps/${encodeURIComponent(t.id)}/forms/${encodeURIComponent(B.formId)}/preview-page?page=`}}I(j),R(L)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{!s||!(t!=null&&t.id)||uz(s.uid,t.id).then(j=>{j!=null&&j.length?a(j):a([{sender:"ai",text:`Welcome! I'm here to help with ${t.title}. 

IMPORTANT: This app tracks your MEHKO application progress and provides guidance. You'll need to:
• Fill out PDF forms directly in the dashboard for most steps
• Download completed forms to print and sign if needed
• Mark steps complete once forms are finished

Ask me anything or pick a quick task above!`,timestamp:new Date},{sender:"ai",text:"💡 Note: While I aim to provide accurate information, please verify important details with official sources as I may occasionally make mistakes.",timestamp:new Date}])})},[s==null?void 0:s.uid,t==null?void 0:t.id]),D.useEffect(()=>{var j;(j=v.current)==null||j.scrollIntoView({behavior:"smooth"})},[o]);const A=[{title:"What should I do next?",prompt:"What's the next step I should complete in my MEHKO application?"},{title:"Help with current step",prompt:"I'm currently on this step. What do I need to do?"},{title:"Form completion help",prompt:"I need help filling out a form. What should I know?"},{title:"Application overview",prompt:"Give me an overview of the entire MEHKO application process."}],F=f?[{title:`Complete ${f.title}`,prompt:`I want to complete the ${f.title} form. What do I need to do?`},{title:"Form field help",prompt:`I'm confused about some fields in the ${f.title} form. Can you help?`},{title:"Form submission",prompt:`How do I submit the completed ${f.title} form?`}]:[],G=async(j,L=null)=>{if(!(j!=null&&j.trim()))return;const $={sender:"user",text:L?`[Form: ${L.title}] ${j}`:j,timestamp:new Date},K=[...o,$];a(K),u(""),d(!0);try{const Q=await(await fetch(hz,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:K.map(le=>({role:le.sender==="ai"?"assistant":"user",content:le.text})),applicationId:t.id,context:{application:{id:t.id,title:t.title,rootDomain:t.rootDomain},steps:k,currentStep:e,currentStepId:n,completedStepIds:r,comments:t.comments||[],overlays:m,formData:_,pdfText:E,pdfLinks:N,selectedForm:L?{...L,pdfContent:E[L.formId]||null}:null,workflow:{description:"This is a MEHKO application tracking system. Users fill out PDF forms directly in the dashboard for most steps, then download completed forms to print and sign if needed. The app provides interactive form completion and tracks progress.",formProcess:"Forms are filled out directly in the dashboard using interactive PDF viewers. Completed forms can be downloaded for printing and signing.",appPurpose:"The app tracks application progress, provides interactive form completion, and helps users understand requirements - it handles most of the form completion process directly."}}})})).json(),ie={sender:"ai",text:gz(Q.reply||"Sorry, I don't have a response right now."),timestamp:new Date},te=[...K,ie];a(te),await lz(s.uid,t.id,te),await Ky(s.uid,t.id,"ai")}catch(ee){console.error(ee),a(Q=>[...Q,{sender:"ai",text:"Oops, something went wrong.",timestamp:new Date}])}finally{d(!1)}},Y=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),G(l,f))};function H(){return O.length?p.jsxs("div",{className:"ai-chat__form-actions",children:[p.jsxs("button",{className:"ai-chat__section-toggle",onClick:()=>w(!x),children:[p.jsx("span",{className:"ai-chat__section-toggle-icon",children:x?"▼":"▶"}),p.jsx("span",{className:"ai-chat__section-toggle-text",children:"Form-Specific Help"}),p.jsxs("span",{className:"ai-chat__section-toggle-count",children:["(",O.length,")"]})]}),p.jsx("div",{className:`ai-chat__form-actions-content ${x?"expanded":"collapsed"}`,children:p.jsx("div",{className:"ai-chat__form-actions-grid",children:O.map(j=>p.jsxs("div",{className:"ai-chat__form-card",children:[p.jsxs("div",{className:"ai-chat__form-card-header",children:[p.jsx("h4",{children:j.title}),p.jsx("button",{className:`ai-chat__form-select-btn ${(f==null?void 0:f.formId)===j.formId?"active":""}`,onClick:()=>g((f==null?void 0:f.formId)===j.formId?null:j),children:(f==null?void 0:f.formId)===j.formId?"✓ Selected":"Select Form"})]}),(f==null?void 0:f.formId)===j.formId&&p.jsxs("div",{className:"ai-chat__form-card-content",children:[p.jsx("div",{className:"ai-chat__form-quick-tasks",children:F.map((L,B)=>p.jsx("button",{className:"ai-chat__form-task-btn",onClick:()=>G(L.prompt,j),children:L.title},B))}),p.jsxs("div",{className:"ai-chat__form-actions-buttons",children:[p.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const L=N[j.formId];L&&window.open(L.url,"_blank","noopener,noreferrer")},children:"📄 Open PDF"}),p.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const L=N[j.formId];L&&window.open(L.previewBase+"0","_blank","noopener,noreferrer")},children:"👁️ Preview"})]})]})]},j.formId))})})]}):null}return s?p.jsxs("div",{className:"ai-chat",children:[p.jsxs("div",{className:"ai-chat__header",children:[p.jsx("div",{className:"ai-chat__avatar",children:"🤖"}),p.jsxs("div",{className:"ai-chat__title",children:[p.jsxs("div",{className:"ai-chat__welcome",children:["Welcome back",s!=null&&s.displayName?`, ${s.displayName}`:"","!"]}),p.jsxs("div",{className:"ai-chat__subtitle",children:["Let's work on ",p.jsx("strong",{children:t==null?void 0:t.title}),"."]})]})]}),p.jsxs("div",{className:"ai-chat__content",children:[p.jsx(H,{}),p.jsxs("div",{className:"ai-chat__guide-card",children:[p.jsxs("button",{className:"ai-chat__section-toggle",onClick:()=>b(!C),children:[p.jsx("span",{className:"ai-chat__section-toggle-icon",children:C?"▼":"▶"}),p.jsx("span",{className:"ai-chat__section-toggle-text",children:"General Tasks I can assist you with"}),p.jsxs("span",{className:"ai-chat__section-toggle-count",children:["(",A.length,")"]})]}),p.jsx("div",{className:`ai-chat__guide-content ${C?"expanded":"collapsed"}`,children:p.jsx("ul",{className:"ai-chat__guide-list",children:A.map(j=>p.jsx("li",{children:p.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>G(j.prompt),children:j.title})},j.title))})})]}),f&&p.jsxs("div",{className:"ai-chat__form-context",children:[p.jsxs("div",{className:"ai-chat__form-context-header",children:[p.jsxs("span",{children:["📋 Working on: ",p.jsx("strong",{children:f.title})]}),p.jsx("button",{className:"ai-chat__form-context-clear",onClick:()=>g(null),children:"✕ Clear"})]}),p.jsx("div",{className:"ai-chat__form-context-info",children:"Ask me anything specific about this form. I'll provide targeted help based on the form content and your progress."})]}),p.jsxs("div",{className:"ai-chat__history",children:[o.map((j,L)=>{var B,$;return p.jsxs("div",{className:`chat-msg ${j.sender}`,children:[p.jsx("div",{className:"chat-bubble",children:j.text}),p.jsx("div",{className:"timestamp",children:((($=(B=j.timestamp)==null?void 0:B.toDate)==null?void 0:$.call(B))||new Date(j.timestamp)).toLocaleTimeString()})]},L)}),c&&p.jsx("div",{className:"chat-msg ai",children:p.jsx("div",{className:"chat-bubble",children:p.jsx(pz,{})})}),p.jsx("div",{ref:v})]})]}),p.jsxs("div",{className:"ai-chat__composer",children:[p.jsx("div",{className:"ai-chat__disclaimer",children:p.jsx("small",{children:"AI responses may contain inaccuracies. Please verify important information with official sources."})}),p.jsxs("div",{className:"ai-chat__input-section",children:[f&&p.jsxs("div",{className:"ai-chat__form-guidance",children:[p.jsx("strong",{children:"📝 Form Guidance:"})," You're working on the"," ",p.jsx("strong",{children:f.title}),". Fill out this form directly in the dashboard, then download the completed PDF to print and sign if needed."]}),p.jsxs("div",{className:"ai-chat__input-container",children:[p.jsx("textarea",{placeholder:f?`Ask about ${f.title}... (e.g., "What does this field mean?")`:'Ask Orion… (e.g., "What should I do next?")',value:l,onChange:j=>u(j.target.value),onKeyDown:Y,disabled:c}),p.jsx("button",{onClick:()=>G(l,f),disabled:!l.trim()||c,children:c?"…":"Send"})]})]})]})]}):p.jsx("p",{className:"ai-chat__login",children:"Please log in to use this feature."})}async function kg(t){const e=Wr(qe,"applications",t,"comments"),n=Zo(e,FR("timestamp","asc"));return(await ml(n)).docs.map(i=>({id:i.id,...i.data()}))}async function vz(t,e){const n=Wr(qe,"applications",t,"comments");await $R(n,{...e,timestamp:pp(),reactions:{}})}async function mz(t,e,n,r){const i=Wr(qe,"applications",t,"comments"),s=ht(i,e),o=await li(s);if(!o.exists())return;((o.data().reactions||{})[n]||[]).includes(r)||await js(s,{[`reactions.${n}`]:qy(r)})}async function yz(t,e,n,r){const i=Wr(qe,"applications",t,"comments"),s=ht(i,e);await js(s,{[`reactions.${n}`]:Yy(r)})}const TS=["👍","👎","😊","🎉","😢","❤️","🚀","👀"];function _z({application:t,context:e=null}){const[n,r]=D.useState([]),[i,s]=D.useState(""),[o,a]=D.useState(null),{user:l}=bn(),u=D.useRef(null);D.useEffect(()=>{t!=null&&t.id&&kg(t.id).then(r)},[t==null?void 0:t.id]),D.useEffect(()=>{if(e&&e.subStepText){const v=`Question/comment about this sub-step: "${e.subStepText}"

`;s(v)}},[e]),D.useEffect(()=>{const v=m=>{u.current&&!u.current.contains(m.target)&&a(null)};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[]);const c=async v=>{v.preventDefault(),i.trim()&&(await vz(t.id,{text:i,userId:(l==null?void 0:l.uid)||"anon",displayName:(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Anonymous",userEmail:(l==null?void 0:l.email)||"anonymous@example.com"}),s(""),kg(t.id).then(r))},d=async(v,m)=>{var y,E;if(!l)return;const S=n.find(I=>I.id===v);((E=(y=S==null?void 0:S.reactions)==null?void 0:y[l.uid])==null?void 0:E.includes(m))?await yz(t.id,v,l.uid,m):await mz(t.id,v,l.uid,m),kg(t.id).then(r)},f=(v,m)=>v?Object.values(v).flat().filter(S=>S===m).length:0,g=(v,m)=>{var S;return!v||!l?!1:((S=v[l.uid])==null?void 0:S.includes(m))||!1};return p.jsxs("div",{className:"comments-section",children:[p.jsx("h3",{className:"comments-title",children:"Community Comments"}),l?p.jsxs("form",{className:"comment-form",onSubmit:c,children:[p.jsx("div",{className:"comment-form-header",children:p.jsxs("span",{className:"comment-author-label",children:["Commenting as: ",p.jsx("strong",{children:l.displayName||l.email})]})}),p.jsx("textarea",{className:"comment-textarea",value:i,onChange:v=>s(v.target.value),placeholder:"Share your experience or ask a question..."}),p.jsx("button",{type:"submit",disabled:!i.trim(),className:"submit-btn",children:"Submit Comment"})]}):p.jsx("p",{className:"comments-login-msg",children:"Please log in to leave a comment."}),p.jsx("ul",{className:"comment-list",children:n.map(v=>{var m;return p.jsxs("li",{className:"comment-item",children:[p.jsxs("div",{className:"comment-header",children:[p.jsx("span",{className:"comment-author",children:v.displayName}),p.jsx("span",{className:"comment-timestamp",children:(m=v.timestamp)!=null&&m.toDate?new Date(v.timestamp.toDate()).toLocaleDateString():"Recently"})]}),p.jsx("p",{className:"comment-text",children:v.text}),p.jsxs("div",{className:"comment-reactions",children:[o===v.id&&p.jsx("div",{className:"emoji-picker",ref:u,children:TS.map(S=>p.jsx("button",{className:`emoji-option ${g(v.reactions,S)?"active":""}`,onClick:()=>{d(v.id,S),a(null)},title:S,children:S},S))}),p.jsx("button",{className:"emoji-trigger-btn",onClick:()=>a(o===v.id?null:v.id),title:"Add reaction",children:"😊"}),TS.map(S=>{const _=f(v.reactions,S);return _===0?null:p.jsxs("div",{className:"reaction-display",children:[p.jsx("span",{className:"emoji",children:S}),p.jsx("span",{className:"count",children:_})]},S)})]})]},v.id)})})]})}function Jy(t,e){const[n,r]=D.useState([]),[i,s]=D.useState(!1);D.useEffect(()=>{if(!t||!e){r([]);return}s(!0);const u=ht(qe,"users",t,"applicationProgress",e),c=sh(u,d=>{r(d.exists()?d.data().completedStepIds||[]:[]),s(!1)},()=>s(!1));return()=>c()},[t,e]);const o=D.useCallback(async()=>{if(!t||!e)return null;const u=ht(qe,"users",t,"applicationProgress",e);return(await li(u)).exists()||await Gi(u,{completedStepIds:[]}),u},[t,e]),a=D.useCallback(async u=>{if(!t||!e||!u)return;const c=await o();c&&await js(c,{completedStepIds:qy(u)})},[t,e,o]),l=D.useCallback(async u=>{if(!t||!e||!u)return;const c=await o();c&&await js(c,{completedStepIds:Yy(u)})},[t,e,o]);return{completedSteps:n,loading:i,markStepComplete:a,markStepIncomplete:l}}async function Zy(t,e,n,r){try{const i=ht(qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback",r),s=await li(i);return s.exists()?s.data():{liked:!1,disliked:!1,timestamp:null}}catch(i){return console.error("Error fetching sub-step feedback:",i),{liked:!1,disliked:!1,timestamp:null}}}async function JR(t,e,n,r,i){try{const s=ht(qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback",r);return await Gi(s,{...i,updatedAt:pp()},{merge:!0}),!0}catch(s){throw console.error("Error updating sub-step feedback:",s),s}}async function wz(t,e,n,r){try{const s={liked:!(await Zy(t,e,n,r)).liked,disliked:!1,timestamp:pp()};return await JR(t,e,n,r,s),s}catch(i){throw console.error("Error toggling sub-step like:",i),i}}async function Ez(t,e,n,r){try{const s={liked:!1,disliked:!(await Zy(t,e,n,r)).disliked,timestamp:pp()};return await JR(t,e,n,r,s),s}catch(i){throw console.error("Error toggling sub-step dislike:",i),i}}async function Sz(t,e,n){try{const r=Wr(qe,"applications",t,"steps",e,"substeps",n.toString(),"feedback"),i=await ml(r);let s=0,o=0;return i.forEach(a=>{const l=a.data();l.liked&&s++,l.disliked&&o++}),{totalLikes:s,totalDislikes:o,totalFeedback:i.size}}catch(r){return console.error("Error fetching sub-step feedback stats:",r),{totalLikes:0,totalDislikes:0,totalFeedback:0}}}function CS({subStepText:t,stepId:e,applicationId:n,application:r,step:i,onCommentRequest:s,subStepIndex:o}){const{user:a}=bn(),[l,u]=D.useState(!1),[c,d]=D.useState(!1),[f,g]=D.useState(!1),[v,m]=D.useState({totalLikes:0,totalDislikes:0});D.useEffect(()=>{a!=null&&a.uid&&n&&e&&o!==void 0&&S()},[a==null?void 0:a.uid,n,e,o]);const S=async()=>{console.log("🔍 Debug - Loading feedback:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid});try{const R=await Zy(n,e,o,a.uid);u(R.liked||!1),d(R.disliked||!1);const x=await Sz(n,e,o);m(x)}catch(R){console.error("❌ Error loading feedback:",R)}},_=()=>{let R="";i!=null&&i.searchTerms&&Array.isArray(i.searchTerms)&&i.searchTerms.length>0?R=i.searchTerms[0]:t?R=t.length>100?t.substring(0,100)+"...":t:R="MEHKO application";let x="";r!=null&&r.title&&(r.title.toLowerCase().includes("los angeles")?x="Los Angeles County":r.title.toLowerCase().includes("san diego")?x="San Diego County":r.title.toLowerCase().includes("alameda")?x="Alameda County":r.title.toLowerCase().includes("santa barbara")?x="Santa Barbara County":r.title.toLowerCase().includes("sonoma")?x="Sonoma County":r.title.toLowerCase().includes("county")&&(x=r.title)),!x&&(r!=null&&r.id)&&(x=r.id.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase())),x||(x="MEHKO");let w=R;x&&R.toLowerCase().includes(x.toLowerCase())?w=R:w=`${x} ${R}`;const b=`https://www.google.com/search?q=${encodeURIComponent(w)}`;window.open(b,"_blank","noopener,noreferrer")},y=()=>{if(s){const R=i!=null&&i.searchTerms&&Array.isArray(i.searchTerms)&&i.searchTerms.length>0?i.searchTerms.join(", "):t;s({type:"ai_chat",subStepText:R,stepId:e,applicationId:n})}},E=async()=>{if(!a||f)return;console.log("🔍 Debug - Like clicked:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid}),g(!0);const R=setTimeout(()=>{console.warn("⚠️ Like operation timed out after 5 seconds"),g(!1)},5e3);try{const x=await wz(n,e,o,a.uid);u(x.liked),d(x.disliked),x.liked?m(w=>({...w,totalLikes:w.totalLikes+1,totalDislikes:w.totalDislikes>0?w.totalDislikes-1:0})):m(w=>({...w,totalLikes:w.totalLikes>0?w.totalLikes-1:0}))}catch(x){console.error("❌ Error toggling like:",x),u(!l)}finally{clearTimeout(R),g(!1)}},I=async()=>{if(!a||f)return;console.log("🔍 Debug - Dislike clicked:",{applicationId:n,stepId:e,subStepIndex:o,userId:a.uid}),g(!0);const R=setTimeout(()=>{console.warn("⚠️ Dislike operation timed out after 5 seconds"),g(!1)},5e3);try{const x=await Ez(n,e,o,a.uid);u(x.liked),d(x.disliked),x.disliked?m(w=>({...w,totalDislikes:w.totalDislikes+1,totalLikes:w.totalLikes>0?w.totalLikes-1:0})):m(w=>({...w,totalDislikes:w.totalDislikes>0?w.totalDislikes-1:0}))}catch(x){console.error("❌ Error toggling dislike:",x),g(!1)}finally{clearTimeout(R),g(!1)}},N=()=>{a&&s&&s({type:"comment",subStepText:t,stepId:e,applicationId:n})};return a?p.jsxs("div",{className:"sub-step-actions",children:[p.jsxs("div",{className:"action-icons",children:[p.jsx("button",{className:"action-icon internet-icon",onClick:_,title:"Search the web (opens in new tab)",children:p.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})})}),p.jsx("button",{className:"action-icon ai-icon",onClick:y,title:"Ask AI for help with this step",children:p.jsx("span",{style:{fontSize:"16px"},children:"🤖"})})]}),p.jsxs("div",{className:"feedback-actions",children:[p.jsx("button",{className:`feedback-btn like-btn ${l?"active":""}`,onClick:E,disabled:f,title:"Like",children:f?p.jsx("div",{className:"loading-spinner"}):p.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})})}),p.jsx("button",{className:`feedback-btn dislike-btn ${c?"active":""}`,onClick:I,disabled:f,title:"Dislike",children:f?p.jsx("div",{className:"loading-spinner"}):p.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2z"})})}),p.jsx("button",{className:"feedback-btn comment-btn",onClick:N,title:"Add to community discussion",children:p.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M21.99 4c0-1.1-.89-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"})})})]}),(v.totalLikes>0||v.totalDislikes>0)&&p.jsxs("div",{className:"feedback-counts",children:[v.totalLikes>0&&p.jsxs("span",{className:"count-item like-count",children:[p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"})}),v.totalLikes]}),v.totalDislikes>0&&p.jsxs("span",{className:"count-item dislike-count",children:[p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:p.jsx("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2z"})}),v.totalDislikes]})]})]}):null}const Dg=t=>{if(!t)return t;let e=t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return e=e.replace(new RegExp("(?<!<strong>)\\*([^*]+?)\\*(?!<\\/strong>)","g"),"<em>$1</em>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e};function xz({step:t,applicationId:e,hideCompleteToggle:n,application:r,onCommentRequest:i}){const{user:s}=bn(),{completedSteps:o,markStepComplete:a,markStepIncomplete:l}=Jy(s==null?void 0:s.uid,e),[u,c]=D.useState(!1),d=t.id||t._id,f=o.includes(d),g=()=>{s&&(console.log("InfoStep Debug:",{step:t,application:r,user:s,stepId:d,applicationId:e}),c(!0))},v=E=>{console.log("Step report submitted:",E)},m=async()=>{if(!(!t.formId||t.type!=="pdf"))try{const E=await fetch(Xy(`/apps/${e}/forms/${t.formId}/pdf`));if(!E.ok)throw new Error("Failed to download PDF");const I=await E.blob(),N=window.URL.createObjectURL(I),R=document.createElement("a");R.href=N,R.download=`${e}_${t.formId}.pdf`,document.body.appendChild(R),R.click(),window.URL.revokeObjectURL(N),document.body.removeChild(R)}catch(E){console.error("Error downloading PDF:",E),alert("Failed to download PDF. Please try again.")}},S=E=>{if(!E)return[];const I=[],N=E.split(`
`);let R=null,x=[];return N.forEach((w,C)=>{const b=w.trim();b.startsWith("**")&&b.endsWith("**")&&!b.includes("Search terms for unclear parts")?(R&&I.push({...R,content:x.join(`
`).trim()}),R={title:b.replace(/\*\*/g,""),type:"section"},x=[]):b&&!b.startsWith("*Search:*")&&x.push(b)}),R&&I.push({...R,content:x.join(`
`).trim()}),I},_=(E,I)=>{const N=E.title==="What you need",R=E.title==="Cost & time",x=E.title==="Ready when",w=E.title==="Where/how",C=k=>k?k.split(`
`).map((O,A)=>{if(!O.trim())return null;const F=O.includes("website")||O.includes("visit")||O.includes("go to"),G=O.toLowerCase().includes("county")||O.toLowerCase().includes("deh")||O.toLowerCase().includes("acgov");return F||G?p.jsxs("div",{className:"actionable-content",children:[p.jsx("p",{className:"content-paragraph",children:O.trim()}),p.jsxs("div",{className:"action-buttons",children:[F&&p.jsx("button",{className:"action-button website-button",onClick:()=>{const Y=(r==null?void 0:r.rootDomain)||"google.com";window.open(`https://${Y}`,"_blank")},title:"Visit county website",children:"🌐 Visit Website"}),p.jsx("button",{className:"action-button search-button",onClick:()=>{let Y="";r!=null&&r.title?Y=r.title:r!=null&&r.id?Y=r.id.replace(/_/g," ").replace(/\b\w/g,B=>B.toUpperCase()):Y="MEHKO";let H="";t!=null&&t.searchTerms&&Array.isArray(t.searchTerms)&&t.searchTerms.length>0?H=t.searchTerms[0]:H=O.trim().length>100?O.trim().substring(0,100)+"...":O.trim();let j=H;Y&&H.toLowerCase().includes(Y.toLowerCase())?j=H:j=`${Y} ${H}`;const L=j;window.open(`https://www.google.com/search?q=${encodeURIComponent(L)}`,"_blank")},title:"Search for more information",children:"🔍 Search Google"})]})]},A):p.jsx("p",{className:"content-paragraph",children:O.trim()},A)}):null,b=(k,O)=>{const A=k.trim();if(A.startsWith("- ☐")){const F=A.replace("- ☐","").trim(),G=F.match(/go to Step (\d+): (.+?)(?:\s|$)/);if(G){const Y=G[1],H=G[2];return p.jsxs("div",{className:"checklist-item checklist-item--with-step",children:[p.jsx("div",{className:"checkbox-placeholder",children:"☐"}),p.jsxs("div",{className:"checklist-content",children:[p.jsx("span",{className:"checklist-text",children:F.replace(/go to Step \d+: .+?(?:\s|$)/,"")}),p.jsxs("button",{className:"step-reference-button",onClick:()=>{const j=parseInt(Y)-1;r!=null&&r.steps&&r.steps[j]&&(r.steps[j],window.location.pathname.includes("/dashboard")&&alert(`Navigate to Step ${Y}: ${H} in the sidebar`))},title:`Go to Step ${Y}: ${H}`,children:[p.jsxs("span",{className:"step-number",children:["Step ",Y]}),p.jsx("span",{className:"step-title",children:H}),p.jsx("span",{className:"step-arrow",children:"→"})]})]})]},O)}return p.jsxs("div",{className:"checklist-item",children:[p.jsx("div",{className:"checkbox-placeholder",children:"☐"}),p.jsx("span",{className:"checklist-text",dangerouslySetInnerHTML:{__html:Dg(F)}})]},O)}return null};return p.jsxs("div",{className:`content-section ${E.type} ${E.title.toLowerCase().replace(/\s+/g,"-")}`,children:[p.jsx("h3",{className:"section-title",children:E.title}),N?p.jsx("div",{className:"checklist-content",children:E.content.split(`
`).map((k,O)=>b(k,O))}):R?p.jsx("div",{className:"cost-time-content",children:p.jsx("div",{className:"cost-time-badge",children:E.content})}):x?p.jsx("div",{className:"ready-when-content",children:p.jsx("div",{className:"ready-when-badge",children:E.content})}):w?p.jsx("div",{className:"where-how-content",children:C(E.content)}):p.jsx("div",{className:"section-content",children:E.content.split(`
`).map((k,O)=>k.trim()?p.jsx("p",{className:"content-paragraph",dangerouslySetInnerHTML:{__html:Dg(k.trim())}},O):null)}),p.jsx(CS,{stepId:d,applicationId:e,application:r,step:t,subStepText:E.content,subStepIndex:I,onCommentRequest:i})]},I)},y=E=>{const I=S(E);return I.length===0?p.jsxs("div",{className:"fallback-content",children:[E.split(`
`).map((N,R)=>p.jsx("p",{className:"content-paragraph",dangerouslySetInnerHTML:{__html:Dg(N.trim())}},R)),p.jsx(CS,{stepId:d,applicationId:e,application:r,step:t,subStepText:E,subStepIndex:0,onCommentRequest:i})]}):p.jsx("div",{className:"structured-content",children:I.map((N,R)=>_(N,R))})};return p.jsxs("div",{className:"info-step",children:[p.jsxs("div",{className:"step-header",children:[p.jsx("h2",{children:t.title}),s&&p.jsx(gp,{onClick:g,size:"small",variant:"subtle",children:"Report Issue"})]}),t.type==="pdf"&&t.formId&&p.jsxs("div",{className:"pdf-download-section",children:[p.jsx("button",{className:"pdf-download-button",onClick:m,title:"Download the original PDF form template",children:"📄 Download PDF Template"}),p.jsx("p",{className:"pdf-download-note",children:"Download the original PDF form to view offline or print. You can still fill out the form in this application."})]}),p.jsx("div",{className:"step-content",children:y(t.content)}),!n&&s&&p.jsx("div",{className:"step-completion",children:p.jsxs("label",{className:"completion-checkbox",children:[p.jsx("input",{type:"checkbox",checked:f,onChange:E=>{E.target.checked?a(d):l(d)}}),p.jsx("span",{children:"Mark this step as complete"})]})}),p.jsx(mp,{isOpen:u,onClose:()=>c(!1),application:r,step:t,onReportSubmitted:v})]})}function Tz(){const{user:t}=bn(),[e,n]=D.useState([]),[r,i]=D.useState(!0);return D.useEffect(()=>{if(!t)return;async function s(){const a=(await ml(Wr(qe,"users",t.uid,"pinnedApplications"))).docs.map(c=>c.id),u=(await Promise.all(a.map(c=>li(ht(qe,"applications",c))))).filter(c=>c.exists()).map(c=>({id:c.id,...c.data()}));n(u),i(!1)}s()},[t]),{applications:e,loading:r}}function Cz({applicationId:t,formName:e,stepId:n,hideCompleteToggle:r=!1,application:i,step:s}){const{user:o}=bn(),{completedSteps:a,markStepComplete:l,markStepIncomplete:u}=Jy(o==null?void 0:o.uid,t),c=a.includes(n),[d,f]=D.useState([]),[g,v]=D.useState({}),[m,S]=D.useState("idle"),[_,y]=D.useState(!0),[E,I]=D.useState(!1);D.useEffect(()=>{(async()=>{y(!0);try{const O=await(await fetch(`${Qy.FORM_FIELDS()}?applicationId=${t}&formName=${e}`)).json();if(f(O.fields||[]),o){const A=await XR(o.uid,t,e);v(A||{})}}catch(k){console.error("Error fetching fields or saved form data",k)}y(!1)})()},[t,e,o]);const N=async b=>{const k={...g,[b.target.name]:b.target.value};if(v(k),S("saving"),o)try{await cz(o.uid,t,e,k),await Ky(o.uid,t,"form"),S("saved"),setTimeout(()=>S("idle"),1500)}catch(O){console.error("Failed to save form data",O),S("error")}},R=()=>{v({}),S("idle")},x=async()=>{try{const b=await fetch(Xy("/fill-pdf"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:t,formName:e,formData:g})});if(!b.ok)throw new Error("PDF generation failed");const{url:k}=await b.json();window.location.href=k}catch(b){console.error("Error downloading PDF:",b),alert("Something went wrong generating the PDF.")}},w=()=>{o&&I(!0)},C=b=>{console.log("Form step report submitted:",b)};return o?_?p.jsxs("div",{className:"dynamic-form",children:[p.jsx("div",{className:"form-header",children:p.jsx("h2",{children:"Loading form..."})}),p.jsx("div",{className:"loading",children:"Loading form fields..."})]}):p.jsxs("div",{className:"dynamic-form",children:[p.jsxs("div",{className:"form-header",children:[p.jsx("h2",{children:e.replace(".pdf","").replace(/[_-]/g," ")}),o&&p.jsx(gp,{onClick:w,size:"small",variant:"subtle",children:"Report Issue"})]}),p.jsxs("form",{onSubmit:b=>b.preventDefault(),children:[!r&&p.jsx("div",{className:"step-complete-checkbox",children:p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:c,onChange:b=>{b.target.checked?l(n):u(n)}}),"Mark this step as complete"]})}),p.jsx("div",{className:"form-status",children:p.jsx("span",{className:`status ${m}`,children:m==="saving"?"Saving...":m==="saved"?"Saved ✅":m==="error"?"Error ❌":""})}),d.map((b,k)=>p.jsxs("div",{className:"form-field",children:[p.jsx("label",{children:b.label||b.name}),p.jsx("input",{type:"text",name:b.name,value:g[b.name]||"",onChange:N}),b.description&&p.jsx("small",{className:"field-description",children:b.description})]},`${b.label}-${k}`)),p.jsxs("div",{className:"form-actions",children:[p.jsx("button",{type:"button",onClick:R,children:"Reset Form"}),p.jsx("button",{type:"button",onClick:x,children:"Download Filled PDF"})]})]}),p.jsx(mp,{isOpen:E,onClose:()=>I(!1),application:i,step:s,onReportSubmitted:C})]}):p.jsx("p",{children:"Please log in to use this feature."})}function Iz(t,e=[]){const[n,r]=D.useState({}),[i,s]=D.useState(!1),o=D.useMemo(()=>Array.isArray(e)?[...e].sort():[],[e]);D.useEffect(()=>{if(console.log("useAllApplicationsProgress: useEffect triggered",{userId:t,memoizedAppIds:o,memoizedAppIdsLength:o.length}),!t||o.length===0){console.log("useAllApplicationsProgress: No userId or app IDs, resetting progress"),r({});return}console.log("useAllApplicationsProgress: Setting up listeners for",o.length,"applications"),s(!0);const d=[];return o.forEach(f=>{if(!f)return;const g=ht(qe,"users",t,"applicationProgress",f),v=sh(g,m=>{r(S=>({...S,[f]:m.exists()?m.data().completedStepIds||[]:[]})),s(!1)},m=>{console.error(`Error fetching progress for ${f}:`,m),r(S=>({...S,[f]:[]})),s(!1)});d.push(v)}),o.length===0&&s(!1),()=>{d.forEach(f=>f())}},[t,o]);const a=D.useCallback(d=>n[d]||[],[n]),l=D.useCallback((d,f=0)=>{const g=a(d);return f===0?0:Math.round(g.length/f*100)},[a]),u=D.useCallback(async(d,f)=>{if(!t||!d||!f)return;const g=ht(qe,"users",t,"applicationProgress",d);(await li(g)).exists()?await js(g,{completedStepIds:qy(f)}):await Gi(g,{completedStepIds:[f]})},[t]),c=D.useCallback(async(d,f)=>{if(!t||!d||!f)return;const g=ht(qe,"users",t,"applicationProgress",d);(await li(g)).exists()&&await js(g,{completedStepIds:Yy(f)})},[t]);return{allProgress:n,getProgressForApp:a,getProgressPercentage:l,markStepComplete:u,markStepIncomplete:c,loading:i}}const bz=({app:t,form:e,application:n,step:r,onFormDataChange:i,initialFormData:s={}})=>{const[o,a]=D.useState(null),[l,u]=D.useState(!0),[c,d]=D.useState(null),[f,g]=D.useState(s),[v,m]=D.useState(!1),S=D.useRef(null),_=D.useRef(f),y=yp("python");D.useEffect(()=>{E()},[t,e]),D.useEffect(()=>{_.current=f},[f]);const E=async()=>{u(!0),d(null);try{const x=`${y}/api/apps/${t}/forms/${e}/pdf?inline=true`;a(x),m(!1)}catch(x){console.error("Failed to load PDF:",x),d("Failed to load the form. Please try again.")}finally{u(!1)}},I=(x,w)=>{const C={..._.current,[x]:w};g(C),i&&i(C)},N=()=>{S.current&&(window.removeEventListener("message",R),window.addEventListener("message",R))},R=x=>{try{x.data&&x.data.type==="form-field-changed"&&I(x.data.fieldName,x.data.value)}catch(w){console.warn("Error handling iframe message:",w)}};return D.useEffect(()=>()=>{window.removeEventListener("message",R)},[]),l?p.jsx("div",{className:"acroform-viewer",children:p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Loading form..."})]})}):c?p.jsx("div",{className:"acroform-viewer",children:p.jsxs("div",{className:"error-container",children:[p.jsx("div",{className:"error-icon",children:"❌"}),p.jsx("h3",{children:"Error Loading Form"}),p.jsx("p",{children:c}),p.jsx("button",{onClick:E,className:"retry-button",children:"Try Again"})]})}):p.jsxs("div",{className:"acroform-viewer",children:[p.jsx("div",{className:"pdf-container",children:o&&p.jsx("iframe",{ref:S,src:o,className:"pdf-iframe",title:"PDF Form",onLoad:N,onError:()=>{console.error("PDF iframe failed to load"),d("Failed to load the PDF form. Please check your connection and try again.")}})}),!v&&Object.keys(f).length>0&&p.jsxs("div",{className:"fallback-form",children:[p.jsx("h3",{children:"Form Data"}),p.jsx("div",{className:"form-fields",children:Object.entries(f).map(([x,w])=>p.jsxs("div",{className:"form-field",children:[p.jsxs("label",{children:[x,":"]}),p.jsx("input",{type:"text",value:w||"",onChange:C=>I(x,C.target.value),placeholder:`Enter ${x}`})]},x))})]})]})};function ZR({app:t,form:e,application:n,step:r}){const[i,s]=D.useState({fields:[]}),[o,a]=D.useState({}),[l,u]=D.useState(!0),[c,d]=D.useState(!1),[f,g]=D.useState(null),[v,m]=D.useState(!1),S=D.useRef(null),_=D.useRef(null),[y,E]=D.useState(0),[I,N]=D.useState("idle"),[R,x]=D.useState(null),{user:w,isAdmin:C}=bn(),b=ci(),{openAuthModal:k}=YR(),O=b.pathname.startsWith("/admin");D.useEffect(()=>()=>{S.current&&clearTimeout(S.current),_.current&&clearInterval(_.current)},[]);const A=D.useCallback(async()=>{if(!(!w||!t||!e))try{N("saving"),await dz(w.uid,t,e,o),N("saved"),x(new Date),S.current&&(clearTimeout(S.current),S.current=null),setTimeout(()=>{N("idle")},2e3)}catch(H){console.error("Failed to save form data:",H),N("error"),setTimeout(()=>N("idle"),3e3)}},[w,t,e,o]),F=D.useCallback(()=>{w&&(S.current&&clearTimeout(S.current),_.current&&clearInterval(_.current),N("saving"),E(2),S.current=setTimeout(()=>{A(),S.current=null},2e3),_.current=setInterval(()=>{E(H=>H<=1?(clearInterval(_.current),_.current=null,0):H-1)},1e3))},[w,A]);D.useEffect(()=>{(async()=>{u(!0);try{s({fields:[]}),a({}),console.log("PDF step: Showing form.pdf directly without field mapping")}catch(H){console.error("Form loading failed:",H),s({fields:[]}),a({})}finally{u(!1)}})()},[t,e,w]),D.useCallback((H,j,L)=>{a(B=>({...B,[H]:j==="checkbox"?!!L:L})),F()},[F]),D.useMemo(()=>{const H=new Map;for(const j of i.fields){const L=j.page??0;H.has(L)||H.set(L,[]),H.get(L).push(j)}for(const[j,L]of H.entries()){const B=i.fields.filter($=>($.page??0)===j).map($=>$.id);L.sort(($,K)=>B.indexOf($.id)-B.indexOf(K.id))}return[...H.entries()].sort((j,L)=>j[0]-L[0])},[i]);const G=()=>{w&&m(!0)},Y=H=>{console.log("PDF step report submitted:",H)};return l?p.jsx("div",{style:{padding:16},children:"Loading…"}):w?O&&!C?p.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[p.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[p.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:"🚫 Access Denied"}),p.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),p.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),p.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",p.jsx("strong",{children:t})," application."]})]}):p.jsxs("div",{className:"pdf-form-container",children:[p.jsxs("div",{className:"step-header",children:[p.jsxs("div",{className:"header-content",children:[p.jsx("h2",{children:(r==null?void 0:r.title)||`Form: ${e.replace(/_/g," ").replace(/.pdf$/i,"")}`}),p.jsx("p",{children:"View the PDF form below"})]}),w&&p.jsx(gp,{onClick:G,size:"small",variant:"subtle",children:"Report Issue"})]}),p.jsx(bz,{app:t,form:e,application:n,step:r,initialFormData:o,onFormDataChange:H=>{a(H),F()}}),p.jsx(mp,{isOpen:v,onClose:()=>m(!1),application:n,step:r,onReportSubmitted:Y})]}):O?p.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[p.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[p.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:"🚫 Access Denied"}),p.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),p.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),p.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",p.jsx("strong",{children:t})," application."]})]}):p.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[p.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[p.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:"🔒 Authentication Required"}),p.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"You need to be signed in to fill out this form. Please log in to continue with your application."}),p.jsx("button",{onClick:k,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Sign In to Continue"})]}),p.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This form is part of the ",p.jsx("strong",{children:t})," application process."]})]})}function Rz(){const{app:t,form:e}=XC();return p.jsx(ZR,{app:t,form:e})}const Az=yp("python");function Pz(t){const[e,n]=D.useState([]),[r,i]=D.useState(!0),[s,o]=D.useState(null);return D.useEffect(()=>{if(!t){n([]),i(!1);return}async function a(){try{i(!0),o(null);const l=await fetch(`${Az}/api/apps/${t}/forms`);if(!l.ok)throw new Error(`Failed to fetch forms: ${l.status}`);const u=await l.json();n(u)}catch(l){console.error("Error fetching available forms:",l),o(l.message),n([])}finally{i(!1)}}a()},[t]),{forms:e,loading:r,error:s}}function kz(){var we;const{applications:t,loading:e}=Tz(),{user:n}=bn(),[r,i]=D.useState([]),[s,o]=D.useState(null),[a,l]=D.useState("overview"),[u,c]=D.useState(null),[d,f]=D.useState(null),[g,v]=D.useState(null),[m,S]=D.useState(typeof window<"u"?window.matchMedia("(min-width: 1200px)").matches:!0),[_,y]=D.useState(!1);D.useEffect(()=>{var Ce;if(typeof window>"u")return;const q=window.matchMedia("(min-width: 1200px)"),pe=ve=>S(ve.matches);return(Ce=q.addEventListener)==null||Ce.call(q,"change",pe),S(q.matches),()=>{var ve;return(ve=q.removeEventListener)==null?void 0:ve.call(q,"change",pe)}},[]),D.useEffect(()=>{m&&_&&y(!1)},[m,_]),D.useEffect(()=>{!e&&t.length>0&&i(t)},[e,t]);const E=r.find(q=>q.id===s)||null,{forms:I,loading:N}=Pz(s),R=q=>{if(!q.formId||!I.length||I.includes(q.formId))return q.formId;const pe=I.find(Ce=>Ce.toLowerCase()===q.formId.toLowerCase());return pe||I[0]||q.formId};D.useEffect(()=>{var q;E&&console.log("DashboardApp Debug - Active Application:",{id:E.id,title:E.title,steps:E.steps,hasSteps:Array.isArray(E.steps),stepsLength:((q=E.steps)==null?void 0:q.length)||0})},[E]),D.useEffect(()=>{s&&I.length>0&&console.log("DashboardApp Debug - Available Forms:",{appId:s,availableForms:I,formsLoading:N})},[s,I,N]);const{completedSteps:x,markStepComplete:w,markStepIncomplete:C}=Jy(n==null?void 0:n.uid,s),b=D.useMemo(()=>r.map(q=>q.id),[r]),{allProgress:k,getProgressPercentage:O}=Iz(n==null?void 0:n.uid,b),A=D.useMemo(()=>((E==null?void 0:E.steps)||[]).map((pe,Ce)=>({...pe,_id:pe.id??String(Ce),title:pe.title??`Step ${Ce+1}`,type:pe.type??"unknown"})),[E]),F=((we=A[0])==null?void 0:we._id)||null;D.useEffect(()=>{if(!n||!s){f(null);return}const q=r.find(ve=>ve.id===s);if(!q)return;const pe=sh(ht(qe,"users",n.uid,"applicationProgress",q.id),ve=>{const Re=ve.exists()?ve.data().completedStepIds||[]:[];f(Ue=>({...Ue||q,completedStepIds:Re}))}),Ce=sh(Wr(qe,"applications",q.id,"comments"),ve=>{const Re=ve.docs.map(Ue=>Ue.data());f(Ue=>({...Ue||q,comments:Re}))});return f(q),()=>{pe(),Ce()}},[n,s,r]),D.useEffect(()=>{a==="steps"&&!u&&F&&c(F)},[a,u,F]);const G=q=>{r.find(pe=>pe.id===q.id)||i(pe=>[...pe,q]),o(q.id),l("overview"),c(null),n!=null&&n.uid&&Ky(n.uid,q.id)},Y=q=>{o(q),l("overview"),c(null)},H=q=>{var Ce;const pe=r.filter(ve=>ve.id!==q);i(pe),s===q&&(o(((Ce=pe[0])==null?void 0:Ce.id)??null),l("overview"),c(null)),n!=null&&n.uid&&fz(n.uid,q)},j=q=>{l("steps"),c(q)},L=()=>{if(!A.length)return null;console.log("Finding first incomplete step:",{totalSteps:A.length,completedSteps:x,steps:A.map(q=>({id:q.id,_id:q._id,title:q.title}))});for(let q=0;q<A.length;q++){const pe=A[q],Ce=pe.id||pe._id||String(q);if(!x.includes(Ce))return console.log(`First incomplete step found: Step ${q+1} (${Ce})`),Ce}return console.log("All steps completed, returning first step"),F},B=()=>{if(!r.length)return null;const q=!!s,pe=E?`Home > ${E.title}${a!=="overview"?` > ${a}`:""}`:"Home";return p.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:12},children:p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[q&&p.jsx("button",{onClick:()=>{o(null),l("overview"),c(null)},style:{padding:"4px 8px",borderRadius:6,border:"1px solid #e2e2e2",background:"#fff",cursor:"pointer",fontSize:14},"aria-label":"Back to Application Grid",title:"Back to Application Grid",children:"← Back"}),p.jsx("div",{style:{fontSize:14,color:"#666"},children:pe})]})})},$=A.findIndex(q=>q._id===u),K=A.length,ee=K?Math.round(($+1)/K*100):0,Q=$>0,ie=$<K-1,te=()=>Q&&c(A[$-1]._id),le=()=>ie&&c(A[$+1]._id),ue=$>=0?A[$]:null,Ee=ue?x.includes(ue.id||ue._id):!1,xe=()=>{if(a!=="steps"||!ue)return null;const q=()=>{const pe=ue.id||ue._id;Ee?C(pe):w(pe)};return p.jsxs("div",{style:{display:"grid",gap:8,border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)",width:"100%",minWidth:0,overflow:"hidden"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[p.jsx("button",{onClick:te,disabled:!Q,title:"Previous step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:Q?"pointer":"not-allowed",opacity:Q?1:.5,flexShrink:0},children:"←"}),p.jsxs("div",{style:{flex:1,minWidth:0},children:[p.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["Step ",$+1," of ",K]}),p.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:ue.title,children:ue.title})]}),p.jsx("button",{onClick:le,disabled:!ie,title:"Next step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:ie?"pointer":"not-allowed",opacity:ie?1:.5,flexShrink:0},children:"→"}),p.jsx("button",{onClick:q,style:{padding:"6px 12px",borderRadius:10,border:"1px solid #e5e7eb",background:Ee?"#10b981":"#fff",color:Ee?"#fff":"#374151",cursor:"pointer",fontSize:13,fontWeight:500,flexShrink:0},children:Ee?"✓ Complete":"Mark Complete"})]}),p.jsx("div",{style:{width:"100%",height:4,background:"#e5e7eb",borderRadius:2,overflow:"hidden"},children:p.jsx("div",{style:{width:`${ee}%`,height:"100%",background:"#10b981",transition:"width 0.3s ease"}})})]})},se=()=>{if(a!=="steps")return null;const q=A.find(pe=>pe._id===u);return q?q.type==="form"?p.jsx(Cz,{applicationId:E.id,stepId:q.id||q._id,formName:q.formName,hideCompleteToggle:!0,application:E,step:q}):q.type==="pdf"?p.jsx("div",{style:{display:"grid",gap:8,width:"100%",minWidth:0,overflow:"hidden"},children:p.jsx(ZR,{app:E.id,form:R(q),application:E,step:q},`${E.id}:${R(q)}`)}):q.type==="info"||q.content?p.jsx(xz,{step:q,applicationId:E.id,hideCompleteToggle:!0,application:E,onCommentRequest:ce}):p.jsx("p",{children:"Unsupported step type."}):p.jsx("div",{children:"Select a step to begin."})},ce=q=>{q.type==="ai_chat"?(v({subStepText:q.subStepText,stepId:q.stepId,applicationId:q.applicationId}),console.log("AI Chat requested for sub-step:",q.subStepText)):q.type==="comment"&&(v({subStepText:q.subStepText,stepId:q.stepId,applicationId:q.applicationId}),l("comments"),console.log("Comment requested for sub-step:",q.subStepText))},ke=q=>{q!==a&&(v(null),l(q))},Se=()=>{if(!E||m)return null;const q=(pe,Ce)=>p.jsx("button",{onClick:()=>ke(pe),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ddd",background:a===pe?"#eef":"#fff",cursor:"pointer",fontSize:14},children:Ce},pe);return p.jsxs("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:[q("overview","Overview"),q("steps","Steps"),q("comments","Comments")]})};return p.jsxs(p.Fragment,{children:[p.jsx(az,{}),p.jsxs("div",{className:"app-wrapper",children:[!m&&p.jsx("button",{className:"mobile-menu-button",onClick:()=>y(!_),style:{position:"fixed",top:"80px",left:"12px",zIndex:1001,padding:"8px 12px",background:"#10b981",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",display:"flex",alignItems:"center",gap:"6px"},children:"☰ Menu"}),!m&&p.jsx("div",{className:`mobile-overlay ${_?"active":""}`,onClick:()=>y(!1)}),p.jsx(Q3,{applications:r,activeApplicationId:s,onRemove:H,activeSection:a,setActiveSection:ke,onSelect:Y,onStepSelect:j,selectedStepId:u,allProgress:k,getProgressPercentage:O,mobileOpen:_,onMobileClose:()=>y(!1)}),p.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:E&&m?"1fr 380px":"1fr",gap:16,minHeight:"calc(100dvh - 90px)",...m?{}:{gap:12,minHeight:"auto",paddingTop:"60px"}},children:[p.jsxs("main",{className:"main-content",style:{minWidth:0,minHeight:0,width:"100%",overflow:"auto"},children:[p.jsx(B,{}),r.length===0||!E?p.jsx(Z3,{onApplicationSelect:G}):p.jsxs(p.Fragment,{children:[p.jsx(Se,{}),a==="overview"&&p.jsxs("div",{style:{display:"grid",gap:24},children:[p.jsx(sz,{application:E}),A.length>0&&p.jsx("button",{onClick:()=>{l("steps");const q=x.length>0?L():F;c(q)},style:{padding:"14px 24px",border:"none",borderRadius:12,width:"fit-content",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"8px"},onMouseEnter:q=>{q.target.style.transform="translateY(-2px)",q.target.style.boxShadow="0 6px 20px rgba(16, 185, 129, 0.4)"},onMouseLeave:q=>{q.target.style.transform="translateY(0)",q.target.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseDown:q=>{q.target.style.transform="translateY(0)"},children:x.length>0?"Continue Application →":"Start Application →"})]}),a==="steps"&&p.jsxs("div",{style:{display:"grid",gap:12,width:"100%",minWidth:0},children:[p.jsx(xe,{}),p.jsx("div",{style:{minHeight:200,width:"100%",minWidth:0,overflow:"auto"},children:p.jsx(se,{})})]}),a==="comments"&&E&&p.jsx(_z,{application:E,context:g}),!m&&E&&p.jsx("section",{style:{marginTop:16,border:"1px solid #eee",borderRadius:12,background:"#fff"},children:p.jsx("div",{style:{height:420,overflow:"auto",padding:8},children:p.jsx(xS,{application:d||E,currentStep:ue,currentStepId:(ue==null?void 0:ue.id)||(ue==null?void 0:ue._id)||null,completedStepIds:x,context:g})})})]})]}),E&&m&&p.jsxs("aside",{style:{borderLeft:"1px solid #eee",paddingLeft:12,position:"sticky",height:"calc(100dvh - 90px)",display:"flex",flexDirection:"column",gap:8,background:"transparent",minHeight:0},children:[p.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#30343a"},children:"Your AI Assistant"}),p.jsx("div",{style:{border:"1px solid #e8e8e8",borderRadius:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)",flex:1,minHeight:0,display:"flex",overflow:"hidden"},children:p.jsx("div",{style:{flex:1,minHeight:0,overflow:"auto",padding:8},children:p.jsx(xS,{application:d||E,currentStep:ue,currentStepId:(ue==null?void 0:ue.id)||(ue==null?void 0:ue._id)||null,completedStepIds:x,context:g})})})]})]})]})]})}function Dz(){const[t,e]=D.useState([]),[n,r]=D.useState("all"),[i,s]=D.useState("all"),[o,a]=D.useState(!0),[l,u]=D.useState(null);D.useEffect(()=>{c(),d()},[]);const c=async()=>{try{a(!0);const y=await KR();e(y)}catch(y){console.error("Failed to load reports:",y)}finally{a(!1)}},d=async()=>{try{const y=await iz();u(y)}catch(y){console.error("Failed to load stats:",y)}},f=async(y,E)=>{try{await nz(y,E),await c(),await d()}catch(I){console.error("Failed to update report status:",I),alert("Failed to update report status")}},g=async y=>{if(window.confirm("Are you sure you want to delete this report? This cannot be undone."))try{await rz(y),await c(),await d()}catch(E){console.error("Failed to delete report:",E),alert("Failed to delete report")}},v=t.filter(y=>!(n!=="all"&&y.context!==n||i!=="all"&&y.status!==i)),m=y=>{switch(y){case"critical":return"#dc2626";case"high":return"#ea580c";case"medium":return"#d97706";case"low":return"#059669";default:return"#6b7280"}},S=y=>{switch(y){case"open":return"#3b82f6";case"in-progress":return"#f59e0b";case"resolved":return"#10b981";case"closed":return"#6b7280";default:return"#6b7280"}},_=y=>new Date(y).toLocaleString();return o?p.jsxs("div",{className:"reports-viewer",children:[p.jsxs("div",{className:"admin-navigation",children:[p.jsx("div",{className:"nav-title",children:"📊 Reports Viewer"}),p.jsx("a",{href:"/admin",className:"back-to-admin-btn",children:"← Back to Admin Dashboard"})]}),p.jsxs("div",{className:"loading-state",children:[p.jsx("div",{className:"spinner"}),p.jsx("p",{children:"Loading reports..."})]})]}):t.length===0?p.jsx("div",{className:"reports-viewer",children:p.jsxs("div",{className:"no-reports",children:[p.jsx("h3",{children:"No Reports Yet"}),p.jsx("p",{children:"When users submit issue reports, they will appear here."})]})}):p.jsxs("div",{className:"reports-viewer",children:[p.jsxs("div",{className:"reports-header",children:[p.jsxs("h2",{children:["Issue Reports (",t.length,")"]}),p.jsxs("div",{className:"header-actions",children:[p.jsxs("select",{value:n,onChange:y=>r(y.target.value),className:"filter-select",children:[p.jsx("option",{value:"all",children:"All Contexts"}),p.jsx("option",{value:"application",children:"Application Issues"}),p.jsx("option",{value:"step",children:"Step Issues"})]}),p.jsxs("select",{value:i,onChange:y=>s(y.target.value),className:"filter-select",children:[p.jsx("option",{value:"all",children:"All Statuses"}),p.jsx("option",{value:"open",children:"Open"}),p.jsx("option",{value:"in-progress",children:"In Progress"}),p.jsx("option",{value:"resolved",children:"Resolved"}),p.jsx("option",{value:"closed",children:"Closed"})]}),p.jsx("button",{onClick:c,className:"refresh-btn",children:"Refresh"})]})]}),l&&p.jsxs("div",{className:"stats-section",children:[p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-number",children:l.total}),p.jsx("div",{className:"stat-label",children:"Total Reports"})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-number",children:l.byStatus.open||0}),p.jsx("div",{className:"stat-label",children:"Open"})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-number",children:l.byStatus["in-progress"]||0}),p.jsx("div",{className:"stat-label",children:"In Progress"})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-number",children:l.byStatus.resolved||0}),p.jsx("div",{className:"stat-label",children:"Resolved"})]})]}),p.jsx("div",{className:"reports-list",children:v.map(y=>p.jsxs("div",{className:"report-card",children:[p.jsxs("div",{className:"report-header",children:[p.jsxs("div",{className:"report-meta",children:[p.jsx("span",{className:"severity-badge",style:{backgroundColor:m(y.severity)},children:y.severity}),p.jsx("span",{className:"status-badge",style:{backgroundColor:S(y.status)},children:y.status}),p.jsx("span",{className:"context-badge",children:y.context==="application"?"Application":"Step"}),p.jsx("span",{className:"issue-type",children:y.issueType})]}),p.jsx("span",{className:"timestamp",children:_(y.createdAt)})]}),p.jsxs("div",{className:"report-content",children:[p.jsxs("h4",{className:"report-title",children:[y.applicationTitle,y.stepTitle&&p.jsxs("span",{className:"step-title",children:[" → ",y.stepTitle]})]}),p.jsx("p",{className:"description",children:y.description})]}),p.jsxs("div",{className:"report-details",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Application:"})," ",y.applicationTitle]}),y.stepTitle&&p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Step:"})," ",y.stepTitle]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Issue Type:"})," ",y.issueType]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Severity:"})," ",y.severity]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Reported by:"})," ",y.userEmail]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("strong",{children:"Status:"})," ",y.status]})]}),p.jsxs("div",{className:"report-actions",children:[p.jsxs("select",{value:y.status,onChange:E=>f(y.id,E.target.value),className:"status-select",children:[p.jsx("option",{value:"open",children:"Open"}),p.jsx("option",{value:"in-progress",children:"In Progress"}),p.jsx("option",{value:"resolved",children:"Resolved"}),p.jsx("option",{value:"closed",children:"Closed"})]}),p.jsx("button",{onClick:()=>g(y.id),className:"delete-btn",title:"Delete report",children:"Delete"})]})]},y.id))})]})}const IS=Xy("/apps");function Nz(){const{user:t,loading:e,isAdmin:n}=bn(),[r,i]=D.useState("apps");if(e)return p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t||!n)return p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),p.jsx("p",{className:"text-gray-600 mb-4",children:"Admin privileges required."}),p.jsx("p",{className:"text-sm text-gray-500",children:"Only authorized users can access this area."}),p.jsx(za,{to:"/dashboard",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Dashboard"})]})});const[s,o]=D.useState([]),[a,l]=D.useState(""),[u,c]=D.useState(!1),d=s.find(z=>z.id===a)||null,[f,g]=D.useState(""),[v,m]=D.useState(""),[S,_]=D.useState(""),[y,E]=D.useState(""),[I,N]=D.useState([]),[R,x]=D.useState("info"),[w,C]=D.useState(""),[b,k]=D.useState(""),[O,A]=D.useState(""),[F,G]=D.useState(""),[Y,H]=D.useState(null),[j,L]=D.useState([]),[B,$]=D.useState([]),[K,ee]=D.useState([]),[Q,ie]=D.useState(""),[te,le]=D.useState(!1),[ue,Ee]=D.useState(!1),[xe,se]=D.useState(""),ce=z=>{se(z),setTimeout(()=>se(""),2500)};async function ke(){const J=(await ml(Wr(qe,"applications"))).docs.map(ge=>({id:ge.id,...ge.data()}));o(J.sort((ge,fe)=>ge.id.localeCompare(fe.id)))}function Se(z){l(z),c(!1);const J=s.find(ge=>ge.id===z);J&&(g(J.id),m(J.title||""),_(J.rootDomain||""),E(J.description||""),N(Array.isArray(J.steps)?J.steps:[])),L([])}function we(){l(""),c(!0),g(""),m(""),_(""),E(""),N([]),L([])}D.useEffect(()=>{ke()},[]);const q=z=>{z.preventDefault(),z.stopPropagation(),Ee(!0)},pe=z=>{z.preventDefault(),z.stopPropagation(),Ee(!1)},Ce=z=>{z.preventDefault(),z.stopPropagation()},ve=z=>{z.preventDefault(),z.stopPropagation(),Ee(!1);const ge=Array.from(z.dataTransfer.files).filter(fe=>fe.type==="application/json"||fe.name.endsWith(".json"));ge.length>0?($(fe=>[...fe,...ge]),ce(`Added ${ge.length} JSON file(s)`)):ce("No JSON files found. Please drop .json files only.")},Re=z=>{console.log("File select triggered",z.target.files);const J=Array.from(z.target.files);console.log("Files selected:",J);const ge=J.filter(fe=>fe.type==="application/json"||fe.name.endsWith(".json"));console.log("JSON files filtered:",ge),ge.length>0?($(fe=>[...fe,...ge]),ce(`Added ${ge.length} JSON file(s)`)):ce("No JSON files found. Please select .json files only."),z.target.value=""},Ue=z=>{$(J=>J.filter((ge,fe)=>fe!==z)),ee(J=>J.filter((ge,fe)=>fe!==z))},ut=async()=>{if(B.length===0)return;const z=[];for(const J of B)try{const ge=await J.text(),fe=JSON.parse(ge);z.push({filename:J.name,data:fe,valid:fe.id&&fe.title&&fe.steps&&Array.isArray(fe.steps),error:null})}catch(ge){z.push({filename:J.name,data:null,valid:!1,error:ge.message})}ee(z)},ot=async()=>{if(K.length===0)return;le(!0),ie("Processing applications...");let z=0,J=0;for(const ge of K){if(!ge.valid){J++;continue}try{console.log("Application data:",ge.data);const fe=await fetch(`${IS}/process-county`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ge.data)});if(console.log("Response status:",fe.status),console.log("Response ok:",fe.ok),fe.ok){const je=await fe.json();console.log("Success result:",je),z++}else{const je=await fe.text();console.error("Error response:",je),J++}}catch{J++}}ie(`Import complete: ${z} successful, ${J} failed`),le(!1),$([]),ee([]),ke()},Oe=()=>{if(!w.trim()){ce("Please enter a step title");return}const z={id:`step_${Date.now()}`,title:w.trim(),type:R,content:b.trim(),formName:O.trim(),formId:F.trim(),_file:Y};L(J=>[...J,z]),C(""),k(""),A(""),G(""),H(null),ce("Step added to queue")},nt=z=>{L(J=>J.filter((ge,fe)=>fe!==z))},Je=async()=>{if(!(!f||j.length===0))try{const z=[...I];for(const ge of j){const{_file:fe,...je}=ge;if(je.type==="pdf"&&fe){const ct=new FormData;if(ct.append("pdf",fe),ct.append("formId",je.formId),!(await fetch(`${IS}/api/apps/${f}/forms/${je.formId}/upload`,{method:"POST",body:ct})).ok)throw new Error(`Failed to upload PDF for ${je.formId}`)}z.push(je)}const J=ht(qe,"applications",f);await js(J,{steps:z}),N(z),L([]),ce("Steps saved successfully"),ke()}catch(z){ce(`Error saving steps: ${z.message}`)}},$e=async()=>{if(!f.trim()||!v.trim()){ce("Please fill in required fields");return}try{const z={id:f.trim(),title:v.trim(),rootDomain:S.trim(),description:y.trim(),steps:I,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await Gi(ht(qe,"applications",f.trim()),z),ce("Application saved successfully"),ke(),c(!1),l(f.trim())}catch(z){ce(`Error saving application: ${z.message}`)}};return p.jsxs("div",{className:"admin-dashboard",children:[p.jsx("header",{className:"admin-header",children:p.jsxs("div",{className:"header-content",children:[p.jsxs("div",{className:"header-left",children:[p.jsx("h1",{children:"Admin Dashboard"}),p.jsx("p",{children:"Manage applications and forms"})]}),p.jsx("div",{className:"header-right",children:p.jsxs("a",{href:"/dashboard",className:"back-to-dashboard-btn",children:[p.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:p.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to User Dashboard"]})})]})}),p.jsxs("nav",{className:"admin-nav",children:[p.jsx("button",{className:`nav-tab ${r==="apps"?"active":""}`,onClick:()=>i("apps"),children:"Applications"}),p.jsx("button",{className:`nav-tab ${r==="import"?"active":""}`,onClick:()=>i("import"),children:"Import Application Data"}),p.jsx("button",{className:`nav-tab ${r==="reports"?"active":""}`,onClick:()=>i("reports"),children:"Issue Reports"})]}),xe&&p.jsx("div",{className:"status-banner",children:xe}),p.jsxs("main",{className:"admin-main",children:[r==="apps"&&p.jsxs(p.Fragment,{children:[p.jsxs("section",{className:"apps-section",children:[p.jsxs("div",{className:"section-header",children:[p.jsx("h2",{children:"Applications"}),p.jsx("button",{onClick:we,className:"btn-primary",children:"+ New Application"})]}),p.jsx("div",{className:"apps-grid",children:s.map(z=>{var J;return p.jsxs("div",{className:`app-card ${a===z.id?"selected":""}`,onClick:()=>Se(z.id),children:[p.jsx("h3",{children:z.title}),p.jsx("p",{className:"app-domain",children:z.rootDomain}),p.jsx("p",{className:"app-description",children:z.description}),p.jsxs("div",{className:"app-steps",children:[((J=z.steps)==null?void 0:J.length)||0," steps"]})]},z.id)})})]}),(a||u)&&p.jsxs("section",{className:"app-form-section",children:[p.jsx("h3",{children:a?`Edit Application: ${d==null?void 0:d.title}`:"New Application"}),p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Application ID"}),p.jsx("input",{value:f,onChange:z=>g(z.target.value),placeholder:"e.g., los_angeles_county_mehko"})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Title"}),p.jsx("input",{value:v,onChange:z=>m(z.target.value),placeholder:"e.g., Los Angeles County MEHKO"})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Root Domain"}),p.jsx("input",{value:S,onChange:z=>_(z.target.value),placeholder:"e.g., sandiegocounty.gov"})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Description"}),p.jsx("textarea",{value:y,onChange:z=>E(z.target.value),placeholder:"Brief description of the application"})]})]}),p.jsx("button",{onClick:$e,className:"btn-primary",children:"Save Application"})]}),a&&p.jsxs("section",{className:"steps-section",children:[p.jsxs("h3",{children:["Steps for ",d.title]}),p.jsxs("div",{className:"existing-steps",children:[p.jsx("h4",{children:"Current Steps"}),I.map((z,J)=>p.jsxs("div",{className:"step-item",children:[p.jsx("span",{className:"step-number",children:J+1}),p.jsx("span",{className:"step-title",children:z.title}),p.jsx("span",{className:"step-type",children:z.type})]},z.id))]}),p.jsxs("div",{className:"add-step-form",children:[p.jsx("h4",{children:"Add New Step"}),p.jsxs("div",{className:"step-form-grid",children:[p.jsxs("div",{children:[p.jsx("label",{children:"Step Title"}),p.jsx("input",{value:w,onChange:z=>C(z.target.value),placeholder:"e.g., Submit Application"})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Step Type"}),p.jsxs("select",{value:R,onChange:z=>x(z.target.value),children:[p.jsx("option",{value:"info",children:"Information"}),p.jsx("option",{value:"form",children:"Form"}),p.jsx("option",{value:"pdf",children:"PDF"})]})]}),p.jsxs("div",{children:[p.jsx("label",{children:"Content/Description"}),p.jsx("textarea",{value:b,onChange:z=>k(z.target.value),placeholder:"Step description or instructions"})]}),R==="form"&&p.jsxs("div",{children:[p.jsx("label",{children:"Form Name"}),p.jsx("input",{value:O,onChange:z=>A(z.target.value),placeholder:"e.g., MEHKO_SOP-English.pdf"})]}),R==="pdf"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{children:"Form ID"}),p.jsx("input",{value:F,onChange:z=>G(z.target.value),placeholder:"e.g., MEHKO_SOP-English"})]}),p.jsxs("div",{children:[p.jsx("label",{children:"PDF File"}),p.jsx("input",{type:"file",accept:"application/pdf",onChange:z=>{var J;return H(((J=z.target.files)==null?void 0:J[0])||null)}})]})]})]}),p.jsxs("div",{className:"step-actions",children:[p.jsx("button",{onClick:Oe,className:"btn-secondary",children:"Add to Queue"}),p.jsx("button",{onClick:Je,disabled:!f||j.length===0,className:"btn-primary",children:"Save All Steps"}),p.jsxs("span",{className:"queue-count",children:[j.length," step",j.length!==1?"s":""," queued"]})]}),j.length>0&&p.jsxs("div",{className:"queued-steps",children:[p.jsx("strong",{children:"Queued Steps:"}),p.jsx("ul",{children:j.map((z,J)=>p.jsxs("li",{children:[z.title," ",p.jsxs("em",{children:["(",z.type,")"]}),z.type==="pdf"&&` — formId: ${z.formId}`,z.type==="form"&&` — formName: ${z.formName}`,p.jsx("button",{onClick:()=>nt(J),className:"btn-remove",children:"Remove"})]},J))})]})]})]})]}),r==="import"&&p.jsxs("section",{className:"import-section",children:[p.jsx("h2",{children:"Import Application Data"}),p.jsx("p",{children:"Upload JSON files to bulk import applications"}),p.jsxs("div",{className:"import-area",children:[p.jsxs("div",{className:`drop-zone ${ue?"drag-over":""}`,onDrop:ve,onDragOver:Ce,onDragEnter:q,onDragLeave:pe,children:[p.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[p.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),p.jsx("polyline",{points:"7,10 12,15 17,10"}),p.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),p.jsx("p",{children:ue?"Drop your JSON files here!":"Drop JSON files here or"}),!ue&&p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",multiple:!0,accept:".json",onChange:Re,className:"file-input",id:"file-input"}),p.jsx("label",{htmlFor:"file-input",className:"btn-primary",children:"Select Files"})]})]}),B.length>0&&p.jsxs("div",{className:"file-list",children:[p.jsx("h4",{children:"Selected Files:"}),B.map((z,J)=>p.jsxs("div",{className:"file-item",children:[p.jsx("span",{children:z.name}),p.jsx("button",{onClick:()=>Ue(J),className:"btn-remove",children:"Remove"})]},J)),p.jsxs("div",{className:"file-actions",children:[p.jsx("button",{onClick:ut,className:"btn-secondary",children:"Preview Files"}),p.jsx("button",{onClick:ot,disabled:te||K.length===0,className:"btn-primary",children:te?"Processing...":"Import All"})]})]}),K.length>0&&p.jsxs("div",{className:"preview-list",children:[p.jsx("h4",{children:"File Preview:"}),K.map((z,J)=>p.jsxs("div",{className:`preview-item ${z.valid?"valid":"invalid"}`,children:[p.jsx("span",{children:z.filename}),p.jsx("span",{className:"status",children:z.valid?"✅ Valid":"❌ Invalid"}),z.error&&p.jsx("span",{className:"error",children:z.error})]},J))]}),Q&&p.jsx("div",{className:"import-status",children:Q})]})]}),r==="reports"&&p.jsx(Dz,{})]})]})}function e_(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function eA(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function tA(t){var e=t;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function t_(t,e){try{return new RegExp(t,"g").exec(e)}catch{return null}}function Oz(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!!(e&&e.length)}function Mz(t,e){var n=t_("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return n?n[3]:""}function wm(t){return t.replace(/_/g,".")}function eu(t,e){var n=null,r="-1";return e_(t,function(i){var s=t_("("+i.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!s||i.brand?!1:(n=i,r=s[3]||"-1",i.versionAlias?r=i.versionAlias:i.versionTest&&(r=Mz(i.versionTest.toLowerCase(),e)||r),r=wm(r),!0)}),{preset:n,version:r}}function Td(t,e){var n={brand:"",version:"-1"};return e_(t,function(r){var i=nA(e,r);return i?(n.brand=r.id,n.version=r.versionAlias||i.version,n.version!=="-1"):!1}),n}function nA(t,e){return eA(t,function(n){var r=n.brand;return t_(""+e.test,r.toLowerCase())})}var rA=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],iA=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],Em=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],sA=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],oA=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function aA(t){return!!eu(sA,t).preset}function jz(t){var e=tA(t),n=!!/mobi/g.exec(e),r={name:"unknown",version:"-1",majorVersion:-1,webview:aA(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},i={name:"unknown",version:"-1",majorVersion:-1},s=eu(rA,e),o=s.preset,a=s.version,l=eu(oA,e),u=l.preset,c=l.version,d=eu(iA,e);if(r.chromium=!!d.preset,r.chromiumVersion=d.version,!r.chromium){var f=eu(Em,e);r.webkit=!!f.preset,r.webkitVersion=f.version}return u&&(i.name=u.id,i.version=c,i.majorVersion=parseInt(c,10)),o&&(r.name=o.id,r.version=a,r.webview&&i.name==="ios"&&r.name!=="safari"&&(r.webview=!1)),r.majorVersion=parseInt(r.version,10),{browser:r,os:i,isMobile:n,isHints:!1}}function Lz(t){var e=navigator.userAgentData,n=(e.uaList||e.brands).slice(),r=e.mobile||!1,i=n[0],s=(e.platform||navigator.platform).toLowerCase(),o={name:i.brand,version:i.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!Td(sA,n).brand||aA(tA())},a={name:"unknown",version:"-1",majorVersion:-1};o.webkit=!o.chromium&&e_(Em,function(f){return nA(n,f)});var l=Td(iA,n);if(o.chromium=!!l.brand,o.chromiumVersion=l.version||"-1",!o.chromium){var u=Td(Em,n);o.webkit=!!u.brand,o.webkitVersion=u.version||"-1"}var c=eA(oA,function(f){return new RegExp(""+f.test,"g").exec(s)});a.name=c?c.id:"";{var d=Td(rA,n);o.name=d.brand||o.name,o.version=d.brand&&t?t.uaFullVersion:d.version}return o.webkit&&(a.name=r?"ios":"mac"),a.name==="ios"&&o.webview&&(o.version="-1"),a.version=wm(a.version),o.version=wm(o.version),a.majorVersion=parseInt(a.version,10),o.majorVersion=parseInt(o.version,10),{browser:o,os:a,isMobile:r,isHints:!0}}function Vz(t){return Oz()?Lz():jz(t)}function Fz(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.map(function(r){return r.split(" ").map(function(i){return i?""+t+i:""}).join(" ")}).join(" ")}function zz(t,e){return e.replace(/([^}{]*){/gm,function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"})}function wo(t,e){return function(n){n&&(t[e]=n)}}function lA(t,e,n){return function(r){r&&(t[e][n]=r)}}function Bz(t,e){return e===void 0&&(e={}),function(n,r){t.forEach(function(i){var s=e[i]||i;s in n||(n[s]=function(){for(var o,a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];var u=(o=this[r])[i].apply(o,a);return u===this[r]?this:u})})}}var Uz="function",$z="object",Gz="string",Hz="number",n_="undefined",uA=typeof window!==n_,Wz=typeof document!==n_&&document,qz=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],zt=1e-7,Cd={cm:function(t){return t*96/2.54},mm:function(t){return t*96/254},in:function(t){return t*96},pt:function(t){return t*96/72},pc:function(t){return t*96/6},"%":function(t,e){return t*e/100},vw:function(t,e){return e===void 0&&(e=window.innerWidth),t/100*e},vh:function(t,e){return e===void 0&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Yz(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function oh(t,e,n,r){return(t*r+e*n)/(n+r)}function r_(t){return typeof t===n_}function Br(t){return t&&typeof t===$z}function nn(t){return Array.isArray(t)}function Hi(t){return typeof t===Gz}function Zu(t){return typeof t===Hz}function i_(t){return typeof t===Uz}function Kz(t,e){var n=t===""||t==" ",r=e===""||e==" ";return r&&n||t===e}function cA(t,e,n,r,i){var s=s_(t,e,n);return s?n:Xz(t,e,n+1,r,i)}function s_(t,e,n){if(!t.ignore)return null;var r=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(r)}function Xz(t,e,n,r,i){for(var s=function(u){var c=e[u].trim();if(c===t.close&&!s_(t,e,u))return{value:u};var d=u,f=or(i,function(g){var v=g.open;return v===c});if(f&&(d=cA(f,e,u,r,i)),d===-1)return o=u,"break";u=d,o=u},o,a=n;a<r;++a){var l=s(a);if(a=o,typeof l=="object")return l.value;if(l==="break")break}return-1}function o_(t,e){var n=Hi(e)?{separator:e}:e,r=n.separator,i=r===void 0?",":r,s=n.isSeparateFirst,o=n.isSeparateOnlyOpenClose,a=n.isSeparateOpenClose,l=a===void 0?o:a,u=n.openCloseCharacters,c=u===void 0?qz:u,d=c.map(function(x){var w=x.open,C=x.close;return w===C?w:w+"|"+C}).join("|"),f="(\\s*"+i+"\\s*|"+d+"|\\s+)",g=new RegExp(f,"g"),v=t.split(g).filter(function(x){return x&&x!=="undefined"}),m=v.length,S=[],_=[];function y(){return _.length?(S.push(_.join("")),_=[],!0):!1}for(var E=function(x){var w=v[x].trim(),C=x,b=or(c,function(A){var F=A.open;return F===w}),k=or(c,function(A){var F=A.close;return F===w});if(b){if(C=cA(b,v,x,m,c),C!==-1&&l)return y()&&s||(S.push(v.slice(x,C+1).join("")),x=C,s)?(I=x,"break"):(I=x,"continue")}else if(k&&!s_(k,v,x)){var O=Yz(c);return O.splice(c.indexOf(k),1),{value:o_(t,{separator:i,isSeparateFirst:s,isSeparateOnlyOpenClose:o,isSeparateOpenClose:l,openCloseCharacters:O})}}else if(Kz(w,i)&&!o)return y(),s?(I=x,"break"):(I=x,"continue");C===-1&&(C=m-1),_.push(v.slice(x,C+1).join("")),x=C,I=x},I,N=0;N<m;++N){var R=E(N);if(N=I,typeof R=="object")return R.value;if(R==="break")break}return _.length&&S.push(_.join("")),S}function Ls(t){return o_(t,"")}function go(t){return o_(t,",")}function dA(t){var e=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!e||e.length<4?{}:{prefix:e[1],value:e[2],suffix:e[3]}}function Ic(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var n=e[1],r=e[2],i=e[3];return{prefix:n,unit:i,value:parseFloat(r)}}function Qz(t,e){return t.replace(/([a-z])([A-Z])/g,function(n,r,i){return""+r+e+i.toLowerCase()})}function ec(){return Date.now?Date.now():new Date().getTime()}function Fi(t,e,n){n===void 0&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function or(t,e,n){var r=Fi(t,e);return r>-1?t[r]:n}var fA=function(){var t=ec(),e=uA&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return e?e.bind(window):function(n){var r=ec(),i=setTimeout(function(){n(r-t)},1e3/60);return i}}(),Jz=function(){var t=uA&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(e){clearTimeout(e)}}();function yl(t){return Object.keys(t)}function it(t,e){var n=Ic(t),r=n.value,i=n.unit;if(Br(e)){var s=e[i];if(s){if(i_(s))return s(r);if(Cd[i])return Cd[i](r,s)}}else if(i==="%")return r*e/100;return Cd[i]?Cd[i](r):r}function Sm(t,e,n){return Math.max(e,Math.min(t,n))}function bS(t,e,n,r){return r===void 0&&(r=t[0]/t[1]),[[Ne(e[0],zt),Ne(e[0]/r,zt)],[Ne(e[1]*r,zt),Ne(e[1],zt)]].filter(function(i){return i.every(function(s,o){var a=e[o],l=Ne(a,zt);return n?s<=a||s<=l:s>=a||s>=l})})[0]||t}function hA(t,e,n,r){if(!r)return t.map(function(g,v){return Sm(g,e[v],n[v])});var i=t[0],s=t[1],o=r===!0?i/s:r,a=bS(t,e,!1,o),l=a[0],u=a[1],c=bS(t,n,!0,o),d=c[0],f=c[1];return i<l||s<u?(i=l,s=u):(i>d||s>f)&&(i=d,s=f),[i,s]}function Zz(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return n}function xm(t){for(var e=t.length,n=0,r=e-1;r>=0;--r)n+=t[r];return e?n/e:0}function Mt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function eB(t){return[0,1].map(function(e){return xm(t.map(function(n){return n[e]}))})}function RS(t){var e=eB(t),n=Mt(e,t[0]),r=Mt(e,t[1]);return n<r&&r-n<Math.PI||n>r&&r-n<-Math.PI?1:-1}function Ii(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function Ne(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function AS(t,e){return t.forEach(function(n,r){t[r]=Ne(t[r],e)}),t}function tB(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function nB(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Wt(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function pA(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function gA(t,e){if(t.classList)t.classList.remove(e);else{var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ")}}function wn(t,e,n,r){t.addEventListener(e,n,r)}function on(t,e,n,r){t.removeEventListener(e,n,r)}function a_(t){return(t==null?void 0:t.ownerDocument)||Wz}function l_(t){return a_(t).documentElement}function qs(t){return a_(t).body}function Is(t){var e;return((e=t==null?void 0:t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function vA(t){return t&&"postMessage"in t&&"blur"in t&&"self"in t}function u_(t){return Br(t)&&t.nodeName&&t.nodeType&&"ownerDocument"in t}function rB(t,e,n,r,i,s){for(var o=0;o<i;++o){var a=n+o*i,l=r+o*i;t[a]+=t[l]*s,e[a]+=e[l]*s}}function iB(t,e,n,r,i){for(var s=0;s<i;++s){var o=n+s*i,a=r+s*i,l=t[o],u=e[o];t[o]=t[a],t[a]=l,e[o]=e[a],e[a]=u}}function sB(t,e,n,r,i){for(var s=0;s<r;++s){var o=n+s*r;t[o]/=i,e[o]/=i}}function mA(t,e,n){for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function ui(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=mt(e),i=0;i<e;++i){var s=e*i+i;if(!Ne(n[s],zt)){for(var o=i+1;o<e;++o)if(n[e*i+o]){iB(n,r,i,o,e);break}}if(!Ne(n[s],zt))return[];sB(n,r,i,e,n[s]);for(var o=0;o<e;++o){var a=o,l=o+i*e,u=n[l];!Ne(u,zt)||i===o||rB(n,r,a,i,e,-u)}}return r}function oB(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}function yA(t,e){e===void 0&&(e=Math.sqrt(t.length));for(var n=[],r=t[e*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function aB(t,e){for(var n=mt(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function ko(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function Ur(t,e,n){if(e===void 0&&(e=Math.sqrt(t.length)),e===n)return t;for(var r=mt(n),i=Math.min(e,n),s=0;s<i-1;++s){for(var o=0;o<i-1;++o)r[s*n+o]=t[s*e+o];r[(s+1)*n-1]=t[(s+1)*e-1],r[(n-1)*n+s]=t[(e-1)*e+s]}return r[n*n-1]=t[e*e-1],r}function ah(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=mt(t);return e.forEach(function(i){r=st(r,i,t)}),r}function st(t,e,n){n===void 0&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,s=e.length/i;if(i){if(!s)return t}else return e;for(var o=0;o<n;++o)for(var a=0;a<s;++a){r[a*n+o]=0;for(var l=0;l<i;++l)r[a*n+o]+=t[l*n+o]*e[a*i+l]}return r}function Xe(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function Ie(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function lB(t,e){return e===void 0&&(e=t.length===6),e?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function _A(t,e){return e===void 0&&(e=t.length===9),e?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function In(t,e,n){n===void 0&&(n=e.length);var r=st(t,e,n),i=r[n-1];return r.map(function(s){return s/i})}function uB(t,e){return st(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function cB(t,e){return st(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function dB(t,e){return st(t,Rc(e,4))}function Id(t,e){var n=e[0],r=n===void 0?1:n,i=e[1],s=i===void 0?1:i,o=e[2],a=o===void 0?1:o;return st(t,[r,0,0,0,0,s,0,0,0,0,a,0,0,0,0,1],4)}function bc(t,e){return In(Rc(e,3),ko(t,3))}function Ng(t,e){var n=e[0],r=n===void 0?0:n,i=e[1],s=i===void 0?0:i,o=e[2],a=o===void 0?0:o;return st(t,[1,0,0,0,0,1,0,0,0,0,1,0,r,s,a,1],4)}function PS(t,e){return st(t,e,4)}function Rc(t,e){var n=Math.cos(t),r=Math.sin(t),i=mt(e);return i[0]=n,i[1]=r,i[e]=-r,i[e+1]=n,i}function mt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function c_(t,e){for(var n=mt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Do(t,e){for(var n=mt(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function d_(t,e,n,r,i,s,o,a){var l=t[0],u=t[1],c=e[0],d=e[1],f=n[0],g=n[1],v=r[0],m=r[1],S=i[0],_=i[1],y=s[0],E=s[1],I=o[0],N=o[1],R=a[0],x=a[1],w=[l,0,c,0,f,0,v,0,u,0,d,0,g,0,m,0,1,0,1,0,1,0,1,0,0,l,0,c,0,f,0,v,0,u,0,d,0,g,0,m,0,1,0,1,0,1,0,1,-S*l,-_*l,-y*c,-E*c,-I*f,-N*f,-R*v,-x*v,-S*u,-_*u,-y*d,-E*d,-I*g,-N*g,-R*m,-x*m],C=ui(w,8);if(!C.length)return[];var b=st(C,[S,_,y,E,I,N,R,x],8);return b[8]=1,Ur(oB(b),3,4)}var yu=function(){return yu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yu.apply(this,arguments)};function fB(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tc(t,e){return e===void 0&&(e=0),ea(Xa(t,e))}function hB(t,e){var n=In(t,[e[0],e[1]||0,e[2]||0,1],4),r=n[3]||1;return[n[0]/r,n[1]/r,n[2]/r]}function ea(t){var e=fB();return t.forEach(function(n){var r=n.matrixFunction,i=n.functionValue;r&&(e=r(e,i))}),e}function Xa(t,e){e===void 0&&(e=0);var n=nn(t)?t:Ls(t);return n.map(function(r){var i=dA(r),s=i.prefix,o=i.value,a=null,l=s,u="";if(s==="translate"||s==="translateX"||s==="translate3d"){var c=Br(e)?yu(yu({},e),{"o%":e["%"]}):{"%":e,"o%":e},d=go(o).map(function(A,F){return F===0&&"x%"in c?c["%"]=e["x%"]:F===1&&"y%"in c?c["%"]=e["y%"]:c["%"]=e["o%"],it(A,c)}),f=d[0],g=d[1],v=g===void 0?0:g,m=d[2],S=m===void 0?0:m;a=Ng,u=[f,v,S]}else if(s==="translateY"){var _=Br(e)?yu({"%":e["y%"]},e):{"%":e},v=it(o,_);a=Ng,u=[0,v,0]}else if(s==="translateZ"){var S=parseFloat(o);a=Ng,u=[0,0,S]}else if(s==="scale"||s==="scale3d"){var y=go(o).map(function(A){return parseFloat(A)}),E=y[0],I=y[1],N=I===void 0?E:I,R=y[2],x=R===void 0?1:R;a=Id,u=[E,N,x]}else if(s==="scaleX"){var E=parseFloat(o);a=Id,u=[E,1,1]}else if(s==="scaleY"){var N=parseFloat(o);a=Id,u=[1,N,1]}else if(s==="scaleZ"){var x=parseFloat(o);a=Id,u=[1,1,x]}else if(s==="rotate"||s==="rotateZ"||s==="rotateX"||s==="rotateY"){var w=Ic(o),C=w.unit,b=w.value,k=C==="rad"?b:b*Math.PI/180;s==="rotate"||s==="rotateZ"?(l="rotateZ",a=dB):s==="rotateX"?a=uB:s==="rotateY"&&(a=cB),u=k}else if(s==="matrix3d")a=PS,u=go(o).map(function(A){return parseFloat(A)});else if(s==="matrix"){var O=go(o).map(function(A){return parseFloat(A)});a=PS,u=[O[0],O[1],0,0,O[2],O[3],0,0,0,0,1,0,O[4],O[5],0,1]}else l="";return{name:s,functionName:l,value:o,matrixFunction:a,functionValue:u}})}var pB=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(n){return this.values[this.keys.indexOf(n)]},e.set=function(n,r){var i=this.keys,s=this.values,o=i.indexOf(n),a=o===-1?i.length:o;i[a]=n,s[a]=r},t}(),gB=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(n){return this.object[n]},e.set=function(n,r){this.object[n]=r},t}(),vB=typeof Map=="function",mB=function(){function t(){}var e=t.prototype;return e.connect=function(n,r){this.prev=n,this.next=r,n&&(n.next=this),r&&(r.prev=this)},e.disconnect=function(){var n=this.prev,r=this.next;n&&(n.next=r),r&&(r.prev=n)},e.getIndex=function(){for(var n=this,r=-1;n;)n=n.prev,++r;return r},t}();function yB(t,e){var n=[],r=[];return t.forEach(function(i){var s=i[0],o=i[1],a=new mB;n[s]=a,r[o]=a}),n.forEach(function(i,s){i.connect(n[s-1])}),t.filter(function(i,s){return!e[s]}).map(function(i,s){var o=i[0],a=i[1];if(o===a)return[0,0];var l=n[o],u=r[a-1],c=l.getIndex();l.disconnect(),u?l.connect(u,u.next):l.connect(void 0,n[0]);var d=l.getIndex();return[c,d]})}var _B=function(){function t(n,r,i,s,o,a,l,u){this.prevList=n,this.list=r,this.added=i,this.removed=s,this.changed=o,this.maintained=a,this.changedBeforeAdded=l,this.fixed=u}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var n=yB(this.changedBeforeAdded,this.fixed),r=this.changed,i=[];this.cacheOrdered=n.filter(function(s,o){var a=s[0],l=s[1],u=r[o],c=u[0],d=u[1];if(a!==l)return i.push([c,d]),!0}),this.cachePureChanged=i},t}();function f_(t,e,n){var r=vB?Map:n?gB:pB,i=n||function(y){return y},s=[],o=[],a=[],l=t.map(i),u=e.map(i),c=new r,d=new r,f=[],g=[],v={},m=[],S=0,_=0;return l.forEach(function(y,E){c.set(y,E)}),u.forEach(function(y,E){d.set(y,E)}),l.forEach(function(y,E){var I=d.get(y);typeof I>"u"?(++_,o.push(E)):v[I]=_}),u.forEach(function(y,E){var I=c.get(y);typeof I>"u"?(s.push(E),++S):(a.push([I,E]),_=v[E]||0,f.push([I-_,E-S]),g.push(E===I),I!==E&&m.push([I,E]))}),o.reverse(),new _B(t,e,s,o,m,a,f,g)}var wB=function(){function t(n,r){n===void 0&&(n=[]),this.findKeyCallback=r,this.list=[].slice.call(n)}var e=t.prototype;return e.update=function(n){var r=[].slice.call(n),i=f_(this.list,r,this.findKeyCallback);return this.list=r,i},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Tm=function(t,e){return Tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Tm(t,e)};function EB(t,e){Tm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var wA=typeof Map=="function"?void 0:function(){var t=0;return function(e){return e.__DIFF_KEY__||(e.__DIFF_KEY__=++t)}}(),EA=function(t){EB(e,t);function e(n){return n===void 0&&(n=[]),t.call(this,n,wA)||this}return e}(wB);function SB(t,e){return f_(t,e,wA)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cm=function(){return Cm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cm.apply(this,arguments)};function xB(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var h_=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(n,r){if(Br(n))for(var i in n)this.on(i,n[i]);else this._addEvent(n,r,{});return this},e.off=function(n,r){if(!n)this._events={};else if(Br(n))for(var i in n)this.off(i);else if(!r)this._events[n]=[];else{var s=this._events[n];if(s){var o=Fi(s,function(a){return a.listener===r});o>-1&&s.splice(o,1)}}return this},e.once=function(n,r){var i=this;return r&&this._addEvent(n,r,{once:!0}),new Promise(function(s){i._addEvent(n,s,{once:!0})})},e.emit=function(n,r){var i=this;r===void 0&&(r={});var s=this._events[n];if(!n||!s)return!0;var o=!1;return r.eventType=n,r.stop=function(){o=!0},r.currentTarget=this,xB(s).forEach(function(a){a.listener(r),a.once&&i.off(n,a.listener)}),!o},e.trigger=function(n,r){return r===void 0&&(r={}),this.emit(n,r)},e._addEvent=function(n,r,i){var s=this._events;s[n]=s[n]||[];var o=s[n];o.push(Cm({listener:r},i))},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Im=function(t,e){return Im=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Im(t,e)};function TB(t,e){Im(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var ga=function(){return ga=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ga.apply(this,arguments)};function CB(t){var e=t.container;return e===document.body?[e.scrollLeft||document.documentElement.scrollLeft,e.scrollTop||document.documentElement.scrollTop]:[e.scrollLeft,e.scrollTop]}function kS(t,e){return t.addEventListener("scroll",e),function(){t.removeEventListener("scroll",e)}}function bd(t){if(t){if(Hi(t))return document.querySelector(t)}else return null;if(i_(t))return t();if(t instanceof Element)return t;if("current"in t)return t.current;if("value"in t)return t.value}var IB=function(t){TB(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r._startRect=null,r._startPos=[],r._prevTime=0,r._timer=0,r._prevScrollPos=[0,0],r._isWait=!1,r._flag=!1,r._currentOptions=null,r._lock=!1,r._unregister=null,r._onScroll=function(){var i=r._currentOptions;r._lock||!i||r.emit("scrollDrag",{next:function(s){r.checkScroll({container:i.container,inputEvent:s})}})},r}var n=e.prototype;return n.dragStart=function(r,i){var s=bd(i.container);if(!s){this._flag=!1;return}var o=0,a=0,l=0,u=0;if(s===document.body)l=window.innerWidth,u=window.innerHeight;else{var c=s.getBoundingClientRect();o=c.top,a=c.left,l=c.width,u=c.height}this._flag=!0,this._startPos=[r.clientX,r.clientY],this._startRect={top:o,left:a,width:l,height:u},this._prevScrollPos=this._getScrollPosition([0,0],i),this._currentOptions=i,this._registerScrollEvent(i)},n.drag=function(r,i){if(clearTimeout(this._timer),!!this._flag){var s=r.clientX,o=r.clientY,a=i.threshold,l=a===void 0?0:a,u=this,c=u._startRect,d=u._startPos;this._currentOptions=i;var f=[0,0];return c.top>o-l?(d[1]>c.top||o<d[1])&&(f[1]=-1):c.top+c.height<o+l&&(d[1]<c.top+c.height||o>d[1])&&(f[1]=1),c.left>s-l?(d[0]>c.left||s<d[0])&&(f[0]=-1):c.left+c.width<s+l&&(d[0]<c.left+c.width||s>d[0])&&(f[0]=1),!f[0]&&!f[1]?!1:this._continueDrag(ga(ga({},i),{direction:f,inputEvent:r,isDrag:!0}))}},n.checkScroll=function(r){var i=this;if(this._isWait)return!1;var s=r.prevScrollPos,o=s===void 0?this._prevScrollPos:s,a=r.direction,l=r.throttleTime,u=l===void 0?0:l,c=r.inputEvent,d=r.isDrag,f=this._getScrollPosition(a||[0,0],r),g=f[0]-o[0],v=f[1]-o[1],m=a||[g?Math.abs(g)/g:0,v?Math.abs(v)/v:0];return this._prevScrollPos=f,this._lock=!1,!g&&!v?!1:(this.emit("move",{offsetX:m[0]?g:0,offsetY:m[1]?v:0,inputEvent:c}),u&&d&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},u)),!0)},n.dragEnd=function(){this._flag=!1,this._lock=!1,clearTimeout(this._timer),this._unregisterScrollEvent()},n._getScrollPosition=function(r,i){var s=i.container,o=i.getScrollPosition,a=o===void 0?CB:o;return a({container:bd(s),direction:r})},n._continueDrag=function(r){var i=this,s,o=r.container,a=r.direction,l=r.throttleTime,u=r.useScroll,c=r.isDrag,d=r.inputEvent;if(!(!this._flag||c&&this._isWait)){var f=ec(),g=Math.max(l+this._prevTime-f,0);if(g>0)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){i._continueDrag(r)},g),!1;this._prevTime=f;var v=this._getScrollPosition(a,r);this._prevScrollPos=v,c&&(this._isWait=!0),u||(this._lock=!0);var m={container:bd(o),direction:a,inputEvent:d};return(s=r.requestScroll)===null||s===void 0||s.call(r,m),this.emit("scroll",m),this._isWait=!1,u||this.checkScroll(ga(ga({},r),{prevScrollPos:v,direction:a,inputEvent:d}))}},n._registerScrollEvent=function(r){this._unregisterScrollEvent();var i=r.checkScrollEvent;if(i){var s=i===!0?kS:i,o=bd(r.container);i===!0&&(o===document.body||o===document.documentElement)?this._unregister=kS(window,this._onScroll):this._unregister=s(o,this._onScroll)}},n._unregisterScrollEvent=function(){var r;(r=this._unregister)===null||r===void 0||r.call(this),this._unregister=null},e}(h_);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function bB(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function Un(t){return Ne(t,zt)}function RB(t,e){return t.every(function(n,r){return Un(n-e[r])===0})}function AB(t,e){return!Un(t[0]-e[0])&&!Un(t[1]-e[1])}function SA(t){return t.length<3?0:Math.abs(Zz(t.map(function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]})))/2}function DS(t,e){var n=e.width,r=e.height,i=e.left,s=e.top,o=No(t),a=o.minX,l=o.minY,u=o.maxX,c=o.maxY,d=n/(u-a),f=r/(c-l);return t.map(function(g){return[i+(g[0]-a)*d,s+(g[1]-l)*f]})}function No(t){var e=t.map(function(r){return r[0]}),n=t.map(function(r){return r[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function bm(t,e,n){var r=t[0],i=t[1],s=No(e),o=s.minX,a=s.maxX,l=[[o,i],[a,i]],u=lh(l[0],l[1]),c=Rm(e),d=[];if(c.forEach(function(v){var m=lh(v[0],v[1]),S=v[0];if(RB(u,m))d.push({pos:t,line:v,type:"line"});else{var _=xA(p_(u,m),[l,v]);_.forEach(function(y){v.some(function(E){return AB(E,y)})?d.push({pos:y,line:v,type:"point"}):Un(S[1]-i)!==0&&d.push({pos:y,line:v,type:"intersection"})})}}),or(d,function(v){return v[0]===r}))return!0;var f=0,g={};return d.forEach(function(v){var m=v.pos,S=v.type,_=v.line;if(!(m[0]>r))if(S==="intersection")++f;else{if(S==="line")return;if(S==="point"){var y=or(_,function(N){return N[1]!==i}),E=g[m[0]],I=y[1]>i?1:-1;E?E!==I&&++f:g[m[0]]=I}}}),f%2===1}function lh(t,e){var n=t[0],r=t[1],i=e[0],s=e[1],o=i-n,a=s-r;Math.abs(o)<zt&&(o=0),Math.abs(a)<zt&&(a=0);var l=0,u=0,c=0;return o?a?(l=-a/o,u=1,c=-l*n-r):(u=1,c=-r):a&&(l=-1,c=n),[l,u,c]}function p_(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=n===0&&s===0,u=r===0&&o===0,c=[];if(l&&u)return[];if(l){var d=-i/r,f=-a/o;return d!==f?[]:[[-1/0,d],[1/0,d]]}else if(u){var g=-i/n,v=-a/s;return g!==v?[]:[[g,-1/0],[g,1/0]]}else if(n===0){var m=-i/r,S=-(o*m+a)/s;c=[[S,m]]}else if(s===0){var m=-a/o,S=-(r*m+i)/n;c=[[S,m]]}else if(r===0){var S=-i/n,m=-(s*S+a)/o;c=[[S,m]]}else if(o===0){var S=-a/s,m=-(n*S+i)/r;c=[[S,m]]}else{var S=(r*a-o*i)/(o*n-r*s),m=-(n*S+i)/r;c=[[S,m]]}return c.map(function(_){return[_[0],_[1]]})}function xA(t,e){var n=e.map(function(d){return[0,1].map(function(f){return[Math.min(d[0][f],d[1][f]),Math.max(d[0][f],d[1][f])]})}),r=[];if(t.length===2){var i=t[0],s=i[0],o=i[1];if(Un(s-t[1][0])){if(!Un(o-t[1][1])){var u=Math.max.apply(Math,n.map(function(d){return d[0][0]})),c=Math.min.apply(Math,n.map(function(d){return d[0][1]}));if(Un(u-c)>0)return[];r=[[u,o],[c,o]]}}else{var a=Math.max.apply(Math,n.map(function(d){return d[1][0]})),l=Math.min.apply(Math,n.map(function(d){return d[1][1]}));if(Un(a-l)>0)return[];r=[[s,a],[s,l]]}}return r.length||(r=t.filter(function(d){var f=d[0],g=d[1];return n.every(function(v){return 0<=Un(f-v[0][0])&&0<=Un(v[0][1]-f)&&0<=Un(g-v[1][0])&&0<=Un(v[1][1]-g)})})),r.map(function(d){return[Un(d[0]),Un(d[1])]})}function Rm(t){return bB(t.slice(1),[t[0]]).map(function(e,n){return[t[n],e]})}function PB(t,e){var n=t.slice(),r=e.slice();RS(n)===-1&&n.reverse(),RS(r)===-1&&r.reverse();var i=Rm(n),s=Rm(r),o=i.map(function(c){return lh(c[0],c[1])}),a=s.map(function(c){return lh(c[0],c[1])}),l=[];o.forEach(function(c,d){var f=i[d],g=[];a.forEach(function(v,m){var S=p_(c,v),_=xA(S,[f,s[m]]);g.push.apply(g,_.map(function(y){return{index1:d,index2:m,pos:y,type:"intersection"}}))}),g.sort(function(v,m){return Ii(f[0],v.pos)-Ii(f[0],m.pos)}),l.push.apply(l,g),bm(f[1],r)&&l.push({index1:d,index2:-1,pos:f[1],type:"inside"})}),s.forEach(function(c,d){if(bm(c[1],n)){var f=!1,g=Fi(l,function(v){var m=v.index2;return m===d?(f=!0,!1):!!f});g===-1&&(f=!1,g=Fi(l,function(v){var m=v.index1,S=v.index2;return m===-1&&S+1===d?(f=!0,!1):!!f})),g===-1?l.push({index1:-1,index2:d,pos:c[1],type:"inside"}):l.splice(g,0,{index1:-1,index2:d,pos:c[1],type:"inside"})}});var u={};return l.filter(function(c){var d=c.pos,f=d[0]+"x"+d[1];return u[f]?!1:(u[f]=!0,!0)})}function kB(t,e){var n=PB(t,e);return n.map(function(r){var i=r.pos;return i})}function DB(t,e){var n=kB(t,e);return SA(n)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Am=function(t,e){return Am=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Am(t,e)};function NB(t,e){Am(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var jt=function(){return jt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jt.apply(this,arguments)};function OB(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=Math.atan2(r,n);return i>=0?i:i+Math.PI*2}function Og(t){return OB([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function MB(t){return t.touches&&t.touches.length>=2}function Rd(t){return t?t.touches?LB(t.touches):[TA(t)]:[]}function jB(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function NS(t,e,n){var r=n.length,i=_u(t,r),s=i.clientX,o=i.clientY,a=i.originalClientX,l=i.originalClientY,u=_u(e,r),c=u.clientX,d=u.clientY,f=_u(n,r),g=f.clientX,v=f.clientY,m=s-c,S=o-d,_=s-g,y=o-v;return{clientX:a,clientY:l,deltaX:m,deltaY:S,distX:_,distY:y}}function Mg(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function LB(t){for(var e=Math.min(t.length,2),n=[],r=0;r<e;++r)n.push(TA(t[r]));return n}function TA(t){return{clientX:t.clientX,clientY:t.clientY}}function _u(t,e){e===void 0&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=Math.min(t.length,e),i=0;i<r;++i){var s=t[i];n.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,n.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,n.clientX+=s.clientX,n.clientY+=s.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var jg=function(){function t(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return t.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),Og(e)},t.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),Og(e)-Og(this.startClients)},t.prototype.getPosition=function(e,n){e===void 0&&(e=this.prevClients);var r=NS(e||this.prevClients,this.prevClients,this.startClients),i=r.deltaX,s=r.deltaY;return this.movement+=Math.sqrt(i*i+s*s),this.prevClients=e,r},t.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var n=this.prevClients,r=this.startClients,i=Math.min(this.length,n.length),s=[],o=0;o<i;++o)s[o]=NS([e[o]],[n[o]],[r[o]]);return s},t.prototype.getMovement=function(e){var n=this.movement;if(!e)return n;var r=_u(e,this.length),i=_u(this.prevClients,this.length),s=r.clientX-i.clientX,o=r.clientY-i.clientY;return Math.sqrt(s*s+o*o)+n},t.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Mg(e)},t.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Mg(e)/Mg(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(r){r.clientX-=e,r.clientY-=n}),this.prevClients.forEach(function(r){r.clientX-=e,r.clientY-=n})},t}(),OS=["textarea","input"],VB=function(t){NB(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this)||this;i.options={},i.flag=!1,i.pinchFlag=!1,i.data={},i.isDrag=!1,i.isPinch=!1,i.clientStores=[],i.targets=[],i.prevTime=0,i.doubleFlag=!1,i._useMouse=!1,i._useTouch=!1,i._useDrag=!1,i._dragFlag=!1,i._isTrusted=!1,i._isMouseEvent=!1,i._isSecondaryButton=!1,i._preventMouseEvent=!1,i._prevInputEvent=null,i._isDragAPI=!1,i._isIdle=!0,i._preventMouseEventId=0,i._window=window,i.onDragStart=function(f,g){if(g===void 0&&(g=!0),!(!i.flag&&f.cancelable===!1)){var v=f.type.indexOf("drag")>=-1;if(!(i.flag&&v)){i._isDragAPI=!0;var m=i.options,S=m.container,_=m.pinchOutside,y=m.preventWheelClick,E=m.preventRightClick,I=m.preventDefault,N=m.checkInput,R=m.dragFocusedInput,x=m.preventClickEventOnDragStart,w=m.preventClickEventOnDrag,C=m.preventClickEventByCondition,b=i._useTouch,k=!i.flag;if(i._isSecondaryButton=f.which===3||f.button===2,y&&(f.which===2||f.button===1)||E&&(f.which===3||f.button===2))return i.stop(),!1;if(k){var O=i._window.document.activeElement,A=f.target;if(A){var F=A.tagName.toLowerCase(),G=OS.indexOf(F)>-1,Y=A.isContentEditable;if(G||Y){if(N||!R&&O===A)return!1;if(O&&(O===A||Y&&O.isContentEditable&&O.contains(A)))if(R)A.blur();else return!1}else if((I||f.type==="touchstart")&&O){var H=O.tagName.toLowerCase();(O.isContentEditable||OS.indexOf(H)>-1)&&O.blur()}(x||w||C)&&wn(i._window,"click",i._onClick,!0)}i.clientStores=[new jg(Rd(f))],i._isIdle=!1,i.flag=!0,i.isDrag=!1,i._isTrusted=g,i._dragFlag=!0,i._prevInputEvent=f,i.data={},i.doubleFlag=ec()-i.prevTime<200,i._isMouseEvent=jB(f),!i._isMouseEvent&&i._preventMouseEvent&&i._allowMouseEvent();var j=i._preventMouseEvent||i.emit("dragStart",jt(jt({data:i.data,datas:i.data,inputEvent:f,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,isTrusted:g,isDouble:i.doubleFlag},i.getCurrentStore().getPosition()),{preventDefault:function(){f.preventDefault()},preventDrag:function(){i._dragFlag=!1}}));j===!1&&i.stop(),i._isMouseEvent&&i.flag&&I&&f.preventDefault()}if(!i.flag)return!1;var L=0;if(k?(i._attchDragEvent(),b&&_&&(L=setTimeout(function(){wn(S,"touchstart",i.onDragStart,{passive:!1})}))):b&&_&&on(S,"touchstart",i.onDragStart),i.flag&&MB(f)){if(clearTimeout(L),k&&f.touches.length!==f.changedTouches.length)return;i.pinchFlag||i.onPinchStart(f)}}}},i.onDrag=function(f,g){if(i.flag){var v=i.options.preventDefault;!i._isMouseEvent&&v&&f.preventDefault(),i._prevInputEvent=f;var m=Rd(f),S=i.moveClients(m,f,!1);if(i._dragFlag){if(i.pinchFlag||S.deltaX||S.deltaY){var _=i._preventMouseEvent||i.emit("drag",jt(jt({},S),{isScroll:!!g,inputEvent:f}));if(_===!1){i.stop();return}}i.pinchFlag&&i.onPinch(f,m)}i.getCurrentStore().getPosition(m,!0)}},i.onDragEnd=function(f){if(i.flag){var g=i.options,v=g.pinchOutside,m=g.container,S=g.preventClickEventOnDrag,_=g.preventClickEventOnDragStart,y=g.preventClickEventByCondition,E=i.isDrag;(S||_||y)&&requestAnimationFrame(function(){i._allowClickEvent()}),!y&&!_&&S&&!E&&i._allowClickEvent(),i._useTouch&&v&&on(m,"touchstart",i.onDragStart),i.pinchFlag&&i.onPinchEnd(f);var I=f!=null&&f.touches?Rd(f):[],N=I.length;N===0||!i.options.keepDragging?i.flag=!1:i._addStore(new jg(I));var R=i._getPosition(),x=ec(),w=!E&&i.doubleFlag;i._prevInputEvent=null,i.prevTime=E||w?0:x,i.flag||(i._dettachDragEvent(),i._preventMouseEvent||i.emit("dragEnd",jt({data:i.data,datas:i.data,isDouble:w,isDrag:E,isClick:!E,isMouseEvent:i._isMouseEvent,isSecondaryButton:i._isSecondaryButton,inputEvent:f,isTrusted:i._isTrusted},R)),i.clientStores=[],i._isMouseEvent||(i._preventMouseEvent=!0,clearTimeout(i._preventMouseEventId),i._preventMouseEventId=setTimeout(function(){i._preventMouseEvent=!1},200)),i._isIdle=!0)}},i.onBlur=function(){i.onDragEnd()},i._allowClickEvent=function(){on(i._window,"click",i._onClick,!0)},i._onClick=function(f){i._allowClickEvent(),i._allowMouseEvent();var g=i.options.preventClickEventByCondition;g!=null&&g(f)||(f.stopPropagation(),f.preventDefault())},i._onContextMenu=function(f){var g=i.options;g.preventRightClick?i.onDragEnd(f):f.preventDefault()},i._passCallback=function(){};var s=[].concat(n),o=s[0];i._window=vA(o)?o:Is(o),i.options=jt({checkInput:!1,container:o&&!("document"in o)?Is(o):o,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=i.options,l=a.container,u=a.events,c=a.checkWindowBlur;if(i._useDrag=u.indexOf("drag")>-1,i._useTouch=u.indexOf("touch")>-1,i._useMouse=u.indexOf("mouse")>-1,i.targets=s,i._useDrag&&s.forEach(function(f){wn(f,"dragstart",i.onDragStart)}),i._useMouse&&(s.forEach(function(f){wn(f,"mousedown",i.onDragStart),wn(f,"mousemove",i._passCallback)}),wn(l,"contextmenu",i._onContextMenu)),c&&wn(Is(),"blur",i.onBlur),i._useTouch){var d={passive:!1};s.forEach(function(f){wn(f,"touchstart",i.onDragStart,d),wn(f,"touchmove",i._passCallback,d)})}return i}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(n){return this.getCurrentStore().getMovement(n)+this.clientStores.slice(1).reduce(function(r,i){return r+i.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(n,r,i,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(n,r),s&&this.onDrag(i,!0))},e.prototype.move=function(n,r){var i=n[0],s=n[1],o=this.getCurrentStore(),a=o.prevClients;return this.moveClients(a.map(function(l){var u=l.clientX,c=l.clientY;return{clientX:u+i,clientY:c+s,originalClientX:u,originalClientY:c}}),r,!0)},e.prototype.triggerDragStart=function(n){this.onDragStart(n,!1)},e.prototype.setEventData=function(n){var r=this.data;for(var i in n)r[i]=n[i];return this},e.prototype.setEventDatas=function(n){return this.setEventData(n)},e.prototype.getCurrentEvent=function(n){return n===void 0&&(n=this._prevInputEvent),jt(jt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var n=this,r=this.targets,i=this.options.container;this.off(),on(this._window,"blur",this.onBlur),this._useDrag&&r.forEach(function(s){on(s,"dragstart",n.onDragStart)}),this._useMouse&&(r.forEach(function(s){on(s,"mousedown",n.onDragStart)}),on(i,"contextmenu",this._onContextMenu)),this._useTouch&&(r.forEach(function(s){on(s,"touchstart",n.onDragStart)}),on(i,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(n){var r=this,i=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>i)){var s=new jg(Rd(n));this.pinchFlag=!0,this._addStore(s);var o=this.emit("pinchStart",jt(jt({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:n,isTrusted:this._isTrusted,preventDefault:function(){n.preventDefault()},preventDrag:function(){r._dragFlag=!1}}));o===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(n,r){if(!(!this.flag||!this.pinchFlag||r.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",jt(jt({data:this.data,datas:this.data,movement:this.getMovement(r),angle:i.getAngle(r),rotation:i.getRotation(r),touches:i.getPositions(r),scale:i.getScale(r),distance:i.getDistance(r)},i.getPosition(r)),{inputEvent:n,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(n){if(this.pinchFlag){var r=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",jt(jt({data:this.data,datas:this.data,isPinch:r,touches:i.getPositions()},i.getPosition()),{inputEvent:n}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(n,r,i){var s=this._getPosition(n,i),o=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var a=!1;return!o&&this.isDrag&&(a=!0),jt(jt({data:this.data,datas:this.data},s),{movement:this.getMovement(n),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:r,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(n){this.clientStores.splice(0,0,n)},e.prototype._getPosition=function(n,r){var i=this.getCurrentStore(),s=i.getPosition(n,r),o=this.clientStores.slice(1).reduce(function(u,c){var d=c.getPosition();return u.distX+=d.distX,u.distY+=d.distY,u},s),a=o.distX,l=o.distY;return jt(jt({},s),{distX:a,distY:l})},e.prototype._attchDragEvent=function(){var n=this._window,r=this.options.container,i={passive:!1};this._isDragAPI&&(wn(r,"dragover",this.onDrag,i),wn(n,"dragend",this.onDragEnd)),this._useMouse&&(wn(r,"mousemove",this.onDrag),wn(n,"mouseup",this.onDragEnd)),this._useTouch&&(wn(r,"touchmove",this.onDrag,i),wn(n,"touchend",this.onDragEnd,i),wn(n,"touchcancel",this.onDragEnd,i))},e.prototype._dettachDragEvent=function(){var n=this._window,r=this.options.container;this._isDragAPI&&(on(r,"dragover",this.onDrag),on(n,"dragend",this.onDragEnd)),this._useMouse&&(on(r,"mousemove",this.onDrag),on(n,"mouseup",this.onDragEnd)),this._useTouch&&(on(r,"touchstart",this.onDragStart),on(r,"touchmove",this.onDrag),on(n,"touchend",this.onDragEnd),on(n,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(h_);function FB(t){for(var e=5381,n=t.length;n;)e=e*33^t.charCodeAt(--n);return e>>>0}var zB=FB;function BB(t){return zB(t).toString(36)}function UB(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function $B(t,e,n){return n.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(r,i){var s=i.trim();return(s?go(s):[""]).map(function(o){var a=o.trim();return a.indexOf("@")===0?a:a.indexOf(":global")>-1?a.replace(/\:global/g,""):a.indexOf(":host")>-1?"".concat(a.replace(/\:host/g,".".concat(t))):a?".".concat(t," ").concat(a):".".concat(t)}).join(", ")+" {"})}function GB(t,e,n,r,i){var s=a_(r),o=s.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),o.setAttribute("data-styled-count","1"),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=$B(t,e,n),(i||s.head||s.body).appendChild(o),o}function HB(t){var e="rCS"+BB(t);return{className:e,inject:function(n,r){r===void 0&&(r={});var i=UB(n),s=(i||n.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!s)s=GB(e,t,r,n,i);else{var o=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(o+1))}return{destroy:function(){var a,l=parseFloat(s.getAttribute("data-styled-count"))||0;l<=1?(s.remove?s.remove():(a=s.parentNode)===null||a===void 0||a.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(l-1))}}}}}var Pm=function(){return Pm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pm.apply(this,arguments)};function WB(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function CA(t,e){var n=HB(e),r=n.className;return D.forwardRef(function(i,s){var o=i.className,a=o===void 0?"":o;i.cspNonce;var l=WB(i,["className","cspNonce"]),u=D.useRef();return D.useImperativeHandle(s,function(){return u.current},[]),D.useEffect(function(){var c=n.inject(u.current,{nonce:i.cspNonce});return function(){c.destroy()}},[]),D.createElement(t,Pm({ref:u,"data-styled-id":r,className:"".concat(a," ").concat(r)},l))})}var km=function(t,e){return km=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},km(t,e)};function Ac(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");km(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var V=function(){return V=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},V.apply(this,arguments)};function qB(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function YB(t,e,n,r){var i=arguments.length,s=i<3?e:r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function KB(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function ae(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Pc(t,e){return V({events:[],props:[],name:t},e)}var XB=["n","w","s","e"],g_=["n","w","s","e","nw","ne","sw","se"];function QB(t,e){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*t,'px" height="').concat(32*t,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(e,'deg);transform-origin: 16px 16px"></path></svg>')}function JB(t){var e=QB(1,t),n=Math.round(t/45)*45%180,r="ns-resize";return n===135?r="nwse-resize":n===45?r="nesw-resize":n===90&&(r="ew-resize"),"cursor:".concat(r,";cursor: url('").concat(e,"') 16 16, ").concat(r,";")}var _l=Vz(),IA=_l.browser.webkit,bA=IA&&function(){var t=typeof window>"u"?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return e?parseFloat(e[1])<605:!1}(),RA=_l.browser.name,AA=parseInt(_l.browser.version,10),ZB=RA==="chrome",e6=_l.browser.chromium,t6=parseInt(_l.browser.chromiumVersion,10)||0,n6=ZB&&AA>=109||e6&&t6>=109,r6=RA==="firefox",i6=parseInt(_l.browser.webkitVersion,10)>=612||AA>=15,v_="moveable-",s6=g_.map(function(t){var e="",n="",r="center",i="center",s="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(s,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(n="left: ".concat(s,";"),r="right"),t.indexOf("e")>-1&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,`"] {
        `).concat(n).concat(e,`
        transform-origin: `).concat(r," ").concat(i,`;
    }`)}).join(`
`),o6=`
{
position: absolute;
width: 1px;
height: 1px;
left: 0;
top: 0;
z-index: 3000;
--moveable-color: #4af;
--zoom: 1;
--zoompx: 1px;
--moveable-line-padding: 0;
--moveable-control-padding: 0;
will-change: transform;
outline: 1px solid transparent;
}
.control-box {
z-index: 0;
}
.line, .control {
position: absolute;
left: 0;
top: 0;
will-change: transform;
}
.control {
width: 14px;
height: 14px;
border-radius: 50%;
border: 2px solid #fff;
box-sizing: border-box;
background: #4af;
background: var(--moveable-color);
margin-top: -7px;
margin-left: -7px;
border: 2px solid #fff;
z-index: 10;
}
.around-control {
position: absolute;
will-change: transform;
width: calc(var(--moveable-control-padding, 20) * 1px);
height: calc(var(--moveable-control-padding, 20) * 1px);
left: calc(var(--moveable-control-padding, 20) * -0.5px);
top: calc(var(--moveable-control-padding, 20) * -0.5px);
box-sizing: border-box;
background: transparent;
z-index: 8;
cursor: alias;
transform-origin: center center;
}
`.concat(s6,`
.padding {
position: absolute;
top: 0px;
left: 0px;
width: 100px;
height: 100px;
transform-origin: 0 0;
}
.line {
width: 1px;
height: 1px;
background: #4af;
background: var(--moveable-color);
transform-origin: 0px 50%;
}
.line.edge {
z-index: 1;
background: transparent;
}
.line.dashed {
box-sizing: border-box;
background: transparent;
}
.line.dashed.horizontal {
border-top: 1px dashed #4af;
border-top-color: #4af;
border-top-color: var(--moveable-color);
}
.line.dashed.vertical {
border-left: 1px dashed #4af;
border-left-color: #4af;
border-left-color: var(--moveable-color);
}
.line.vertical {
transform: translateX(-50%);
}
.line.horizontal {
transform: translateY(-50%);
}
.line.vertical.bold {
width: 2px;
}
.line.horizontal.bold {
height: 2px;
}

.control.origin {
border-color: #f55;
background: #fff;
width: 12px;
height: 12px;
margin-top: -6px;
margin-left: -6px;
pointer-events: none;
}
`).concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return`
.direction[data-rotation="`.concat(t,'"], :global .view-control-rotation').concat(t,` {
`).concat(JB(t),`
}
`)}).join(`
`),`

.line.direction:before {
content: "";
position: absolute;
width: 100%;
height: calc(var(--moveable-line-padding, 0) * 1px);
bottom: 0;
left: 0;
}
.group {
z-index: -1;
}
.area {
position: absolute;
}
.area-pieces {
position: absolute;
top: 0;
left: 0;
display: none;
}
.area.avoid, .area.pass {
pointer-events: none;
}
.area.avoid+.area-pieces {
display: block;
}
.area-piece {
position: absolute;
}

`).concat(bA?`:global svg *:before {
content:"";
transform-origin: inherit;
}`:"",`
`),a6=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Dm=1e-4,jn=1e-7,Ad=1e-9,Nm=Math.pow(10,10),MS=-Nm,l6={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},m_={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},PA={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},u6=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function kc(t,e,n,r,i,s){var o,a;s===void 0&&(s="draggable");var l=(a=(o=e.gestos[s])===null||o===void 0?void 0:o.move(n,t.inputEvent))!==null&&a!==void 0?a:{},u=l.originalDatas||l.datas,c=u[s]||(u[s]={});return V(V({},l),{isPinch:!!r,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var Qa=function(){function t(e){var n;e===void 0&&(e="draggable"),this.ableName=e,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=(n={},n[e]={},n)}return t.prototype.dragStart=function(e,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),V(V({},this.move(e,n.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(e,n){return this.move([e[0]-this.prevX,e[1]-this.prevY],n)},t.prototype.move=function(e,n){var r,i,s=!1;if(!this.isFlag)this.prevX=e[0],this.prevY=e[1],this.startX=e[0],this.startY=e[1],r=e[0],i=e[1],this.isFlag=!0;else{var o=this.isDrag;r=this.prevX+e[0],i=this.prevY+e[1],(e[0]||e[1])&&(this.isDrag=!0),!o&&this.isDrag&&(s=!0)}return this.prevX=r,this.prevY=i,{type:"drag",clientX:r,clientY:i,inputEvent:n,isFirstDrag:s,isDrag:this.isDrag,distX:r-this.startX,distY:i-this.startY,deltaX:e[0],deltaY:e[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function ka(t,e,n,r){var i=t.length===16,s=i?4:3,o=Bo(t,n,r,s),a=U(o,4),l=U(a[0],2),u=l[0],c=l[1],d=U(a[1],2),f=d[0],g=d[1],v=U(a[2],2),m=v[0],S=v[1],_=U(a[3],2),y=_[0],E=_[1],I=U(Tt(t,e,s),2),N=I[0],R=I[1],x=Math.min(u,f,m,y),w=Math.min(c,g,S,E),C=Math.max(u,f,m,y),b=Math.max(c,g,S,E);u=u-x||0,f=f-x||0,m=m-x||0,y=y-x||0,c=c-w||0,g=g-w||0,S=S-w||0,E=E-w||0,N=N-x||0,R=R-w||0;var k=t[0],O=t[s+1],A=Nn(k*O);return{left:x,top:w,right:C,bottom:b,origin:[N,R],pos1:[u,c],pos2:[f,g],pos3:[m,S],pos4:[y,E],direction:A}}function kA(t,e){var n=e.clientX,r=e.clientY,i=e.datas,s=t.state,o=s.moveableClientRect,a=s.rootMatrix,l=s.is3d,u=s.pos1,c=o.left,d=o.top,f=l?4:3,g=U(Ie(el(a,[n-c,r-d],f),u),2),v=g[0],m=g[1],S=U(fi({datas:i,distX:v,distY:m}),2),_=S[0],y=S[1];return[_,y]}function zo(t,e){var n=e.datas,r=t.state,i=r.allMatrix,s=r.beforeMatrix,o=r.is3d,a=r.left,l=r.top,u=r.origin,c=r.offsetMatrix,d=r.targetMatrix,f=r.transformOrigin,g=o?4:3;n.is3d=o,n.matrix=i,n.targetMatrix=d,n.beforeMatrix=s,n.offsetMatrix=c,n.transformOrigin=f,n.inverseMatrix=ui(i,g),n.inverseBeforeMatrix=ui(s,g),n.absoluteOrigin=ko(Xe([a,l],u),g),n.startDragBeforeDist=In(n.inverseBeforeMatrix,n.absoluteOrigin,g),n.startDragDist=In(n.inverseMatrix,n.absoluteOrigin,g)}function c6(t){return ka(t.datas.beforeTransform,[50,50],100,100).direction}function _p(t,e,n){var r=e.datas,i=e.originalDatas.beforeRenderable,s=r.transformIndex,o=i.nextTransforms,a=o.length,l=i.nextTransformAppendedIndexes,u=-1;s===-1?(n==="translate"?u=0:n==="rotate"&&(u=Fi(o,function(g){return g.match(/scale\(/g)})),u===-1&&(u=o.length),r.transformIndex=u):or(l,function(g){return g.index===s&&g.functionName===n})?u=s:u=s+l.filter(function(g){return g.index<s}).length;var c=j5(o,t.state,u),d=c.targetFunction,f=n==="rotate"?"rotateZ":n;r.beforeFunctionTexts=c.beforeFunctionTexts,r.afterFunctionTexts=c.afterFunctionTexts,r.beforeTransform=c.beforeFunctionMatrix,r.beforeTransform2=c.beforeFunctionMatrix2,r.targetTansform=c.targetFunctionMatrix,r.afterTransform=c.afterFunctionMatrix,r.afterTransform2=c.afterFunctionMatrix2,r.targetAllTransform=c.allFunctionMatrix,d.functionName===f?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):a>u&&(r.isAppendTransform=!0,i.nextTransformAppendedIndexes=ae(ae([],U(l),!1),[{functionName:n,index:u,isAppend:!0}],!1))}function wp(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function d6(t){var e=t.datas,n=t.distX,r=t.distY,i=U(NA({datas:e,distX:n,distY:r}),2),s=i[0],o=i[1],a=DA(e,aB([s,o],4));return In(a,ko([0,0,0],4),4)}function DA(t,e,n){var r=t.beforeTransform,i=t.afterTransform,s=t.beforeTransform2,o=t.afterTransform2,a=t.targetAllTransform,l=n?st(a,e,4):st(e,a,4),u=st(ui(n?s:r,4),l,4),c=st(u,ui(n?o:i,4),4);return c}function NA(t){var e=t.datas,n=t.distX,r=t.distY,i=e.inverseBeforeMatrix,s=e.is3d,o=e.startDragBeforeDist,a=e.absoluteOrigin,l=s?4:3;return Ie(In(i,Xe(a,[n,r]),l),o)}function fi(t,e){var n=t.datas,r=t.distX,i=t.distY,s=n.inverseBeforeMatrix,o=n.inverseMatrix,a=n.is3d,l=n.startDragBeforeDist,u=n.startDragDist,c=n.absoluteOrigin,d=a?4:3;return Ie(In(e?s:o,Xe(c,[r,i]),d),e?l:u)}function f6(t,e){var n=t.datas,r=t.distX,i=t.distY;n.beforeMatrix;var s=n.matrix,o=n.is3d;n.startDragBeforeDist;var a=n.startDragDist,l=n.absoluteOrigin,u=o?4:3;return Ie(In(s,Xe(a,[r,i]),u),l)}function h6(t,e,n,r,i,s){return r===void 0&&(r=e),i===void 0&&(i=n),s===void 0&&(s=[0,0]),t?t.map(function(o,a){var l=Ic(o),u=l.value,c=l.unit,d=a?i:r,f=a?n:e;if(o==="%"||isNaN(u)){var g=d?s[a]/d:0;return f*g}else if(c!=="%")return u;return f*u/100}):s}function OA(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function p6(t,e){return OA(e).map(function(n){return t[n]})}function Lg(t,e){var n=(e+1)/2;return[oh(t[0][0],t[1][0],n,1-n),oh(t[0][1],t[1][1],n,1-n)]}function qt(t,e){var n=Lg([t[0],t[1]],e[0]),r=Lg([t[2],t[3]],e[0]);return Lg([n,r],e[1])}function g6(t,e,n,r,i,s){var o=Bo(e,n,r,i),a=qt(o,s),l=t[0]-a[0],u=t[1]-a[1];return[l,u]}function Dc(t,e,n,r){return st(t,Eu(e,r,n),r)}function v6(t,e,n,r){var i=t.transformOrigin,s=t.offsetMatrix,o=t.is3d,a=o?4:3,l;if(Hi(n)){var u=e.beforeTransform,c=e.afterTransform;r?l=Ur(tc(n),4,a):l=Ur(st(st(u,tc([n]),4),c,4),4,a)}else l=n;return Dc(s,l,i,a)}function m6(t,e){var n=t.transformOrigin,r=t.offsetMatrix,i=t.is3d,s=t.targetMatrix,o=t.targetAllTransform,a=i?4:3;return Dc(r,st(o||s,c_(e,a),a),n,a)}function Ep(t,e){var n=wl(e);return{setTransform:function(r,i){i===void 0&&(i=-1),n.startTransforms=nn(r)?r:Ls(r),Om(t,e,i)},setTransformIndex:function(r){Om(t,e,r)}}}function Sp(t,e,n){var r=wl(e),i=r.startTransforms;Om(t,e,Fi(i,function(s){return s.indexOf("".concat(n,"("))===0}))}function Om(t,e,n){var r=wl(e),i=e.datas;if(i.transformIndex=n,n!==-1){var s=r.startTransforms[n];if(s){var o=t.state,a=Xa([s],{"x%":function(l){return l/100*o.offsetWidth},"y%":function(l){return l/100*o.offsetHeight}});i.startValue=a[0].functionValue}}}function y_(t,e){var n=wl(t);n.nextTransforms=Ls(e)}function wl(t){return t.originalDatas.beforeRenderable}function uh(t){var e=t.originalDatas.beforeRenderable;return e.nextTransforms}function Pd(t){return(uh(t)||[]).join(" ")}function kd(t){return wl(t).nextStyle}function MA(t,e,n,r,i){y_(i,e);var s=Dn.drag(t,kc(i,t.state,n,r)),o=s?s.transform:e;return V(V({transform:e,drag:s},On({transform:o},i)),{afterTransform:o})}function __(t,e,n,r,i,s){var o=v6(t.state,i,e,s),a=w6(t,n,r,o);return a}function jA(t,e,n,r,i,s,o){var a=__(t,e,n,i,s,o),l=t.state,u=l.left,c=l.top,d=t.props.groupable,f=d?u:0,g=d?c:0,v=Ie(r,a);return Ie(v,[f,g])}function y6(t,e,n,r,i,s,o){var a=jA(t,e,n,r,i,s,o);return a}function _6(t,e,n){return[e?-1+t[0]/(e/2):0,n?-1+t[1]/(n/2):0]}function w6(t,e,n,r){r===void 0&&(r=t.state.allMatrix);var i=t.state,s=i.width,o=i.height,a=i.is3d,l=a?4:3,u=[s/2*(1+e[0])+n[0],o/2*(1+e[1])+n[1]];return Tt(r,u,l)}function E6(t,e,n){var r=n.fixedDirection,i=n.fixedPosition,s=n.fixedOffset;return jA(t,"rotate(".concat(e,"deg)"),r,i,s,n)}function S6(t,e,n,r,i,s){var o=t.props.groupable,a=t.state,l=a.transformOrigin,u=a.offsetMatrix,c=a.is3d,d=a.width,f=a.height,g=a.left,v=a.top,m=s.fixedDirection,S=s.nextTargetMatrix||a.targetMatrix,_=c?4:3,y=h6(i,e,n,d,f,l),E=o?g:0,I=o?v:0,N=Dc(u,S,y,_),R=g6(r,N,e,n,_,m);return Ie(R,[E,I])}function x6(t,e){return qt(Tr(t.state),e)}function T6(t,e){var n=t.targetGesto,r=t.controlGesto,i;return n!=null&&n.isFlag()&&(i=n.getEventData()[e]),!i&&(r!=null&&r.isFlag())&&(i=r.getEventData()[e]),i||{}}function C6(t){if(t&&t.getRootNode){var e=t.getRootNode();if(e.nodeType===11)return e}}function I6(t){var e=t("scale"),n=t("rotate"),r=t("translate"),i=[];return r&&r!=="0px"&&r!=="none"&&i.push("translate(".concat(r.split(/\s+/).join(","),")")),n&&n!=="1"&&n!=="none"&&i.push("rotate(".concat(n,")")),e&&e!=="1"&&e!=="none"&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}function LA(t,e,n){for(var r=t,i=[],s=l_(t)||qs(t),o=!n&&t===e||t===s,a=o,l=!1,u=3,c,d,f,g=!1,v=rc(e,e,!0).offsetParent,m=1;r&&!a;){a=o;var S=Qn(r),_=S("position"),y=aP(r),E=_==="fixed",I=I6(S),N=lB(x5(y)),R=void 0,x=!1,w=!1,C=0,b=0,k=0,O=0,A={hasTransform:!1,fixedContainer:null};E&&(g=!0,A=R5(r),v=A.fixedContainer);var F=N.length;!l&&(F===16||I.length)&&(l=!0,u=4,zm(i),f&&(f=Ur(f,3,4))),l&&F===9&&(N=Ur(N,3,4));var G=b5(r,t),Y=G.tagName,H=G.hasOffset,j=G.isSVG,L=G.origin,B=G.targetOrigin,$=G.offset,K=U($,2),ee=K[0],Q=K[1];Y==="svg"&&!r.ownerSVGElement&&f&&(i.push({type:"target",target:r,matrix:A5(r,u)}),i.push({type:"offset",target:r,matrix:mt(u)}));var ie=parseFloat(S("zoom"))||1;if(E)R=A.fixedContainer,x=!0;else{var te=rc(r,e,!1,!0,S),le=te.offsetZoom;if(R=te.offsetParent,x=te.isEnd,w=te.isStatic,m*=le,(te.isCustomElement||le!==1)&&w)ee-=R.offsetLeft,Q-=R.offsetTop;else if(r6||n6){var ue=te.parentSlotElement;if(ue){for(var Ee=R,xe=0,se=0;Ee&&C6(Ee);)xe+=Ee.offsetLeft,se+=Ee.offsetTop,Ee=Ee.offsetParent;ee-=xe,Q-=se}}}if(IA&&!i6&&H&&!j&&w&&(_==="relative"||_==="static")&&(ee-=R.offsetLeft,Q-=R.offsetTop,o=o||x),E)H&&A.hasTransform&&(k=R.clientLeft,O=R.clientTop);else if(H&&v!==R&&(C=R.clientLeft,b=R.clientTop),H&&R===s){var ce=lP(r,!1);ee+=ce[0],Q+=ce[1]}if(i.push({type:"target",target:r,matrix:Eu(N,u,L)}),I.length&&(i.push({type:"offset",target:r,matrix:mt(u)}),i.push({type:"target",target:r,matrix:Eu(tc(I),u,L)})),H){var ke=r===t,Se=ke?0:r.scrollLeft,we=ke?0:r.scrollTop;i.push({type:"offset",target:r,matrix:Do([ee-Se+C-k,Q-we+b-O],u)})}else i.push({type:"offset",target:r,origin:L});if(ie!==1&&i.push({type:"zoom",target:r,matrix:Eu(c_([ie,ie],u),u,[0,0])}),f||(f=N),c||(c=L),d||(d=B),a||E)break;r=R,o=x,(!n||r===s)&&(a=o)}return f||(f=mt(u)),c||(c=[0,0]),d||(d=[0,0]),{zoom:m,offsetContainer:v,matrixes:i,targetMatrix:f,transformOrigin:c,targetOrigin:d,is3d:l,hasFixed:g}}var oo=null,ao=null,va=null;function Ja(t){t?(window.Map&&(oo=new Map,ao=new Map),va=[]):(oo=null,va=null,ao=null)}function b6(t){var e=ao==null?void 0:ao.get(t);if(e)return e;var n=Su(t,!0);return ao&&ao.set(t,n),n}function R6(t,e){if(va){var n=or(va,function(i){return i[0][0]==t&&i[0][1]==e});if(n)return n[1]}var r=LA(t,e,!0);return va&&va.push([[t,e],r]),r}function Qn(t){var e=oo==null?void 0:oo.get(t);if(!e){var n=Is(t).getComputedStyle(t);if(!oo)return function(s){return n[s]};e={style:n,cached:{}},oo.set(t,e)}var r=e.cached,i=e.style;return function(s){return s in r||(r[s]=i[s]),r[s]}}function jr(t,e,n){var r=n.originalDatas;r.groupable=r.groupable||{};var i=r.groupable;i.childDatas=i.childDatas||[];var s=i.childDatas;return t.moveables.map(function(o,a){return s[a]=s[a]||{},s[a][e]=s[a][e]||{},V(V({},n),{isRequestChild:!0,datas:s[a][e],originalDatas:s[a]})})}function Vg(t,e,n,r,i,s,o){var a=!!n.match(/Start$/g),l=!!n.match(/End$/g),u=i.isPinch,c=i.datas,d=jr(t,e.name,i),f=t.moveables,g=[],v=d.map(function(m,S){var _=f[S],y=_.state,E=y.gestos,I=m;if(a)I=new Qa(o).dragStart(r,m),g.push(I);else{if(E[o]||(E[o]=c.childGestos[S]),!E[o])return;I=kc(m,y,r,u,s,o),g.push(I)}var N=e[n](_,V(V({},I),{parentFlag:!0}));return l&&(E[o]=null),N});return a&&(c.childGestos=f.map(function(m){return m.state.gestos[o]})),{eventParams:v,childEvents:g}}function bi(t,e,n,r,i,s){i===void 0&&(i=function(c,d){return d});var o=!!n.match(/End$/g),a=jr(t,e.name,r),l=t.moveables,u=a.map(function(c,d){var f=l[d],g=c;g=i(f,c);var v=e[n](f,V(V({},g),{parentFlag:!0}));return o&&(f.state.gestos={}),v});return u}function ch(t,e,n,r){var i=n.fixedDirection,s=n.fixedPosition,o=r.datas.startPositions||Tr(e.state),a=qt(o,i),l=U(In(Rc(-t.rotation/180*Math.PI,3),[a[0]-s[0],a[1]-s[1],1],3),2),u=l[0],c=l[1];return r.datas.originalX=u,r.datas.originalY=c,r}function VA(t,e,n,r){var i=t.getState(),s=i.renderPoses,o=i.rotation,a=i.direction,l=Oo(t.props,e).zoom,u=wu(o/Math.PI*180),c={},d=t.renderState;d.renderDirectionMap||(d.renderDirectionMap={});var f=d.renderDirectionMap;n.forEach(function(v){var m=v.dir;c[m]=!0});var g=Nn(a);return n.map(function(v){var m=v.data,S=v.classNames,_=v.dir,y=m_[_];if(!y||!c[_])return null;f[_]=!0;var E=(Ne(u,15)+g*PA[_]+720)%180,I={};return yl(m).forEach(function(N){I["data-".concat(N)]=m[N]}),r.createElement("div",V({className:Te.apply(void 0,ae(["control","direction",_,e],U(S),!1)),"data-rotation":E,"data-direction":_},I,{key:"direction-".concat(_),style:ph.apply(void 0,ae([o,l],U(y.map(function(N){return s[N]})),!1))}))})}function FA(t,e,n,r){var i=Oo(t.props,n),s=i.renderDirections,o=s===void 0?e:s,a=i.displayAroundControls;if(!o)return[];var l=o===!0?g_:o;return ae(ae([],U(a?$A(t,r,n,l):[]),!1),U(VA(t,n,l.map(function(u){return{data:{},classNames:[],dir:u}}),r)),!1)}function nc(t,e,n,r,i,s){for(var o=[],a=6;a<arguments.length;a++)o[a-6]=arguments[a];var l=Mt(n,r),u=e?Ne(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(s),className:Te.apply(void 0,ae(["line","direction",e?"edge":"",e],U(o),!1)),"data-rotation":u,"data-line-key":s,"data-direction":e,style:nu(n,r,i,l)})}function zA(t,e,n,r,i){var s=n===!0?XB:n;return s.map(function(o,a){var l=U(m_[o],2),u=l[0],c=l[1];if(c!=null)return nc(t,o,r[u],r[c],i,"".concat(e,"Edge").concat(a),e)}).filter(Boolean)}function BA(t){return function(e,n){var r=Oo(e.props,t).edge;return r&&(r===!0||r.length)?ae(ae([],U(zA(n,t,r,e.getState().renderPoses,e.props.zoom)),!1),U(A6(e,t,n)),!1):UA(e,t,n)}}function UA(t,e,n){return FA(t,g_,e,n)}function A6(t,e,n){return FA(t,["nw","ne","sw","se"],e,n)}function $A(t,e,n,r){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var s=t.getState(),o=s.renderPoses,a=s.rotation,l=s.direction,u=i.renderDirectionMap,c=t.props.zoom,d=Nn(l),f=a/Math.PI*180;return(r||yl(u)).map(function(g){var v=m_[g];if(!v)return null;var m=(Ne(f,15)+d*PA[g]+720)%180,S=["around-control"];return n&&S.push("direction",n),e.createElement("div",{className:Te.apply(void 0,ae([],U(S),!1)),"data-rotation":m,"data-direction":g,key:"direction-around-".concat(g),style:ph.apply(void 0,ae([a,c],U(v.map(function(_){return o[_]})),!1))})})}function w_(t,e,n){var r=t||{},i=r.position,s=i===void 0?"client":i,o=r.left,a=o===void 0?-1/0:o,l=r.top,u=l===void 0?-1/0:l,c=r.right,d=c===void 0?1/0:c,f=r.bottom,g=f===void 0?1/0:f,v={position:s,left:a,top:u,right:d,bottom:g};return{vertical:jS(v,e,!0),horizontal:jS(v,n,!1)}}function xp(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,s=r.clientWidth,o=r.clientLeft,a=r.clientTop,l=n.snapOffset,u=l.left,c=l.top,d=l.right,f=l.bottom,g=e||t.props.bounds||{},v=g.position||"client",m=v==="css",S=g.left,_=S===void 0?-1/0:S,y=g.top,E=y===void 0?-1/0:y,I=g.right,N=I===void 0?m?-1/0:1/0:I,R=g.bottom,x=R===void 0?m?-1/0:1/0:R;return m&&(N=s+d-u-N,x=i+f-c-x),{left:_+u-o,right:N+u-o,top:E+c-a,bottom:x+c-a}}function P6(t,e,n){var r=xp(t),i=r.left,s=r.top,o=r.right,a=r.bottom,l=U(n,2),u=l[0],c=l[1],d=U(Ie(n,e),2),f=d[0],g=d[1];re(f)<jn&&(f=0),re(g)<jn&&(g=0);var v=g>0,m=f>0,S={isBound:!1,offset:0,pos:0},_={isBound:!1,offset:0,pos:0};if(f===0&&g===0)return{vertical:S,horizontal:_};if(f===0)v?a<c&&(_.pos=a,_.offset=c-a):s>c&&(_.pos=s,_.offset=c-s);else if(g===0)m?o<u&&(S.pos=o,S.offset=u-o):i>u&&(S.pos=i,S.offset=u-i);else{var y=g/f,E=n[1]-y*u,I=0,N=0,R=!1;m&&o<=u?(I=y*o+E,N=o,R=!0):!m&&u<=i&&(I=y*i+E,N=i,R=!0),R&&(I<s||I>a)&&(R=!1),R||(v&&a<=c?(I=a,N=(I-E)/y,R=!0):!v&&c<=s&&(I=s,N=(I-E)/y,R=!0)),R&&(S.isBound=!0,S.pos=N,S.offset=u-N,_.isBound=!0,_.pos=I,_.offset=c-I)}return{vertical:S,horizontal:_}}function jS(t,e,n){var r=t[n?"left":"top"],i=t[n?"right":"bottom"],s=Math.min.apply(Math,ae([],U(e),!1)),o=Math.max.apply(Math,ae([],U(e),!1)),a=[];return r+1>s&&a.push({direction:"start",isBound:!0,offset:s-r,pos:r}),i-1<o&&a.push({direction:"end",isBound:!0,offset:o-i,pos:i}),a.length||a.push({isBound:!1,offset:0,pos:0}),a.sort(function(l,u){return re(u.offset)-re(l.offset)})}function LS(t,e,n){var r=n?t.map(function(i){return bc(i,n)}):t;return r.some(function(i){return i[0]<e.left&&re(i[0]-e.left)>.1||i[0]>e.right&&re(i[0]-e.right)>.1||i[1]<e.top&&re(i[1]-e.top)>.1||i[1]>e.bottom&&re(i[1]-e.bottom)>.1})}function k6(t,e,n){var r=xr(t),i=Math.sqrt(r*r-e*e)||0;return[i,-i].sort(function(s,o){return re(s-t[n?0:1])-re(o-t[n?0:1])}).map(function(s){return Mt([0,0],n?[s,e]:[e,s])})}function D6(t,e,n,r,i){if(!t.props.bounds)return[];var s=i*Math.PI/180,o=xp(t),a=o.left,l=o.top,u=o.right,c=o.bottom,d=a-r[0],f=u-r[0],g=l-r[1],v=c-r[1],m={left:d,top:g,right:f,bottom:v};if(!LS(n,m,0))return[];var S=[];return[[d,0],[f,0],[g,1],[v,1]].forEach(function(_){var y=U(_,2),E=y[0],I=y[1];n.forEach(function(N){var R=Mt([0,0],N);S.push.apply(S,ae([],U(k6(N,E,I).map(function(x){return s+x-R}).filter(function(x){return!LS(e,m,x)}).map(function(x){return Ne(x*180/Math.PI,jn)})),!1))})}),S}var N6=["left","right","center"],O6=["top","bottom","middle"],VS={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},Vs={start:"left",end:"right",center:"center"},Fs={start:"top",end:"bottom",center:"middle"};function ma(){return{left:!1,top:!1,right:!1,bottom:!1}}function El(t,e){var n=t.props,r=n.snappable,i=n.bounds,s=n.innerBounds,o=n.verticalGuidelines,a=n.horizontalGuidelines,l=n.snapGridWidth,u=n.snapGridHeight,c=t.state,d=c.guidelines,f=c.enableSnap;return!r||!f||e&&r!==!0&&r.indexOf(e)<0?!1:!!(l||u||i||s||d&&d.length||o&&o.length||a&&a.length)}function E_(t){return t===!1?{}:t===!0||!t?{left:!0,right:!0,top:!0,bottom:!0}:t}function M6(t,e){var n=E_(t),r={};for(var i in n)i in e&&n[i]&&(r[i]=e[i]);return r}function S_(t,e){var n=M6(t,e),r=O6.filter(function(s){return s in n}),i=N6.filter(function(s){return s in n});return{horizontalNames:r,verticalNames:i,horizontal:r.map(function(s){return n[s]}),vertical:i.map(function(s){return n[s]})}}function j6(t,e,n){var r=Tt(t,[e.clientLeft,e.clientTop],n);return[e.left+r[0],e.top+r[1]]}function L6(t){var e=U(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];Math.abs(i)<zt&&(i=0),Math.abs(s)<zt&&(s=0);var o=0,a=0,l=0;return i?s?(o=-s/i,a=1,l=o*n[0]-n[1]):(a=1,l=-n[1]):(o=-1,l=n[0]),[o,a,l].map(function(u){return Ne(u,zt)})}var GA="snapRotationThreshold",HA="snapRotationDegrees",WA="snapHorizontalThreshold",qA="snapVerticalThreshold";function Tp(t,e,n,r,i,s,o){var a;r===void 0&&(r=[]),i===void 0&&(i=[]);var l=t.props,u=((a=t.state.snapThresholdInfo)===null||a===void 0?void 0:a.multiples)||[1,1],c=ZS(o,l[WA],5),d=ZS(s,l[qA],5);return YA(t.state.guidelines,e,n,r,i,c,d,u)}function YA(t,e,n,r,i,s,o,a){return{vertical:zS(t,"vertical",e,o*a[0],r),horizontal:zS(t,"horizontal",n,s*a[1],i)}}function V6(t,e,n){var r=U(n,2),i=r[0],s=r[1],o=U(e,2),a=o[0],l=o[1],u=U(Ie(n,e),2),c=u[0],d=u[1],f=d>0,g=c>0;c=gh(c),d=gh(d);var v={isSnap:!1,offset:0,pos:0},m={isSnap:!1,offset:0,pos:0};if(c===0&&d===0)return{vertical:v,horizontal:m};var S=Tp(t,c?[i]:[],d?[s]:[],[],[],void 0,void 0),_=S.vertical,y=S.horizontal;_.posInfos.filter(function(Y){var H=Y.pos;return g?H>=a:H<=a}),y.posInfos.filter(function(Y){var H=Y.pos;return f?H>=l:H<=l}),_.isSnap=_.posInfos.length>0,y.isSnap=y.posInfos.length>0;var E=Mm(_),I=E.isSnap,N=E.guideline,R=Mm(y),x=R.isSnap,w=R.guideline,C=x?w.pos[1]:0,b=I?N.pos[0]:0;if(c===0)x&&(m.isSnap=!0,m.pos=w.pos[1],m.offset=s-m.pos);else if(d===0)I&&(v.isSnap=!0,v.pos=b,v.offset=i-b);else{var k=d/c,O=n[1]-k*i,A=0,F=0,G=!1;I?(F=b,A=k*F+O,G=!0):x&&(A=C,F=(A-O)/k,G=!0),G&&(v.isSnap=!0,v.pos=F,v.offset=i-F,m.isSnap=!0,m.pos=A,m.offset=s-A)}return{vertical:v,horizontal:m}}function ds(t){var e="";return t===-1||t==="top"||t==="left"?e="start":t===0||t==="center"||t==="middle"?e="center":(t===1||t==="right"||t==="bottom")&&(e="end"),e}function FS(t,e,n,r){var i=S_(t.props.snapDirections,e),s=Tp(t,i.vertical,i.horizontal,i.verticalNames.map(function(l){return ds(l)}),i.horizontalNames.map(function(l){return ds(l)}),n,r),o=ds(i.horizontalNames[s.horizontal.index]),a=ds(i.verticalNames[s.vertical.index]);return{vertical:V(V({},s.vertical),{direction:a}),horizontal:V(V({},s.horizontal),{direction:o})}}function Mm(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var n=t.posInfos[0],r=n.guidelineInfos[0],i=r.offset,s=r.dist,o=r.guideline;return{isSnap:e,offset:i,dist:s,pos:n.pos,guideline:o}}function zS(t,e,n,r,i){var s,o;if(i===void 0&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var a=e==="vertical",l=a?0:1,u=n.map(function(d,f){var g=i[f]||"",v=t.map(function(m){var S=m.pos,_=d-S[l];return{offset:_,dist:re(_),guideline:m,direction:g}}).filter(function(m){var S=m.guideline,_=m.dist,y=S.type;return!(y!==e||_>r)}).sort(function(m,S){return m.dist-S.dist});return{pos:d,index:f,guidelineInfos:v,direction:g}}).filter(function(d){return d.guidelineInfos.length>0}).sort(function(d,f){return d.guidelineInfos[0].dist-f.guidelineInfos[0].dist}),c=u.length>0;return{isSnap:c,index:c?u[0].index:-1,direction:(o=(s=u[0])===null||s===void 0?void 0:s.direction)!==null&&o!==void 0?o:"",posInfos:u}}function F6(t,e,n,r,i){var s=[];n[0]&&n[1]?s=[n,[-n[0],n[1]],[n[0],-n[1]]]:!n[0]&&!n[1]?[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(f,g,v){var m=v[g+1]||v[0];s.push(f),s.push([(f[0]+m[0])/2,(f[1]+m[1])/2])}):t.props.keepRatio?s.push([-1,-1],[-1,1],[1,-1],[1,1],n):(s.push.apply(s,ae([],U(p6([[-1,-1],[1,-1],[-1,-1],[1,1]],n)),!1)),s.length>1&&s.push([(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]));var o=s.map(function(f){return qt(e,f)}),a=o.map(function(f){return f[0]}),l=o.map(function(f){return f[1]}),u=Tp(t,a,l,s.map(function(f){return ds(f[0])}),s.map(function(f){return ds(f[1])}),r,i),c=ds(s.map(function(f){return f[0]})[u.vertical.index]),d=ds(s.map(function(f){return f[1]})[u.horizontal.index]);return{vertical:V(V({},u.vertical),{direction:c}),horizontal:V(V({},u.horizontal),{direction:d})}}function KA(t,e){var n=re(t.offset),r=re(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<jn?1:r<jn?-1:n-r}function dh(t,e){return t.slice().sort(function(n,r){var i=n.sign[e],s=r.sign[e],o=n.offset[e],a=r.offset[e];if(i){if(!s)return-1}else return 1;return KA({isBound:n.isBound,isSnap:n.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:a})})[0]}function z6(t,e,n){var r=[];if(n)re(e[0])!==1||re(e[1])!==1?r.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),r.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(o){[1,-1].forEach(function(a){var l=[o*i[0],a*i[1]];e[0]===l[0]&&e[1]===l[1]||r.push([e,l])})})}else if(t[0]){var s=re(e[0])===1?[1]:[1,-1];s.forEach(function(o){r.push([[e[0],-1],[o*t[0],-1]],[[e[0],0],[o*t[0],0]],[[e[0],1],[o*t[0],1]])})}else if(t[1]){var s=re(e[1])===1?[1]:[1,-1];s.forEach(function(a){r.push([[-1,e[1]],[-1,a*t[1]]],[[0,e[1]],[0,a*t[1]]],[[1,e[1]],[1,a*t[1]]])})}return r}function XA(t,e){var n=xm([e[0][0],e[1][0]]),r=xm([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:r<=t[1]}}function x_(t,e){var n=U(e,2),r=n[0],i=n[1],s=i[0]-r[0],o=i[1]-r[1];re(s)<jn&&(s=0),re(o)<jn&&(o=0);var a,l;if(!s)a=r[0],l=t[0];else if(!o)a=r[1],l=t[1];else{var u=o/s;a=u*(t[0]-r[0])+r[1],l=t[1]}return a-l}function QA(t,e,n,r){return r===void 0&&(r=jn),t.every(function(i){var s=x_(i,e),o=s<=0;return o===n||re(s)<=r})}function BS(t,e,n,r,i){return i===void 0&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function B6(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,s=e.horizontalSign,o=e.lineConstants,a=t.props.innerBounds;if(!a)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var l=a.left,u=a.top,c=a.width,d=a.height,f=[[l,u],[l,u+d]],g=[[l,u],[l+c,u]],v=[[l+c,u],[l+c,u+d]],m=[[l,u+d],[l+c,u+d]];if(QA([[l,u],[l+c,u],[l,u+d],[l+c,u+d]],n,r))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var S=fs(n,o,g,i),_=fs(n,o,m,i),y=fs(n,o,f,s),E=fs(n,o,v,s),I=S.isBound&&_.isBound,N=S.isBound||_.isBound,R=y.isBound&&E.isBound,x=y.isBound||E.isBound,w=Za(S.offset,_.offset),C=Za(y.offset,E.offset),b=[0,0],k=!1,O=!1;return re(C)<re(w)?(b=[w,0],k=N,O=I):(b=[0,C],k=x,O=R),{isAllBound:O,isVerticalBound:N,isHorizontalBound:x,isBound:k,offset:b}}function fs(t,e,n,r,i,s){var o=U(e,2),a=o[0],l=o[1],u=t[0],c=n[0],d=n[1],f=gh(d[1]-c[1]),g=gh(d[0]-c[0]),v=l,m=a,S=-a/l;if(g){if(!f){if(s&&!v)return{isBound:!1,offset:0};if(m){var I=(c[1]-u[1])/S+u[0];return BS(I,c[0],d[0],r,i)}else{var y=c[1]-u[1],E=re(y)<=(i||0);return{isBound:E,offset:E?y:0}}}}else{if(s&&!m)return{isBound:!1,offset:0};if(v){var _=S*(c[0]-u[0])+u[1];return BS(_,c[1],d[1],r,i)}else{var y=c[0]-u[0],E=re(y)<=(i||0);return{isBound:E,offset:E?y:0}}}return{isBound:!1,offset:0}}function JA(t,e,n){return e.map(function(r){var i=B6(t,r),s=i.isBound,o=i.offset,a=i.isVerticalBound,l=i.isHorizontalBound,u=r.multiple,c=fi({datas:n,distX:o[0],distY:o[1]}).map(function(d,f){return d*(u[f]?2/u[f]:0)});return{sign:u,isBound:s,isVerticalBound:a,isHorizontalBound:l,isSnap:!1,offset:c}})}function U6(t,e,n){var r,i=T_(t,e,[0,0],!1).map(function(f){return V(V({},f),{multiple:f.multiple.map(function(g){return re(g)*2})})}),s=JA(t,i,n),o=dh(s,0),a=dh(s,1),l=0,u=0,c=o.isVerticalBound||a.isVerticalBound,d=o.isHorizontalBound||a.isHorizontalBound;return(c||d)&&(r=U(f6({datas:n,distX:-o.offset[0],distY:-a.offset[1]}),2),l=r[0],u=r[1]),{vertical:{isBound:c,offset:l},horizontal:{isBound:d,offset:u}}}function $6(t,e){var n=[],r=t[0],i=t[1];return r&&i?n.push([[0,i*2],t,[-r,i]],[[r*2,0],t,[r,-i]]):r?(n.push([[r*2,0],[r,1],[r,-1]]),e&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,i*2],[1,i],[-1,i]]),e&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n}function T_(t,e,n,r){var i=t.state,s=i.allMatrix,o=i.is3d,a=Bo(s,100,100,o?4:3),l=qt(a,[0,0]);return $6(n,r).map(function(u){var c=U(u,3),d=c[0],f=c[1],g=c[2],v=[qt(a,f),qt(a,g)],m=L6(v),S=XA(l,v),_=S.vertical,y=S.horizontal,E=x_(l,v)<=0;return{multiple:d,centerSign:E,verticalSign:_,horizontalSign:y,lineConstants:m,line:[qt(e,f),qt(e,g)]}})}function US(t,e,n,r){var i=r?t.map(function(s){return bc(s,r)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(s){var o=x_(n,s)<=0;return!QA(e,s,o)})}function G6(t){var e=U(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];if(!i)return re(n[0]);if(!s)return re(n[1]);var o=s/i;return re((-o*n[0]+n[1])/Math.sqrt(Math.pow(o,2)+1))}function H6(t){var e=U(t,2),n=e[0],r=e[1],i=r[0]-n[0],s=r[1]-n[1];if(!i)return[n[0],0];if(!s)return[0,n[1]];var o=s/i,a=-o*n[0]+n[1];return[-a/(o+1/o),a/(o*o+1)]}function W6(t,e,n,r,i){var s=t.props.innerBounds,o=i*Math.PI/180;if(!s)return[];var a=s.left,l=s.top,u=s.width,c=s.height,d=a-r[0],f=a+u-r[0],g=l-r[1],v=l+c-r[1],m=[[d,g],[f,g],[d,v],[f,v]],S=qt(n,[0,0]);if(!US(n,m,S,0))return[];var _=[],y=m.map(function(E){return[xr(E),Mt([0,0],E)]});return[[n[0],n[1]],[n[1],n[3]],[n[3],n[2]],[n[2],n[0]]].forEach(function(E){var I=Mt([0,0],H6(E)),N=G6(E);_.push.apply(_,ae([],U(y.filter(function(R){var x=U(R,1),w=x[0];return w&&N<=w}).map(function(R){var x=U(R,2),w=x[0],C=x[1],b=Math.acos(w?N/w:0),k=C+b,O=C-b;return[o+k-I,o+O-I]}).reduce(function(R,x){return R.push.apply(R,ae([],U(x),!1)),R},[]).filter(function(R){return!US(e,m,S,R)}).map(function(R){return Ne(R*180/Math.PI,jn)})),!1))}),_}function q6(t){var e=t.props.innerBounds,n=ma();if(!e)return{boundMap:n,vertical:[],horizontal:[]};var r=t.getRect(),i=r.pos1,s=r.pos2,o=r.pos3,a=r.pos4,l=[i,s,o,a],u=qt(l,[0,0]),c=e.left,d=e.top,f=e.width,g=e.height,v=[[c,d],[c,d+g]],m=[[c,d],[c+f,d]],S=[[c+f,d],[c+f,d+g]],_=[[c,d+g],[c+f,d+g]],y=T_(t,l,[0,0],!1),E=[],I=[];return y.forEach(function(N){var R=N.line,x=N.lineConstants,w=XA(u,R),C=w.horizontal,b=w.vertical,k=fs(R,x,m,b,1,!0),O=fs(R,x,_,b,1,!0),A=fs(R,x,v,C,1,!0),F=fs(R,x,S,C,1,!0);k.isBound&&!n.top&&(E.push(d),n.top=!0),O.isBound&&!n.bottom&&(E.push(d+g),n.bottom=!0),A.isBound&&!n.left&&(I.push(c),n.left=!0),F.isBound&&!n.right&&(I.push(c+f),n.right=!0)}),{boundMap:n,horizontal:E,vertical:I}}function Y6(t,e,n,r){var i=e[0]-t[0],s=e[1]-t[1];if(re(i)<zt&&(i=0),re(s)<zt&&(s=0),!i)return r?[0,0]:[0,n];if(!s)return r?[n,0]:[0,0];var o=s/i,a=t[1]-o*t[0];if(r){var l=o*(e[0]+n)+a;return[n,l-e[1]]}else{var u=(e[1]+n-a)/o;return[u-e[0],n]}}function jm(t,e,n,r,i){var s=Y6(t,e,n,r);if(!s)return{isOutside:!1,offset:[0,0]};var o=Ii(t,e),a=Ii(s,t),l=Ii(s,e),u=a>o||l>o,c=U(fi({datas:i,distX:s[0],distY:s[1]}),2),d=c[0],f=c[1];return{offset:[d,f],isOutside:u}}function fh(t,e){return t.isBound?t.offset:e.isSnap?Mm(e).offset:0}function K6(t,e,n,r,i){var s=U(e,2),o=s[0],a=s[1],l=U(n,2),u=l[0],c=l[1],d=U(r,2),f=d[0],g=d[1],v=U(i,2),m=v[0],S=v[1],_=-m,y=-S;if(t&&o&&a){_=0,y=0;var E=[];if(u&&c?E.push([0,S],[m,0]):u?E.push([m,0]):c?E.push([0,S]):f&&g?E.push([0,S],[m,0]):f?E.push([m,0]):g&&E.push([0,S]),E.length){E.sort(function(x,w){return xr(Ie([o,a],x))-xr(Ie([o,a],w))});var I=E[0];if(I[0]&&re(o)>zt)_=-I[0],y=a*re(o+_)/re(o)-a;else if(I[1]&&re(a)>zt){var N=a;y=-I[1],_=o*re(a+y)/re(N)-o}if(t&&c&&u)if(re(_)>zt&&re(_)<re(m)){var R=re(m)/re(_);_*=R,y*=R}else if(re(y)>zt&&re(y)<re(S)){var R=re(S)/re(y);_*=R,y*=R}else _=Za(-m,_),y=Za(-S,y)}}else _=o||u?-m:0,y=a||c?-S:0;return[_,y]}function X6(t,e,n,r,i,s){if(!El(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=b_(s.absolutePoses,[e,n]),a=wr(o),l=a.left,u=a.right,c=a.top,d=a.bottom,f={horizontal:o.map(function(F){return F[1]}),vertical:o.map(function(F){return F[0]})},g=E_(t.props.snapDirections),v=S_(g,{left:l,right:u,top:c,bottom:d,center:(l+u)/2,middle:(c+d)/2}),m=Cp(t,i,v,f),S=m.vertical,_=m.horizontal,y=U6(t,o,s),E=y.vertical,I=y.horizontal,N=S.isSnap,R=_.isSnap,x=S.isBound||E.isBound,w=_.isBound||I.isBound,C=Za(S.offset,E.offset),b=Za(_.offset,I.offset),k=U(K6(r,[e,n],[x,w],[N,R],[C,b]),2),O=k[0],A=k[1];return[{isBound:x,isSnap:N,offset:O},{isBound:w,isSnap:R,offset:A}]}function Cp(t,e,n,r){r===void 0&&(r=n);var i=w_(xp(t),r.vertical,r.horizontal),s=i.horizontal,o=i.vertical,a=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:Tp(t,n.vertical,n.horizontal,void 0,void 0,void 0,void 0),l=a.horizontal,u=a.vertical,c=fh(s[0],l),d=fh(o[0],u),f=re(c),g=re(d);return{horizontal:{isBound:s[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:c,dist:f,bounds:s,snap:l},vertical:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:d,dist:g,bounds:o,snap:u}}}function $S(t,e,n,r,i,s,o){o===void 0&&(o=[1,1]);var a=w_(e,n,r),l=a.horizontal,u=a.vertical,c=YA(t,n,r,[],[],i,s,o),d=c.horizontal,f=c.vertical,g=fh(l[0],d),v=fh(u[0],f),m=re(g),S=re(v);return{horizontal:{isBound:l[0].isBound,isSnap:d.isSnap,snapIndex:d.index,offset:g,dist:m,bounds:l,snap:d},vertical:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:v,dist:S,bounds:u,snap:f}}}function Q6(t,e,n,r){var i=Mt(t,e)/Math.PI*180,s=n.vertical,o=s.isBound,a=s.isSnap,l=s.dist,u=n.horizontal,c=u.isBound,d=u.isSnap,f=u.dist,g=i%180,v=g<3||g>177,m=g>87&&g<93;return f<l&&(o||a&&!m&&(!r||!v))?"vertical":c||d&&!v&&(!r||!m)?"horizontal":""}function J6(t,e,n,r,i,s){return n.map(function(o){var a=U(o,2),l=a[0],u=a[1],c=qt(e,l),d=qt(e,u),f=r?Z6(t,c,d,i):Cp(t,i,{vertical:[d[0]],horizontal:[d[1]]}),g=f.horizontal,v=g.offset,m=g.isBound,S=g.isSnap,_=f.vertical,y=_.offset,E=_.isBound,I=_.isSnap,N=Ie(u,l);if(!y&&!v)return{isBound:E||m,isSnap:I||S,sign:N,offset:[0,0]};var R=Q6(c,d,f,r);if(!R)return{sign:N,isBound:!1,isSnap:!1,offset:[0,0]};var x=R==="vertical",w=[0,0];return!r&&re(u[0])===1&&re(u[1])===1&&l[0]!==u[0]&&l[1]!==u[1]?w=fi({datas:s,distX:-y,distY:-v}):w=jm(c,d,-(x?y:v),x,s).offset,w=w.map(function(C,b){return C*(N[b]?2/N[b]:0)}),{sign:N,isBound:x?E:m,isSnap:x?I:S,offset:w}})}function GS(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function Z6(t,e,n,r){var i=P6(t,e,n),s=i.horizontal,o=i.vertical,a=r?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:V6(t,e,n),l=a.horizontal,u=a.vertical,c=GS(s,l),d=GS(o,u),f=re(c),g=re(d);return{horizontal:{isBound:s.isBound,isSnap:l.isSnap,offset:c,dist:f},vertical:{isBound:o.isBound,isSnap:u.isSnap,offset:d,dist:g}}}function e5(t,e,n,r,i){var s=[-n[0],-n[1]],o=t.state,a=o.width,l=o.height,u=t.props.bounds,c=1/0,d=1/0;if(u){var f=[[n[0],-n[1]],[-n[0],n[1]]],g=u.left,v=g===void 0?-1/0:g,m=u.top,S=m===void 0?-1/0:m,_=u.right,y=_===void 0?1/0:_,E=u.bottom,I=E===void 0?1/0:E;f.forEach(function(N){var R=N[0]!==s[0],x=N[1]!==s[1],w=qt(e,N),C=Mt(r,w)*360/Math.PI;if(x){var b=w.slice();(re(C-360)<2||re(C-180)<2)&&(b[1]=r[1]);var k=jm(r,b,(r[1]<w[1]?I:S)-w[1],!1,i),O=U(k.offset,2),A=O[1],F=k.isOutside;isNaN(A)||(d=l+(F?1:-1)*re(A))}if(R){var b=w.slice();(re(C-90)<2||re(C-270)<2)&&(b[0]=r[0]);var G=jm(r,b,(r[0]<w[0]?y:v)-w[0],!0,i),Y=U(G.offset,1),H=Y[0],j=G.isOutside;isNaN(H)||(c=a+(j?1:-1)*re(H))}})}return{maxWidth:c,maxHeight:d}}var Dn={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var n=t.props,r=n.hideThrottleDragRotateLine,i=n.throttleDragRotate,s=n.zoom,o=t.getState(),a=o.dragInfo,l=o.beforeOrigin;if(r||!i||!a)return[];var u=a.dist;if(!u[0]&&!u[1])return[];var c=xr(u),d=Mt(u,[0,0]);return[e.createElement("div",{className:Te("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(c,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(d,"rad) scaleY(").concat(s,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,s=t.state,o=s.gestos,a=s.style;if(o.draggable)return!1;o.draggable=i||t.targetGesto,n.datas={},n.left=parseFloat(a.left||"")||0,n.top=parseFloat(a.top||"")||0,n.bottom=parseFloat(a.bottom||"")||0,n.right=parseFloat(a.right||"")||0,n.startValue=[0,0],zo(t,e),Sp(t,e,"translate"),_5(t,n),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0];var l=Le(t,e,V({set:function(c){n.startValue=c}},Ep(t,e))),u=r||ye(t,"onDragStart",l);return u!==!1?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),n.isDrag?l:!1},drag:function(t,e){if(e){_p(t,e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,s=e.isPinch,o=e.deltaOffset,a=e.useSnap,l=e.isRequest,u=e.isGroup,c=e.parentThrottleDrag,d=e.distX,f=e.distY,g=n.isDrag,v=n.prevDist,m=n.prevBeforeDist,S=n.startValue;if(g){o&&(d+=o[0],f+=o[1]);var _=t.props,y=_.parentMoveable,E=u?0:_.throttleDrag||c||0,I=r?0:_.throttleDragRotate||0,N=0,R=!1,x=!1,w=!1,C=!1;if(!r&&I>0&&(d||f)){var b=_.startDragRotate||0,k=Ne(b+Mt([0,0],[d,f])*180/Math.PI,I)-b,O=f*Math.abs(Math.cos((k-90)/180*Math.PI)),A=d*Math.abs(Math.cos(k/180*Math.PI)),F=xr([A,O]);N=k*Math.PI/180,d=F*Math.cos(N),f=F*Math.sin(N)}if(!s&&!r&&!i){var G=U(X6(t,d,f,I,!a&&l||o,n),2),Y=G[0],H=G[1];R=Y.isSnap,x=Y.isBound,w=H.isSnap,C=H.isBound;var j=Y.offset,L=H.offset;d+=j,f+=L}var B=Xe(NA({datas:n,distX:d,distY:f}),S),$=Xe(d6({datas:n,distX:d,distY:f}),S);AS($,jn),AS(B,jn),I||(!R&&!x&&($[0]=Ne($[0],E),B[0]=Ne(B[0],E)),!w&&!C&&($[1]=Ne($[1],E),B[1]=Ne(B[1],E)));var K=Ie(B,S),ee=Ie($,S),Q=Ie(ee,v),ie=Ie(K,m);n.prevDist=ee,n.prevBeforeDist=K,n.passDelta=Q,n.passDist=ee;var te=n.left+K[0],le=n.top+K[1],ue=n.right-K[0],Ee=n.bottom-K[1],xe=wp(n,"translate(".concat($[0],"px, ").concat($[1],"px)"),"translate(".concat(ee[0],"px, ").concat(ee[1],"px)"));if(y_(e,xe),t.state.dragInfo.dist=r?[0,0]:ee,!(!r&&!y&&Q.every(function(we){return!we})&&ie.some(function(we){return!we}))){var se=t.state,ce=se.width,ke=se.height,Se=Le(t,e,V({transform:xe,dist:ee,delta:Q,translate:$,beforeDist:K,beforeDelta:ie,beforeTranslate:B,left:te,top:le,right:ue,bottom:Ee,width:ce,height:ke,isPinch:s},On({transform:xe},e)));return!r&&ye(t,"onDrag",Se),Se}}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return r[0]||r[1]?(n.deltaOffset=[0,0],this.drag(t,V(V({},e),{deltaOffset:r}))):!1},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,!!r.isDrag){r.isDrag=!1;var i=ar(t,e,{});return!n&&ye(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var n,r,i=e.datas,s=e.clientX,o=e.clientY,a=this.dragStart(t,e);if(!a)return!1;var l=Vg(t,this,"dragStart",[s||0,o||0],e,!1,"draggable"),u=l.childEvents,c=l.eventParams,d=V(V({},a),{targets:t.props.targets,events:c}),f=ye(t,"onDragGroupStart",d);i.isDrag=f!==!1;var g=(r=(n=u[0])===null||n===void 0?void 0:n.datas.startValue)!==null&&r!==void 0?r:[0,0];return i.throttleOffset=[g[0]%1,g[1]%1],i.isDrag?a:!1},dragGroup:function(t,e){var n=e.datas;if(n.isDrag){var r=this.drag(t,V(V({},e),{parentThrottleDrag:t.props.throttleDrag})),i=e.datas.passDelta,s=Vg(t,this,"drag",i,e,!1,"draggable").eventParams;if(r){var o=V({targets:t.props.targets,events:s},r);return ye(t,"onDragGroup",o),o}}},dragGroupEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isDrag){this.dragEnd(t,e);var i=Vg(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return ye(t,"onDragGroupEnd",ar(t,e,{targets:t.props.targets,events:i})),n}},request:function(t){var e={},n=t.getRect(),r=0,i=0,s=!1;return{isControl:!1,requestStart:function(o){return s=o.useSnap,{datas:e,useSnap:s}},request:function(o){return"x"in o?r=o.x-n.left:"deltaX"in o&&(r+=o.deltaX),"y"in o?i=o.y-n.top:"deltaY"in o&&(i+=o.deltaY),{datas:e,distX:r,distY:i,useSnap:s}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:s}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function ZA(t,e){var n=qt(t,e),r=[0,0];return{fixedPosition:n,fixedDirection:e,fixedOffset:r}}function t5(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,s=t.height,o=r?4:3,a=[i/2*(1+e[0]),s/2*(1+e[1])],l=Tt(n,a,o),u=[0,0];return{fixedPosition:l,fixedDirection:e,fixedOffset:u}}function eP(t,e){var n=t.allMatrix,r=t.is3d,i=t.width,s=t.height,o=r?4:3,a=_6(e,i,s),l=Tt(n,e,o),u=[i?0:e[0],s?0:e[1]];return{fixedPosition:l,fixedDirection:a,fixedOffset:u}}var HS=P_("resizable"),Lm={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:BA("resizable"),dragControlCondition:HS,viewClassName:A_("resizable"),dragControlStart:function(t,e){var n,r=e.inputEvent,i=e.isPinch,s=e.isGroup,o=e.parentDirection,a=e.parentGesto,l=e.datas,u=e.parentFixedDirection,c=e.parentEvent,d=hP(o,i,r,l),f=t.state,g=f.target,v=f.width,m=f.height,S=f.gestos;if(!d||!g||S.resizable)return!1;S.resizable=a||t.controlGesto,!i&&zo(t,e),l.datas={},l.direction=d,l.startOffsetWidth=v,l.startOffsetHeight=m,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=f.inlineCSSWidth||f.cssWidth,l.startHeight=f.inlineCSSHeight||f.cssHeight,l.maxSize=[1/0,1/0],s||(l.minSize=[f.minOffsetWidth,f.minOffsetHeight],l.maxSize=[f.maxOffsetWidth,f.maxOffsetHeight]);var _=t.props.transformOrigin||"% %";l.transformOrigin=Hi(_)?_.split(" "):_,l.startOffsetMatrix=f.offsetMatrix,l.startTransformOrigin=f.transformOrigin,l.isWidth=(n=e==null?void 0:e.parentIsWidth)!==null&&n!==void 0?n:!d[0]&&!d[1]||d[0]||!d[1];function y(C){l.ratio=C&&isFinite(C)?C:0}l.startPositions=Tr(t.state);function E(C){var b=ZA(l.startPositions,C);l.fixedDirection=b.fixedDirection,l.fixedPosition=b.fixedPosition,l.fixedOffset=b.fixedOffset}function I(C){var b=eP(t.state,C);l.fixedDirection=b.fixedDirection,l.fixedPosition=b.fixedPosition,l.fixedOffset=b.fixedOffset}function N(C){l.minSize=[it("".concat(C[0]),0)||0,it("".concat(C[1]),0)||0]}function R(C){var b=[C[0]||1/0,C[1]||1/0];(!Zu(b[0])||isFinite(b[0]))&&(b[0]=it("".concat(b[0]),0)||1/0),(!Zu(b[1])||isFinite(b[1]))&&(b[1]=it("".concat(b[1]),0)||1/0),l.maxSize=b}y(v/m),E(u||[-d[0],-d[1]]),l.setFixedDirection=E,l.setFixedPosition=I,l.setMin=N,l.setMax=R;var x=Le(t,e,{direction:d,startRatio:l.ratio,set:function(C){var b=U(C,2),k=b[0],O=b[1];l.startWidth=k,l.startHeight=O},setMin:N,setMax:R,setRatio:y,setFixedDirection:E,setFixedPosition:I,setOrigin:function(C){l.transformOrigin=C},dragStart:Dn.dragStart(t,new Qa().dragStart([0,0],e))}),w=c||ye(t,"onResizeStart",x);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,w!==!1&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:d}),l.isResize?x:!1},dragControl:function(t,e){var n,r=e.datas,i=e.parentFlag,s=e.isPinch,o=e.parentKeepRatio,a=e.dragClient,l=e.parentDist,u=e.useSnap,c=e.isRequest,d=e.isGroup,f=e.parentEvent,g=e.resolveMatrix,v=r.isResize,m=r.transformOrigin,S=r.startWidth,_=r.startHeight,y=r.prevWidth,E=r.prevHeight,I=r.minSize,N=r.maxSize,R=r.ratio,x=r.startOffsetWidth,w=r.startOffsetHeight,C=r.isWidth;if(!v)return;if(g){var b=t.state.is3d,k=r.startOffsetMatrix,O=r.startTransformOrigin,A=b?4:3,F=tc(uh(e)),G=Math.sqrt(F.length);A!==G&&(F=Ur(F,G,A));var Y=Dc(k,F,O,A),H=Bo(Y,x,w,A);r.startPositions=H,r.nextTargetMatrix=F,r.nextAllMatrix=Y}var j=Oo(t.props,"resizable"),L=j.resizeFormat,B=j.throttleResize,$=B===void 0?i?0:1:B,K=j.parentMoveable,ee=j.keepRatioFinally,Q=r.direction,ie=Q,te=0,le=0;!Q[0]&&!Q[1]&&(ie=[1,1]);var ue=R&&(o??j.keepRatio)||!1;function Ee(){var Oe=r.fixedDirection,nt=_P(ie,ue,r,e);te=nt.distWidth,le=nt.distHeight;var Je=ie[0]-Oe[0]||ue?Math.max(x+te,jn):x,$e=ie[1]-Oe[1]||ue?Math.max(w+le,jn):w;return ue&&x&&w&&(C?$e=Je/R:Je=$e*R),[Je,$e]}var xe=U(Ee(),2),se=xe[0],ce=xe[1];f||(r.setFixedDirection(r.fixedDirection),ye(t,"onBeforeResize",Le(t,e,{startFixedDirection:r.startFixedDirection,startFixedPosition:r.startFixedPosition,setFixedDirection:function(Oe){var nt;return r.setFixedDirection(Oe),nt=U(Ee(),2),se=nt[0],ce=nt[1],[se,ce]},setFixedPosition:function(Oe){var nt;return r.setFixedPosition(Oe),nt=U(Ee(),2),se=nt[0],ce=nt[1],[se,ce]},boundingWidth:se,boundingHeight:ce,setSize:function(Oe){var nt;nt=U(Oe,2),se=nt[0],ce=nt[1]}},!0)));var ke=a;a||(!i&&s?ke=x6(t,[0,0]):ke=r.fixedPosition);var Se=[0,0];s||(Se=m5(t,se,ce,Q,ke,!u&&c,r)),l&&(!l[0]&&(Se[0]=0),!l[1]&&(Se[1]=0));function we(){var Oe;L&&(Oe=U(L([se,ce]),2),se=Oe[0],ce=Oe[1]),se=Ne(se,$),ce=Ne(ce,$)}if(ue){ie[0]&&ie[1]&&Se[0]&&Se[1]&&(re(Se[0])>re(Se[1])?Se[1]=0:Se[0]=0);var q=!Se[0]&&!Se[1];q&&we(),ie[0]&&!ie[1]||Se[0]&&!Se[1]||q&&C?(se+=Se[0],ce=se/R):(!ie[0]&&ie[1]||!Se[0]&&Se[1]||q&&!C)&&(ce+=Se[1],se=ce*R)}else se+=Se[0],ce+=Se[1],se=Math.max(0,se),ce=Math.max(0,ce);n=U(hA([se,ce],I,N,ue?R:!1),2),se=n[0],ce=n[1],we(),ue&&(d||ee)&&(C?ce=se/R:se=ce*R),te=se-x,le=ce-w;var pe=[te-y,le-E];r.prevWidth=te,r.prevHeight=le;var Ce=S6(t,se,ce,ke,m,r);if(!(!K&&pe.every(function(Oe){return!Oe})&&Ce.every(function(Oe){return!Oe}))){var ve=Dn.drag(t,kc(e,t.state,Ce,!!s,!1,"draggable")),Re=ve.transform,Ue=S+te,ut=_+le,ot=Le(t,e,V({width:Ue,height:ut,offsetWidth:Math.round(se),offsetHeight:Math.round(ce),startRatio:R,boundingWidth:se,boundingHeight:ce,direction:Q,dist:[te,le],delta:pe,isPinch:!!s,drag:ve},gP({style:{width:"".concat(Ue,"px"),height:"".concat(ut,"px")},transform:Re},ve,e)));return!f&&ye(t,"onResize",ot),ot}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,s=n.startOffsetHeight,o=n.prevWidth,a=n.prevHeight;if(!(!r||t.props.checkResizableError===!1)){var l=t.state,u=l.width,c=l.height,d=u-(i+o),f=c-(s+a),g=re(d)>3,v=re(f)>3;if(g&&(n.startWidth+=d,n.startOffsetWidth+=d,n.prevWidth+=d),v&&(n.startHeight+=f,n.startOffsetHeight+=f,n.prevHeight+=f),g||v)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize){n.isResize=!1;var i=ar(t,e,{});return!r&&ye(t,"onResizeEnd",i),i}},dragGroupControlCondition:HS,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,V(V({},e),{isGroup:!0}));if(!r)return!1;var i=jr(t,"resizable",e),s=n.startOffsetWidth,o=n.startOffsetHeight;function a(){var g=n.minSize;i.forEach(function(v){var m=v.datas,S=m.minSize,_=m.startOffsetWidth,y=m.startOffsetHeight,E=s*(_?S[0]/_:0),I=o*(y?S[1]/y:0);g[0]=Math.max(g[0],E),g[1]=Math.max(g[1],I)})}function l(){var g=n.maxSize;i.forEach(function(v){var m=v.datas,S=m.maxSize,_=m.startOffsetWidth,y=m.startOffsetHeight,E=s*(_?S[0]/_:0),I=o*(y?S[1]/y:0);g[0]=Math.min(g[0],E),g[1]=Math.min(g[1],I)})}var u=bi(t,this,"dragControlStart",e,function(g,v){return ch(t,g,n,v)});a(),l();var c=function(g){r.setFixedDirection(g),u.forEach(function(v,m){v.setFixedDirection(g),ch(t,v.moveable,n,i[m])})};n.setFixedDirection=c;var d=V(V({},r),{targets:t.props.targets,events:u.map(function(g){return V(V({},g),{setMin:function(v){g.setMin(v),a()},setMax:function(v){g.setMax(v),l()}})}),setFixedDirection:c,setMin:function(g){r.setMin(g),a()},setMax:function(g){r.setMax(g),l()}}),f=ye(t,"onResizeGroupStart",d);return n.isResize=f!==!1,n.isResize?r:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isResize){var r=Oo(t.props,"resizable");bp(t,"onBeforeResize",function(g){ye(t,"onBeforeResizeGroup",Le(t,e,V(V({},g),{targets:r.targets}),!0))});var i=this.dragControl(t,V(V({},e),{isGroup:!0}));if(i){var s=i.boundingWidth,o=i.boundingHeight,a=i.dist,l=r.keepRatio,u=[s/(s-a[0]),o/(o-a[1])],c=n.fixedPosition,d=bi(t,this,"dragControl",e,function(g,v){var m=U(In(Rc(t.rotation/180*Math.PI,3),[v.datas.originalX*u[0],v.datas.originalY*u[1],1],3),2),S=m[0],_=m[1];return V(V({},v),{parentDist:null,parentScale:u,dragClient:Xe(c,[S,_]),parentKeepRatio:l})}),f=V({targets:r.targets,events:d},i);return ye(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isResize){this.dragControlEnd(t,e);var i=bi(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onResizeGroupEnd",s),n}},request:function(t){var e={},n=0,r=0,i=!1,s=t.getRect();return{isControl:!0,requestStart:function(o){var a;return i=o.useSnap,{datas:e,parentDirection:o.direction||[1,1],parentIsWidth:(a=o==null?void 0:o.horizontal)!==null&&a!==void 0?a:!0,useSnap:i}},request:function(o){return"offsetWidth"in o?n=o.offsetWidth-s.offsetWidth:"deltaWidth"in o&&(n+=o.deltaWidth),"offsetHeight"in o?r=o.offsetHeight-s.offsetHeight:"deltaHeight"in o&&(r+=o.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:o.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function Fg(t,e,n,r,i){var s=t.props.groupable,o=t.state,a=o.is3d?4:3,l=e.origin,u=Tt(t.state.rootMatrix,Ie([l[0],l[1]],s?[0,0]:[o.left,o.top]),a),c=Xe([i.left,i.top],u);e.startAbsoluteOrigin=c,e.prevDeg=Mt(c,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=Ii(c,[n,r])}function ff(t,e,n){var r=n.defaultDeg,i=n.prevDeg,s=i%360,o=Math.floor(i/360);s<0&&(s+=360),s>t&&s>270&&t<90?++o:s<t&&s<90&&t>270&&--o;var a=e*(o*360+t-r);return n.prevDeg=r+a,a}function zg(t,e,n,r){return ff(Mt(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Bg(t,e,n,r,i,s){var o=t.props.throttleRotate,a=o===void 0?0:o,l=n.prevSnapDeg,u=0,c=!1;if(s){var d=v5(t,e,r,i+r);c=d.isSnap,u=i+d.dist}c||(u=Ne(i+r,a));var f=u-i;return n.prevSnapDeg=f,[f-l,f,u]}function tP(t,e,n){var r=U(e,4),i=r[0],s=r[1],o=r[2],a=r[3];if(t==="none")return[];if(nn(t))return t.map(function(S){return tP(S,[i,s,o,a],n)[0]});var l=U((t||"top").split("-"),2),u=l[0],c=l[1],d=[i,s];u==="left"?d=[o,i]:u==="right"?d=[s,a]:u==="bottom"&&(d=[a,o]);var f=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],g=dP(d,n);if(c){var v=c==="top"||c==="left",m=u==="bottom"||u==="left";f=d[v&&!m||!v&&m?0:1]}return[[f,g]]}function Vm(t,e){if(e.isRequest)return e.requestAble==="rotatable";var n=e.inputEvent.target;if(Wt(n,Te("rotation-control"))||t.props.rotateAroundControls&&Wt(n,Te("around-control"))||Wt(n,Te("control"))&&Wt(n,Te("rotatable")))return!0;var r=t.props.rotationTarget;return r?k_(r,!0).some(function(i){return i?n===i||n.contains(i):!1}):!1}var n5=`.rotation {
position: absolute;
height: 40px;
width: 1px;
transform-origin: 50% 100%;
height: calc(40px * var(--zoom));
top: auto;
left: 0;
bottom: 100%;
will-change: transform;
}
.rotation .rotation-line {
display: block;
width: 100%;
height: 100%;
transform-origin: 50% 50%;
}
.rotation .rotation-control {
border-color: #4af;
border-color: var(--moveable-color);
background:#fff;
cursor: alias;
}
:global .view-rotation-dragging, .rotatable.direction.control {
cursor: alias;
}
.rotatable.direction.control.move {
cursor: move;
}
`,r5={name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[n5],viewClassName:function(t){return t.isDragging("rotatable")?Te("view-rotation-dragging"):""},render:function(t,e){var n=Oo(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,s=n.zoom,o=n.renderDirections,a=n.rotateAroundControls,l=n.resolveAblesWithRotatable,u=t.getState(),c=u.renderPoses,d=u.direction;if(!r)return null;var f=tP(i,c,d),g=[];if(f.forEach(function(_,y){var E=U(_,2),I=E[0],N=E[1];g.push(e.createElement("div",{key:"rotation".concat(y),className:Te("rotation"),style:{transform:"translate(-50%) translate(".concat(I[0],"px, ").concat(I[1],"px) rotate(").concat(N,"rad)")}},e.createElement("div",{className:Te("line rotation-line"),style:{transform:"scaleX(".concat(s,")")}}),e.createElement("div",{className:Te("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(s,")")}})))}),o){var v=yl(l||{}),m={};v.forEach(function(_){l[_].forEach(function(y){m[y]=_})});var S=[];nn(o)&&(S=o.map(function(_){var y=m[_];return{data:y?{resolve:y}:{},classNames:y?["move"]:[],dir:_}})),g.push.apply(g,ae([],U(VA(t,"rotatable",S,e)),!1))}return a&&g.push.apply(g,ae([],U($A(t,e)),!1)),g},dragControlCondition:Vm,dragControlStart:function(t,e){var n,r,i=e.datas,s=e.clientX,o=e.clientY,a=e.parentRotate,l=e.parentFlag,u=e.isPinch,c=e.isRequest,d=t.state,f=d.target,g=d.left,v=d.top,m=d.direction,S=d.beforeDirection,_=d.targetTransform,y=d.moveableClientRect,E=d.offsetMatrix,I=d.targetMatrix,N=d.allMatrix,R=d.width,x=d.height;if(!c&&!f)return!1;var w=t.getRect();i.rect=w,i.transform=_,i.left=g,i.top=v;var C=function(ie){var te=eP(t.state,ie);i.fixedDirection=te.fixedDirection,i.fixedOffset=te.fixedOffset,i.fixedPosition=te.fixedPosition,$&&$.setFixedPosition(ie)},b=function(ie){var te=t5(t.state,ie);i.fixedDirection=te.fixedDirection,i.fixedOffset=te.fixedOffset,i.fixedPosition=te.fixedPosition,$&&$.setFixedDirection(ie)},k=s,O=o;if(c||u||l){var A=a||0;i.beforeInfo={origin:w.beforeOrigin,prevDeg:A,defaultDeg:A,prevSnapDeg:0,startDist:0},i.afterInfo=V(V({},i.beforeInfo),{origin:w.origin}),i.absoluteInfo=V(V({},i.beforeInfo),{origin:w.origin,startValue:A})}else{var F=(r=e.inputEvent)===null||r===void 0?void 0:r.target;if(F){var G=F.getAttribute("data-direction")||"",Y=l6[G];if(Y){i.isControl=!0,i.isAroundControl=Wt(F,Te("around-control")),i.controlDirection=Y;var H=F.getAttribute("data-resolve");H&&(i.resolveAble=H);var j=D5(d.rootMatrix,d.renderPoses,y);n=U(qt(j,Y),2),k=n[0],O=n[1]}}i.beforeInfo={origin:w.beforeOrigin},i.afterInfo={origin:w.origin},i.absoluteInfo={origin:w.origin,startValue:w.rotation};var L=C;C=function(ie){var te=d.is3d?4:3,le=U(Xe(yA(I,te),ie),2),ue=le[0],Ee=le[1],xe=In(E,ko([ue,Ee],te)),se=In(N,ko([ie[0],ie[1]],te));L(ie);var ce=d.posDelta;i.beforeInfo.origin=Ie(xe,ce),i.afterInfo.origin=Ie(se,ce),i.absoluteInfo.origin=Ie(se,ce),Fg(t,i.beforeInfo,k,O,y),Fg(t,i.afterInfo,k,O,y),Fg(t,i.absoluteInfo,k,O,y)},b=function(ie){var te=qt([[0,0],[R,0],[0,x],[R,x]],ie);C(te)}}i.startClientX=k,i.startClientY=O,i.direction=m,i.beforeDirection=S,i.startValue=0,i.datas={},Sp(t,e,"rotate");var B=!1,$=!1;if(i.isControl&&i.resolveAble){var K=i.resolveAble;K==="resizable"&&($=Lm.dragControlStart(t,V(V({},new Qa("resizable").dragStart([0,0],e)),{parentPosition:i.controlPosition,parentFixedPosition:i.fixedPosition})))}$||(B=Dn.dragStart(t,new Qa().dragStart([0,0],e))),C(N5(t));var ee=Le(t,e,V(V({set:function(ie){i.startValue=ie*Math.PI/180},setFixedDirection:b,setFixedPosition:C},Ep(t,e)),{dragStart:B,resizeStart:$})),Q=ye(t,"onRotateStart",ee);return i.isRotate=Q!==!1,d.snapRenderInfo={request:e.isRequest},i.isRotate?ee:!1},dragControl:function(t,e){var n,r,i,s=e.datas,o=e.clientDistX,a=e.clientDistY,l=e.parentRotate,u=e.parentFlag,c=e.isPinch,d=e.groupDelta,f=e.resolveMatrix,g=s.beforeDirection,v=s.beforeInfo,m=s.afterInfo,S=s.absoluteInfo,_=s.isRotate,y=s.startValue,E=s.rect,I=s.startClientX,N=s.startClientY;if(_){_p(t,e,"rotate");var R=c6(e),x=g*R,w=t.props.parentMoveable,C=0,b,k,O=0,A,F,G=0,Y,H,j=180/Math.PI*y,L=S.startValue,B=!1,$=I+o,K=N+a;if(!u&&"parentDist"in e){var ee=e.parentDist;b=ee,A=ee,Y=ee}else c||u?(b=ff(l,g,v),A=ff(l,x,m),Y=ff(l,x,S)):(b=zg($,K,g,v),A=zg($,K,x,m),Y=zg($,K,x,S),B=!0);if(k=j+b,F=j+A,H=L+Y,ye(t,"onBeforeRotate",Le(t,e,{beforeRotation:k,rotation:F,absoluteRotation:H,setRotation:function(ke){A=ke-j,b=A,Y=A}},!0)),n=U(Bg(t,E,v,b,j,B),3),C=n[0],b=n[1],k=n[2],r=U(Bg(t,E,m,A,j,B),3),O=r[0],A=r[1],F=r[2],i=U(Bg(t,E,S,Y,L,B),3),G=i[0],Y=i[1],H=i[2],!(!G&&!O&&!C&&!w&&!f)){var Q=wp(s,"rotate(".concat(F,"deg)"),"rotate(".concat(A,"deg)"));f&&(s.fixedPosition=__(t,s.targetAllTransform,s.fixedDirection,s.fixedOffset,s));var ie=E6(t,A,s),te=Ie(Xe(d||[0,0],ie),s.prevInverseDist||[0,0]);s.prevInverseDist=ie,s.requestValue=null;var le=MA(t,Q,te,c,e),ue=le,Ee=Ii([$,K],S.startAbsoluteOrigin)-S.startDist,xe=void 0;if(s.resolveAble==="resizable"){var se=Lm.dragControl(t,V(V({},kc(e,t.state,[e.deltaX,e.deltaY],!!c,!1,"resizable")),{resolveMatrix:!0,parentDistance:Ee}));se&&(xe=se,ue=gP(ue,se,e))}var ce=Le(t,e,V(V({delta:O,dist:A,rotate:F,rotation:F,beforeDist:b,beforeDelta:C,beforeRotate:k,beforeRotation:k,absoluteDist:Y,absoluteDelta:G,absoluteRotate:H,absoluteRotation:H,isPinch:!!c,resize:xe},le),ue));return ye(t,"onRotate",ce),ce}}},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate){n.isRotate=!1;var r=ar(t,e,{});return ye(t,"onRotateEnd",r),r}},dragGroupControlCondition:Vm,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,s=r.top,o=r.beforeOrigin,a=this.dragControlStart(t,e);if(!a)return!1;a.set(n.beforeDirection*t.rotation);var l=bi(t,this,"dragControlStart",e,function(d,f){var g=d.state,v=g.left,m=g.top,S=g.beforeOrigin,_=Xe(Ie([v,m],[i,s]),Ie(S,o));return f.datas.startGroupClient=_,f.datas.groupClient=_,V(V({},f),{parentRotate:0})}),u=V(V({},a),{targets:t.props.targets,events:l}),c=ye(t,"onRotateGroupStart",u);return n.isRotate=c!==!1,n.isRotate?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isRotate){bp(t,"onBeforeRotate",function(u){ye(t,"onBeforeRotateGroup",Le(t,e,V(V({},u),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=n.beforeDirection,s=r.beforeDist,o=s/180*Math.PI,a=bi(t,this,"dragControl",e,function(u,c){var d=c.datas.startGroupClient,f=U(c.datas.groupClient,2),g=f[0],v=f[1],m=U(bc(d,o*i),2),S=m[0],_=m[1],y=[S-g,_-v];return c.datas.groupClient=[S,_],V(V({},c),{parentRotate:s,groupDelta:y})});t.rotation=i*r.beforeRotation;var l=V({targets:t.props.targets,events:a,set:function(u){t.rotation=u},setGroupRotation:function(u){t.rotation=u}},r);return ye(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isRotate){this.dragControlEnd(t,e);var i=bi(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onRotateGroupEnd",s),n}},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(i){return"deltaRotate"in i?n+=i.deltaRotate:"rotate"in i&&(n=i.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function i5(t,e){var n,r=t.direction,i=t.classNames,s=t.size,o=t.pos,a=t.zoom,l=t.key,u=r==="horizontal",c=u?"Y":"X";return e.createElement("div",{key:l,className:i.join(" "),style:(n={},n[u?"width":"height"]="".concat(s),n.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(c,"(-50%) scale").concat(c,"(").concat(a,")"),n)})}function C_(t,e){return i5(V(V({},t),{classNames:ae([Te("line","guideline",t.direction)],U(t.classNames),!1).filter(function(n){return n}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(n){return"".concat(Ne(n,.1),"px")})}),e)}function WS(t,e,n,r,i,s,o,a){var l=t.props.zoom;return n.map(function(u,c){var d=u.type,f=u.pos,g=[0,0];return g[o]=r,g[o?0:1]=-i+f,C_({key:"".concat(e,"TargetGuideline").concat(c),classNames:[Te("target","bold",d)],posValue:g,sizeValue:s,zoom:l,direction:e},a)})}function qS(t,e,n,r,i,s){var o=t.props,a=o.zoom,l=o.isDisplayInnerSnapDigit,u=e==="horizontal"?Vs:Fs,c=i[u.start],d=i[u.end];return n.filter(function(f){var g=f.hide,v=f.elementRect;if(g)return!1;if(l&&v){var m=v.rect;if(m[u.start]<=c&&d<=m[u.end])return!1}return!0}).map(function(f,g){var v=f.pos,m=f.size,S=f.element,_=f.className,y=[-r[0]+v[0],-r[1]+v[1]];return C_({key:"".concat(e,"-default-guideline-").concat(g),classNames:S?[Te("bold"),_]:[Te("normal"),_],direction:e,posValue:y,sizeValue:m,zoom:a},s)})}function tu(t,e,n,r,i,s,o,a){var l,u=t.props,c=u.snapDigit,d=c===void 0?0:c,f=u.isDisplaySnapDigit,g=f===void 0?!0:f,v=u.snapDistFormat,m=v===void 0?function(N,R){return N}:v,S=u.zoom,_=e==="horizontal"?"X":"Y",y=e==="vertical"?"height":"width",E=Math.abs(i),I=g?parseFloat(E.toFixed(d)):0;return a.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:Te("guideline-group",e),style:(l={left:"".concat(s[0],"px"),top:"".concat(s[1],"px")},l[y]="".concat(E,"px"),l)},C_({direction:e,classNames:[Te(n),o],size:"100%",posValue:[0,0],sizeValue:E,zoom:S},a),a.createElement("div",{className:Te("size-value","gap"),style:{transform:"translate".concat(_,"(-50%) scale(").concat(S,")")}},I>0?m(I,e):""))}function s5(t,e,n,r){var i=t==="vertical"?0:1,s=t==="vertical"?1:0,o=i?Vs:Fs,a=n[o.start],l=n[o.end];return vP(e,function(u){return u.pos[i]}).map(function(u){var c=[],d=[],f=[];return u.forEach(function(g){var v,m,S=g.element,_=g.elementRect.rect;if(_[o.end]<a)c.push(g);else if(l<_[o.start])d.push(g);else if(_[o.start]<=a&&l<=_[o.end]&&r){var y=g.pos,E={element:S,rect:V(V({},_),(v={},v[o.end]=_[o.start],v))},I={element:S,rect:V(V({},_),(m={},m[o.start]=_[o.end],m))},N=[0,0],R=[0,0];N[i]=y[i],N[s]=y[s],R[i]=y[i],R[s]=y[s]+g.size,c.push({type:t,pos:N,size:0,elementRect:E,direction:"",elementDirection:"end"}),d.push({type:t,pos:R,size:0,elementRect:I,direction:"",elementDirection:"start"})}}),c.sort(function(g,v){return v.pos[s]-g.pos[s]}),d.sort(function(g,v){return g.pos[s]-v.pos[s]}),{total:u,start:c,end:d,inner:f}})}function o5(t,e,n,r,i){var s=t.props.isDisplayInnerSnapDigit,o=[];return["vertical","horizontal"].forEach(function(a){var l=e.filter(function(S){return S.type===a}),u=a==="vertical"?1:0,c=u?0:1,d=s5(a,l,r,s),f=u?Fs:Vs,g=u?Vs:Fs,v=r[f.start],m=r[f.end];d.forEach(function(S){var _=S.total,y=S.start,E=S.end,I=S.inner,N=n[c]+_[0].pos[c]-r[g.start],R=r;y.forEach(function(x){var w=x.elementRect.rect,C=R[f.start]-w[f.end];if(C>0){var b=[0,0];b[u]=n[u]+R[f.start]-v-C,b[c]=N,o.push(tu(t,a,"dashed",o.length,C,b,x.className,i))}R=w}),R=r,E.forEach(function(x){var w=x.elementRect.rect,C=w[f.start]-R[f.end];if(C>0){var b=[0,0];b[u]=n[u]+R[f.end]-v,b[c]=N,o.push(tu(t,a,"dashed",o.length,C,b,x.className,i))}R=w}),I.forEach(function(x){var w=x.elementRect.rect,C=v-w[f.start],b=w[f.end]-m,k=[0,0],O=[0,0];k[u]=n[u]-C,k[c]=N,O[u]=n[u]+m-v,O[c]=N,o.push(tu(t,a,"dashed",o.length,C,k,x.className,i)),o.push(tu(t,a,"dashed",o.length,b,O,x.className,i))})})}),o}function a5(t,e,n,r,i){var s=[];return["horizontal","vertical"].forEach(function(o){var a=e.filter(function(S){return S.type===o}).slice(0,1),l=o==="vertical"?0:1,u=l?0:1,c=l?Fs:Vs,d=l?Vs:Fs,f=r[c.start],g=r[c.end],v=r[d.start],m=r[d.end];a.forEach(function(S){var _=S.gap,y=S.gapRects,E=Math.max.apply(Math,ae([v],U(y.map(function(R){var x=R.rect;return x[d.start]})),!1)),I=Math.min.apply(Math,ae([m],U(y.map(function(R){var x=R.rect;return x[d.end]})),!1)),N=(E+I)/2;E===I||N===(v+m)/2||y.forEach(function(R){var x=R.rect,w=R.className,C=[n[0],n[1]];if(x[c.end]<f)C[l]+=x[c.end]-f;else if(g<x[c.start])C[l]+=x[c.start]-f-_;else return;C[u]+=N-v,s.push(tu(t,l?"vertical":"horizontal","gap",s.length,_,C,w,i))})})}),s}function Fm(t){var e,n,r=t.state,i=r.containerClientRect,s=r.hasFixed,o=i.overflow,a=i.scrollHeight,l=i.scrollWidth,u=i.clientHeight,c=i.clientWidth,d=i.clientLeft,f=i.clientTop,g=t.props,v=g.snapGap,m=v===void 0?!0:v,S=g.verticalGuidelines,_=g.horizontalGuidelines,y=g.snapThreshold,E=y===void 0?5:y,I=g.maxSnapElementGuidelineDistance,N=I===void 0?1/0:I,R=g.isDisplayGridGuidelines,x=wr(Tr(t.state)),w=x.top,C=x.left,b=x.bottom,k=x.right,O={top:w,left:C,bottom:b,right:k,center:(C+k)/2,middle:(w+b)/2},A=d5(t),F=ae([],U(A),!1),G=((n=(e=r.snapThresholdInfo)===null||e===void 0?void 0:e.multiples)!==null&&n!==void 0?n:[1,1]).map(function(L){return L*E});m&&F.push.apply(F,ae([],U(l5(t,O,G)),!1));var Y=V({},r.snapOffset||{left:0,top:0,bottom:0,right:0});if(F.push.apply(F,ae([],U(c5(t,o?l:c,o?a:u,d,f,Y,R)),!1)),s){var H=i.left,j=i.top;Y.left+=H,Y.top+=j,Y.right+=H,Y.bottom+=j}return F.push.apply(F,ae([],U(rP(_||!1,S||!1,o?l:c,o?a:u,d,f,Y)),!1)),F=F.filter(function(L){var B=L.element,$=L.elementRect,K=L.type;if(!B||!$)return!0;var ee=$.rect;return nP(O,ee,K,N)}),F}function l5(t,e,n){var r=t.props,i=r.maxSnapElementGuidelineDistance,s=i===void 0?1/0:i,o=r.maxSnapElementGapDistance,a=o===void 0?1/0:o,l=t.state.elementRects,u=[];return[["vertical",Vs,Fs],["horizontal",Fs,Vs]].forEach(function(c){var d=U(c,3),f=d[0],g=d[1],v=d[2],m=e[g.start],S=e[g.end],_=e[g.center],y=e[v.start],E=e[v.end],I={left:n[0],top:n[1]};function N(w){var C=w.rect,b=I[g.start];return C[g.end]<m+b?m-C[g.end]:S-b<C[g.start]?C[g.start]-S:-1}var R=l.filter(function(w){var C=w.rect;return C[v.start]>E||C[v.end]<y?!1:N(w)>0}).sort(function(w,C){return N(w)-N(C)}),x=[];R.forEach(function(w){R.forEach(function(C){if(w!==C){var b=w.rect,k=C.rect,O=b[v.start],A=b[v.end],F=k[v.start],G=k[v.end];O>G||F>A||x.push([w,C])}})}),x.forEach(function(w){var C=U(w,2),b=C[0],k=C[1],O=b.rect,A=k.rect,F=O[g.start],G=O[g.end],Y=A[g.start],H=A[g.end],j=I[g.start],L=0,B=0,$=!1,K=!1,ee=!1;if(G<=m&&S<=Y){if(K=!0,L=(Y-G-(S-m))/2,B=G+L+(S-m)/2,re(B-_)>j)return}else if(G<Y&&H<m+j){if($=!0,L=Y-G,B=H+L,re(B-m)>j)return}else if(G<Y&&S-j<F){if(ee=!0,L=Y-G,B=F-L,re(B-S)>j)return}else return;L&&nP(e,A,f,s)&&(L>a||u.push({type:f,pos:f==="vertical"?[B,0]:[0,B],element:k.element,size:0,className:k.className,isStart:$,isCenter:K,isEnd:ee,gap:L,hide:!0,gapRects:[b,k],direction:"",elementDirection:""}))})}),u}function u5(t,e,n,r){var i,s,o=t.props,a=t.state,l=o.snapGridAll,u=o.snapGridWidth,c=u===void 0?0:u,d=o.snapGridHeight,f=d===void 0?0:d,g=a.snapRenderInfo,v=g&&(((i=g.direction)===null||i===void 0?void 0:i[0])||((s=g.direction)===null||s===void 0?void 0:s[1])),m=t.moveables;if(l&&m&&v&&(c||f)){if(a.snapThresholdInfo)return;a.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var S=t.getRect(),_=S.children,y=g.direction;if(_){var E=y.map(function(N,R){var x=R===0?{snapSize:c,posName:"left",sizeName:"width",clientOffset:r.left-e}:{snapSize:f,posName:"top",sizeName:"height",clientOffset:r.top-n},w=x.snapSize,C=x.posName,b=x.sizeName,k=x.clientOffset;if(!w)return{dir:N,multiple:1,snapSize:w,snapOffset:0};var O=S[b],A=S[C],F=nB(_.map(function($){return[$[C]-A,$[b],O-$[b]-$[C]+A]})).filter(function($){return $}).sort(function($,K){return $-K}),G=F[0],Y=F.map(function($){return Ne($/G,.1)*w}),H=1,j=Ne(O/G,.1);for(H=1;H<=10&&!Y.every(function($){return $*H%1===0});++H);var L=(-N+1)/2,B=oh(A-k,A-k+O,L,1-L);return{multiple:j*H,dir:N,snapSize:w,snapOffset:Math.round(B/w)}}),I=E.map(function(N){return N.multiple||1});a.snapThresholdInfo.multiples=I,a.snapThresholdInfo.offset=E.map(function(N){return N.snapOffset}),E.forEach(function(N,R){N.snapSize})}}else a.snapThresholdInfo=null}function c5(t,e,n,r,i,s,o){r===void 0&&(r=0),i===void 0&&(i=0);var a=t.props,l=t.state,u=a.snapGridWidth,c=u===void 0?0:u,d=a.snapGridHeight,f=d===void 0?0:d,g=[],v=s.left,m=s.top,S=[0,0];u5(t,r,i,s);var _=l.snapThresholdInfo,y=c,E=f;if(_&&(c*=_.multiples[0]||1,f*=_.multiples[1]||1,S=_.offset),f){for(var I=function(R){g.push({type:"horizontal",pos:[v,Ne(S[1]*E+R-i+m,.1)],className:Te("grid-guideline"),size:e,hide:!o,direction:"",grid:!0})},N=0;N<=n*2;N+=f)I(N);for(var N=-f;N>=-n;N-=f)I(N)}if(c){for(var I=function(x){g.push({type:"vertical",pos:[Ne(S[0]*y+x-r+v,.1),m],className:Te("grid-guideline"),size:n,hide:!o,direction:"",grid:!0})},N=0;N<=e*2;N+=c)I(N);for(var N=-c;N>=-e;N-=c)I(N)}return g}function nP(t,e,n,r){return n==="horizontal"?re(t.right-e.left)<=r||re(t.left-e.right)<=r||t.left<=e.right&&e.left<=t.right:n==="vertical"?re(t.bottom-e.top)<=r||re(t.top-e.bottom)<=r||t.top<=e.bottom&&e.top<=t.bottom:!0}function d5(t){var e=t.state,n=t.props.elementGuidelines,r=n===void 0?[]:n;if(!r.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(f){return!f.refresh}),s=r.map(function(f){return Br(f)&&"element"in f?V(V({},f),{element:oi(f.element,!0)}):{element:oi(f,!0)}}).filter(function(f){return f.element}),o=SB(i.map(function(f){return f.element}),s.map(function(f){return f.element})),a=o.maintained,l=o.added,u=[];a.forEach(function(f){var g=U(f,2),v=g[0],m=g[1];u[m]=i[v]}),f5(t,l.map(function(f){return s[f]})).map(function(f,g){u[l[g]]=f}),e.elementRects=u;var c=E_(t.props.elementSnapDirections),d=[];return u.forEach(function(f){var g=f.element,v=f.top,m=v===void 0?c.top:v,S=f.left,_=S===void 0?c.left:S,y=f.right,E=y===void 0?c.right:y,I=f.bottom,N=I===void 0?c.bottom:I,R=f.center,x=R===void 0?c.center:R,w=f.middle,C=w===void 0?c.middle:w,b=f.className,k=f.rect,O=S_({top:m,right:E,left:_,bottom:N,center:x,middle:C},k),A=O.horizontal,F=O.vertical,G=O.horizontalNames,Y=O.verticalNames,H=k.top,j=k.left,L=k.right-j,B=k.bottom-H,$=[L,B];F.forEach(function(K,ee){d.push({type:"vertical",element:g,pos:[Ne(K,.1),H],size:B,sizes:$,className:b,elementRect:f,elementDirection:VS[Y[ee]]||Y[ee],direction:""})}),A.forEach(function(K,ee){d.push({type:"horizontal",element:g,pos:[j,Ne(K,.1)],size:L,sizes:$,className:b,elementRect:f,elementDirection:VS[G[ee]]||G[ee],direction:""})})}),d}function YS(t,e){return t?t.map(function(n){var r=Br(n)?n:{pos:n},i=r.pos;return Zu(i)?r:V(V({},r),{pos:it(i,e)})}):[]}function rP(t,e,n,r,i,s,o){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o={left:0,top:0,right:0,bottom:0});var a=[],l=o.left,u=o.top,c=o.bottom,d=o.right,f=n+d-l,g=r+c-u;return YS(t,g).forEach(function(v){a.push({type:"horizontal",pos:[l,Ne(v.pos-s+u,.1)],size:f,className:v.className,direction:""})}),YS(e,f).forEach(function(v){a.push({type:"vertical",pos:[Ne(v.pos-i+l,.1),u],size:g,className:v.className,direction:""})}),a}function f5(t,e){if(!e.length)return[];var n=t.props.groupable,r=t.state,i=r.containerClientRect,s=r.rootMatrix,o=r.is3d,a=r.offsetDelta,l=o?4:3,u=U(j6(s,i,l),2),c=u[0],d=u[1],f=n?0:a[0],g=n?0:a[1];return e.map(function(v){var m=v.element.getBoundingClientRect(),S=m.left-c-f,_=m.top-d-g,y=_+m.height,E=S+m.width,I=U(el(s,[S,_],l),2),N=I[0],R=I[1],x=U(el(s,[E,y],l),2),w=x[0],C=x[1];return V(V({},v),{rect:{left:N,right:w,top:R,bottom:C,center:(N+w)/2,middle:(R+C)/2}})})}function Dd(t){var e=t.state,n=e.container,r=t.props.snapContainer||n;if(e.snapContainer===r&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,s={left:0,top:0,bottom:0,right:0};if(n!==r){var o=oi(r,!0);if(o){var a=Su(o),l=ex(e,[a.left-i.left,a.top-i.top]),u=ex(e,[a.right-i.right,a.bottom-i.bottom]);s.left=Ne(l[0],1e-5),s.top=Ne(l[1],1e-5),s.right=Ne(u[0],1e-5),s.bottom=Ne(u[1],1e-5)}}return e.snapContainer=r,e.snapOffset=s,e.guidelines=Fm(t),e.enableSnap=!0,!0}function iP(t,e,n,r,i,s){var o=Bo(t,e,n,s?4:3),a=qt(o,r);return b_(o,Ie(i,a))}function KS(t){return t?t/re(t):0}function h5(t,e,n,r,i,s){var o=s.fixedDirection,a=z6(n,o,r),l=T_(t,e,n,r),u=ae(ae([],U(J6(t,e,a,r,i,s)),!1),U(JA(t,l,s)),!1),c=dh(u,0),d=dh(u,1);return{width:{isBound:c.isBound,offset:c.offset[0]},height:{isBound:d.isBound,offset:d.offset[1]}}}function p5(t,e,n,r,i,s,o,a,l){var u=qt(e,o),c=Cp(t,a,{vertical:[u[0]],horizontal:[u[1]]}),d=c.horizontal.offset,f=c.vertical.offset;if(Ne(f,Dm)||Ne(d,Dm)){var g=U(fi({datas:l,distX:-f,distY:-d}),2),v=g[0],m=g[1],S=Math.min(i||1/0,n+o[0]*v),_=Math.min(s||1/0,r+o[1]*m);return[S-n,_-r]}return[0,0]}function sP(t,e,n,r,i,s,o,a){for(var l=Tr(t.state),u=t.props.keepRatio,c=0,d=0,f=0;f<2;++f){var g=e(c,d),v=h5(t,g,i,u,o,a),m=v.width,S=v.height,_=m.isBound,y=S.isBound,E=m.offset,I=S.offset;if(f===1&&(_||(E=0),y||(I=0)),f===0&&o&&!_&&!y)return[0,0];if(u){var N=re(E)*(n?1/n:1),R=re(I)*(r?1/r:1),x=_&&y?N<R:y||!_&&N<R;x?E=n*I/r:I=r*E/n}c+=E,d+=I}if(!u&&i[0]&&i[1]){var w=e5(t,l,i,s,a),C=w.maxWidth,b=w.maxHeight,k=U(p5(t,e(c,d).map(function(F){return F.map(function(G){return Ne(G,Dm)})}),n+c,r+d,C,b,i,o,a),2),E=k[0],I=k[1];c+=E,d+=I}return[c,d]}function wu(t){return t<0&&(t=t%360+360),t%=360,t}function g5(t,e){e=wu(e);var n=Math.floor(t/360),r=n*360+360-e,i=n*360+e;return re(t-r)<re(t-i)?r:i}function Ug(t,e){t=wu(t),e=wu(e);var n=wu(t-e);return Math.min(n,360-n)}function v5(t,e,n,r){var i,s=t.props,o=(i=s[GA])!==null&&i!==void 0?i:5,a=s[HA];if(El(t,"rotatable")){var l=e.pos1,u=e.pos2,c=e.pos3,d=e.pos4,f=e.origin,g=n*Math.PI/180,v=[l,u,c,d].map(function(I){return Ie(I,f)}),m=v.map(function(I){return bc(I,g)}),S=ae(ae([],U(D6(t,v,m,f,n)),!1),U(W6(t,v,m,f,n)),!1);S.sort(function(I,N){return re(I-n)-re(N-n)});var _=S.length>0;if(_)return{isSnap:_,dist:_?S[0]:n}}if(a!=null&&a.length&&o){var y=a.slice().sort(function(I,N){return Ug(I,r)-Ug(N,r)}),E=y[0];if(Ug(E,r)<=o)return{isSnap:!0,dist:n+g5(r,E)-r}}return{isSnap:!1,dist:n}}function m5(t,e,n,r,i,s,o){if(!El(t,"resizable"))return[0,0];var a=o.fixedDirection,l=o.nextAllMatrix,u=t.state,c=u.allMatrix,d=u.is3d;return sP(t,function(f,g){return iP(l||c,e+f,n+g,a,i,d)},e,n,r,i,s,o)}function y5(t,e,n,r,i){if(!El(t,"scalable"))return[0,0];var s=i.startOffsetWidth,o=i.startOffsetHeight,a=i.fixedPosition,l=i.fixedDirection,u=i.is3d,c=sP(t,function(d,f){return iP(m6(i,Xe(e,[d/s,f/o])),s,o,l,a,u)},s,o,n,a,r,i);return[c[0]/s,c[1]/o]}function _5(t,e){e.absolutePoses=Tr(t.state)}function XS(t){var e=[];return t.forEach(function(n){n.guidelineInfos.forEach(function(r){var i=r.guideline;or(e,function(s){return s.guideline===i})||(i.direction="",e.push({guideline:i,posInfo:n}))})}),e.map(function(n){var r=n.guideline,i=n.posInfo;return V(V({},r),{direction:i.direction})})}function QS(t,e,n,r,i,s){var o=w_(xp(t,s),e,n),a=o.vertical,l=o.horizontal,u=ma();a.forEach(function(v){v.isBound&&(v.direction==="start"&&(u.left=!0),v.direction==="end"&&(u.right=!0),r.push({type:"bounds",pos:v.pos}))}),l.forEach(function(v){v.isBound&&(v.direction==="start"&&(u.top=!0),v.direction==="end"&&(u.bottom=!0),i.push({type:"bounds",pos:v.pos}))});var c=q6(t),d=c.boundMap,f=c.vertical,g=c.horizontal;return f.forEach(function(v){Fi(r,function(m){var S=m.type,_=m.pos;return S==="bounds"&&_===v})>=0||r.push({type:"bounds",pos:v})}),g.forEach(function(v){Fi(i,function(m){var S=m.type,_=m.pos;return S==="bounds"&&_===v})>=0||i.push({type:"bounds",pos:v})}),{boundMap:u,innerBoundMap:d}}var w5=P_("",["resizable","scalable"]),E5={name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",GA,HA,WA,qA,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[`:host {
--bounds-color: #d66;
}
.guideline {
pointer-events: none;
z-index: 2;
}
.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}
.guideline-group {
position: absolute;
top: 0;
left: 0;
}
.guideline-group .size-value {
position: absolute;
color: #f55;
font-size: 12px;
font-size: calc(12px * var(--zoom));
font-weight: bold;
}
.guideline-group.horizontal .size-value {
transform-origin: 50% 100%;
transform: translateX(-50%);
left: 50%;
bottom: 5px;
bottom: calc(2px + 3px * var(--zoom));
}
.guideline-group.vertical .size-value {
transform-origin: 0% 50%;
top: 50%;
transform: translateY(-50%);
left: 5px;
left: calc(2px + 3px * var(--zoom));
}
.guideline.gap {
background: #f55;
}
.size-value.gap {
color: #f55;
}
`],render:function(t,e){var n=t.state,r=n.top,i=n.left,s=n.pos1,o=n.pos2,a=n.pos3,l=n.pos4,u=n.snapRenderInfo,c=t.props.snapRenderThreshold,d=c===void 0?1:c;if(!u||!u.render||!El(t,""))return _a(t,"boundMap",ma(),function(Q){return JSON.stringify(Q)}),_a(t,"innerBoundMap",ma(),function(Q){return JSON.stringify(Q)}),[];n.guidelines=Fm(t);var f=Math.min(s[0],o[0],a[0],l[0]),g=Math.min(s[1],o[1],a[1],l[1]),v=u.externalPoses||[],m=Tr(t.state),S=[],_=[],y=[],E=[],I=[],N=wr(m),R=N.width,x=N.height,w=N.top,C=N.left,b=N.bottom,k=N.right,O={left:C,right:k,top:w,bottom:b,center:(C+k)/2,middle:(w+b)/2},A=v.length>0,F=A?wr(v):{};if(!u.request){if(u.direction&&I.push(F6(t,m,u.direction,d,d)),u.snap){var G=wr(m);u.center&&(G.middle=(G.top+G.bottom)/2,G.center=(G.left+G.right)/2),I.push(FS(t,G,d,d))}A&&(u.center&&(F.middle=(F.top+F.bottom)/2,F.center=(F.left+F.right)/2),I.push(FS(t,F,d,d))),I.forEach(function(Q){var ie=Q.vertical.posInfos,te=Q.horizontal.posInfos;S.push.apply(S,ae([],U(ie.filter(function(le){var ue=le.guidelineInfos;return ue.some(function(Ee){var xe=Ee.guideline;return!xe.hide})}).map(function(le){return{type:"snap",pos:le.pos}})),!1)),_.push.apply(_,ae([],U(te.filter(function(le){var ue=le.guidelineInfos;return ue.some(function(Ee){var xe=Ee.guideline;return!xe.hide})}).map(function(le){return{type:"snap",pos:le.pos}})),!1)),y.push.apply(y,ae([],U(XS(ie)),!1)),E.push.apply(E,ae([],U(XS(te)),!1))})}var Y=QS(t,[C,k],[w,b],S,_),H=Y.boundMap,j=Y.innerBoundMap;A&&QS(t,[F.left,F.right],[F.top,F.bottom],S,_,u.externalBounds);var L=ae(ae([],U(y),!1),U(E),!1),B=L.filter(function(Q){return Q.element&&!Q.gapRects}),$=L.filter(function(Q){return Q.gapRects}).sort(function(Q,ie){return Q.gap-ie.gap});ye(t,"onSnap",{guidelines:L.filter(function(Q){var ie=Q.element;return!ie}),elements:B,gaps:$},!0);var K=_a(t,"boundMap",H,function(Q){return JSON.stringify(Q)},ma()),ee=_a(t,"innerBoundMap",j,function(Q){return JSON.stringify(Q)},ma());return(H===K||j===ee)&&ye(t,"onBound",{bounds:H,innerBounds:j},!0),ae(ae(ae(ae(ae(ae([],U(o5(t,B,[f,g],O,e)),!1),U(a5(t,$,[f,g],O,e)),!1),U(qS(t,"horizontal",E,[i,r],O,e)),!1),U(qS(t,"vertical",y,[i,r],O,e)),!1),U(WS(t,"horizontal",_,f,r,R,0,e)),!1),U(WS(t,"vertical",S,g,i,x,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Dd(t)},drag:function(t){var e=t.state;Dd(t)||(e.guidelines=Fm(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){if(w5(t,e)||Vm(t,e))return!0;if(!e.isRequest&&e.inputEvent)return Wt(e.inputEvent.target,Te("snap-control"))},dragControlStart:function(t){t.state.snapRenderInfo=null,Dd(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,Dd(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}};function S5(t,e){return[t[0]*e[0],t[1]*e[1]]}function Te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fz.apply(void 0,ae([v_],U(t),!1))}function oP(t){t()}function x5(t){return!t||t==="none"?[1,0,0,1,0,0]:Br(t)?t:tc(t)}function Eu(t,e,n){return ah(e,Do(n,e),t,Do(n.map(function(r){return-r}),e))}function T5(t,e,n){if(e==="%"){var r=I_(t.ownerSVGElement);return r[n?"width":"height"]/100}return 1}function C5(t){var e=I5(R_(t,":before"));return e.map(function(n,r){var i=Ic(n),s=i.value,o=i.unit;return s*T5(t,o,r===0)})}function hh(t){return t?t.split(" "):["0","0"]}function I5(t){return hh(t.transformOrigin)}function aP(t){var e=Qn(t),n=e("transform");if(n&&n!=="none")return n;if("transform"in t){var r=t.transform,i=r.baseVal;if(!i)return"";var s=i.length;if(!s)return"";for(var o=[],a=function(u){var c=i[u].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(d){return c[d]}).join(", "),")"))},l=0;l<s;++l)a(l);return o.join(" ")}return""}function rc(t,e,n,r,i){var s,o,a=l_(t)||qs(t),l=!1,u,c;if(!t||n)u=t;else{var d=(s=t==null?void 0:t.assignedSlot)===null||s===void 0?void 0:s.parentElement,f=t.parentElement;d?(l=!0,c=f,u=d):u=f}for(var g=!1,v=t===e||u===e,m="relative",S=1,_=parseFloat(i==null?void 0:i("zoom"))||1,y=i==null?void 0:i("position");u&&u!==a;){e===u&&(v=!0);var E=Qn(u),I=u.tagName.toLowerCase(),N=aP(u),R=E("willChange"),x=parseFloat(E("zoom"))||1;if(m=E("position"),r&&x!==1){S=x;break}if(!n&&r&&_!==1&&y&&y!=="absolute"||I==="svg"||I==="foreignobject"||m!=="static"||N&&N!=="none"||R==="transform")break;var w=(o=t==null?void 0:t.assignedSlot)===null||o===void 0?void 0:o.parentNode,C=u.parentNode;w&&(l=!0,c=C);var b=C;if(b&&b.nodeType===11){u=b.host,g=!0,m=Qn(u)("position");break}u=b,m="relative"}return{offsetZoom:S,hasSlot:l,parentSlotElement:c,isCustomElement:g,isStatic:m==="static",isEnd:v||!u||u===a,offsetParent:u||a}}function b5(t,e){var n,r=t.tagName.toLowerCase(),i=t.offsetLeft,s=t.offsetTop,o=Qn(t),a=r_(i),l=!a,u,c;return!l&&(r!=="svg"||t.ownerSVGElement)?(u=bA?C5(t):hh(o("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice(),l=!0,r==="svg"?(i=0,s=0):(n=U(P5(t,u,t===e&&e.tagName.toLowerCase()==="g"),4),i=n[0],s=n[1],u[0]=n[2],u[1]=n[3])):(u=hh(o("transformOrigin")).map(function(d){return parseFloat(d)}),c=u.slice()),{tagName:r,isSVG:a,hasOffset:l,offset:[i||0,s||0],origin:u,targetOrigin:c}}function lP(t,e){var n=Qn(t),r=Qn(qs(t)),i=r("position");if(!e&&(!i||i==="static"))return[0,0];var s=parseInt(r("marginLeft"),10),o=parseInt(r("marginTop"),10);return n("position")==="absolute"&&((n("top")!=="auto"||n("bottom")!=="auto")&&(o=0),(n("left")!=="auto"||n("right")!=="auto")&&(s=0)),[s,o]}function zm(t){t.forEach(function(e){var n=e.matrix;n&&(e.matrix=Ur(n,3,4))})}function R5(t){for(var e=t.parentElement,n=!1,r=qs(t);e;){var i=R_(e).transform;if(i&&i!=="none"){n=!0;break}if(e===r)break;e=e.parentElement}return{fixedContainer:e||r,hasTransform:n}}function Ip(t,e){return e===void 0&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat(_A(t,!e).join(","),")")}function I_(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};var r=t.viewBox,i=r&&r.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||n,clientWidth:e,clientHeight:n}}function A5(t,e){var n,r=I_(t),i=r.width,s=r.height,o=r.clientWidth,a=r.clientHeight,l=o/i,u=a/s,c=t.preserveAspectRatio.baseVal,d=c.align,f=c.meetOrSlice,g=[0,0],v=[l,u],m=[0,0];if(d!==1){var S=(d-2)%3,_=Math.floor((d-2)/3);g[0]=i*S/2,g[1]=s*_/2;var y=f===2?Math.max(u,l):Math.min(l,u);v[0]=y,v[1]=y,m[0]=(o-i)/2*S,m[1]=(a-s)/2*_}var E=c_(v,e);return n=U(m,2),E[e*(e-1)]=n[0],E[e*(e-1)+1]=n[1],Eu(E,e,g)}function P5(t,e,n){var r=t.tagName.toLowerCase();if(!t.getBBox||!n&&r==="g")return[0,0,0,0];var i=Qn(t),s=i("transform-box")==="fill-box",o=t.getBBox(),a=I_(t.ownerSVGElement),l=o.x,u=o.y;r==="foreignobject"&&!l&&!u&&(l=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var c=l-a.x,d=u-a.y,f=s?e[0]:e[0]-c,g=s?e[1]:e[1]-d;return[c,d,f,g]}function Tt(t,e,n){return In(t,ko(e,n),n)}function Bo(t,e,n,r){return[[0,0],[e,0],[0,n],[e,n]].map(function(i){return Tt(t,i,r)})}function wr(t){var e=t.map(function(u){return u[0]}),n=t.map(function(u){return u[1]}),r=Math.min.apply(Math,ae([],U(e),!1)),i=Math.min.apply(Math,ae([],U(n),!1)),s=Math.max.apply(Math,ae([],U(e),!1)),o=Math.max.apply(Math,ae([],U(n),!1)),a=s-r,l=o-i;return{left:r,top:i,right:s,bottom:o,width:a,height:l}}function JS(t,e,n,r){var i=Bo(t,e,n,r);return wr(i)}function k5(t,e,n,r,i){var s,o=t.target,a=t.origin,l=e.matrix,u=cP(o),c=u.offsetWidth,d=u.offsetHeight,f=n.getBoundingClientRect(),g=[0,0];n===qs(n)&&(g=lP(o,!0));for(var v=o.getBoundingClientRect(),m=v.left-f.left+n.scrollLeft-(n.clientLeft||0)+g[0],S=v.top-f.top+n.scrollTop-(n.clientTop||0)+g[1],_=v.width,y=v.height,E=ah(r,i,l),I=JS(E,c,d,r),N=I.left,R=I.top,x=I.width,w=I.height,C=Tt(E,a,r),b=Ie(C,[N,R]),k=[m+b[0]*_/x,S+b[1]*y/w],O=[0,0],A=0;++A<10;){var F=ui(i,r);s=U(Ie(Tt(F,k,r),Tt(F,C,r)),2),O[0]=s[0],O[1]=s[1];var G=ah(r,i,Do(O,r),l),Y=JS(G,c,d,r),H=Y.left,j=Y.top,L=H-m,B=j-S;if(re(L)<2&&re(B)<2)break;k[0]-=L,k[1]-=B}return O.map(function($){return Math.round($)})}function D5(t,e,n){var r=t.length===16,i=r?4:3,s=e.map(function(l){return Tt(t,l,i)}),o=n.left,a=n.top;return s.map(function(l){return[l[0]+o,l[1]+a]})}function xr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function uP(t,e){return xr([e[0]-t[0],e[1]-t[1]])}function nu(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=Mt(t,e));var i=uP(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(i,"px")}}function ph(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,s=n.reduce(function(a,l){return a+l[0]},0)/i,o=n.reduce(function(a,l){return a+l[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(s,"px, ").concat(o,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Oo(t,e){var n=t[e];return Br(n)?V(V({},t),n):t}function cP(t){var e=t&&!r_(t.offsetWidth),n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,c=0,d=0,f=0,g=0,v=1/0,m=1/0,S=1/0,_=1/0,y=0,E=0,I=!1;if(t)if(!e&&t.ownerSVGElement){var N=t.getBBox();I=!0,n=N.width,r=N.height,o=n,a=r,l=n,u=r,i=n,s=r}else{var R=Qn(t),x=t.style,w=R("boxSizing")==="border-box",C=parseFloat(R("borderLeftWidth"))||0,b=parseFloat(R("borderRightWidth"))||0,k=parseFloat(R("borderTopWidth"))||0,O=parseFloat(R("borderBottomWidth"))||0,A=parseFloat(R("paddingLeft"))||0,F=parseFloat(R("paddingRight"))||0,G=parseFloat(R("paddingTop"))||0,Y=parseFloat(R("paddingBottom"))||0,H=A+F,j=G+Y,L=C+b,B=k+O,$=H+L,K=j+B,ee=R("position"),Q=0,ie=0;if("clientLeft"in t){var te=null;if(ee==="absolute"){var le=rc(t,qs(t));te=le.offsetParent}else te=t.parentElement;if(te){var ue=Qn(te);Q=parseFloat(ue("width")),ie=parseFloat(ue("height"))}}c=Math.max(H,it(R("minWidth"),Q)||0),d=Math.max(j,it(R("minHeight"),ie)||0),v=it(R("maxWidth"),Q),m=it(R("maxHeight"),ie),isNaN(v)&&(v=1/0),isNaN(m)&&(m=1/0),y=it(x.width,0)||0,E=it(x.height,0)||0,o=parseFloat(R("width"))||0,a=parseFloat(R("height"))||0,l=re(o-y)<1?Sm(c,y||o,v):o,u=re(a-E)<1?Sm(d,E||a,m):a,n=l,r=u,i=l,s=u,w?(S=v,_=m,f=c,g=d,l=n-$,u=r-K):(S=v+$,_=m+K,f=c+$,g=d+K,n=l+$,r=u+K),i=l+H,s=u+j}return{svg:I,offsetWidth:n,offsetHeight:r,clientWidth:i,clientHeight:s,contentWidth:l,contentHeight:u,inlineCSSWidth:y,inlineCSSHeight:E,cssWidth:o,cssHeight:a,minWidth:c,minHeight:d,maxWidth:v,maxHeight:m,minOffsetWidth:f,minOffsetHeight:g,maxOffsetWidth:S,maxOffsetHeight:_}}function dP(t,e){return Mt(e>0?t[0]:t[1],e>0?t[1]:t[0])}function Nd(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function fP(t,e){var n=t===qs(t)||t===l_(t),r={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return n&&(r.clientHeight=Math.max(e.height,r.clientHeight),r.scrollHeight=Math.max(e.height,r.scrollHeight)),r.overflow=Qn(t)("overflow")!=="visible",V(V({},e),r)}function $g(t,e,n,r){var i=t.left,s=t.right,o=t.top,a=t.bottom,l=e.top,u=e.left,c={left:u+i,top:l+o,right:u+s,bottom:l+a,width:s-i,height:a-o};return n&&r?fP(n,c):c}function Su(t,e){var n=0,r=0,i=0,s=0;if(t){var o=t.getBoundingClientRect();n=o.left,r=o.top,i=o.width,s=o.height}var a={left:n,top:r,width:i,height:s,right:n+i,bottom:r+s};return t&&e?fP(t,a):a}function N5(t){var e=t.props,n=e.groupable,r=e.svgOrigin,i=t.getState(),s=i.offsetWidth,o=i.offsetHeight,a=i.svg,l=i.transformOrigin;return!n&&a&&r?D_(r,s,o):l}function hP(t,e,n,r){var i;if(t)i=t;else if(e)i=[0,0];else{var s=n.target;i=pP(s,r)}return i}function pP(t,e){if(t){var n=t.getAttribute("data-rotation")||"",r=t.getAttribute("data-direction");if(e.deg=n,!!r){var i=[0,0];return r.indexOf("w")>-1&&(i[0]=-1),r.indexOf("e")>-1&&(i[0]=1),r.indexOf("n")>-1&&(i[1]=-1),r.indexOf("s")>-1&&(i[1]=1),i}}}function b_(t,e){return[Xe(e,t[0]),Xe(e,t[1]),Xe(e,t[2]),Xe(e,t[3])]}function Tr(t){var e=t.left,n=t.top,r=t.pos1,i=t.pos2,s=t.pos3,o=t.pos4;return b_([r,i,s,o],[e,n])}function Bm(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(n){n.unset&&n.unset(t)})}function ya(t,e){var n=e?"controlGesto":"targetGesto",r=t[n];(r==null?void 0:r.isIdle())===!1&&Bm(t,e),r==null||r.unset(),t[n]=null}function On(t,e){if(e){var n=wl(e);n.nextStyle=V(V({},n.nextStyle),t)}return{style:t,cssText:yl(t).map(function(r){return"".concat(Qz(r,"-"),": ").concat(t[r],";")}).join("")}}function gP(t,e,n){var r=e.afterTransform||e.transform;return V(V({},On(V(V(V({},t.style),e.style),{transform:r}),n)),{afterTransform:r,transform:t.transform})}function Le(t,e,n,r){var i=e.datas;i.datas||(i.datas={});var s=V(V({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:e.isTrusted!==!1,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var o;(o=e.stop)===null||o===void 0||o.call(e)}});return i.isStartEvent?r||(i.lastEvent=s):i.isStartEvent=!0,s}function ar(t,e,n){var r=e.datas,i="isDrag"in n?n.isDrag:e.isDrag;return r.datas||(r.datas={}),V(V({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas,isFirstDrag:!!e.isFirstDrag})}function bp(t,e,n){t._emitter.on(e,n)}function ye(t,e,n,r,i){return t.triggerEvent(e,n,r,i)}function R_(t,e){return Is(t).getComputedStyle(t,e)}function Od(t,e,n){var r={},i={};return t.filter(function(s){var o=s.name;if(r[o]||!e.some(function(a){return s[a]}))return!1;if(!n&&s.ableGroup){if(i[s.ableGroup])return!1;i[s.ableGroup]=!0}return r[o]=!0,!0})}function Um(t,e){return t===e||t==null&&e==null}function ZS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!r_(i))return i}return t[n]}function vP(t,e){var n=[],r=[];return t.forEach(function(i,s){var o=e(i,s,t),a=r.indexOf(o),l=n[a]||[];a===-1&&(r.push(o),n.push(l)),l.push(i)}),n}function O5(t,e){var n=[],r={};return t.forEach(function(i,s){var o=e(i,s,t),a=r[o];a||(a=[],r[o]=a,n.push(a)),a.push(i)}),n}function mP(t){return t.reduce(function(e,n){return e.concat(n)},[])}function Za(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(n,r){return re(r)-re(n)}),t[0]}function el(t,e,n){return In(ui(t,n),ko(e,n),n)}function M5(t,e){var n,r=t.is3d,i=t.rootMatrix,s=r?4:3;return n=U(el(i,[e.distX,e.distY],s),2),e.distX=n[0],e.distY=n[1],e}function dr(t,e,n,r){if(!n[0]&&!n[1])return e;var i=Tt(t,[KS(n[0]||1),0],r),s=Tt(t,[0,KS(n[1]||1)],r),o=Tt(t,[n[0]/xr(i),n[1]/xr(s)],r);return Xe(e,o)}function kr(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function gh(t){return re(t)<=jn?0:t}function A_(t){return function(e){if(!e.isDragging(t))return"";var n=T6(e,t),r=n.deg;return r?Te("view-control-rotation".concat(r)):""}}function P_(t,e){return e===void 0&&(e=[t]),function(n,r){if(r.isRequest)return e.some(function(s){return r.requestAble===s})?r.parentDirection:!1;var i=r.inputEvent.target;return Wt(i,Te("direction"))&&(!t||Wt(i,Te(t)))}}function j5(t,e,n){var r,i=Xa(t,{"x%":function(N){return N/100*e.offsetWidth},"y%":function(N){return N/100*e.offsetHeight}}),s=t.slice(0,n<0?void 0:n),o=t.slice(0,n<0?void 0:n+1),a=t[n]||"",l=n<0?[]:t.slice(n),u=n<0?[]:t.slice(n+1),c=i.slice(0,n<0?void 0:n),d=i.slice(0,n<0?void 0:n+1),f=(r=i[n])!==null&&r!==void 0?r:Xa([""])[0],g=n<0?[]:i.slice(n),v=n<0?[]:i.slice(n+1),m=f?[f]:[],S=ea(c),_=ea(d),y=ea(g),E=ea(v),I=st(S,y,4);return{transforms:t,beforeFunctionMatrix:S,beforeFunctionMatrix2:_,targetFunctionMatrix:ea(m),afterFunctionMatrix:y,afterFunctionMatrix2:E,allFunctionMatrix:I,beforeFunctions:c,beforeFunctions2:d,targetFunction:m[0],afterFunctions:g,afterFunctions2:v,beforeFunctionTexts:s,beforeFunctionTexts2:o,targetFunctionText:a,afterFunctionTexts:l,afterFunctionTexts2:u}}function L5(t){return!t||!Br(t)||u_(t)?!1:nn(t)||"length"in t}function oi(t,e){return t?u_(t)?t:Hi(t)?e?document.querySelector(t):t:i_(t)?t():vA(t)?t:"current"in t?t.current:t:null}function k_(t,e){if(!t)return[];var n=L5(t)?[].slice.call(t):[t];return n.reduce(function(r,i){return Hi(i)&&e?ae(ae([],U(r),!1),U([].slice.call(document.querySelectorAll(i))),!1):(nn(i)?r.push(k_(i,e)):r.push(oi(i,e)),r)},[])}function V5(t,e,n){var r=Mt(t,e)/Math.PI*180;return r=n>=0?r:180-r,r=r>=0?r:360+r,r}function ex(t,e){var n=t.rootMatrix,r=t.is3d,i=r?4:3,s=ui(n,i);return r||(s=Ur(s,3,4)),s[12]=0,s[13]=0,s[14]=0,hB(s,e)}function yP(t,e,n,r,i){var s=U(t,2),o=s[0],a=s[1],l=0,u=0;if(i&&o&&a){var c=Mt([0,0],e),d=Mt([0,0],r),f=xr(e),g=Math.cos(c-d)*f;if(!r[0])u=g,l=u*n;else if(!r[1])l=g,u=l/n;else{var v=r[0]*o,m=r[1]*a,S=Math.atan2(v+e[0],m+e[1]),_=Math.atan2(v,m);S<0&&(S+=Math.PI*2),_<0&&(_+=Math.PI*2);var y=0;re(S-_)<Math.PI/2||re(S-_)>Math.PI/2*3||(_+=Math.PI),y=S-_,y>Math.PI*2?y-=Math.PI*2:y>Math.PI?y=2*Math.PI-y:y<-Math.PI&&(y=-2*Math.PI-y);var E=xr([v+e[0],m+e[1]])*Math.cos(y);l=E*Math.sin(_)-v,u=E*Math.cos(_)-m,r[0]<0&&(l*=-1),r[1]<0&&(u*=-1)}}else l=r[0]*e[0],u=r[1]*e[1];return[l,u]}function _P(t,e,n,r){var i,s=n.ratio,o=n.startOffsetWidth,a=n.startOffsetHeight,l=0,u=0,c=r.distX,d=r.distY,f=r.pinchScale,g=r.parentDistance,v=r.parentDist,m=r.parentScale,S=n.fixedDirection,_=[0,1].map(function(x){return re(t[x]-S[x])}),y=[0,1].map(function(x){var w=_[x];return w!==0&&(w=2/w),w});if(v)l=v[0],u=v[1],e&&(l?u||(u=l/s):l=u*s);else if(Zu(f))l=(f-1)*o,u=(f-1)*a;else if(m)l=(m[0]-1)*o,u=(m[1]-1)*a;else if(g){var E=o*_[0],I=a*_[1],N=xr([E,I]);l=g/N*E*y[0],u=g/N*I*y[1]}else{var R=fi({datas:n,distX:c,distY:d});R=y.map(function(x,w){return R[w]*x}),i=U(yP([o,a],R,s,t,e),2),l=i[0],u=i[1]}return{distWidth:l,distHeight:u}}function $m(t,e){if(e){if(t==="left")return{x:"0%",y:"50%"};if(t==="top")return{x:"50%",y:"50%"};if(t==="center")return{x:"50%",y:"50%"};if(t==="right")return{x:"100%",y:"50%"};if(t==="bottom")return{x:"50%",y:"100%"};var n=U(t.split(" "),2),r=n[0],i=n[1],s=$m(r||""),o=$m(i||""),a=V(V({},s),o),l={x:"50%",y:"50%"};return a.x&&(l.x=a.x),a.y&&(l.y=a.y),a.value&&(a.x&&!a.y&&(l.y=a.value),!a.x&&a.y&&(l.x=a.value)),l}return t==="left"?{x:"0%"}:t==="right"?{x:"100%"}:t==="top"?{y:"0%"}:t==="bottom"?{y:"100%"}:t?t==="center"?{value:"50%"}:{value:t}:{}}function D_(t,e,n){var r=$m(t,!0),i=r.x,s=r.y;return[it(i,e)||0,it(s,n)||0]}function F5(t,e,n){var r=t.map(function(s){return Ie(s,e)}),i=r.map(function(s){return bc(s,n)});return{prev:r,next:i,result:i.map(function(s){return Xe(s,e)})}}function wP(t,e){return t.length===e.length&&t.every(function(n,r){var i=e[r],s=nn(n),o=nn(i);return s&&o?wP(n,i):!s&&!o?n===i:!1})}function _a(t,e,n,r,i){var s=t._store,o=s[e];if(!(e in s))if(i!=null)s[e]=i,o=i;else return s[e]=n,n;return o===n||r(o)===r(n)?o:(s[e]=n,n)}function Nn(t){return t>=0?1:-1}function re(t){return Math.abs(t)}function Gg(t,e){return tB(t).map(function(n){return e(n)})}function EP(t){return Zu(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var z5=Pc("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var n=e.datas,r=e.targets,i=e.angle,s=e.originalDatas,o=t.props,a=o.pinchable,l=o.ables;if(!a)return!1;var u="onPinch".concat(r?"Group":"","Start"),c="drag".concat(r?"Group":"","ControlStart"),d=(a===!0?t.controlAbles:l.filter(function(m){return a.indexOf(m.name)>-1})).filter(function(m){return m.canPinch&&m[c]}),f=Le(t,e,{});r&&(f.targets=r);var g=ye(t,u,f);n.isPinch=g!==!1,n.ables=d;var v=n.isPinch;return v?(d.forEach(function(m){if(s[m.name]=s[m.name]||{},!!m[c]){var S=V(V({},e),{datas:s[m.name],parentRotate:i,isPinch:!0});m[c](t,S)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},v):!1},pinch:function(t,e){var n=e.datas,r=e.scale,i=e.distance,s=e.originalDatas,o=e.inputEvent,a=e.targets,l=e.angle;if(n.isPinch){var u=i*(1-1/r),c=Le(t,e,{});a&&(c.targets=a);var d="onPinch".concat(a?"Group":"");ye(t,d,c);var f=n.ables,g="drag".concat(a?"Group":"","Control");return f.forEach(function(v){v[g]&&v[g](t,V(V({},e),{datas:s[v.name],inputEvent:o,resolveMatrix:!0,pinchScale:r,parentDistance:u,parentRotate:l,isPinch:!0}))}),c}},pinchEnd:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,s=e.targets,o=e.originalDatas;if(n.isPinch){var a="onPinch".concat(s?"Group":"","End"),l=ar(t,e,{isDrag:r});s&&(l.targets=s),ye(t,a,l);var u=n.ables,c="drag".concat(s?"Group":"","ControlEnd");return u.forEach(function(d){d[c]&&d[c](t,V(V({},e),{isDrag:r,datas:o[d.name],inputEvent:i,isPinch:!0}))}),r}},pinchGroupStart:function(t,e){return this.pinchStart(t,V(V({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,V(V({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,V(V({},e),{targets:t.props.targets}))}}),tx=P_("scalable"),B5={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:BA("scalable"),dragControlCondition:tx,viewClassName:A_("scalable"),dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,s=e.parentDirection,o=hP(s,r,i,n),a=t.state,l=a.width,u=a.height,c=a.targetTransform,d=a.target,f=a.pos1,g=a.pos2,v=a.pos4;if(!o||!d)return!1;r||zo(t,e),n.datas={},n.transform=c,n.prevDist=[1,1],n.direction=o,n.startOffsetWidth=l,n.startOffsetHeight=u,n.startValue=[1,1];var m=!o[0]&&!o[1]||o[0]||!o[1];Sp(t,e,"scale"),n.isWidth=m;function S(R){n.ratio=R&&isFinite(R)?R:0}n.startPositions=Tr(t.state);function _(R){var x=ZA(n.startPositions,R);n.fixedDirection=x.fixedDirection,n.fixedPosition=x.fixedPosition,n.fixedOffset=x.fixedOffset}n.setFixedDirection=_,S(Ii(f,g)/Ii(g,v)),_([-o[0],-o[1]]);var y=function(R){n.minScaleSize=R},E=function(R){n.maxScaleSize=R};y([-1/0,-1/0]),E([1/0,1/0]);var I=Le(t,e,V(V({direction:o,set:function(R){n.startValue=R},setRatio:S,setFixedDirection:_,setMinScaleSize:y,setMaxScaleSize:E},Ep(t,e)),{dragStart:Dn.dragStart(t,new Qa().dragStart([0,0],e))})),N=ye(t,"onScaleStart",I);return n.startFixedDirection=n.fixedDirection,N!==!1&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),n.isScale?I:!1},dragControl:function(t,e){_p(t,e,"scale");var n=e.datas,r=e.parentKeepRatio,i=e.parentFlag,s=e.isPinch,o=e.dragClient,a=e.isRequest,l=e.useSnap,u=e.resolveMatrix,c=n.prevDist,d=n.direction,f=n.startOffsetWidth,g=n.startOffsetHeight,v=n.isScale,m=n.startValue,S=n.isWidth,_=n.ratio;if(!v)return!1;var y=t.props,E=y.throttleScale,I=y.parentMoveable,N=d;!d[0]&&!d[1]&&(N=[1,1]);var R=_&&(r??y.keepRatio)||!1,x=t.state,w=[m[0],m[1]];function C(){var se=_P(N,R,n,e),ce=se.distWidth,ke=se.distHeight,Se=f?(f+ce)/f:1,we=g?(g+ke)/g:1;m[0]||(w[0]=ce/f),m[1]||(w[1]=ke/g);var q=(N[0]||R?Se:1)*w[0],pe=(N[1]||R?we:1)*w[1];return q===0&&(q=Nn(c[0])*Ad),pe===0&&(pe=Nn(c[1])*Ad),[q,pe]}var b=C();if(!s&&t.props.groupable){var k=x.snapRenderInfo||{},O=k.direction;nn(O)&&(O[0]||O[1])&&(x.snapRenderInfo={direction:d,request:e.isRequest})}ye(t,"onBeforeScale",Le(t,e,{scale:b,setFixedDirection:function(se){return n.setFixedDirection(se),b=C(),b},startFixedDirection:n.startFixedDirection,setScale:function(se){b=se}},!0));var A=[b[0]/w[0],b[1]/w[1]],F=o,G=[0,0],Y=Nn(A[0]*A[1]),H=!o&&!i&&s;if(H||u?F=__(t,n.targetAllTransform,[0,0],[0,0],n):o||(F=n.fixedPosition),s||(G=y5(t,A,d,!l&&a,n)),R){N[0]&&N[1]&&G[0]&&G[1]&&(Math.abs(G[0]*f)>Math.abs(G[1]*g)?G[1]=0:G[0]=0);var j=!G[0]&&!G[1];if(j&&(S?A[0]=Ne(A[0]*w[0],E)/w[0]:A[1]=Ne(A[1]*w[1],E)/w[1]),N[0]&&!N[1]||G[0]&&!G[1]||j&&S){A[0]+=G[0];var L=f*A[0]*w[0]/_;A[1]=Nn(Y*A[0])*re(L/g/w[1])}else if(!N[0]&&N[1]||!G[0]&&G[1]||j&&!S){A[1]+=G[1];var B=g*A[1]*w[1]*_;A[0]=Nn(Y*A[1])*re(B/f/w[0])}}else A[0]+=G[0],A[1]+=G[1],G[0]||(A[0]=Ne(A[0]*w[0],E)/w[0]),G[1]||(A[1]=Ne(A[1]*w[1],E)/w[1]);A[0]===0&&(A[0]=Nn(c[0])*Ad),A[1]===0&&(A[1]=Nn(c[1])*Ad),b=S5(A,[w[0],w[1]]);var $=[f,g],K=[f*b[0],g*b[1]];K=hA(K,n.minScaleSize,n.maxScaleSize,R?_:!1),b=Gg(2,function(se){return $[se]?K[se]/$[se]:K[se]}),A=Gg(2,function(se){return b[se]/w[se]});var ee=Gg(2,function(se){return c[se]?A[se]/c[se]:A[se]}),Q="scale(".concat(A.join(", "),")"),ie="scale(".concat(b.join(", "),")"),te=wp(n,ie,Q),le=!m[0]||!m[1],ue=y6(t,le?ie:Q,n.fixedDirection,F,n.fixedOffset,n,le),Ee=H?ue:Ie(ue,n.prevInverseDist||[0,0]);if(n.prevDist=A,n.prevInverseDist=ue,b[0]===c[0]&&b[1]===c[1]&&Ee.every(function(se){return!se})&&!I&&!H)return!1;var xe=Le(t,e,V({offsetWidth:f,offsetHeight:g,direction:d,scale:b,dist:A,delta:ee,isPinch:!!s},MA(t,te,Ee,s,e)));return ye(t,"onScale",xe),xe},dragControlEnd:function(t,e){var n=e.datas;if(!n.isScale)return!1;n.isScale=!1;var r=ar(t,e,{});return ye(t,"onScaleEnd",r),r},dragGroupControlCondition:tx,dragGroupControlStart:function(t,e){var n=e.datas,r=this.dragControlStart(t,e);if(!r)return!1;var i=jr(t,"resizable",e);n.moveableScale=t.scale;var s=bi(t,this,"dragControlStart",e,function(u,c){return ch(t,u,n,c)}),o=function(u){r.setFixedDirection(u),s.forEach(function(c,d){c.setFixedDirection(u),ch(t,c.moveable,n,i[d])})};n.setFixedDirection=o;var a=V(V({},r),{targets:t.props.targets,events:s,setFixedDirection:o}),l=ye(t,"onScaleGroupStart",a);return n.isScale=l!==!1,n.isScale?a:!1},dragGroupControl:function(t,e){var n=e.datas;if(n.isScale){bp(t,"onBeforeScale",function(c){ye(t,"onBeforeScaleGroup",Le(t,e,V(V({},c),{targets:t.props.targets}),!0))});var r=this.dragControl(t,e);if(r){var i=r.dist,s=n.moveableScale;t.scale=[i[0]*s[0],i[1]*s[1]];var o=t.props.keepRatio,a=n.fixedPosition,l=bi(t,this,"dragControl",e,function(c,d){var f=U(In(Rc(t.rotation/180*Math.PI,3),[d.datas.originalX*i[0],d.datas.originalY*i[1],1],3),2),g=f[0],v=f[1];return V(V({},d),{parentDist:null,parentScale:i,parentKeepRatio:o,dragClient:Xe(a,[g,v])})}),u=V({targets:t.props.targets,events:l},r);return ye(t,"onScaleGroup",u),u}}},dragGroupControlEnd:function(t,e){var n=e.isDrag,r=e.datas;if(r.isScale){this.dragControlEnd(t,e);var i=bi(t,this,"dragControlEnd",e),s=ar(t,e,{targets:t.props.targets,events:i});return ye(t,"onScaleGroupEnd",s),n}},request:function(){var t={},e=0,n=0,r=!1;return{isControl:!0,requestStart:function(i){return r=i.useSnap,{datas:t,parentDirection:i.direction||[1,1],useSnap:r}},request:function(i){return e+=i.deltaWidth,n+=i.deltaHeight,{datas:t,parentDist:[e,n],parentKeepRatio:i.keepRatio,useSnap:r}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:r}}}}};function Qi(t,e){return t.map(function(n,r){return oh(n,e[r],1,2)})}function nx(t,e,n){var r=Mt(t,e),i=Mt(t,n),s=i-r;return s>=0?s:s+2*Math.PI}function U5(t,e){var n=nx(t[0],t[1],t[2]),r=nx(e[0],e[1],e[2]),i=Math.PI;return!(n>=i&&r<=i||n<=i&&r>=i)}var $5={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:A_("warpable"),render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,s=n.warpable,o=n.zoom;if(r||i||!s)return[];var a=t.state,l=a.pos1,u=a.pos2,c=a.pos3,d=a.pos4,f=Qi(l,u),g=Qi(u,l),v=Qi(l,c),m=Qi(c,l),S=Qi(c,d),_=Qi(d,c),y=Qi(u,d),E=Qi(d,u);return ae([e.createElement("div",{className:Te("line"),key:"middeLine1",style:nu(f,S,o)}),e.createElement("div",{className:Te("line"),key:"middeLine2",style:nu(g,_,o)}),e.createElement("div",{className:Te("line"),key:"middeLine3",style:nu(v,y,o)}),e.createElement("div",{className:Te("line"),key:"middeLine4",style:nu(m,E,o)})],U(UA(t,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var n=e.inputEvent.target;return Wt(n,Te("direction"))&&Wt(n,Te("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,s=r.target,o=pP(s,n);if(!o||!i)return!1;var a=t.state,l=a.transformOrigin,u=a.is3d,c=a.targetTransform,d=a.targetMatrix,f=a.width,g=a.height,v=a.left,m=a.top;n.datas={},n.targetTransform=c,n.warpTargetMatrix=u?d:Ur(d,3,4),n.targetInverseMatrix=mA(ui(n.warpTargetMatrix,4),3,4),n.direction=o,n.left=v,n.top=m,n.poses=[[0,0],[f,0],[0,g],[f,g]].map(function(y){return Ie(y,l)}),n.nextPoses=n.poses.map(function(y){var E=U(y,2),I=E[0],N=E[1];return In(n.warpTargetMatrix,[I,N,0,1],4)}),n.startValue=mt(4),n.prevMatrix=mt(4),n.absolutePoses=Tr(a),n.posIndexes=OA(o),zo(t,e),Sp(t,e,"matrix3d"),a.snapRenderInfo={request:e.isRequest,direction:o};var S=Le(t,e,V({set:function(y){n.startValue=y}},Ep(t,e))),_=ye(t,"onWarpStart",S);return _!==!1&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,s=e.distY,o=n.targetInverseMatrix,a=n.prevMatrix,l=n.isWarp,u=n.startValue,c=n.poses,d=n.posIndexes,f=n.absolutePoses;if(!l)return!1;if(_p(t,e,"matrix3d"),El(t,"warpable")){var g=d.map(function(C){return f[C]});g.length>1&&g.push([(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]);var v=Cp(t,r,{horizontal:g.map(function(C){return C[1]+s}),vertical:g.map(function(C){return C[0]+i})}),m=v.horizontal,S=v.vertical;s-=m.offset,i-=S.offset}var _=fi({datas:n,distX:i,distY:s},!0),y=n.nextPoses.slice();if(d.forEach(function(C){y[C]=Xe(y[C],_)}),!a6.every(function(C){return U5(C.map(function(b){return c[b]}),C.map(function(b){return y[b]}))}))return!1;var E=d_(c[0],c[2],c[1],c[3],y[0],y[2],y[1],y[3]);if(!E.length)return!1;var I=st(o,E,4),N=DA(n,I,!0),R=st(ui(a,4),N,4);n.prevMatrix=N;var x=st(u,N,4),w=wp(n,"matrix3d(".concat(x.join(", "),")"),"matrix3d(".concat(N.join(", "),")"));return y_(e,w),ye(t,"onWarp",Le(t,e,V({delta:R,matrix:x,dist:N,multiply:st,transform:w},On({transform:w},e)))),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return n.isWarp?(n.isWarp=!1,ye(t,"onWarpEnd",ar(t,e,{})),r):!1}},G5=Te("area-pieces"),Md=Te("area-piece"),SP=Te("avoid"),H5=Te("view-dragging");function Hg(t){var e=t.areaElement;if(e){var n=t.state,r=n.width,i=n.height;gA(e,SP),e.style.cssText+="left: 0px; top: 0px; width: ".concat(r,"px; height: ").concat(i,"px")}}function rx(t){return t.createElement("div",{key:"area_pieces",className:G5},t.createElement("div",{className:Md}),t.createElement("div",{className:Md}),t.createElement("div",{className:Md}),t.createElement("div",{className:Md}))}var xP={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,s=n.groupable,o=n.passDragArea,a=t.getState(),l=a.width,u=a.height,c=a.renderPoses,d=o?Te("area","pass"):Te("area");if(s)return[e.createElement("div",{key:"area",ref:wo(t,"areaElement"),className:d}),rx(e)];if(!r||!i)return[];var f=d_([0,0],[l,0],[0,u],[l,u],c[0],c[1],c[2],c[3]),g=f.length?Ip(f,!0):"none";return[e.createElement("div",{key:"area",ref:wo(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(l,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:g}}),rx(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,s=e.inputEvent;if(!s)return!1;n.isDragArea=!1;var o=t.areaElement,a=t.state,l=a.moveableClientRect,u=a.renderPoses,c=a.rootMatrix,d=a.is3d,f=l.left,g=l.top,v=wr(u),m=v.left,S=v.top,_=v.width,y=v.height,E=d?4:3,I=U(el(c,[r-f,i-g],E),2),N=I[0],R=I[1];N-=m,R-=S;var x=[{left:m,top:S,width:_,height:R-10},{left:m,top:S,width:N-10,height:y},{left:m,top:S+R+10,width:_,height:y-R-10},{left:m+N+10,top:S,width:_-N-10,height:y}],w=[].slice.call(o.nextElementSibling.children);x.forEach(function(C,b){w[b].style.cssText="left: ".concat(C.left,"px;top: ").concat(C.top,"px; width: ").concat(C.width,"px; height: ").concat(C.height,"px;")}),pA(o,SP),a.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,r=e.inputEvent;if(this.enableNativeEvent(t),!r)return!1;n.isDragArea||(n.isDragArea=!0,Hg(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,r=e.datas;if(!n)return!1;r.isDragArea||Hg(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Hg(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&fA(function(){e.disableNativeEvent=!1})}},W5=Pc("origin",{props:["origin","svgOrigin"],render:function(t,e){var n=t.props,r=n.zoom,i=n.svgOrigin,s=n.groupable,o=t.getState(),a=o.beforeOrigin,l=o.rotation,u=o.svg,c=o.allMatrix,d=o.is3d,f=o.left,g=o.top,v=o.offsetWidth,m=o.offsetHeight,S;if(!s&&u&&i){var _=U(D_(i,v,m),2),y=_[0],E=_[1],I=d?4:3,N=Tt(c,[y,E],I);S=ph(l,r,Ie(N,[f,g]))}else S=ph(l,r,a);return[e.createElement("div",{className:Te("control","origin"),style:S,key:"beforeOrigin"})]}});function q5(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var Y5={name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var n=t.props,r=n.scrollContainer,i=r===void 0?t.getContainer():r,s=n.scrollOptions,o=new IB,a=oi(i,!0);e.datas.dragScroll=o,t.state.dragScroll=o;var l=e.isControl?"controlGesto":"targetGesto",u=e.targets;o.on("scroll",function(c){var d=c.container,f=c.direction,g=Le(t,e,{scrollContainer:d,direction:f}),v=u?"onScrollGroup":"onScroll";u&&(g.targets=u),ye(t,v,g)}).on("move",function(c){var d=c.offsetX,f=c.offsetY,g=c.inputEvent;t[l].scrollBy(d,f,g.inputEvent,!1)}).on("scrollDrag",function(c){var d=c.next;d(t[l].getCurrentEvent())}),o.dragStart(e,V({container:a},s))},checkScroll:function(t,e){var n=e.datas.dragScroll;if(n){var r=t.props,i=r.scrollContainer,s=i===void 0?t.getContainer():i,o=r.scrollThreshold,a=o===void 0?0:o,l=r.scrollThrottleTime,u=l===void 0?0:l,c=r.getScrollPosition,d=c===void 0?q5:c,f=r.scrollOptions;return n.drag(e,V({container:s,threshold:a,throttleTime:u,getScrollPosition:function(g){return d({scrollContainer:g.container,direction:g.direction})}},f)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,V(V({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,V(V({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,V(V({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,V(V({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,V(V({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,V(V({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,V(V({},e),{targets:t.props.targets}))},unset:function(t){var e,n=t.state;(e=n.dragScroll)===null||e===void 0||e.dragEnd(),n.dragScroll=null}},TP={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},K5=Pc("padding",{props:["padding"],render:function(t,e){var n=t.props;if(n.dragArea)return[];var r=EP(n.padding||{}),i=r.left,s=r.top,o=r.right,a=r.bottom,l=t.getState(),u=l.renderPoses,c=l.pos1,d=l.pos2,f=l.pos3,g=l.pos4,v=[c,d,f,g],m=[];return i>0&&m.push([0,2]),s>0&&m.push([0,1]),o>0&&m.push([1,3]),a>0&&m.push([2,3]),m.map(function(S,_){var y=U(S,2),E=y[0],I=y[1],N=v[E],R=v[I],x=u[E],w=u[I],C=d_([0,0],[100,0],[0,100],[100,100],N,R,x,w);if(C.length)return e.createElement("div",{key:"padding".concat(_),className:Te("padding"),style:{transform:Ip(C,!0)}})})}}),ix=["nw","ne","se","sw"];function jd(t,e){var n=t[0]+t[1],r=n>e?e/n:1;return t[0]*=r,t[1]=e-t[1]*r,t}var X5=[1,2,5,6],Q5=[0,3,4,7],lo=[1,-1,-1,1],uo=[1,1,-1,-1];function N_(t,e,n,r,i,s,o,a){i===void 0&&(i=0),s===void 0&&(s=0),o===void 0&&(o=n),a===void 0&&(a=r);var l=[],u=!1,c=t.filter(function(f){return!f.virtual}),d=c.map(function(f){var g=f.horizontal,v=f.vertical,m=f.pos;if(v&&!u&&(u=!0,l.push("/")),u){var S=Math.max(0,v===1?m[1]-s:a-m[1]);return l.push(kr(S,r,e)),S}else{var S=Math.max(0,g===1?m[0]-i:o-m[0]);return l.push(kr(S,n,e)),S}});return{radiusPoses:c,styles:l,raws:d}}function CP(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var s=t[i];s.sub&&(s.horizontal&&(e[1]===0&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),s.vertical&&(n[1]===0&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function IP(t,e,n,r,i,s,o){var a,l,u,c;s===void 0&&(s=[0,0]),o===void 0&&(o=!1);var d=t.indexOf("/"),f=(d>-1?t.slice(0,d):t).length,g=t.slice(0,f),v=t.slice(f+1),m=g.length,S=v.length,_=S>0,y=U(g,4),E=y[0],I=E===void 0?"0px":E,N=y[1],R=N===void 0?I:N,x=y[2],w=x===void 0?I:x,C=y[3],b=C===void 0?R:C,k=U(v,4),O=k[0],A=O===void 0?I:O,F=k[1],G=F===void 0?_?A:R:F,Y=k[2],H=Y===void 0?_?A:w:Y,j=k[3],L=j===void 0?_?G:b:j,B=[I,R,w,b].map(function(te){return it(te,e)}),$=[A,G,H,L].map(function(te){return it(te,n)}),K=B.slice(),ee=$.slice();a=U(jd([K[0],K[1]],e),2),K[0]=a[0],K[1]=a[1],l=U(jd([K[3],K[2]],e),2),K[3]=l[0],K[2]=l[1],u=U(jd([ee[0],ee[3]],n),2),ee[0]=u[0],ee[3]=u[1],c=U(jd([ee[1],ee[2]],n),2),ee[1]=c[0],ee[2]=c[1];var Q=o?K:K.slice(0,Math.max(s[0],m)),ie=o?ee:ee.slice(0,Math.max(s[1],S));return ae(ae([],U(Q.map(function(te,le){var ue=ix[le];return{virtual:le>=m,horizontal:lo[le],vertical:0,pos:[r+te,i+(uo[le]===-1?n:0)],sub:!0,raw:B[le],direction:ue}})),!1),U(ie.map(function(te,le){var ue=ix[le];return{virtual:le>=S,horizontal:0,vertical:uo[le],pos:[r+(lo[le]===-1?e:0),i+te],sub:!0,raw:$[le],direction:ue}})),!1)}function J5(t,e,n,r,i){i===void 0&&(i=e.length);var s=CP(t.slice(r)),o=s.horizontalRange,a=s.verticalRange,l=n-r,u=0;if(l===0)u=i;else if(l>0&&l<o[1])u=o[1]-l;else if(l>=a[0])u=a[0]+a[1]-l;else return;t.splice(n,u),e.splice(n,u)}function Z5(t,e,n,r,i,s,o,a,l,u,c){u===void 0&&(u=0),c===void 0&&(c=0);var d=CP(t.slice(n)),f=d.horizontalRange,g=d.verticalRange;if(r>-1)for(var v=lo[r]===1?s-u:a-s,m=f[1];m<=r;++m){var S=uo[m]===1?c:l,_=0;if(r===m?_=s:m===0?_=u+v:lo[m]===-1&&(_=a-(e[n][0]-u)),t.splice(n+m,0,{horizontal:lo[m],vertical:0,pos:[_,S]}),e.splice(n+m,0,[_,S]),m===0)break}else if(i>-1){var y=uo[i]===1?o-c:l-o;if(f[1]===0&&g[1]===0){var E=[u+y,c];t.push({horizontal:lo[0],vertical:0,pos:E}),e.push(E)}for(var I=g[0],m=g[1];m<=i;++m){var _=lo[m]===1?u:a,S=0;if(i===m?S=o:m===0?S=c+y:uo[m]===1?S=e[n+I][1]:uo[m]===-1&&(S=l-(e[n+I][1]-c)),t.push({horizontal:0,vertical:uo[m],pos:[_,S]}),e.push([_,S]),m===0)break}}}function eU(t,e){e===void 0&&(e=t.map(function(i){return i.raw}));var n=t.map(function(i,s){return i.horizontal?e[s]:null}).filter(function(i){return i!=null}),r=t.map(function(i,s){return i.vertical?e[s]:null}).filter(function(i){return i!=null});return{horizontals:n,verticals:r}}var tU=[[0,-1,"n"],[1,0,"e"]],nU=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function O_(t,e,n){var r=t.props.clipRelative,i=t.state,s=i.width,o=i.height,a=e,l=a.type,u=a.poses,c=l==="rect",d=l==="circle";if(l==="polygon")return n.map(function(R){return"".concat(kr(R[0],s,r)," ").concat(kr(R[1],o,r))});if(c||l==="inset"){var f=n[1][1],g=n[3][0],v=n[7][0],m=n[5][1];if(c)return[f,g,m,v].map(function(R){return"".concat(R,"px")});var S=[f,s-g,o-m,v].map(function(R,x){return kr(R,x%2?s:o,r)});if(n.length>8){var _=U(Ie(n[4],n[0]),2),y=_[0],E=_[1];S.push.apply(S,ae(["round"],U(N_(u.slice(8).map(function(R,x){return V(V({},R),{pos:n[x]})}),r,y,E,v,f,g,m).styles),!1))}return S}else if(d||l==="ellipse"){var I=n[0],N=kr(re(n[1][1]-I[1]),d?Math.sqrt((s*s+o*o)/2):o,r),S=d?[N]:[kr(re(n[2][0]-I[0]),s,r),N];return S.push("at",kr(I[0],s,r),kr(I[1],o,r)),S}}function vh(t,e,n,r){var i=[r,(r+e)/2,e],s=[t,(t+n)/2,n];return nU.map(function(o){var a=U(o,3),l=a[0],u=a[1],c=a[2],d=i[l+1],f=s[u+1];return{vertical:re(u),horizontal:re(l),direction:c,pos:[d,f]}})}function bP(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(r){var i=r.pos;e[0]=Math.min(e[0],i[0]),e[1]=Math.max(e[1],i[0]),n[0]=Math.min(n[0],i[1]),n[1]=Math.max(n[1],i[1])}),[re(e[1]-e[0]),re(n[1]-n[0])]}function sx(t,e,n,r,i){var s,o,a,l,u,c,d,f,g;if(t){var v=i;if(!v){var m=Qn(t),S=m("clipPath");v=S!=="none"?S:m("clip")}if(!((!v||v==="none"||v==="auto")&&(v=r,!v))){var _=dA(v),y=_.prefix,E=y===void 0?v:y,I=_.value,N=I===void 0?"":I,R=E==="circle",x=" ";if(E==="polygon"){var w=go(N||"0% 0%, 100% 0%, 100% 100%, 0% 100%");x=",";var C=w.map(function(Ue){var ut=U(Ue.split(" "),2),ot=ut[0],Oe=ut[1];return{vertical:1,horizontal:1,pos:[it(ot,e),it(Oe,n)]}}),b=No(C.map(function(Ue){return Ue.pos}));return{type:E,clipText:v,poses:C,splitter:x,left:b.minX,right:b.maxX,top:b.minY,bottom:b.maxY}}else if(R||E==="ellipse"){var k="",O="",A=0,F=0,w=Ls(N);if(R){var G="";s=U(w,4),o=s[0],G=o===void 0?"50%":o,a=s[2],k=a===void 0?"50%":a,l=s[3],O=l===void 0?"50%":l,A=it(G,Math.sqrt((e*e+n*n)/2)),F=A}else{var Y="",H="";u=U(w,5),c=u[0],Y=c===void 0?"50%":c,d=u[1],H=d===void 0?"50%":d,f=u[3],k=f===void 0?"50%":f,g=u[4],O=g===void 0?"50%":g,A=it(Y,e),F=it(H,n)}var j=[it(k,e),it(O,n)],C=ae([{vertical:1,horizontal:1,pos:j,direction:"nesw"}],U(tU.slice(0,R?1:2).map(function(ot){return{vertical:re(ot[1]),horizontal:ot[0],direction:ot[2],sub:!0,pos:[j[0]+ot[0]*A,j[1]+ot[1]*F]}})),!1);return{type:E,clipText:v,radiusX:A,radiusY:F,left:j[0]-A,top:j[1]-F,right:j[0]+A,bottom:j[1]+F,poses:C,splitter:x}}else if(E==="inset"){var w=Ls(N||"0 0 0 0"),L=w.indexOf("round"),B=(L>-1?w.slice(0,L):w).length,$=w.slice(B+1),K=U(w.slice(0,B),4),ee=K[0],Q=K[1],ie=Q===void 0?ee:Q,te=K[2],le=te===void 0?ee:te,ue=K[3],Ee=ue===void 0?ie:ue,xe=U([ee,le].map(function(ot){return it(ot,n)}),2),se=xe[0],ce=xe[1],ke=U([Ee,ie].map(function(ot){return it(ot,e)}),2),Se=ke[0],we=ke[1],q=e-we,pe=n-ce,Ce=IP($,q-Se,pe-se,Se,se),C=ae(ae([],U(vh(se,q,pe,Se)),!1),U(Ce),!1);return{type:"inset",clipText:v,poses:C,top:se,left:Se,right:q,bottom:pe,radius:$,splitter:x}}else if(E==="rect"){var w=go(N||"0px, ".concat(e,"px, ").concat(n,"px, 0px"));x=",";var ve=U(w.map(function(Je){var $e=Ic(Je).value;return $e}),4),Re=ve[0],we=ve[1],ce=ve[2],Se=ve[3],C=vh(Re,we,ce,Se);return{type:"rect",clipText:v,poses:C,top:Re,right:we,bottom:ce,left:Se,values:w,splitter:x}}}}}function rU(t,e,n,r,i){var s=t[e],o=s.direction,a=s.sub,l=t.map(function(){return[0,0]}),u=o?o.split(""):[];if(r&&e<8){var c=u.filter(function(A){return A==="w"||A==="e"}),d=u.filter(function(A){return A==="n"||A==="s"}),f=c[0],g=d[0];l[e]=n;var v=U(bP(t),2),m=v[0],S=v[1],_=m&&S?m/S:0;if(_&&i){var y=(e+4)%8,E=t[y].pos,I=[0,0];o.indexOf("w")>-1?I[0]=-1:o.indexOf("e")>-1&&(I[0]=1),o.indexOf("n")>-1?I[1]=-1:o.indexOf("s")>-1&&(I[1]=1);var N=yP([m,S],n,_,I,!0),R=m+N[0],x=S+N[1],w=E[1],C=E[1],b=E[0],k=E[0];I[0]===-1?b=k-R:I[0]===1?k=b+R:(b=b-R/2,k=k+R/2),I[1]===-1?w=C-x:(I[1]===1||(w=C-x/2),C=w+x);var O=vh(w,k,C,b);t.forEach(function(A,F){l[F][0]=O[F].pos[0]-A.pos[0],l[F][1]=O[F].pos[1]-A.pos[1]})}else t.forEach(function(A,F){var G=A.direction;G&&(G.indexOf(f)>-1&&(l[F][0]=n[0]),G.indexOf(g)>-1&&(l[F][1]=n[1]))}),f&&(l[1][0]=n[0]/2,l[5][0]=n[0]/2),g&&(l[3][1]=n[1]/2,l[7][1]=n[1]/2)}else o&&!a?u.forEach(function(A){var F=A==="n"||A==="s";t.forEach(function(G,Y){var H=G.direction,j=G.horizontal,L=G.vertical;!H||H.indexOf(A)===-1||(l[Y]=[F||!j?0:n[0],!F||!L?0:n[1]])})}):l[e]=n;return l}function iU(t,e){var n=U(kA(t,e),2),r=n[0],i=n[1],s=e.datas,o=s.clipPath,a=s.clipIndex,l=o,u=l.type,c=l.poses,d=l.splitter,f=c.map(function(y){return y.pos});if(u==="polygon")f.splice(a,0,[r,i]);else if(u==="inset"){var g=X5.indexOf(a),v=Q5.indexOf(a),m=c.length;if(Z5(c,f,8,g,v,r,i,f[4][0],f[4][1],f[0][0],f[0][1]),m===c.length)return}else return;var S=O_(t,o,f),_="".concat(u,"(").concat(S.join(d),")");ye(t,"onClip",Le(t,e,V({clipEventType:"added",clipType:u,poses:f,clipStyles:S,clipStyle:_,distX:0,distY:0},On({clipPath:_},e))))}function sU(t,e){var n=e.datas,r=n.clipPath,i=n.clipIndex,s=r,o=s.type,a=s.poses,l=s.splitter,u=a.map(function(g){return g.pos}),c=u.length;if(o==="polygon")a.splice(i,1),u.splice(i,1);else if(o==="inset"){if(i<8||(J5(a,u,i,8,c),c===a.length))return}else return;var d=O_(t,r,u),f="".concat(o,"(").concat(d.join(l),")");ye(t,"onClip",Le(t,e,V({clipEventType:"removed",clipType:o,poses:u,clipStyles:d,clipStyle:f,distX:0,distY:0},On({clipPath:f},e))))}var oU={name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[`.control.clip-control {
background: #6d6;
cursor: pointer;
}
.control.clip-control.clip-radius {
background: #d66;
}
.line.clip-line {
background: #6e6;
cursor: move;
z-index: 1;
}
.clip-area {
position: absolute;
top: 0;
left: 0;
}
.clip-ellipse {
position: absolute;
cursor: move;
border: 1px solid #6d6;
border: var(--zoompx) solid #6d6;
border-radius: 50%;
transform-origin: 0px 0px;
}`,`:host {
--bounds-color: #d66;
}`,`.guideline {
pointer-events: none;
z-index: 2;
}`,`.line.guideline.bounds {
background: #d66;
background: var(--bounds-color);
}`],render:function(t,e){var n=t.props,r=n.customClipPath,i=n.defaultClipPath,s=n.clipArea,o=n.zoom,a=n.groupable,l=t.getState(),u=l.target,c=l.width,d=l.height,f=l.allMatrix,g=l.is3d,v=l.left,m=l.top,S=l.pos1,_=l.pos2,y=l.pos3,E=l.pos4,I=l.clipPathState,N=l.snapBoundInfos,R=l.rotation;if(!u||a)return[];var x=sx(u,c,d,i||"inset",I||r);if(!x)return[];var w=g?4:3,C=x.type,b=x.poses,k=b.map(function(we){var q=Tt(f,we.pos,w);return[q[0]-v,q[1]-m]}),O=[],A=[],F=C==="rect",G=C==="inset",Y=C==="polygon";if(F||G||Y){var H=G?k.slice(0,8):k;A=H.map(function(we,q){var pe=q===0?H[H.length-1]:H[q-1],Ce=Mt(pe,we),ve=uP(pe,we);return e.createElement("div",{key:"clipLine".concat(q),className:Te("line","clip-line","snap-control"),"data-clip-index":q,style:{width:"".concat(ve,"px"),transform:"translate(".concat(pe[0],"px, ").concat(pe[1],"px) rotate(").concat(Ce,"rad) scaleY(").concat(o,")")}})})}if(O=k.map(function(we,q){return e.createElement("div",{key:"clipControl".concat(q),className:Te("control","clip-control","snap-control"),"data-clip-index":q,style:{transform:"translate(".concat(we[0],"px, ").concat(we[1],"px) rotate(").concat(R,"rad) scale(").concat(o,")")}})}),G&&O.push.apply(O,ae([],U(k.slice(8).map(function(we,q){return e.createElement("div",{key:"clipRadiusControl".concat(q),className:Te("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+q,style:{transform:"translate(".concat(we[0],"px, ").concat(we[1],"px) rotate(").concat(R,"rad) scale(").concat(o,")")}})})),!1)),C==="circle"||C==="ellipse"){var j=x.left,L=x.top,B=x.radiusX,$=x.radiusY,K=U(Ie(Tt(f,[j,L],w),Tt(f,[0,0],w)),2),ee=K[0],Q=K[1],ie="none";if(!s){for(var te=Math.max(10,B/5,$/5),le=[],ue=0;ue<=te;++ue){var Ee=Math.PI*2/te*ue;le.push([B+(B-o)*Math.cos(Ee),$+($-o)*Math.sin(Ee)])}le.push([B,-2]),le.push([-2,-2]),le.push([-2,$*2+2]),le.push([B*2+2,$*2+2]),le.push([B*2+2,-2]),le.push([B,-2]),ie="polygon(".concat(le.map(function(we){return"".concat(we[0],"px ").concat(we[1],"px")}).join(", "),")")}O.push(e.createElement("div",{key:"clipEllipse",className:Te("clip-ellipse","snap-control"),style:{width:"".concat(B*2,"px"),height:"".concat($*2,"px"),clipPath:ie,transform:"translate(".concat(-v+ee,"px, ").concat(-m+Q,"px) ").concat(Ip(f))}}))}if(s){var xe=wr(ae([S,_,y,E],U(k),!1)),se=xe.width,ce=xe.height,ke=xe.left,Se=xe.top;if(Y||F||G){var le=G?k.slice(0,8):k;O.push(e.createElement("div",{key:"clipArea",className:Te("clip-area","snap-control"),style:{width:"".concat(se,"px"),height:"".concat(ce,"px"),transform:"translate(".concat(ke,"px, ").concat(Se,"px)"),clipPath:"polygon(".concat(le.map(function(q){return"".concat(q[0]-ke,"px ").concat(q[1]-Se,"px")}).join(", "),")")}}))}}return N&&["vertical","horizontal"].forEach(function(we){var q=N[we],pe=we==="horizontal";q.isSnap&&A.push.apply(A,ae([],U(q.snap.posInfos.map(function(Ce,ve){var Re=Ce.pos,Ue=Ie(Tt(f,pe?[0,Re]:[Re,0],w),[v,m]),ut=Ie(Tt(f,pe?[c,Re]:[Re,d],w),[v,m]);return nc(e,"",Ue,ut,o,"clip".concat(we,"snap").concat(ve),"guideline")})),!1)),q.isBound&&A.push.apply(A,ae([],U(q.bounds.map(function(Ce,ve){var Re=Ce.pos,Ue=Ie(Tt(f,pe?[0,Re]:[Re,0],w),[v,m]),ut=Ie(Tt(f,pe?[c,Re]:[Re,d],w),[v,m]);return nc(e,"",Ue,ut,o,"clip".concat(we,"bounds").concat(ve),"guideline","bounds","bold")})),!1))}),ae(ae([],U(O),!1),U(A),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var n=t.props,r=n.dragWithClip,i=r===void 0?!0:r;return i?!1:this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,V(V({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,s=r.customClipPath,o=n.target,a=n.width,l=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",d=e.datas,f=sx(o,a,l,i||"inset",s);if(!f)return!1;var g=f.clipText,v=f.type,m=f.poses,S=ye(t,"onClipStart",Le(t,e,{clipType:v,clipStyle:g,poses:m.map(function(_){return _.pos})}));return S===!1?(d.isClipStart=!1,!1):(d.isControl=c&&c.indexOf("clip-control")>-1,d.isLine=c.indexOf("clip-line")>-1,d.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,d.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,d.clipPath=f,d.isClipStart=!0,n.clipPathState=g,zo(t,e),!0)},dragControl:function(t,e){var n,r,i,s=e.datas,o=e.originalDatas,a=e.isDragTarget;if(!s.isClipStart)return!1;var l=s,u=l.isControl,c=l.isLine,d=l.isArea,f=l.clipIndex,g=l.clipPath;if(!g)return!1;var v=Oo(t.props,"clippable"),m=v.keepRatio,S=0,_=0,y=o.draggable,E=fi(e);a&&y?(n=U(y.prevBeforeDist,2),S=n[0],_=n[1]):(r=U(E,2),S=r[0],_=r[1]);var I=[S,_],N=t.state,R=N.width,x=N.height,w=!d&&!u&&!c,C=g.type,b=g.poses,k=g.splitter,O=b.map(function(Fe){return Fe.pos});w&&(S=-S,_=-_);var A=!u||b[f].direction==="nesw",F=C==="inset"||C==="rect",G=b.map(function(){return[0,0]});if(u&&!A){var Y=b[f],H=Y.horizontal,j=Y.vertical,L=[S*re(H),_*re(j)];G=rU(b,f,L,F,m)}else A&&(G=O.map(function(){return[S,_]}));var B=O.map(function(Fe,Ze){return Xe(Fe,G[Ze])}),$=ae([],U(B),!1);N.snapBoundInfos=null;var K=g.type==="circle",ee=g.type==="ellipse";if(K||ee){var Q=wr(B),ie=re(Q.bottom-Q.top),te=re(ee?Q.right-Q.left:ie),le=B[0][1]+ie,ue=B[0][0]-te,Ee=B[0][0]+te;K&&($.push([Ee,Q.bottom]),G.push([1,0])),$.push([Q.left,le]),G.push([0,1]),$.push([ue,Q.bottom]),G.push([1,0])}var xe=rP((v.clipHorizontalGuidelines||[]).map(function(Fe){return it("".concat(Fe),x)}),(v.clipVerticalGuidelines||[]).map(function(Fe){return it("".concat(Fe),R)}),R,x),se=[],ce=[];if(K||ee)se=[$[4][0],$[2][0]],ce=[$[1][1],$[3][1]];else if(F){var ke=[$[0],$[2],$[4],$[6]],Se=[G[0],G[2],G[4],G[6]];se=ke.filter(function(Fe,Ze){return Se[Ze][0]}).map(function(Fe){return Fe[0]}),ce=ke.filter(function(Fe,Ze){return Se[Ze][1]}).map(function(Fe){return Fe[1]})}else se=$.filter(function(Fe,Ze){return G[Ze][0]}).map(function(Fe){return Fe[0]}),ce=$.filter(function(Fe,Ze){return G[Ze][1]}).map(function(Fe){return Fe[1]});var we=[0,0],q=$S(xe,v.clipTargetBounds&&{left:0,top:0,right:R,bottom:x},se,ce,5,5),pe=q.horizontal,Ce=q.vertical,ve=pe.offset,Re=Ce.offset;if(pe.isBound&&(we[1]+=ve),Ce.isBound&&(we[0]+=Re),(ee||K)&&G[0][0]===0&&G[0][1]===0){var Q=wr(B),Ue=Q.bottom-Q.top,ut=ee?Q.right-Q.left:Ue,ot=Ce.isBound?re(Re):Ce.snapIndex===0?-Re:Re,Oe=pe.isBound?re(ve):pe.snapIndex===0?-ve:ve;ut-=ot,Ue-=Oe,K&&(Ue=KA(Ce,pe)>0?Ue:ut,ut=Ue);var nt=$[0];$[1][1]=nt[1]-Ue,$[2][0]=nt[0]+ut,$[3][1]=nt[1]+Ue,$[4][0]=nt[0]-ut}else if(F&&m&&u){var Je=U(bP(b),2),$e=Je[0],z=Je[1],J=$e&&z?$e/z:0,ge=b[f],fe=ge.direction||"",je=$[1][1],le=$[5][1],ue=$[7][0],Ee=$[3][0];re(ve)<=re(Re)?ve=Nn(ve)*re(Re)/J:Re=Nn(Re)*re(ve)*J,fe.indexOf("w")>-1?ue-=Re:fe.indexOf("e")>-1?Ee-=Re:(ue+=Re/2,Ee-=Re/2),fe.indexOf("n")>-1?je-=ve:fe.indexOf("s")>-1?le-=ve:(je+=ve/2,le-=ve/2);var ct=vh(je,Ee,le,ue);$.forEach(function(_t,et){var $t;$t=U(ct[et].pos,2),_t[0]=$t[0],_t[1]=$t[1]})}else $.forEach(function(Fe,Ze){var ze=G[Ze];ze[0]&&(Fe[0]-=Re),ze[1]&&(Fe[1]-=ve)});var rn=O_(t,g,B),St="".concat(C,"(").concat(rn.join(k),")");if(N.clipPathState=St,K||ee)se=[$[4][0],$[2][0]],ce=[$[1][1],$[3][1]];else if(F){var ke=[$[0],$[2],$[4],$[6]];se=ke.map(function(Ze){return Ze[0]}),ce=ke.map(function(Ze){return Ze[1]})}else se=$.map(function(Fe){return Fe[0]}),ce=$.map(function(Fe){return Fe[1]});if(N.snapBoundInfos=$S(xe,v.clipTargetBounds&&{left:0,top:0,right:R,bottom:x},se,ce,1,1),y){var cr=N.is3d,qr=N.allMatrix,Jn=cr?4:3,Zn=we;a&&(Zn=[I[0]+we[0]-E[0],I[1]+we[1]-E[1]]),y.deltaOffset=st(qr,[Zn[0],Zn[1],0,0],Jn)}return ye(t,"onClip",Le(t,e,V({clipEventType:"changed",clipType:C,poses:B,clipStyle:St,clipStyles:rn,distX:S,distY:_},On((i={},i[C==="rect"?"clip":"clipPath"]=St,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,s=r.isLine,o=r.isClipStart,a=r.isControl;return o?(ye(t,"onClipEnd",ar(t,e,{})),i&&(a?sU(t,e):s&&iU(t,e)),i||n):!1},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},aU={name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[`:host[data-able-origindraggable] .control.origin {
pointer-events: auto;
}`],dragControlCondition:function(t,e){return e.isRequest?e.requestAble==="originDraggable":Wt(e.inputEvent.target,Te("origin"))},dragControlStart:function(t,e){var n=e.datas;zo(t,e);var r=Le(t,e,{dragStart:Dn.dragStart(t,new Qa().dragStart([0,0],e))}),i=ye(t,"onDragOriginStart",r);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],n.isDragOrigin=!0,i===!1?(n.isDragOrigin=!1,!1):r},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var s=U(fi(e),2),o=s[0],a=s[1],l=t.state,u=l.width,c=l.height,d=l.offsetMatrix,f=l.targetMatrix,g=l.is3d,v=t.props.originRelative,m=v===void 0?!0:v,S=g?4:3,_=[o,a];if(i){var y=e.distOrigin;(y[0]||y[1])&&(_=y)}var E=Xe(n.startOrigin,_),I=Xe(n.startTargetOrigin,_),N=Ie(_,n.prevOrigin),R=Dc(d,f,E,S),x=t.getRect(),w=wr(Bo(R,u,c,S)),C=[x.left-w.left,x.top-w.top];n.prevOrigin=_;var b=[kr(I[0],u,m),kr(I[1],c,m)].join(" "),k=Dn.drag(t,kc(e,t.state,C,!!r)),O=Le(t,e,V(V({width:u,height:c,origin:E,dist:_,delta:N,transformOrigin:b,drag:k},On({transformOrigin:b,transform:k.transform},e)),{afterTransform:k.transform}));return ye(t,"onDragOrigin",O),O},dragControlEnd:function(t,e){var n=e.datas;return n.isDragOrigin?(ye(t,"onDragOriginEnd",ar(t,e,{})),!0):!1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);return!!n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);return n?(t.transformOrigin=n.transformOrigin,!0):!1},request:function(t){var e={},n=t.getRect(),r=0,i=0,s=n.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(a){return"deltaOrigin"in a?(o[0]+=a.deltaOrigin[0],o[1]+=a.deltaOrigin[1]):"origin"in a?(o[0]=a.origin[0]-s[0],o[1]=a.origin[1]-s[1]):("x"in a?r=a.x-n.left:"deltaX"in a&&(r+=a.deltaX),"y"in a?i=a.y-n.top:"deltaY"in a&&(i+=a.deltaY)),{datas:e,distX:r,distY:i,distOrigin:o}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function lU(t,e,n,r){var i=t.filter(function(l){var u=l.virtual,c=l.horizontal;return c&&!u}).length,s=t.filter(function(l){var u=l.virtual,c=l.vertical;return c&&!u}).length,o=-1;if(e===0&&(i===0?o=0:i===1&&(o=1)),e===2&&(i<=2?o=2:i<=3&&(o=3)),e===3&&(s===0?o=4:s<4&&(o=7)),e===1&&(s<=1?o=5:s<=2&&(o=6)),!(o===-1||!t[o].virtual)){var a=t[o];uU(t,o),o<4?a.pos[0]=n:a.pos[1]=r}}function uU(t,e){e<4?t.slice(0,e+1).forEach(function(n){n.virtual=!1}):(t[0].virtual&&(t[0].virtual=!1),t.slice(4,e+1).forEach(function(n){n.virtual=!1}))}function cU(t,e){e<4?t.slice(e,4).forEach(function(n){n.virtual=!0}):t.slice(e).forEach(function(n){n.virtual=!0})}function ox(t,e,n,r,i){r===void 0&&(r=[0,0]);var s=[];return!t||t==="0px"?s=[]:s=Ls(t),IP(s,e,n,0,0,r,i)}function ax(t,e,n,r,i){var s=t.state,o=s.width,a=s.height,l=N_(i,t.props.roundRelative,o,a),u=l.raws,c=l.styles,d=l.radiusPoses,f=eU(d,u),g=f.horizontals,v=f.verticals,m=c.join(" ");s.borderRadiusState=m;var S=Le(t,e,V({horizontals:g,verticals:v,borderRadius:m,width:o,height:a,delta:r,dist:n},On({borderRadius:m},e)));return ye(t,"onRound",S),S}function lx(t){var e,n,r=t.getState().style,i=r.borderRadius||"";if(!i&&t.props.groupable){var s=t.moveables[0],o=t.getTargets()[0];o&&((s==null?void 0:s.props.target)===o?(i=(n=(e=t.moveables[0])===null||e===void 0?void 0:e.state.style.borderRadius)!==null&&n!==void 0?n:"",r.borderRadius=i):(i=R_(o).borderRadius,r.borderRadius=i))}return i}var dU={name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[`.control.border-radius {
background: #d66;
cursor: pointer;
z-index: 3;
}`,`.control.border-radius.vertical {
background: #d6d;
z-index: 2;
}`,`.control.border-radius.virtual {
opacity: 0.5;
z-index: 1;
}`,`:host.round-line-clickable .line.direction {
cursor: pointer;
}`],className:function(t){var e=t.props.roundClickable;return e===!0||e==="line"?Te("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var n=t.getState(),r=n.target,i=n.width,s=n.height,o=n.allMatrix,a=n.is3d,l=n.left,u=n.top,c=n.borderRadiusState,d=t.props,f=d.minRoundControls,g=f===void 0?[0,0]:f,v=d.maxRoundControls,m=v===void 0?[4,4]:v,S=d.zoom,_=d.roundPadding,y=_===void 0?0:_,E=d.isDisplayShadowRoundControls,I=d.groupable;if(!r)return null;var N=c||lx(t),R=a?4:3,x=ox(N,i,s,g,!0);if(!x)return null;var w=0,C=0,b=I?[0,0]:[l,u];return x.map(function(k,O){var A=k.horizontal,F=k.vertical,G=k.direction||"",Y=ae([],U(k.pos),!1);C+=Math.abs(A),w+=Math.abs(F),A&&G.indexOf("n")>-1&&(Y[1]-=y),F&&G.indexOf("w")>-1&&(Y[0]-=y),A&&G.indexOf("s")>-1&&(Y[1]+=y),F&&G.indexOf("e")>-1&&(Y[0]+=y);var H=Ie(Tt(o,Y,R),b),j=E&&E!=="horizontal",L=k.vertical?w<=m[1]&&(j||!k.virtual):C<=m[0]&&(E||!k.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(O),className:Te("control","border-radius",k.vertical?"vertical":"",k.virtual?"virtual":""),"data-radius-index":O,style:{display:L?"block":"none",transform:"translate(".concat(H[0],"px, ").concat(H[1],"px) scale(").concat(S,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var n=e.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,i=n.target,s=i.getAttribute("class")||"",o=s.indexOf("border-radius")>-1,a=s.indexOf("moveable-line")>-1&&s.indexOf("moveable-direction")>-1,l=o?parseInt(i.getAttribute("data-radius-index"),10):-1,u=-1;if(a){var c=i.getAttribute("data-line-key")||"";c&&(u=parseInt(c.replace(/render-line-/g,""),10),isNaN(u)&&(u=-1))}if(!o&&!a)return!1;var d=Le(t,e,{}),f=ye(t,"onRoundStart",d);if(f===!1)return!1;r.lineIndex=u,r.controlIndex=l,r.isControl=o,r.isLine=a,zo(t,e);var g=t.props,v=g.roundRelative,m=g.minRoundControls,S=m===void 0?[0,0]:m,_=t.state,y=_.width,E=_.height;r.isRound=!0,r.prevDist=[0,0];var I=lx(t),N=ox(I||"",y,E,S,!0)||[];return r.controlPoses=N,_.borderRadiusState=N_(N,v,y,E).styles.join(" "),d},dragControl:function(t,e){var n=e.datas,r=n.controlPoses;if(!n.isRound||!n.isControl||!r.length)return!1;var i=n.controlIndex,s=U(fi(e),2),o=s[0],a=s[1],l=[o,a],u=Ie(l,n.prevDist),c=t.props.maxRoundControls,d=c===void 0?[4,4]:c,f=t.state,g=f.width,v=f.height,m=r[i],S=m.vertical,_=m.horizontal,y=r.map(function(I){var N=I.horizontal,R=I.vertical,x=[N*_*l[0],R*S*l[1]];if(N){if(d[0]===1)return x;if(d[0]<4&&N!==_)return x}else{if(d[1]===0)return x[1]=R*_*l[0]/g*v,x;if(S){if(d[1]===1)return x;if(d[1]<4&&R!==S)return x}}return[0,0]});y[i]=l;var E=r.map(function(I,N){return V(V({},I),{pos:Xe(I.pos,y[N])})});return i<4?E.slice(0,i+1).forEach(function(I){I.virtual=!1}):E.slice(4,i+1).forEach(function(I){I.virtual=!1}),n.prevDist=[o,a],ax(t,e,l,u,E)},dragControlEnd:function(t,e){var n=t.state;n.borderRadiusState="";var r=e.datas,i=e.isDouble;if(!r.isRound)return!1;var s=r.isControl,o=r.controlIndex,a=r.isLine,l=r.lineIndex,u=r.controlPoses,c=u.filter(function(_){var y=_.virtual;return y}).length,d=t.props.roundClickable,f=d===void 0?!0:d;if(i&&f){if(s&&(f===!0||f==="control"))cU(u,o);else if(a&&(f===!0||f==="line")){var g=U(kA(t,e),2),v=g[0],m=g[1];lU(u,l,v,m)}c!==u.filter(function(_){var y=_.virtual;return y}).length&&ax(t,e,[0,0],[0,0],u)}var S=ar(t,e,{});return ye(t,"onRoundEnd",S),n.borderRadiusState="",S},dragGroupControlStart:function(t,e){var n=this.dragControlStart(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,s=jr(t,"roundable",e),o=V({targets:t.props.targets,events:s.map(function(a,l){return V(V({},a),{target:i[l],moveable:r[l],currentTarget:r[l]})})},n);return ye(t,"onRoundGroupStart",o),n},dragGroupControl:function(t,e){var n=this.dragControl(t,e);if(!n)return!1;var r=t.moveables,i=t.props.targets,s=jr(t,"roundable",e),o=V({targets:t.props.targets,events:s.map(function(a,l){return V(V(V({},a),{target:i[l],moveable:r[l],currentTarget:r[l]}),On({borderRadius:n.borderRadius},a))})},n);return ye(t,"onRoundGroup",o),o},dragGroupControlEnd:function(t,e){var n=t.moveables,r=t.props.targets,i=jr(t,"roundable",e);bp(t,"onRound",function(a){var l=V({targets:t.props.targets,events:i.map(function(u,c){return V(V(V({},u),{target:r[c],moveable:n[c],currentTarget:n[c]}),On({borderRadius:a.borderRadius},u))})},a);ye(t,"onRoundGroup",l)});var s=this.dragControlEnd(t,e);if(!s)return!1;var o=V({targets:t.props.targets,events:i.map(function(a,l){var u;return V(V({},a),{target:r[l],moveable:n[l],currentTarget:n[l],lastEvent:(u=a.datas)===null||u===void 0?void 0:u.lastEvent})})},s);return ye(t,"onRoundGroupEnd",o),o},unset:function(t){t.state.borderRadiusState=""}};function fU(t,e){var n=e?4:3,r=mt(n),i="matrix".concat(e?"3d":"","(").concat(r.join(","),")");return t===i||t==="matrix(1,0,0,1,0,0)"}var RP={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var n=t.state,r=n.is3d,i=n.targetMatrix,s=n.inlineTransform,o=r?"matrix3d(".concat(i.join(","),")"):"matrix(".concat(_A(i,!0),")"),a=!s||s==="none"?o:s;e.datas.startTransforms=fU(a,r)?[]:Ls(a)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return Le(t,e,{setTransform:function(n){e.datas.startTransforms=nn(n)?n:Ls(n)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return Le(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),ye(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),ye(t,"onBeforeRender",Le(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),ye(t,"onBeforeRenderEnd",Le(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this;this.dragStart(t,e);var r=jr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.setTransform(l,o),n.resetStyle(o),n.fillDragStartParams(l,o)});ye(t,"onBeforeRenderGroupStart",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:s}))},dragGroup:function(t,e){var n=this;this.drag(t,e);var r=jr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.resetStyle(o),n.fillDragParams(l,o)});ye(t,"onBeforeRenderGroup",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:s}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),ye(t,"onBeforeRenderGroupEnd",Le(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},AP={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){ye(t,"onRenderStart",Le(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){ye(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){ye(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){ye(t,"onRenderGroupStart",Le(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=jr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.fillDragParams(l,o)});ye(t,"onRenderGroup",Le(t,e,V(V({isPinch:!!e.isPinch,targets:t.props.targets,transform:Pd(e),transformObject:{}},On(kd(e))),{events:s})))},dragGroupEnd:function(t,e){var n=this,r=jr(t,"beforeRenderable",e),i=t.moveables,s=r.map(function(o,a){var l=i[a];return n.fillDragEndParams(l,o)});ye(t,"onRenderGroupEnd",Le(t,e,V({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:s,transformObject:{},transform:Pd(e)},On(kd(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var n={};return Xa(uh(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Le(t,e,V({isPinch:!!e.isPinch,transformObject:n,transform:Pd(e)},On(kd(e))))},fillDragEndParams:function(t,e){var n={};return Xa(uh(e)||[]).forEach(function(r){n[r.name]=r.functionValue}),Le(t,e,V({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:n,transform:Pd(e)},On(kd(e))))}};function xu(t,e,n,r,i,s,o){s.clientDistX=s.distX,s.clientDistY=s.distY;var a=i==="Start",l=i==="End",u=i==="After",c=t.state.target,d=s.isRequest,f=r.indexOf("Control")>-1;if(!c||a&&f&&!d&&t.areaElement===s.inputEvent.target)return!1;var g=ae([],U(e),!1);if(d){var v=s.requestAble;g.some(function(O){return O.name===v})||g.push.apply(g,ae([],U(t.props.ables.filter(function(O){return O.name===v})),!1))}if(!g.length||g.every(function(O){return O.dragRelation}))return!1;var m=s.inputEvent,S;l&&m&&(S=document.elementFromPoint(s.clientX,s.clientY)||m.target);var _=!1,y=function(){var O;_=!0,(O=s.stop)===null||O===void 0||O.call(s)},E=a&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());E&&t.updateRect(i,!0,!1);var I=s.datas,N=f?"controlGesto":"targetGesto",R=t[N],x=function(O,A,F){if(!(A in O)||R!==t[N])return!1;var G=O.name,Y=I[G]||(I[G]={});if(a&&(Y.isEventStart=!F||!O[F]||O[F](t,s)),!Y.isEventStart)return!1;var H=O[A](t,V(V({},s),{stop:y,datas:Y,originalDatas:I,inputTarget:S}));return t._emitter.off(),a&&H===!1&&(Y.isEventStart=!1),H};E&&g.forEach(function(O){O.unset&&O.unset(t)}),x(RP,"drag".concat(r).concat(i));var w=0,C=0;n.forEach(function(O){if(_)return!1;var A="".concat(O).concat(r).concat(i),F="".concat(O).concat(r,"Condition");i===""&&!d&&M5(t.state,s);var G=g.filter(function(j){return j[A]});G=G.filter(function(j,L){return j.name&&G.indexOf(j)===L});var Y=G.filter(function(j){return x(j,A,F)}),H=Y.length;_&&++w,H&&++C,!_&&a&&G.length&&!H&&(w+=G.filter(function(j){var L=j.name,B=I[L];return B.isEventStart?j.dragRelation!=="strong":!1}).length?1:0)}),(!u||C)&&x(AP,"drag".concat(r).concat(i));var b=R!==t[N]||w===n.length;if((l||_||b)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(O){O.state.gestos={}}),g.forEach(function(O){O.unset&&O.unset(t)})),a&&!b&&!d&&C&&t.props.preventDefault&&(s==null||s.preventDefault()),t.isUnmounted||b)return!1;if(!a&&C&&!o||l){var k=t.props.flushSync||oP;k(function(){t.updateRect(l?i:"",!0,!1),t.forceUpdate()})}return!a&&!l&&!u&&C&&!o&&xu(t,e,n,r,i+"After",s),!0}function M_(t,e){return function(n,r){var i;r===void 0&&(r=n.inputEvent.target);var s=r,o=t.areaElement,a=t._dragTarget;return!a||!e&&(!((i=t.controlGesto)===null||i===void 0)&&i.isFlag())?!1:s===a||a.contains(s)||s===o||!t.isMoveableElement(s)&&!t.controlBox.contains(s)||Wt(s,"moveable-area")||Wt(s,"moveable-padding")||Wt(s,"moveable-edgeDraggable")}}function PP(t,e,n){var r=t.controlBox,i=[],s=t.props,o=s.dragArea,a=t.state.target,l=s.dragTarget;i.push(r),(!o||l)&&i.push(e),!o&&l&&a&&e!==a&&s.dragTargetSelf&&i.push(a);var u=M_(t);return DP(t,i,"targetAbles",n,{dragStart:u,pinchStart:u})}function kP(t,e){var n=t.controlBox,r=[];r.push(n);var i=M_(t,!0),s=function(o,a){if(a===void 0&&(a=o.inputEvent.target),a===n)return!0;var l=i(o,a);return!l};return DP(t,r,"controlAbles",e,{dragStart:s,pinchStart:s})}function DP(t,e,n,r,i){i===void 0&&(i={});var s=n==="targetAbles",o=t.props,a=o.pinchOutside,l=o.pinchThreshold,u=o.preventClickEventOnDrag,c=o.preventClickDefault,d=o.checkInput,f=o.dragFocusedInput,g=o.preventDefault,v=g===void 0?!0:g,m=o.preventRightClick,S=m===void 0?!0:m,_=o.preventWheelClick,y=_===void 0?!0:_,E=o.dragContainer,I=oi(E,!0),N={preventDefault:v,preventRightClick:S,preventWheelClick:y,container:I||Is(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:a,preventClickEventOnDrag:s?u:!1,preventClickEventOnDragStart:s?c:!1,preventClickEventByCondition:s?null:function(w){return t.controlBox.contains(w.target)},checkInput:s?d:!1,dragFocusedInput:f},R=new VB(e,N),x=r==="Control";return["drag","pinch"].forEach(function(w){["Start","","End"].forEach(function(C){R.on("".concat(w).concat(C),function(b){var k,O=b.eventType,A=w==="drag"&&b.isPinch;if(i[O]&&!i[O](b)){b.stop();return}if(!A){var F=w==="drag"?[w]:["drag",w],G=ae([],U(t[n]),!1),Y=xu(t,G,F,r,C,b);Y?(t.props.stopPropagation||C==="Start"&&x)&&((k=b==null?void 0:b.inputEvent)===null||k===void 0||k.stopPropagation()):b.stop()}})})}),R}var hU=function(){function t(e,n,r){var i=this;this.target=e,this.moveable=n,this.eventName=r,this.ables=[],this._onEvent=function(s){var o=i.eventName,a=i.moveable;a.state.disableNativeEvent||i.ables.forEach(function(l){l[o](a,{inputEvent:s})})},e.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(e){this.ables=e},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function pU(t,e,n,r){var i;n===void 0&&(n=e);var s=LA(t,e),o=s.matrixes,a=s.is3d,l=s.targetMatrix,u=s.transformOrigin,c=s.targetOrigin,d=s.offsetContainer,f=s.hasFixed,g=s.zoom,v=R6(d,n),m=v.matrixes,S=v.is3d,_=v.offsetContainer,y=v.zoom,E=r,I=4,N=t.tagName.toLowerCase()!=="svg"&&"ownerSVGElement"in t,R=l,x=mt(I),w=mt(I),C=mt(I),b=mt(I),k=o.length,O=m.map(function(L){return V(V({},L),{matrix:L.matrix?ae([],U(L.matrix),!1):void 0})}).reverse();o.reverse(),!a&&E&&(R=Ur(R,3,4),zm(o)),!S&&E&&zm(O),O.forEach(function(L){w=st(w,L.matrix,I)});var A=n||qs(t),F=((i=O[0])===null||i===void 0?void 0:i.target)||rc(A,A,!0).offsetParent,G=O.slice(1).reduce(function(L,B){return st(L,B.matrix,I)},mt(I));o.forEach(function(L,B){if(k-2===B&&(C=x.slice()),k-1===B&&(b=x.slice()),!L.matrix){var $=o[B+1],K=k5(L,$,F,I,st(G,x,I));L.matrix=Do(K,I)}x=st(x,L.matrix,I)});var Y=!N&&a;R||(R=mt(Y?4:3));var H=Ip(N&&R.length===16?Ur(R,4,3):R,Y),j=w;return w=mA(w,I,I),{hasZoom:g!==1||y!==1,hasFixed:f,matrixes:o,rootMatrix:w,originalRootMatrix:j,beforeMatrix:C,offsetMatrix:b,allMatrix:x,targetMatrix:R,targetTransform:H,inlineTransform:t.style.transform,transformOrigin:u,targetOrigin:c,is3d:E,offsetContainer:d,offsetRootContainer:_}}function gU(t,e,n,r){n===void 0&&(n=e);var i=0,s=0,o=0,a={},l=cP(t);if(t&&(i=l.offsetWidth,s=l.offsetHeight),t){var u=pU(t,e,n,r),c=ka(u.allMatrix,u.transformOrigin,i,s);a=V(V({},u),c);var d=ka(u.allMatrix,[50,50],100,100);o=dP([d.pos1,d.pos2],d.direction)}var f=4;return V(V(V({hasZoom:!1,width:i,height:s,rotation:o},l),{originalRootMatrix:mt(f),rootMatrix:mt(f),beforeMatrix:mt(f),offsetMatrix:mt(f),allMatrix:mt(f),targetMatrix:mt(f),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!0,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),a)}function Gm(t,e,n,r,i,s){s===void 0&&(s=[]);var o=1,a=[0,0],l=Nd(),u=Nd(),c=Nd(),d=Nd(),f=[0,0],g={},v=gU(e,n,i,!0);if(e){var m=Qn(e);s.forEach(function(O){g[O]=m(O)});var S=v.is3d?4:3,_=ka(v.offsetMatrix,Xe(v.transformOrigin,yA(v.targetMatrix,S)),v.width,v.height);o=_.direction,a=Xe(_.origin,[_.left-v.left,_.top-v.top]),d=Su(v.offsetRootContainer);var y=rc(r,r,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var E=ka(st(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),I=ka(v.originalRootMatrix,hh(Qn(y)("transformOrigin")).map(function(O){return parseFloat(O)}),y.offsetWidth,y.offsetHeight);if(l=$g(E,d),c=$g(I,d,y,!0),t){var N=E.left,R=E.top;u=$g({left:N,top:R,bottom:R,right:R},d)}}else{l=Su(e),c=b6(y),t&&(u=Su(t));var x=c.left,w=c.top,C=c.clientLeft,b=c.clientTop,k=[l.left-x,l.top-w];f=Ie(el(v.rootMatrix,k,4),[C+v.left,b+v.top])}}return V({targetClientRect:l,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:d,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:e,style:g,offsetDelta:f},v)}function ux(t){var e=t.pos1,n=t.pos2,r=t.pos3,i=t.pos4;if(!e||!n||!r||!i)return null;var s=No([e,n,r,i]),o=[s.minX,s.minY],a=Ie(t.origin,o);return e=Ie(e,o),n=Ie(n,o),r=Ie(r,o),i=Ie(i,o),V(V({},t),{left:t.left,top:t.top,posDelta:o,pos1:e,pos2:n,pos3:r,pos4:i,origin:a,beforeOrigin:a,isPersisted:!0})}var tl=function(t){Ac(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state=V({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},Gm(null)),n.renderState={},n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isMoveableMounted=!1,n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n._emitter=new h_,n._prevOriginalDragTarget=null,n._originalDragTarget=null,n._prevDragTarget=null,n._dragTarget=null,n._prevPropTarget=null,n._propTarget=null,n._prevDragArea=!1,n._isPropTargetChanged=!1,n._hasFirstTarget=!1,n._reiszeObserver=null,n._observerId=0,n._mutationObserver=null,n._rootContainer=null,n._viewContainer=null,n._viewClassNames=[],n._store={},n.checkUpdateRect=function(){if(!n.isDragging()){var r=n.props.parentMoveable;if(r){r.checkUpdateRect();return}Jz(n._observerId),n._observerId=fA(function(){n.isDragging()||n.updateRect()})}},n._onPreventClick=function(r){r.stopPropagation(),r.preventDefault()},n}return e.prototype.render=function(){var n=this.props,r=this.getState(),i=n.parentPosition,s=n.className,o=n.target,a=n.zoom,l=n.cspNonce,u=n.translateZ,c=n.cssStyled,d=n.groupable,f=n.linePadding,g=n.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var v=U(i||[0,0],2),m=v[0],S=v[1],_=r.left,y=r.top,E=r.target,I=r.direction,N=r.hasFixed,R=r.offsetDelta,x=n.targets,w=this.isDragging(),C={};this.getEnabledAbles().forEach(function(G){C["data-able-".concat(G.name.toLowerCase())]=!0});var b=this._getAbleClassName(),k=x&&x.length&&(E||d)||o||!this._hasFirstTarget&&this.state.isPersisted,O=this.controlBox||this.props.firstRenderState||this.props.persistData,A=[_-m,y-S];!d&&n.useAccuratePosition&&(A[0]+=R[0],A[1]+=R[1]);var F={position:N?"fixed":"absolute",display:k?"block":"none",visibility:O?"visible":"hidden",transform:"translate3d(".concat(A[0],"px, ").concat(A[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return f&&(F["--moveable-line-padding"]=f),g&&(F["--moveable-control-padding"]=g),D.createElement(c,V({cspNonce:l,ref:wo(this,"controlBox"),className:"".concat(Te("control-box",I===-1?"reverse":"",w?"dragging":"")," ").concat(b," ").concat(s)},C,{onClick:this._onPreventClick,style:F}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var n=this.props,r=n.parentMoveable,i=n.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),!i&&!r&&!this.state.isPersisted&&(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(n){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(n)},e.prototype.componentWillUnmount=function(){var n,r;this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),(n=this._reiszeObserver)===null||n===void 0||n.disconnect(),(r=this._mutationObserver)===null||r===void 0||r.disconnect();var i=this._viewContainer;i&&this._changeAbleViewClassNames([]),ya(this,!1),ya(this,!0);var s=this.events;for(var o in s){var a=s[o];a&&a.destroy()}},e.prototype.getTargets=function(){var n=this.props.target;return n?[n]:[]},e.prototype.getAble=function(n){var r=this.props.ables||[];return or(r,function(i){return i.name===n})},e.prototype.getContainer=function(){var n=this.props,r=n.parentMoveable,i=n.wrapperMoveable,s=n.container;return s||i&&i.getContainer()||r&&r.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(n){var r;return n&&(((r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"class"))||"").indexOf(v_)>-1},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=this.targetGesto,s=this.controlGesto;return i&&M_(this)({inputEvent:n},r)?i.isFlag()||i.triggerDragStart(n):s&&this.isMoveableElement(r)&&(s.isFlag()||s.triggerDragStart(n)),this},e.prototype.hitTest=function(n){var r=this.state,i=r.target,s=r.pos1,o=r.pos2,a=r.pos3,l=r.pos4,u=r.targetClientRect;if(!i)return 0;var c;if(u_(n)){var d=n.getBoundingClientRect();c={left:d.left,top:d.top,width:d.width,height:d.height}}else c=V({width:0,height:0},n);var f=c.left,g=c.top,v=c.width,m=c.height,S=DS([s,o,l,a],u),_=DB(S,[[f,g],[f+v,g],[f+v,g+m],[f,g+m]]),y=SA(S);return!_||!y?0:Math.min(100,_/y*100)},e.prototype.isInside=function(n,r){var i=this.state,s=i.target,o=i.pos1,a=i.pos2,l=i.pos3,u=i.pos4,c=i.targetClientRect;return s?bm([n,r],DS([o,a,u,l],c)):!1},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0);var s=this.props,o=!s.parentPosition&&!s.wrapperMoveable;o&&Ja(!0);var a=s.parentMoveable,l=this.state,u=l.target||s.target,c=this.getContainer(),d=a?a._rootContainer:this._rootContainer,f=Gm(this.controlBox,u,c,c,d||c,this._getRequestStyles());if(!u&&this._hasFirstTarget&&s.persistData){var g=ux(s.persistData);for(var v in g)f[v]=g[v]}o&&Ja(),this.updateState(f,a?!1:i)},e.prototype.isDragging=function(n){var r,i,s=this.targetGesto,o=this.controlGesto;if(s!=null&&s.isFlag()){if(!n)return!0;var a=s.getEventData();return!!(!((r=a[n])===null||r===void 0)&&r.isEventStart)}if(o!=null&&o.isFlag()){if(!n)return!0;var a=o.getEventData();return!!(!((i=a[n])===null||i===void 0)&&i.isEventStart)}return!1},e.prototype.updateTarget=function(n){this.updateRect(n,!0)},e.prototype.getRect=function(){var n=this.state,r=Tr(this.state),i=U(r,4),s=i[0],o=i[1],a=i[2],l=i[3],u=wr(r),c=n.width,d=n.height,f=u.width,g=u.height,v=u.left,m=u.top,S=[n.left,n.top],_=Xe(S,n.origin),y=Xe(S,n.beforeOrigin),E=n.transformOrigin;return{width:f,height:g,left:v,top:m,pos1:s,pos2:o,pos3:a,pos4:l,offsetWidth:c,offsetHeight:d,beforeOrigin:y,origin:_,transformOrigin:E,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(n){if(!n||n==="target"){var r=this.targetGesto;(r==null?void 0:r.isIdle())===!1&&Bm(this,!1),r==null||r.stop()}if(!n||n==="control"){var r=this.controlGesto;(r==null?void 0:r.isIdle())===!1&&Bm(this,!0),r==null||r.stop()}},e.prototype.getRotation=function(){var n=this.state,r=n.pos1,i=n.pos2,s=n.direction;return V5(r,i,s)},e.prototype.request=function(n,r,i){r===void 0&&(r={});var s=this,o=s.props,a=o.parentMoveable||o.wrapperMoveable||s,l=a.props.ables,u=o.groupable,c=or(l,function(_){return _.name===n});if(this.isDragging()||!c||!c.request)return{request:function(){return this},requestEnd:function(){return this}};var d=c.request(s),f=i||r.isInstant,g=d.isControl?"controlAbles":"targetAbles",v="".concat(u?"Group":"").concat(d.isControl?"Control":""),m=ae([],U(a[g]),!1),S={request:function(_){return xu(s,m,["drag"],v,"",V(V({},d.request(_)),{requestAble:n,isRequest:!0}),f),S},requestEnd:function(){return xu(s,m,["drag"],v,"End",V(V({},d.requestEnd()),{requestAble:n,isRequest:!0}),f),S}};return xu(s,m,["drag"],v,"Start",V(V({},d.requestStart(r)),{requestAble:n,isRequest:!0}),f),f?S.request(r).requestEnd():S},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var n=this.getState(),r=this.props,i=r.padding,s=n.originalBeforeOrigin,o=n.transformOrigin,a=n.allMatrix,l=n.is3d,u=n.pos1,c=n.pos2,d=n.pos3,f=n.pos4,g=n.left,v=n.top,m=n.isPersisted,S=r.zoom||1;if(!i&&S<=1){n.renderPoses=[u,c,d,f],n.renderLines=[[u,c],[c,f],[f,d],[d,u]];return}var _=EP(i||{}),y=_.left,E=_.top,I=_.bottom,N=_.right,R=l?4:3,x=[];m?x=o:this.controlBox&&r.groupable?x=s:x=Xe(s,[g,v]);var w=ah(R,Do(x.map(function(F){return-F}),R),a,Do(o,R)),C=dr(w,u,[-y,-E],R),b=dr(w,c,[N,-E],R),k=dr(w,d,[-y,I],R),O=dr(w,f,[N,I],R);n.renderPoses=[C,b,k,O],n.renderLines=[[C,b],[b,O],[O,k],[k,C]];{var A=S/2;n.renderLines=[[dr(w,u,[-y-A,-E],R),dr(w,c,[N+A,-E],R)],[dr(w,c,[N,-E-A],R),dr(w,f,[N,I+A],R)],[dr(w,f,[N+A,I],R),dr(w,d,[-y-A,I],R)],[dr(w,d,[-y,I+A],R),dr(w,u,[-y,-E-A],R)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var n=this.props,r=n.target,i=n.container,s=n.parentMoveable,o=this.state,a=o.target,l=o.container;if(!(!a&&!r)){this.updateAbles();var u=!Um(a,r),c=u||!Um(l,i);if(c){var d=i||this.controlBox;d&&this.unsetAbles(),this.updateState({target:r,container:i}),!s&&d&&this.updateRect("End",!1,!1),this._isPropTargetChanged=u}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(n,r){var i=this.props;if(this._emitter.trigger(n,r),i.parentMoveable&&r.isRequest&&!r.isRequestChild)return i.parentMoveable.triggerEvent(n,r,!0);var s=i[n];return s&&s(r)},e.prototype.useCSS=function(n,r){var i=this.props.customStyledMap,s=n+r;return i[s]||(i[s]=CA(n,r)),i[s]},e.prototype.getState=function(){var n,r=this.props;(r.target||!((n=r.targets)===null||n===void 0)&&n.length)&&(this._hasFirstTarget=!0);var i=this.controlBox,s=r.persistData,o=r.firstRenderState;if(o&&!i)return o;if(!this._hasFirstTarget&&s){var a=ux(s);if(a)return this.updateState(a,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var n=this;this.targetAbles.forEach(function(r){r.unset&&r.unset(n)})},e.prototype.updateAbles=function(n,r){n===void 0&&(n=this.props.ables),r===void 0&&(r="");var i=this.props,s=i.triggerAblesSimultaneously,o=this.getEnabledAbles(n),a="drag".concat(r,"Start"),l="pinch".concat(r,"Start"),u="drag".concat(r,"ControlStart"),c=Od(o,[a,l],s),d=Od(o,[u],s);this.enabledAbles=o,this.targetAbles=c,this.controlAbles=d},e.prototype.updateState=function(n,r){if(r){if(this.isUnmounted)return;this.setState(n)}else{var i=this.state;for(var s in n)i[s]=n[s]}},e.prototype.getEnabledAbles=function(n){n===void 0&&(n=this.props.ables);var r=this.props;return n.filter(function(i){return i&&(i.always&&r[i.name]!==!1||r[i.name])})},e.prototype.renderAbles=function(){var n=this,r=this.props,i=r.triggerAblesSimultaneously,s={createElement:D.createElement};return this.renderState={},O5(mP(Od(this.getEnabledAbles(),["render"],i).map(function(o){var a=o.render;return a(n,s)||[]})).filter(function(o){return o}),function(o){var a=o.key;return a}).map(function(o){return o[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var s,o,a=(o=(s=i.requestStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return ae(ae([],U(r),!1),U(a),!1)},ae([],U(this.props.requestStyles||[]),!1));return n},e.prototype._updateObserver=function(n){this._updateResizeObserver(n),this._updateMutationObserver(n)},e.prototype._updateEvents=function(){var n=this.targetAbles.length,r=this.controlAbles.length,i=this._dragTarget,s=!n&&this.targetGesto||this._isTargetChanged(!0);s&&(ya(this,!1),this.updateState({gestos:{}})),r||ya(this,!0),i&&n&&!this.targetGesto&&(this.targetGesto=PP(this,i,"")),!this.controlGesto&&r&&(this.controlGesto=kP(this,"Control"))},e.prototype._updateTargets=function(){var n=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=n.dragArea,this._propTarget=n.target,this._originalDragTarget=n.dragTarget||n.target,this._dragTarget=oi(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var n=this.props,r=n,i=r.zoom,s=r.hideDefaultLines,o=r.hideChildMoveableDefaultLines,a=r.parentMoveable;if(s||a&&o)return[];var l=this.getState(),u={createElement:D.createElement};return l.renderLines.map(function(c,d){return nc(u,"",c[0],c[1],i,"render-line-".concat(d))})},e.prototype._isTargetChanged=function(n){var r=this.props,i=r.dragTarget||r.target,s=this._prevOriginalDragTarget,o=this._prevDragArea,a=r.dragArea,l=!a&&s!==i,u=(n||a)&&o!==a;return l||u||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var n=this,r=this.props,i=r.dragArea?this.areaElement:this.state.target,s=this.events,o=yl(s);if(this._isTargetChanged())for(var a in s){var l=s[a];l&&l.destroy(),s[a]=null}if(i){var u=this.enabledAbles;o.forEach(function(c){var d=Od(u,[c]),f=d.length>0,g=s[c];if(!f){g&&(g.destroy(),s[c]=null);return}g||(g=new hU(i,n,c),s[c]=g),g.setAbles(d)})}},e.prototype._checkUpdateRootContainer=function(){var n=this.props.rootContainer;!this._rootContainer&&n&&(this._rootContainer=oi(n,!0))},e.prototype._checkUpdateViewContainer=function(){var n=this.props.viewContainer;!this._viewContainer&&n&&(this._viewContainer=oi(n,!0));var r=this._viewContainer;r&&this._changeAbleViewClassNames(ae(ae([],U(this._getAbleViewClassNames()),!1),[this.isDragging()?H5:""],!1))},e.prototype._changeAbleViewClassNames=function(n){var r=this._viewContainer,i=vP(n.filter(Boolean),function(u){return u}).map(function(u){var c=U(u,1),d=c[0];return d}),s=this._viewClassNames,o=f_(s,i),a=o.removed,l=o.added;a.forEach(function(u){gA(r,s[u])}),l.forEach(function(u){pA(r,i[u])}),this._viewClassNames=i},e.prototype._getAbleViewClassNames=function(){var n=this;return(this.getEnabledAbles().map(function(r){var i;return((i=r.viewClassName)===null||i===void 0?void 0:i.call(r,n))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(n){var r=this;n===void 0&&(n="");var i=this.getEnabledAbles(),s=this.targetGesto,o=this.controlGesto,a=s!=null&&s.isFlag()?s.getEventData():{},l=o!=null&&o.isFlag()?o.getEventData():{};return i.map(function(u){var c,d,f,g=u.name,v=((c=u.className)===null||c===void 0?void 0:c.call(u,r))||"";return(!((d=a[g])===null||d===void 0)&&d.isEventStart||!((f=l[g])===null||f===void 0)&&f.isEventStart)&&(v+=" ".concat(Te("".concat(g).concat(n,"-dragging")))),v.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(n){var r,i=this.props,s=i.target,o=Is(this.getControlBoxElement());if(!o.ResizeObserver||!s||!i.useResizeObserver){(r=this._reiszeObserver)===null||r===void 0||r.disconnect();return}if(!(n.target===s&&this._reiszeObserver)){var a=new o.ResizeObserver(this.checkUpdateRect);a.observe(s,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(n){var r=this,i,s=this.props,o=s.target,a=Is(this.getControlBoxElement());if(!a.MutationObserver||!o||!s.useMutationObserver){(i=this._mutationObserver)===null||i===void 0||i.disconnect();return}if(!(n.target===o&&this._mutationObserver)){var l=new a.MutationObserver(function(u){var c,d;try{for(var f=KB(u),g=f.next();!g.done;g=f.next()){var v=g.value;v.type==="attributes"&&v.attributeName==="style"&&r.checkUpdateRect()}}catch(m){c={error:m}}finally{try{g&&!g.done&&(d=f.return)&&d.call(f)}finally{if(c)throw c.error}}});l.observe(o,{attributes:!0}),this._mutationObserver=l}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:oP,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(D.PureComponent),j_={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var n,r=t.props,i=r.targets||[],s=t.getState(),o=s.left,a=s.top,l=s.isPersisted,u=r.zoom||1,c=t.renderGroupRects,d=((n=r.persistData)===null||n===void 0?void 0:n.children)||[];l?i=d.map(function(){return null}):d=[];var f=_a(t,"parentPosition",[o,a],function(v){return v.join(",")}),g=_a(t,"requestStyles",t.getRequestChildStyles(),function(v){return v.join(",")});return t.moveables=t.moveables.slice(0,i.length),ae(ae([],U(i.map(function(v,m){return e.createElement(tl,{key:"moveable"+m,ref:lA(t,"moveables",m),target:v,origin:!1,requestStyles:g,cssStyled:r.cssStyled,customStyledMap:r.customStyledMap,useResizeObserver:r.useResizeObserver,useMutationObserver:r.useMutationObserver,hideChildMoveableDefaultLines:r.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[o,a],persistData:d[m],zoom:u})})),!1),U(mP(c.map(function(v,m){var S=v.pos1,_=v.pos2,y=v.pos3,E=v.pos4,I=[S,_,y,E];return[[0,1],[1,3],[3,2],[2,0]].map(function(N,R){var x=U(N,2),w=x[0],C=x[1];return nc(e,"",Ie(I[w],f),Ie(I[C],f),u,"group-rect-".concat(m,"-").concat(R))})}))),!1)}},vU=Pc("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var n=t.props.target,r=e.inputEvent,i=e.inputTarget,s=t.isMoveableElement(i),o=!s&&t.controlBox.contains(i);if(!(!r||!i||e.isDrag||t.isMoveableElement(i)||o)){var a=n.contains(i);ye(t,"onClick",Le(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var n=e.inputEvent,r=e.inputTarget;if(!(!n||!r||e.isDrag||t.isMoveableElement(r)||e.datas.inputTarget===r)){var i=t.props.targets,s=i.indexOf(r),o=s>-1,a=!1;s===-1&&(s=Fi(i,function(l){return l.contains(r)}),a=s>-1),ye(t,"onClickGroup",Le(t,e,{isDouble:e.isDouble,targets:i,inputTarget:r,targetIndex:s,isTarget:o,containsTarget:a,moveableTarget:i[s]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function qo(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),V(V({},t),{datas:e})}var mU=Pc("edgeDraggable",{css:[`.edge.edgeDraggable.line {
cursor: move;
}`],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?zA(e,"edgeDraggable",r,t.getState().renderPoses,n.zoom):[]},dragCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wt(i,Te("direction"))&&Wt(i,Te("edge"))&&Wt(i,Te("edgeDraggable"))},dragStart:function(t,e){return Dn.dragStart(t,qo(e))},drag:function(t,e){return Dn.drag(t,qo(e))},dragEnd:function(t,e){return Dn.dragEnd(t,qo(e))},dragGroupCondition:function(t,e){var n,r=t.props,i=(n=e.inputEvent)===null||n===void 0?void 0:n.target;return!r.edgeDraggable||!i?!1:!r.draggable&&Wt(i,Te("direction"))&&Wt(i,Te("line"))},dragGroupStart:function(t,e){return Dn.dragGroupStart(t,qo(e))},dragGroup:function(t,e){return Dn.dragGroup(t,qo(e))},dragGroupEnd:function(t,e){return Dn.dragGroupEnd(t,qo(e))},unset:function(t){return Dn.unset(t)}}),NP={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},yU=[RP,TP,E5,z5,Dn,mU,Lm,B5,$5,r5,Y5,K5,W5,aU,oU,dU,j_,NP,vU,xP,AP];function cx(t,e){var n=U(t,3),r=n[0],i=n[1],s=n[2];return(r*e[0]+i*e[1]+s)/Math.sqrt(r*r+i*i)}function Ld(t,e){var n=U(t,2),r=n[0],i=n[1];return-r*e[0]-i*e[1]}function dx(t,e){return Math.max.apply(Math,ae([],U(t.map(function(n){var r=U(n,4),i=r[0],s=r[1],o=r[2],a=r[3];return Math.max(i[e],s[e],o[e],a[e])})),!1))}function fx(t,e){return Math.min.apply(Math,ae([],U(t.map(function(n){var r=U(n,4),i=r[0],s=r[1],o=r[2],a=r[3];return Math.min(i[e],s[e],o[e],a[e])})),!1))}function _U(t,e){var n,r,i,s=[0,0],o=[0,0],a=[0,0],l=[0,0],u=0,c=0;if(!t.length)return{pos1:s,pos2:o,pos3:a,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:u,height:c,rotation:e};var d=Ne(e,jn);if(d%90){var f=d/180*Math.PI,g=Math.tan(f),v=-1/g,m=[Nm,MS],S=[[0,0],[0,0]],_=[Nm,MS],y=[[0,0],[0,0]];t.forEach(function(ee){ee.forEach(function(Q){var ie=cx([-g,1,0],Q),te=cx([-v,1,0],Q);m[0]>ie&&(S[0]=Q,m[0]=ie),m[1]<ie&&(S[1]=Q,m[1]=ie),_[0]>te&&(y[0]=Q,_[0]=te),_[1]<te&&(y[1]=Q,_[1]=te)})});var E=U(S,2),I=E[0],N=E[1],R=U(y,2),x=R[0],w=R[1],C=[-g,1,Ld([-g,1],I)],b=[-g,1,Ld([-g,1],N)],k=[-v,1,Ld([-v,1],x)],O=[-v,1,Ld([-v,1],w)];n=U([[C,k],[C,O],[b,k],[b,O]].map(function(ee){var Q=U(ee,2),ie=Q[0],te=Q[1];return p_(ie,te)[0]}),4),s=n[0],o=n[1],a=n[2],l=n[3],u=_[1]-_[0],c=m[1]-m[0]}else{var A=fx(t,0),F=fx(t,1),G=dx(t,0),Y=dx(t,1);if(s=[A,F],o=[G,F],a=[A,Y],l=[G,Y],u=G-A,c=Y-F,d%180){var H=[a,s,l,o];r=U(H,4),s=r[0],o=r[1],a=r[2],l=r[3],u=Y-F,c=G-A}}if(d%360>180){var H=[l,a,o,s];i=U(H,4),s=i[0],o=i[1],a=i[2],l=i[3]}var j=No([s,o,a,l]),L=j.minX,B=j.minY,$=j.maxX,K=j.maxY;return{pos1:s,pos2:o,pos3:a,pos4:l,width:u,height:c,minX:L,minY:B,maxX:$,maxY:K,rotation:e}}function OP(t,e){var n=e.map(function(r){if(nn(r)){var i=OP(t,r),s=i.length;return s>1?i:s===1?i[0]:null}else{var o=or(t,function(a){var l=a.manager;return l.props.target===r});return o?(o.finded=!0,o.manager):null}}).filter(Boolean);return n.length===1&&nn(n[0])?n[0]:n}var wU=function(t){Ac(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.differ=new EA,n.moveables=[],n.transformOrigin="50% 50%",n.renderGroupRects=[],n._targetGroups=[],n._hasFirstTargets=!1,n}return e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){var s;i===void 0&&(i=!0);var o=this.state;if(!this.controlBox||o.isPersisted)return;Ja(!0),this.moveables.forEach(function(ue){ue.updateRect(n,!1,!1)});var a=this.props,l=this.moveables,u=o.target||a.target,c=l.map(function(ue){return{finded:!1,manager:ue}}),d=this.props.targetGroups||[],f=OP(c,d),g=a.useDefaultGroupRotate;f.push.apply(f,ae([],U(c.filter(function(ue){var Ee=ue.finded;return!Ee}).map(function(ue){var Ee=ue.manager;return Ee})),!1));var v=[],m=!r||n!==""&&a.updateGroup,S=a.defaultGroupRotate||0;if(!this._hasFirstTargets){var _=(s=a.persistData)===null||s===void 0?void 0:s.rotation;_!=null&&(S=_)}function y(ue,Ee,xe){var se=ue.map(function(Ce){if(nn(Ce)){var ve=y(Ce,Ee),Re=[ve.pos1,ve.pos2,ve.pos3,ve.pos4];return v.push(ve),{poses:Re,rotation:ve.rotation}}else return{poses:Tr(Ce.state),rotation:Ce.getRotation()}}),ce=se.map(function(Ce){var ve=Ce.rotation;return ve}),ke=0,Se=ce[0],we=ce.every(function(Ce){return Math.abs(Se-Ce)<.1});m?ke=!g&&we?Se:S:ke=!g&&!xe&&we?Se:Ee;var q=se.map(function(Ce){var ve=Ce.poses;return ve}),pe=_U(q,ke);return pe}var E=y(f,this.rotation,!0);m&&(this.rotation=E.rotation,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=d,this.renderGroupRects=v;var I=this.transformOrigin,N=this.rotation,R=this.scale,x=E.width,w=E.height,C=E.minX,b=E.minY,k=F5([[0,0],[x,0],[0,w],[x,w]],D_(I,x,w),this.rotation/180*Math.PI),O=No(k.result),A=O.minX,F=O.minY,G=" rotate(".concat(N,"deg)")+" scale(".concat(Nn(R[0]),", ").concat(Nn(R[1]),")"),Y="translate(".concat(-A,"px, ").concat(-F,"px)").concat(G);this.controlBox.style.transform="translate3d(".concat(C,"px, ").concat(b,"px, ").concat(this.props.translateZ||0,")"),u.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(I,";")+"width:".concat(x,"px;height:").concat(w,"px;")+"transform: ".concat(Y),o.width=x,o.height=w;var H=this.getContainer(),j=Gm(this.controlBox,u,this.controlBox,this.getContainer(),this._rootContainer||H,[]),L=[j.left,j.top],B=U(Tr(j),4),$=B[0],K=B[1],ee=B[2],Q=B[3],ie=No([$,K,ee,Q]),te=[ie.minX,ie.minY],le=Nn(R[0]*R[1]);j.pos1=Ie($,te),j.pos2=Ie(K,te),j.pos3=Ie(ee,te),j.pos4=Ie(Q,te),j.left=C-j.left+te[0],j.top=b-j.top+te[1],j.origin=Ie(Xe(L,j.origin),te),j.beforeOrigin=Ie(Xe(L,j.beforeOrigin),te),j.originalBeforeOrigin=Xe(L,j.originalBeforeOrigin),j.transformOrigin=Ie(Xe(L,j.transformOrigin),te),u.style.transform="translate(".concat(-A-te[0],"px, ").concat(-F-te[1],"px)")+G,Ja(),this.updateState(V(V({},j),{posDelta:te,direction:le,beforeDirection:le}),i)},e.prototype.getRect=function(){return V(V({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.triggerEvent=function(n,r,i){if(i||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r);this._emitter.trigger(n,r)},e.prototype.getRequestChildStyles=function(){var n=this.getEnabledAbles().reduce(function(r,i){var s,o,a=(o=(s=i.requestChildStyle)===null||s===void 0?void 0:s.call(i))!==null&&o!==void 0?o:[];return ae(ae([],U(r),!1),U(a),!1)},[]);return n},e.prototype.getMoveables=function(){return ae([],U(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,ae(ae([],U(this.props.ables),!1),[j_],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=oi(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var n=this.state,r=this.props,i=this._prevDragTarget,s=r.dragTarget||this.areaElement,o=r.targets,a=this.differ.update(o),l=a.added,u=a.changed,c=a.removed,d=l.length||c.length;(d||this._prevOriginalDragTarget!==this._originalDragTarget)&&(ya(this,!1),ya(this,!0),this.updateState({gestos:{}})),i!==s&&(n.target=null),n.target||(n.target=this.areaElement,this.controlBox.style.display="block"),n.target&&(this.targetGesto||(this.targetGesto=PP(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=kP(this,"GroupControl")));var f=!Um(n.container,r.container);f&&(n.container=r.container),(f||d||this.transformOrigin!==(r.defaultGroupOrigin||"50% 50%")||u.length||o.length&&!wP(this._targetGroups,r.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!d},e.prototype._updateObserver=function(){},e.defaultProps=V(V({},tl.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(tl),EU=function(t){Ac(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.moveables=[],n}return e.prototype.render=function(){var n=this,r,i=this.props,s=i.cspNonce,o=i.cssStyled,a=i.persistData,l=i.targets||[],u=l.length,c=this.isUnmounted||!u,d=(r=a==null?void 0:a.children)!==null&&r!==void 0?r:[];return c&&!u&&d.length?l=d.map(function(){return null}):c||(d=[]),D.createElement(o,{cspNonce:s,ref:wo(this,"controlBox"),className:Te("control-box")},l.map(function(f,g){var v,m,S=(m=(v=i.individualGroupableProps)===null||v===void 0?void 0:v.call(i,f,g))!==null&&m!==void 0?m:{};return D.createElement(tl,V({key:"moveable"+g,ref:lA(n,"moveables",g)},i,S,{target:f,wrapperMoveable:n,isWrapperMounted:n.isMoveableMounted,persistData:d[g]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(n,r,i){i===void 0&&(i=!0),Ja(!0),this.moveables.forEach(function(s){s.updateRect(n,r,i)}),Ja()},e.prototype.getRect=function(){return V(V({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(n){return n.getRect()})})},e.prototype.request=function(n,r,i){r===void 0&&(r={});var s=this.moveables.map(function(l){return l.request(n,V(V({},r),{isInstant:!1}),!1)}),o=i||r.isInstant,a={request:function(l){return s.forEach(function(u){return u.request(l)}),this},requestEnd:function(){return s.forEach(function(l){return l.requestEnd()}),this}};return o?a.request(r).requestEnd():a},e.prototype.dragStart=function(n,r){r===void 0&&(r=n.target);var i=r,s=or(this.moveables,function(o){var a=o.getTargets()[0],l=o.getControlBoxElement(),u=o.getDragElement();return!a||!u?!1:u===i||u.contains(i)||u!==a&&a===i||a.contains(i)||l===i||l.contains(i)});return s&&s.dragStart(n,r),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return ae([],U(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(tl);function MP(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,ae([],U(e[r]),!1));return}nn(r)?n.push.apply(n,ae([],U(MP(r,e)),!1)):n.push(r)}}),n}function jP(t,e){var n=[];return t.forEach(function(r){if(r){if(Hi(r)){e[r]&&n.push.apply(n,ae([],U(e[r]),!1));return}nn(r)?n.push(jP(r,e)):n.push(r)}}),n}function LP(t,e){return t.length!==e.length||t.some(function(n,r){var i=e[r];return!n&&!i?!1:n!=i?nn(n)&&nn(i)?LP(n,i):!0:!1})}var SU=function(t){Ac(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n._differ=new EA,n._elementTargets=[],n._tmpRefTargets=[],n._tmpSelectorMap={},n._onChangeTargets=null,n}return e.makeStyled=function(){var n={},r=this.getTotalAbles();r.forEach(function(s){var o=s.css;o&&o.forEach(function(a){n[a]=!0})});var i=yl(n).join(`
`);this.defaultStyled=CA("div",zz(v_,o6+i))},e.getTotalAbles=function(){return ae([TP,j_,NP,xP],U(this.defaultAbles),!1)},e.prototype.render=function(){var n,r=this.constructor;r.defaultStyled||r.makeStyled();var i=this.props,s=i.ables,o=i.props,a=qB(i,["ables","props"]),l=U(this._updateRefs(!0),2),u=l[0],c=l[1],d=MP(u,c),f=d.length>1,g=r.getTotalAbles(),v=ae(ae([],U(g),!1),U(s||[]),!1),m=V(V(V({},a),o||{}),{ables:v,cssStyled:r.defaultStyled,customStyledMap:r.customStyledMap});this._elementTargets=d;var S=null,_=this.moveable,y=a.persistData;if(y!=null&&y.children&&(f=!0),a.individualGroupable)return D.createElement(EU,V({key:"individual-group",ref:wo(this,"moveable")},m,{target:null,targets:d}));if(f){var E=jP(u,c);if(_&&!_.props.groupable&&!_.props.individualGroupable){var I=_.props.target;I&&d.indexOf(I)>-1&&(S=V({},_.state))}return D.createElement(wU,V({key:"group",ref:wo(this,"moveable")},m,(n=a.groupableProps)!==null&&n!==void 0?n:{},{target:null,targets:d,targetGroups:E,firstRenderState:S}))}else{var N=d[0];if(_&&(_.props.groupable||_.props.individualGroupable)){var R=_.moveables||[],x=or(R,function(w){return w.props.target===N});x&&(S=V({},x.state))}return D.createElement(tl,V({key:"single",ref:wo(this,"moveable")},m,{target:N,firstRenderState:S}))}},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var n,r;return(r=(n=this.moveable)===null||n===void 0?void 0:n.getTargets())!==null&&r!==void 0?r:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var n=this,r;return this._onChangeTargets=function(){n._onChangeTargets=null,r()},new Promise(function(i){r=i})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(n){var r=this.refTargets,i=k_(this.props.target||this.props.targets),s=typeof document<"u",o=LP(r,i),a=this.selectorMap,l={};return this.refTargets.forEach(function u(c){if(Hi(c)){var d=a[c];d?l[c]=a[c]:s&&(o=!0,l[c]=[].slice.call(document.querySelectorAll(c)))}else nn(c)&&c.forEach(u)}),this._tmpRefTargets=i,this._tmpSelectorMap=l,[i,l,!n&&o]},e.prototype._checkChangeTargets=function(){var n,r,i;this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var s=this._differ.update(this._elementTargets),o=s.added,a=s.removed,l=o.length||a.length;l&&((r=(n=this.props).onChangeTargets)===null||r===void 0||r.call(n,{moveable:this.moveable,targets:this._elementTargets}),(i=this._onChangeTargets)===null||i===void 0||i.call(this));var u=U(this._updateRefs(),3),c=u[0],d=u[1],f=u[2];this.refTargets=c,this.selectorMap=d,f&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,YB([Bz(u6)],e.prototype,"moveable",void 0),e}(D.PureComponent),xU=function(t){Ac(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.defaultAbles=yU,e}(SU);const Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Sl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function L_(t){return"nodeType"in t}function Fn(t){var e,n;return t?Sl(t)?t:L_(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function V_(t){const{Document:e}=Fn(t);return t instanceof e}function Nc(t){return Sl(t)?!1:t instanceof Fn(t).HTMLElement}function VP(t){return t instanceof Fn(t).SVGElement}function xl(t){return t?Sl(t)?t.document:L_(t)?V_(t)?t:Nc(t)||VP(t)?t.ownerDocument:document:document:document}const zi=Rp?D.useLayoutEffect:D.useEffect;function Ap(t){const e=D.useRef(t);return zi(()=>{e.current=t}),D.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function TU(){const t=D.useRef(null),e=D.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=D.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function ic(t,e){e===void 0&&(e=[t]);const n=D.useRef(t);return zi(()=>{n.current!==t&&(n.current=t)},e),n}function Oc(t,e){const n=D.useRef();return D.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function mh(t){const e=Ap(t),n=D.useRef(null),r=D.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function yh(t){const e=D.useRef();return D.useEffect(()=>{e.current=t},[t]),e.current}let Wg={};function Pp(t,e){return D.useMemo(()=>{if(e)return e;const n=Wg[t]==null?0:Wg[t]+1;return Wg[t]=n,t+"-"+n},[t,e])}function FP(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const c=s[l];c!=null&&(s[l]=c+t*u)}return s},{...e})}}const Da=FP(1),_h=FP(-1);function CU(t){return"clientX"in t&&"clientY"in t}function F_(t){if(!t)return!1;const{KeyboardEvent:e}=Fn(t.target);return e&&t instanceof e}function IU(t){if(!t)return!1;const{TouchEvent:e}=Fn(t.target);return e&&t instanceof e}function wh(t){if(IU(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return CU(t)?{x:t.clientX,y:t.clientY}:null}const sc=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[sc.Translate.toString(t),sc.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),hx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bU(t){return t.matches(hx)?t:t.querySelector(hx)}const RU={display:"none"};function AU(t){let{id:e,value:n}=t;return Nt.createElement("div",{id:e,style:RU},n)}function PU(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Nt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function kU(){const[t,e]=D.useState("");return{announce:D.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const zP=D.createContext(null);function DU(t){const e=D.useContext(zP);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function NU(){const[t]=D.useState(()=>new Set),e=D.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[D.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const OU={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},MU={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function jU(t){let{announcements:e=MU,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=OU}=t;const{announce:s,announcement:o}=kU(),a=Pp("DndLiveRegion"),[l,u]=D.useState(!1);if(D.useEffect(()=>{u(!0)},[]),DU(D.useMemo(()=>({onDragStart(d){let{active:f}=d;s(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:g}=d;e.onDragMove&&s(e.onDragMove({active:f,over:g}))},onDragOver(d){let{active:f,over:g}=d;s(e.onDragOver({active:f,over:g}))},onDragEnd(d){let{active:f,over:g}=d;s(e.onDragEnd({active:f,over:g}))},onDragCancel(d){let{active:f,over:g}=d;s(e.onDragCancel({active:f,over:g}))}}),[s,e])),!l)return null;const c=Nt.createElement(Nt.Fragment,null,Nt.createElement(AU,{id:r,value:i.draggable}),Nt.createElement(PU,{id:a,announcement:o}));return n?ha.createPortal(c,n):c}var Ht;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ht||(Ht={}));function Eh(){}const $r=Object.freeze({x:0,y:0});function LU(t,e){const n=wh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function VU(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function FU(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function zU(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,u=t.width*t.height,c=o*a,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const BU=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=zU(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(VU)};function UU(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function BP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:$r}function $U(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const GU=$U(1);function UP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function HU(t,e,n){const r=UP(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),u=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const WU={ignoreTransform:!1};function Mc(t,e){e===void 0&&(e=WU);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=Fn(t).getComputedStyle(t);u&&(n=HU(n,u,c))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function px(t){return Mc(t,{ignoreTransform:!0})}function qU(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function YU(t,e){return e===void 0&&(e=Fn(t).getComputedStyle(t)),e.position==="fixed"}function KU(t,e){e===void 0&&(e=Fn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function z_(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(V_(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Nc(i)||VP(i)||n.includes(i))return n;const s=Fn(t).getComputedStyle(i);return i!==t&&KU(i,s)&&n.push(i),YU(i,s)?n:r(i.parentNode)}return t?r(t):n}function $P(t){const[e]=z_(t,1);return e??null}function qg(t){return!Rp||!t?null:Sl(t)?t:L_(t)?V_(t)||t===xl(t).scrollingElement?window:Nc(t)?t:null:null}function GP(t){return Sl(t)?t.scrollX:t.scrollLeft}function HP(t){return Sl(t)?t.scrollY:t.scrollTop}function Hm(t){return{x:GP(t),y:HP(t)}}var en;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(en||(en={}));function WP(t){return!Rp||!t?!1:t===document.scrollingElement}function qP(t){const e={x:0,y:0},n=WP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const XU={x:.2,y:.2};function QU(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=XU);const{isTop:u,isBottom:c,isLeft:d,isRight:f}=qP(t),g={x:0,y:0},v={x:0,y:0},m={height:e.height*i.y,width:e.width*i.x};return!u&&s<=e.top+m.height?(g.y=en.Backward,v.y=r*Math.abs((e.top+m.height-s)/m.height)):!c&&l>=e.bottom-m.height&&(g.y=en.Forward,v.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!f&&a>=e.right-m.width?(g.x=en.Forward,v.x=r*Math.abs((e.right-m.width-a)/m.width)):!d&&o<=e.left+m.width&&(g.x=en.Backward,v.x=r*Math.abs((e.left+m.width-o)/m.width)),{direction:g,speed:v}}function JU(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function YP(t){return t.reduce((e,n)=>Da(e,Hm(n)),$r)}function ZU(t){return t.reduce((e,n)=>e+GP(n),0)}function e9(t){return t.reduce((e,n)=>e+HP(n),0)}function KP(t,e){if(e===void 0&&(e=Mc),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);$P(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const t9=[["x",["left","right"],ZU],["y",["top","bottom"],e9]];class B_{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=z_(n),i=YP(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of t9)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Tu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function n9(t){const{EventTarget:e}=Fn(t);return t instanceof e?t:xl(t)}function Yg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var fr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(fr||(fr={}));function gx(t){t.preventDefault()}function r9(t){t.stopPropagation()}var lt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(lt||(lt={}));const XP={start:[lt.Space,lt.Enter],cancel:[lt.Esc],end:[lt.Space,lt.Enter,lt.Tab]},i9=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case lt.Right:return{...n,x:n.x+25};case lt.Left:return{...n,x:n.x-25};case lt.Down:return{...n,y:n.y+25};case lt.Up:return{...n,y:n.y-25}}};class QP{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Tu(xl(n)),this.windowListeners=new Tu(Fn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&KP(r),n($r)}handleKeyDown(e){if(F_(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=XP,coordinateGetter:o=i9,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:$r;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:n,context:r.current,currentCoordinates:c});if(d){const f=_h(d,c),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const m of v){const S=e.code,{isTop:_,isRight:y,isLeft:E,isBottom:I,maxScroll:N,minScroll:R}=qP(m),x=JU(m),w={x:Math.min(S===lt.Right?x.right-x.width/2:x.right,Math.max(S===lt.Right?x.left:x.left+x.width/2,d.x)),y:Math.min(S===lt.Down?x.bottom-x.height/2:x.bottom,Math.max(S===lt.Down?x.top:x.top+x.height/2,d.y))},C=S===lt.Right&&!y||S===lt.Left&&!E,b=S===lt.Down&&!I||S===lt.Up&&!_;if(C&&w.x!==d.x){const k=m.scrollLeft+f.x,O=S===lt.Right&&k<=N.x||S===lt.Left&&k>=R.x;if(O&&!f.y){m.scrollTo({left:k,behavior:a});return}O?g.x=m.scrollLeft-k:g.x=S===lt.Right?m.scrollLeft-N.x:m.scrollLeft-R.x,g.x&&m.scrollBy({left:-g.x,behavior:a});break}else if(b&&w.y!==d.y){const k=m.scrollTop+f.y,O=S===lt.Down&&k<=N.y||S===lt.Up&&k>=R.y;if(O&&!f.x){m.scrollTo({top:k,behavior:a});return}O?g.y=m.scrollTop-k:g.y=S===lt.Down?m.scrollTop-N.y:m.scrollTop-R.y,g.y&&m.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(e,Da(_h(d,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}QP.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=XP,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function vx(t){return!!(t&&"distance"in t)}function mx(t){return!!(t&&"delay"in t)}class U_{constructor(e,n,r){var i;r===void 0&&(r=n9(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=xl(o),this.documentListeners=new Tu(this.document),this.listeners=new Tu(r),this.windowListeners=new Tu(Fn(o)),this.initialCoordinates=(i=wh(s))!=null?i:$r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.DragStart,gx),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),this.windowListeners.add(fr.ContextMenu,gx),this.documentListeners.add(fr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mx(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vx(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(fr.Click,r9,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=wh(e))!=null?n:$r,u=_h(i,l);if(!r&&a){if(vx(a)){if(a.tolerance!=null&&Yg(u,a.tolerance))return this.handleCancel();if(Yg(u,a.distance))return this.handleStart()}if(mx(a)&&Yg(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===lt.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const s9={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class JP extends U_{constructor(e){const{event:n}=e,r=xl(n.target);super(e,s9,r)}}JP.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const o9={move:{name:"mousemove"},end:{name:"mouseup"}};var Wm;(function(t){t[t.RightClick=2]="RightClick"})(Wm||(Wm={}));class a9 extends U_{constructor(e){super(e,o9,xl(e.event.target))}}a9.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Wm.RightClick?!1:(r==null||r({event:n}),!0)}}];const Kg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class l9 extends U_{constructor(e){super(e,Kg)}static setup(){return window.addEventListener(Kg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Kg.move.name,e)};function e(){}}}l9.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Cu;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Cu||(Cu={}));var Sh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Sh||(Sh={}));function u9(t){let{acceleration:e,activator:n=Cu.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Sh.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:f}=t;const g=d9({delta:d,disabled:!s}),[v,m]=TU(),S=D.useRef({x:0,y:0}),_=D.useRef({x:0,y:0}),y=D.useMemo(()=>{switch(n){case Cu.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Cu.DraggableRect:return i}},[n,i,l]),E=D.useRef(null),I=D.useCallback(()=>{const R=E.current;if(!R)return;const x=S.current.x*_.current.x,w=S.current.y*_.current.y;R.scrollBy(x,w)},[]),N=D.useMemo(()=>a===Sh.TreeOrder?[...u].reverse():u,[a,u]);D.useEffect(()=>{if(!s||!u.length||!y){m();return}for(const R of N){if((r==null?void 0:r(R))===!1)continue;const x=u.indexOf(R),w=c[x];if(!w)continue;const{direction:C,speed:b}=QU(R,w,y,e,f);for(const k of["x","y"])g[k][C[k]]||(b[k]=0,C[k]=0);if(b.x>0||b.y>0){m(),E.current=R,v(I,o),S.current=b,_.current=C;return}}S.current={x:0,y:0},_.current={x:0,y:0},m()},[e,I,r,m,s,o,JSON.stringify(y),JSON.stringify(g),v,u,N,c,JSON.stringify(f)])}const c9={x:{[en.Backward]:!1,[en.Forward]:!1},y:{[en.Backward]:!1,[en.Forward]:!1}};function d9(t){let{delta:e,disabled:n}=t;const r=yh(e);return Oc(i=>{if(n||!r||!i)return c9;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[en.Backward]:i.x[en.Backward]||s.x===-1,[en.Forward]:i.x[en.Forward]||s.x===1},y:{[en.Backward]:i.y[en.Backward]||s.y===-1,[en.Forward]:i.y[en.Forward]||s.y===1}}},[n,e,r])}function f9(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Oc(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function h9(t,e){return D.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var oc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(oc||(oc={}));var qm;(function(t){t.Optimized="optimized"})(qm||(qm={}));const yx=new Map;function p9(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=D.useState(null),{frequency:a,measure:l,strategy:u}=i,c=D.useRef(t),d=S(),f=ic(d),g=D.useCallback(function(_){_===void 0&&(_=[]),!f.current&&o(y=>y===null?_:y.concat(_.filter(E=>!y.includes(E))))},[f]),v=D.useRef(null),m=Oc(_=>{if(d&&!n)return yx;if(!_||_===yx||c.current!==t||s!=null){const y=new Map;for(let E of t){if(!E)continue;if(s&&s.length>0&&!s.includes(E.id)&&E.rect.current){y.set(E.id,E.rect.current);continue}const I=E.node.current,N=I?new B_(l(I),I):null;E.rect.current=N,N&&y.set(E.id,N)}return y}return _},[t,s,n,d,l]);return D.useEffect(()=>{c.current=t},[t]),D.useEffect(()=>{d||g()},[n,d]),D.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),D.useEffect(()=>{d||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,d,g,...r]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:s!=null};function S(){switch(u){case oc.Always:return!1;case oc.BeforeDragging:return n;default:return!n}}}function $_(t,e){return Oc(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function g9(t,e){return $_(t,e)}function v9(t){let{callback:e,disabled:n}=t;const r=Ap(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return D.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function kp(t){let{callback:e,disabled:n}=t;const r=Ap(e),i=D.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return D.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function m9(t){return new B_(Mc(t),t)}function _x(t,e,n){e===void 0&&(e=m9);const[r,i]=D.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c})}const o=v9({callback(l){if(t)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=kp({callback:s});return zi(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function y9(t){const e=$_(t);return BP(t,e)}const wx=[];function _9(t){const e=D.useRef(t),n=Oc(r=>t?r&&r!==wx&&t&&e.current&&t.parentNode===e.current.parentNode?r:z_(t):wx,[t]);return D.useEffect(()=>{e.current=t},[t]),n}function w9(t){const[e,n]=D.useState(null),r=D.useRef(t),i=D.useCallback(s=>{const o=qg(s.target);o&&n(a=>a?(a.set(o,Hm(o)),new Map(a)):null)},[]);return D.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const u=qg(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,Hm(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const u=qg(l);u==null||u.removeEventListener("scroll",i)})}},[i,t]),D.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Da(s,o),$r):YP(t):$r,[t,e])}function Ex(t,e){e===void 0&&(e=[]);const n=D.useRef(null);return D.useEffect(()=>{n.current=null},e),D.useEffect(()=>{const r=t!==$r;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?_h(t,n.current):$r}function E9(t){D.useEffect(()=>{if(!Rp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function S9(t,e){return D.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function ZP(t){return D.useMemo(()=>t?qU(t):null,[t])}const Sx=[];function x9(t,e){e===void 0&&(e=Mc);const[n]=t,r=ZP(n?Fn(n):null),[i,s]=D.useState(Sx);function o(){s(()=>t.length?t.map(l=>WP(l)?r:new B_(e(l),l)):Sx)}const a=kp({callback:o});return zi(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function ek(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Nc(e)?e:t}function T9(t){let{measure:e}=t;const[n,r]=D.useState(null),i=D.useCallback(u=>{for(const{target:c}of u)if(Nc(c)){r(d=>{const f=e(c);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),s=kp({callback:i}),o=D.useCallback(u=>{const c=ek(u);s==null||s.disconnect(),c&&(s==null||s.observe(c)),r(c?e(c):null)},[e,s]),[a,l]=mh(o);return D.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const C9=[{sensor:JP,options:{}},{sensor:QP,options:{}}],I9={current:{}},hf={draggable:{measure:px},droppable:{measure:px,strategy:oc.WhileDragging,frequency:qm.Optimized},dragOverlay:{measure:Mc}};class Iu extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const b9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Iu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Eh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hf,measureDroppableContainers:Eh,windowRect:null,measuringScheduled:!1},tk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Eh,draggableNodes:new Map,over:null,measureDroppableContainers:Eh},jc=D.createContext(tk),nk=D.createContext(b9);function R9(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Iu}}}function A9(t,e){switch(e.type){case Ht.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ht.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ht.DragEnd:case Ht.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ht.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Iu(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Ht.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Iu(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Ht.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Iu(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function P9(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=D.useContext(jc),s=yh(r),o=yh(n==null?void 0:n.id);return D.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!F_(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=bU(c);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function rk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function k9(t){return D.useMemo(()=>({draggable:{...hf.draggable,...t==null?void 0:t.draggable},droppable:{...hf.droppable,...t==null?void 0:t.droppable},dragOverlay:{...hf.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function D9(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=D.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;zi(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const c=n(u),d=BP(c,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=$P(u);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const Dp=D.createContext({...$r,scaleX:1,scaleY:1});var ts;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ts||(ts={}));const N9=D.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:c=C9,collisionDetection:d=BU,measuring:f,modifiers:g,...v}=e;const m=D.useReducer(A9,void 0,R9),[S,_]=m,[y,E]=NU(),[I,N]=D.useState(ts.Uninitialized),R=I===ts.Initialized,{draggable:{active:x,nodes:w,translate:C},droppable:{containers:b}}=S,k=x!=null?w.get(x):null,O=D.useRef({initial:null,translated:null}),A=D.useMemo(()=>{var ze;return x!=null?{id:x,data:(ze=k==null?void 0:k.data)!=null?ze:I9,rect:O}:null},[x,k]),F=D.useRef(null),[G,Y]=D.useState(null),[H,j]=D.useState(null),L=ic(v,Object.values(v)),B=Pp("DndDescribedBy",o),$=D.useMemo(()=>b.getEnabled(),[b]),K=k9(f),{droppableRects:ee,measureDroppableContainers:Q,measuringScheduled:ie}=p9($,{dragging:R,dependencies:[C.x,C.y],config:K.droppable}),te=f9(w,x),le=D.useMemo(()=>H?wh(H):null,[H]),ue=Ze(),Ee=g9(te,K.draggable.measure);D9({activeNode:x!=null?w.get(x):null,config:ue.layoutShiftCompensation,initialRect:Ee,measure:K.draggable.measure});const xe=_x(te,K.draggable.measure,Ee),se=_x(te?te.parentElement:null),ce=D.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:b,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ke=b.getNodeFor((n=ce.current.over)==null?void 0:n.id),Se=T9({measure:K.dragOverlay.measure}),we=(r=Se.nodeRef.current)!=null?r:te,q=R?(i=Se.rect)!=null?i:xe:null,pe=!!(Se.nodeRef.current&&Se.rect),Ce=y9(pe?null:xe),ve=ZP(we?Fn(we):null),Re=_9(R?ke??te:null),Ue=x9(Re),ut=rk(g,{transform:{x:C.x-Ce.x,y:C.y-Ce.y,scaleX:1,scaleY:1},activatorEvent:H,active:A,activeNodeRect:xe,containerNodeRect:se,draggingNodeRect:q,over:ce.current.over,overlayNodeRect:Se.rect,scrollableAncestors:Re,scrollableAncestorRects:Ue,windowRect:ve}),ot=le?Da(le,C):null,Oe=w9(Re),nt=Ex(Oe),Je=Ex(Oe,[xe]),$e=Da(ut,nt),z=q?GU(q,ut):null,J=A&&z?d({active:A,collisionRect:z,droppableRects:ee,droppableContainers:$,pointerCoordinates:ot}):null,ge=FU(J,"id"),[fe,je]=D.useState(null),ct=pe?ut:Da(ut,Je),rn=UU(ct,(s=fe==null?void 0:fe.rect)!=null?s:null,xe),St=D.useRef(null),cr=D.useCallback((ze,_t)=>{let{sensor:et,options:$t}=_t;if(F.current==null)return;const kt=w.get(F.current);if(!kt)return;const Xt=ze.nativeEvent,Qt=new et({active:F.current,activeNode:kt,event:Xt,options:$t,context:ce,onAbort(Ye){if(!w.get(Ye))return;const{onDragAbort:pn}=L.current,Rn={id:Ye};pn==null||pn(Rn),y({type:"onDragAbort",event:Rn})},onPending(Ye,Ir,pn,Rn){if(!w.get(Ye))return;const{onDragPending:Ks}=L.current,An={id:Ye,constraint:Ir,initialCoordinates:pn,offset:Rn};Ks==null||Ks(An),y({type:"onDragPending",event:An})},onStart(Ye){const Ir=F.current;if(Ir==null)return;const pn=w.get(Ir);if(!pn)return;const{onDragStart:Rn}=L.current,Ys={activatorEvent:Xt,active:{id:Ir,data:pn.data,rect:O}};ha.unstable_batchedUpdates(()=>{Rn==null||Rn(Ys),N(ts.Initializing),_({type:Ht.DragStart,initialCoordinates:Ye,active:Ir}),y({type:"onDragStart",event:Ys}),Y(St.current),j(Xt)})},onMove(Ye){_({type:Ht.DragMove,coordinates:Ye})},onEnd:Cr(Ht.DragEnd),onCancel:Cr(Ht.DragCancel)});St.current=Qt;function Cr(Ye){return async function(){const{active:pn,collisions:Rn,over:Ys,scrollAdjustedTranslate:Ks}=ce.current;let An=null;if(pn&&Ks){const{cancelDrop:Xs}=L.current;An={activatorEvent:Xt,active:pn,collisions:Rn,delta:Ks,over:Ys},Ye===Ht.DragEnd&&typeof Xs=="function"&&await Promise.resolve(Xs(An))&&(Ye=Ht.DragCancel)}F.current=null,ha.unstable_batchedUpdates(()=>{_({type:Ye}),N(ts.Uninitialized),je(null),Y(null),j(null),St.current=null;const Xs=Ye===Ht.DragEnd?"onDragEnd":"onDragCancel";if(An){const Tl=L.current[Xs];Tl==null||Tl(An),y({type:Xs,event:An})}})}}},[w]),qr=D.useCallback((ze,_t)=>(et,$t)=>{const kt=et.nativeEvent,Xt=w.get($t);if(F.current!==null||!Xt||kt.dndKit||kt.defaultPrevented)return;const Qt={active:Xt};ze(et,_t.options,Qt)===!0&&(kt.dndKit={capturedBy:_t.sensor},F.current=$t,cr(et,_t))},[w,cr]),Jn=h9(c,qr);E9(c),zi(()=>{xe&&I===ts.Initializing&&N(ts.Initialized)},[xe,I]),D.useEffect(()=>{const{onDragMove:ze}=L.current,{active:_t,activatorEvent:et,collisions:$t,over:kt}=ce.current;if(!_t||!et)return;const Xt={active:_t,activatorEvent:et,collisions:$t,delta:{x:$e.x,y:$e.y},over:kt};ha.unstable_batchedUpdates(()=>{ze==null||ze(Xt),y({type:"onDragMove",event:Xt})})},[$e.x,$e.y]),D.useEffect(()=>{const{active:ze,activatorEvent:_t,collisions:et,droppableContainers:$t,scrollAdjustedTranslate:kt}=ce.current;if(!ze||F.current==null||!_t||!kt)return;const{onDragOver:Xt}=L.current,Qt=$t.get(ge),Cr=Qt&&Qt.rect.current?{id:Qt.id,rect:Qt.rect.current,data:Qt.data,disabled:Qt.disabled}:null,Ye={active:ze,activatorEvent:_t,collisions:et,delta:{x:kt.x,y:kt.y},over:Cr};ha.unstable_batchedUpdates(()=>{je(Cr),Xt==null||Xt(Ye),y({type:"onDragOver",event:Ye})})},[ge]),zi(()=>{ce.current={activatorEvent:H,active:A,activeNode:te,collisionRect:z,collisions:J,droppableRects:ee,draggableNodes:w,draggingNode:we,draggingNodeRect:q,droppableContainers:b,over:fe,scrollableAncestors:Re,scrollAdjustedTranslate:$e},O.current={initial:q,translated:z}},[A,te,J,z,w,we,q,ee,b,fe,Re,$e]),u9({...ue,delta:C,draggingRect:z,pointerCoordinates:ot,scrollableAncestors:Re,scrollableAncestorRects:Ue});const Zn=D.useMemo(()=>({active:A,activeNode:te,activeNodeRect:xe,activatorEvent:H,collisions:J,containerNodeRect:se,dragOverlay:Se,draggableNodes:w,droppableContainers:b,droppableRects:ee,over:fe,measureDroppableContainers:Q,scrollableAncestors:Re,scrollableAncestorRects:Ue,measuringConfiguration:K,measuringScheduled:ie,windowRect:ve}),[A,te,xe,H,J,se,Se,w,b,ee,fe,Q,Re,Ue,K,ie,ve]),Fe=D.useMemo(()=>({activatorEvent:H,activators:Jn,active:A,activeNodeRect:xe,ariaDescribedById:{draggable:B},dispatch:_,draggableNodes:w,over:fe,measureDroppableContainers:Q}),[H,Jn,A,xe,_,B,w,fe,Q]);return Nt.createElement(zP.Provider,{value:E},Nt.createElement(jc.Provider,{value:Fe},Nt.createElement(nk.Provider,{value:Zn},Nt.createElement(Dp.Provider,{value:rn},u)),Nt.createElement(P9,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Nt.createElement(jU,{...a,hiddenTextDescribedById:B}));function Ze(){const ze=(G==null?void 0:G.autoScrollEnabled)===!1,_t=typeof l=="object"?l.enabled===!1:l===!1,et=R&&!ze&&!_t;return typeof l=="object"?{...l,enabled:et}:{enabled:et}}}),O9=D.createContext(null),xx="button",M9="Draggable";function j9(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Pp(M9),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:f}=D.useContext(jc),{role:g=xx,roleDescription:v="draggable",tabIndex:m=0}=i??{},S=(l==null?void 0:l.id)===e,_=D.useContext(S?Dp:O9),[y,E]=mh(),[I,N]=mh(),R=S9(o,e),x=ic(n);zi(()=>(d.set(e,{id:e,key:s,node:y,activatorNode:I,data:x}),()=>{const C=d.get(e);C&&C.key===s&&d.delete(e)}),[d,e]);const w=D.useMemo(()=>({role:g,tabIndex:m,"aria-disabled":r,"aria-pressed":S&&g===xx?!0:void 0,"aria-roledescription":v,"aria-describedby":c.draggable}),[r,g,m,S,v,c.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:w,isDragging:S,listeners:r?void 0:R,node:y,over:f,setNodeRef:E,setActivatorNodeRef:N,transform:_}}function L9(){return D.useContext(nk)}const V9="Droppable",F9={timeout:25};function z9(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Pp(V9),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=D.useContext(jc),c=D.useRef({disabled:n}),d=D.useRef(!1),f=D.useRef(null),g=D.useRef(null),{disabled:v,updateMeasurementsFor:m,timeout:S}={...F9,...i},_=ic(m??r),y=D.useCallback(()=>{if(!d.current){d.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(_.current)?_.current:[_.current]),g.current=null},S)},[S]),E=kp({callback:y,disabled:v||!o}),I=D.useCallback((w,C)=>{E&&(C&&(E.unobserve(C),d.current=!1),w&&E.observe(w))},[E]),[N,R]=mh(I),x=ic(e);return D.useEffect(()=>{!E||!N.current||(E.disconnect(),d.current=!1,E.observe(N.current))},[N,E]),D.useEffect(()=>(a({type:Ht.RegisterDroppable,element:{id:r,key:s,disabled:n,node:N,rect:f,data:x}}),()=>a({type:Ht.UnregisterDroppable,key:s,id:r})),[r]),D.useEffect(()=>{n!==c.current.disabled&&(a({type:Ht.SetDroppableDisabled,id:r,key:s,disabled:n}),c.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:N,over:l,setNodeRef:R}}function B9(t){let{animation:e,children:n}=t;const[r,i]=D.useState(null),[s,o]=D.useState(null),a=yh(n);return!n&&!r&&a&&i(a),zi(()=>{if(!s)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){i(null);return}Promise.resolve(e(u,s)).then(()=>{i(null)})},[e,r,s]),Nt.createElement(Nt.Fragment,null,n,r?D.cloneElement(r,{ref:o}):null)}const U9={x:0,y:0,scaleX:1,scaleY:1};function $9(t){let{children:e}=t;return Nt.createElement(jc.Provider,{value:tk},Nt.createElement(Dp.Provider,{value:U9},e))}const G9={position:"fixed",touchAction:"none"},H9=t=>F_(t)?"transform 250ms ease":void 0,W9=D.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:u,transition:c=H9}=t;if(!a)return null;const d=i?u:{...u,scaleX:1,scaleY:1},f={...G9,width:a.width,height:a.height,top:a.top,left:a.left,transform:sc.Transform.toString(d),transformOrigin:i&&r?LU(r,a):void 0,transition:typeof c=="function"?c(r):c,...l};return Nt.createElement(n,{className:o,style:f,ref:e},s)}),q9=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,u]of Object.entries(i))n.node.style.setProperty(l,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},Y9=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:sc.Transform.toString(e)},{transform:sc.Transform.toString(n)}]},K9={duration:250,easing:"ease",keyframes:Y9,sideEffects:q9({styles:{active:{opacity:"0"}}})};function X9(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Ap((s,o)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const u=ek(o);if(!u)return;const{transform:c}=Fn(o).getComputedStyle(o),d=UP(c);if(!d)return;const f=typeof e=="function"?e:Q9(e);return KP(l,i.draggable.measure),f({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function Q9(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...K9,...t};return s=>{let{active:o,dragOverlay:a,transform:l,...u}=s;if(!e)return;const c={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},f={x:l.x-c.x,y:l.y-c.y,...d},g=i({...u,active:o,dragOverlay:a,transform:{initial:l,final:f}}),[v]=g,m=g[g.length-1];if(JSON.stringify(v)===JSON.stringify(m))return;const S=r==null?void 0:r({active:o,dragOverlay:a,...u}),_=a.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(y=>{_.onfinish=()=>{S==null||S(),y()}})}}let Tx=0;function J9(t){return D.useMemo(()=>{if(t!=null)return Tx++,Tx},[t])}const Z9=Nt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:u=999}=t;const{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:g,draggableNodes:v,droppableContainers:m,dragOverlay:S,over:_,measuringConfiguration:y,scrollableAncestors:E,scrollableAncestorRects:I,windowRect:N}=L9(),R=D.useContext(Dp),x=J9(d==null?void 0:d.id),w=rk(o,{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:g,draggingNodeRect:S.rect,over:_,overlayNodeRect:S.rect,scrollableAncestors:E,scrollableAncestorRects:I,transform:R,windowRect:N}),C=$_(f),b=X9({config:r,draggableNodes:v,droppableContainers:m,measuringConfiguration:y}),k=C?S.setRef:void 0;return Nt.createElement($9,null,Nt.createElement(B9,{animation:b},d&&x?Nt.createElement(W9,{key:x,id:d.id,ref:k,as:a,activatorEvent:c,adjustScale:e,className:l,transition:s,rect:C,style:{zIndex:u,...i},transform:w},n):null))}),ik=144,Vd=t=>t*(ik/72),Fd=t=>t*(72/ik),$l=(t=[0,0,0,0])=>[Vd(t[0]),Vd(t[1]),Vd(t[2]),Vd(t[3])],no=(t=[0,0,0,0])=>[Fd(t[0]),Fd(t[1]),Fd(t[2]),Fd(t[3])],Xg=(t,e=8)=>Math.round(t/e)*e,e$=t=>{if(!Array.isArray(t)||t.length<4)return[0,0,100,20];const[e,n,r,i]=t.map(s=>Number(s)||0);return r<500&&i<200?[e,n,e+r,n+i]:[e,n,r,i]},t$=(t,e=1)=>{if(!(t!=null&&t.current))return{w:0,h:0};const n=t.current.getBoundingClientRect();return{w:n.width/e,h:n.height/e}},Qg=(t,e,n=1)=>{const{w:r,h:i}=t$(e,n),[s,o,a,l]=t;return[Math.max(0,Math.min(s,r)),Math.max(0,Math.min(o,i)),Math.max(0,Math.min(a,r)),Math.max(0,Math.min(l,i))]},Cx=(t,e=24,n=16)=>{let[r,i,s,o]=t;const a=s-r,l=o-i;if(a<e){const u=(r+s)/2;r=u-e/2,s=u+e/2}if(l<n){const u=(i+o)/2;i=u-n/2,o=u+n/2}return[r,i,s,o]},n$=(t,e,n,r=1,i=[100,30])=>{if(!(n!=null&&n.current))return[0,0,100,30];const s=n.current.getBoundingClientRect(),[o,a]=i,l=(t-s.left)/r,u=(e-s.top)/r,c=l-o/2,d=u-a/2,f=c+o,g=d+a;return[c,d,f,g]},zd=yp("python"),Ix=t=>t.replace(/\s+/g,"_"),Bn={SAVED:"saved",SAVING:"saving",UNSAVED:"unsaved",ERROR:"error"};function r$(){var $e;const{user:t,loading:e,isAdmin:n}=bn(),r=XC(),i=r.app||r.appId,s=r.form||r.formId,o=Ix(i),a=Ix(s),[l,u]=D.useState({fields:[]}),[c,d]=D.useState(0),[f,g]=D.useState(1),[v,m]=D.useState(null),[S,_]=D.useState(null),[y,E]=D.useState(null),[I,N]=D.useState(""),[R,x]=D.useState("all"),[w,C]=D.useState(1),[b,k]=D.useState([]),[O,A]=D.useState(!1),[F,G]=D.useState("idle"),[Y,H]=D.useState(0),[j,L]=D.useState(null),[B,$]=D.useState([]),[K,ee]=D.useState(null),[Q,ie]=D.useState(Bn.SAVED),[te,le]=D.useState(null),ue=D.useRef(null),Ee=D.useRef(null),xe=D.useRef(null);if(e)return p.jsx("div",{className:"loading-container",children:p.jsx("div",{className:"loading-spinner"})});if(!t||!n)return p.jsxs("div",{className:"access-denied",children:[p.jsx("h1",{className:"denied-title",children:"Access Denied"}),p.jsx("p",{className:"denied-message",children:"Admin privileges required to access the Field Mapper."}),p.jsx(za,{to:"/dashboard",className:"return-button",children:"← Return to Dashboard"})]});const se=z=>z.map((J,ge)=>{const fe=e$(J.rect),je=fe[2]-fe[0],ct=fe[3]-fe[1];return{id:`ai_field_${ge+1}`,label:J.label||`Field ${ge+1}`,page:J.page||0,type:J.type||"text",rect:fe,fontSize:J.fontSize||11,align:J.align||"left",shrink:J.shrink!==!1,confidence:J.confidence||.5,aiReasoning:J.reasoning||"AI detected form field",originalRect:J.rect,width:je,height:ct}}),ce=async z=>{const J=z.target.files[0];if(!J||!J.type.includes("pdf")){L("Please select a valid PDF file");return}A(!0),G("analyzing"),H(0),L(null);try{H(20);const ge=new FormData;ge.append("pdf",J);const fe=await fetch(Qy.AI_ANALYZE_PDF(),{method:"POST",body:ge});if(!fe.ok){const St=await fe.text();throw new Error(`Failed to upload PDF for analysis: ${fe.status} ${St}`)}const je=await fe.json();H(60),G("mapping");const ct=se(je.fields);k(ct),H(80),G("reviewing");const rn=ct.filter(St=>St.confidence>.8);$(rn.map(St=>St.id)),H(100)}catch(ge){L(ge.message),G("idle")}finally{A(!1)}},ke=(z,J)=>{$(J?ge=>[...ge,z]:ge=>ge.filter(fe=>fe!==z))},Se=()=>{if(B.length===0){L("Please select at least one field to apply");return}G("fields-ready"),L(null)},we=D.useCallback(()=>{te&&clearTimeout(te),ie(Bn.UNSAVED);const z=setTimeout(()=>{q()},2e3);le(z)},[te]);async function q(){if(Q!==Bn.SAVING){ie(Bn.SAVING);try{const z={...l,fields:(l.fields||[]).map(fe=>({...fe,rect:no(fe.rect)}))},J=new FormData;J.append("overlay_json",JSON.stringify(z));const ge=await fetch(`${zd}/api/apps/${o}/forms/${a}/template`,{method:"POST",body:J});if(!ge.ok)throw new Error(`Save failed: ${ge.status}`);ie(Bn.SAVED),te&&(clearTimeout(te),le(null))}catch{ie(Bn.ERROR)}}}const pe=z=>{ee(z.active.id)},Ce=z=>{const{active:J,over:ge}=z;if(ee(null),ge&&ge.id==="pdf-canvas"){const fe=J.id,je=b.find(ct=>ct.id===fe);if(je&&S){const ct=z.activatorEvent.clientX,rn=z.activatorEvent.clientY,St=n$(ct,rn,Ee,w,[je.width,je.height]),cr=Qg(St,Ee,w),qr=Cx(cr,24,16),Jn=no(qr).map(Fe=>Xg(Fe)),Zn={id:`field_${Date.now()}`,label:je.label,page:c,type:je.type,rect:Jn,fontSize:je.fontSize||11,align:je.align||"left",shrink:je.shrink!==!1};u(Fe=>({...Fe,fields:[...Fe.fields,Zn]})),E(Zn.id),we()}}},ve=z=>{u(J=>({...J,fields:J.fields.map(ge=>ge.id===z.id?z:ge)})),we()},Re=z=>{u(J=>({...J,fields:J.fields.filter(ge=>ge.id!==z)})),y===z&&E(null),we()};D.useEffect(()=>{(async()=>{const J=await(await fetch(`${zd}/api/apps/${o}/forms/${a}/template`)).json(),ge=Array.isArray(J==null?void 0:J.fields)?J.fields.map(fe=>({...fe,rect:$l(fe.rect)})):[];u({fields:ge}),ie(Bn.SAVED)})()},[o,a]),D.useEffect(()=>{const z=ge=>new URLSearchParams(ge).toString();async function J(){const ge=await fetch(`${zd}/${o}/forms/${a}/page-metrics?${z({page:c,dpi:144})}`).then(je=>je.json());_(ge),g(ge.pages||1);const fe=await fetch(`${zd}/${o}/forms/${a}/preview-page?${z({page:c,dpi:144})}`).then(je=>je.blob());m(URL.createObjectURL(fe))}return J(),()=>m(null)},[o,a,c]),D.useEffect(()=>{const z=J=>{(J.ctrlKey||J.metaKey)&&J.key==="s"&&(J.preventDefault(),q()),J.key==="Delete"&&y&&(J.preventDefault(),Re(y)),J.key==="Escape"&&E(null),J.key==="n"&&!J.ctrlKey&&!J.metaKey&&(J.preventDefault(),nt())};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[y]);const Ue=({field:z})=>{const J=F==="fields-ready"&&B.includes(z.id),{attributes:ge,listeners:fe,setNodeRef:je,transform:ct,isDragging:rn}=j9({id:z.id,disabled:!J}),St=ct?{transform:`translate3d(${ct.x}px, ${ct.y}px, 0)`,opacity:rn?.5:1}:{};return p.jsxs("div",{ref:je,style:St,...fe,...ge,className:`field-item ${B.includes(z.id)?"selected":""} ${J?"":"disabled"}`,children:[p.jsxs("div",{className:"field-header",children:[p.jsx("input",{type:"checkbox",checked:B.includes(z.id),onChange:cr=>ke(z.id,cr.target.checked),className:"field-checkbox"}),p.jsx("span",{className:"field-name",children:z.label}),p.jsxs("span",{className:`confidence-badge ${z.confidence>.8?"high":z.confidence>.6?"medium":"low"}`,children:[Math.round(z.confidence*100),"%"]})]}),p.jsxs("div",{className:"field-details",children:[p.jsxs("div",{children:["Type: ",z.type]}),p.jsxs("div",{children:["Size: ",Math.round(z.width),"×",Math.round(z.height),"px"]})]})]})},ut=({children:z})=>{const{setNodeRef:J}=z9({id:"pdf-canvas"});return p.jsx("div",{ref:J,className:"relative",children:z})},ot=({field:z,isSelected:J,onUpdate:ge,onSelect:fe})=>{const je=$l(z.rect),[ct,rn,St,cr]=je,qr=St-ct,Jn=cr-rn,Zn=({target:Ze,transform:ze})=>{const _t=no([ze.x,ze.y,ze.x+qr,ze.y+Jn]).map(kt=>Xg(kt)),et=Qg($l(_t),Ee,w),$t=no(et);ge({...z,rect:$t})},Fe=({target:Ze,width:ze,height:_t,drag:et})=>{const $t=no([et.x,et.y,et.x+ze,et.y+_t]).map(Cr=>Xg(Cr)),kt=Qg($l($t),Ee,w),Xt=Cx(kt,24,16),Qt=no(Xt);ge({...z,rect:Qt})};return p.jsxs(p.Fragment,{children:[p.jsx("div",{"data-field-id":z.id,className:`field-box ${J?"selected":""}`,style:{position:"absolute",left:ct,top:rn,width:qr,height:Jn,cursor:"move"},onClick:()=>fe(z.id),children:p.jsxs("div",{className:"field-label",children:[p.jsx("div",{className:"field-type-indicator",children:z.type}),z.label||z.id]})}),J&&p.jsx(xU,{target:document.querySelector(`[data-field-id="${z.id}"]`),draggable:!0,resizable:!0,snappable:!0,snapGridWidth:8,snapGridHeight:8,bounds:Ee.current,zoom:w,onDrag:Zn,onResize:Fe,renderDirections:["nw","n","ne","w","e","sw","s","se"],elementGuidelines:l.fields.filter(Ze=>Ze.id!==z.id&&Ze.page===c).map(Ze=>{const ze=$l(Ze.rect);return{element:document.querySelector(`[data-field-id="${Ze.id}"]`),rect:{left:ze[0],top:ze[1],width:ze[2]-ze[0],height:ze[3]-ze[1]}}})})]})},Oe=l.fields.find(z=>z.id===y),nt=()=>{const z={id:`field_${Date.now()}`,label:"New Field",page:c,type:"text",rect:no([50,50,200,75]),fontSize:11,align:"left",shrink:!0,required:!1,placeholder:"",validation:{minLength:0,maxLength:100,pattern:"",customMessage:""}};u(J=>({...J,fields:[...J.fields,z]})),E(z.id),we()},Je=()=>{confirm("Delete all fields? This cannot be undone.")&&(u({fields:[]}),E(null),we())};return p.jsxs(N9,{onDragStart:pe,onDragEnd:Ce,children:[p.jsxs("div",{className:"mapper-container",children:[p.jsx("div",{className:"mapper-header",children:p.jsxs("div",{className:"header-content",children:[p.jsxs("div",{className:"header-left",children:[p.jsx("h1",{className:"header-title",children:"Field Mapper"}),p.jsxs("span",{className:"header-subtitle",children:[i,"/",s]}),p.jsxs("div",{className:"field-summary",children:[p.jsxs("span",{className:"total-fields",children:[l.fields.length," total fields"]}),p.jsxs("span",{className:"page-fields",children:[l.fields.filter(z=>z.page===c).length," on this page"]})]})]}),p.jsxs("div",{className:"header-right",children:[p.jsx("div",{className:`save-status ${Q===Bn.SAVED?"saved":Q===Bn.SAVING?"saving":Q===Bn.UNSAVED?"unsaved":"error"}`,children:Q===Bn.SAVED?"✓ Saved":Q===Bn.SAVING?"⏳ Saving...":Q===Bn.UNSAVED?"● Unsaved":"⚠ Error"}),p.jsx("button",{onClick:()=>q(),disabled:Q===Bn.SAVING,className:"btn-primary",children:"Save Now"}),p.jsx(za,{to:"/admin",className:"btn-secondary",children:"← Admin"})]})]})}),p.jsx("div",{className:"mapper-toolbar",children:p.jsxs("div",{className:"toolbar-content",children:[p.jsxs("div",{className:"page-navigation",children:[p.jsx("button",{disabled:c<=0,onClick:()=>d(z=>Math.max(0,z-1)),className:"btn-nav",children:"◀ Prev"}),p.jsxs("span",{className:"page-info",children:["Page ",c+1," / ",f]}),p.jsx("button",{disabled:c>=f-1,onClick:()=>d(z=>Math.min(f-1,z+1)),className:"btn-nav",children:"Next ▶"})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"zoom-controls",children:[p.jsx("button",{onClick:()=>C(Math.max(.5,w-.1)),className:"btn-zoom",disabled:w<=.5,children:"🔍−"}),p.jsxs("span",{className:"zoom-level",children:[Math.round(w*100),"%"]}),p.jsx("button",{onClick:()=>C(Math.min(3,w+.1)),className:"btn-zoom",disabled:w>=3,children:"🔍+"})]}),p.jsx("div",{className:"divider"}),p.jsxs("div",{className:"action-buttons",children:[p.jsx("button",{onClick:nt,className:"btn-action btn-add",children:"+ Add Field"}),p.jsx("input",{ref:xe,type:"file",accept:".pdf",onChange:ce,className:"hidden"}),p.jsx("button",{onClick:()=>{var z;return(z=xe.current)==null?void 0:z.click()},disabled:O,className:"btn-action btn-ai",children:"🤖 AI Detect"}),p.jsx("button",{onClick:Je,className:"btn-action btn-clear",children:"Clear All"})]}),p.jsxs("div",{className:"field-counter",children:[l.fields.filter(z=>z.page===c).length," fields on this page"]})]})}),p.jsxs("div",{className:"mapper-content",children:[p.jsx("div",{className:"pdf-canvas-container",children:p.jsx(ut,{children:p.jsxs("div",{ref:Ee,className:"pdf-canvas",style:{transform:`scale(${w})`,transformOrigin:"top left"},children:[v&&p.jsx("img",{ref:ue,src:v,alt:`Page ${c+1}`,className:"pdf-image"}),l.fields.filter(z=>z.page===c).map(z=>p.jsx(ot,{field:z,isSelected:y===z.id,onUpdate:ve,onSelect:E},z.id))]})})}),p.jsx("div",{className:"mapper-sidebar",children:p.jsxs("div",{className:"sidebar-content",children:[p.jsxs("div",{className:"search-filter-section",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Search Fields"}),p.jsx("input",{type:"text",value:I,onChange:z=>N(z.target.value),className:"form-input",placeholder:"Search field labels..."})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Filter by Type"}),p.jsxs("select",{value:R,onChange:z=>x(z.target.value),className:"form-select",children:[p.jsx("option",{value:"all",children:"All Types"}),p.jsx("option",{value:"text",children:"Text Inputs"}),p.jsx("option",{value:"checkbox",children:"Checkboxes"}),p.jsx("option",{value:"signature",children:"Signatures"}),p.jsx("option",{value:"select",children:"Dropdowns"}),p.jsx("option",{value:"date",children:"Date Pickers"})]})]})]}),O&&p.jsxs("div",{className:"ai-progress",children:[p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${Y}%`}})}),p.jsxs("div",{className:"progress-text",children:[F==="analyzing"&&"🤖 AI analyzing PDF...",F==="mapping"&&"📋 Mapping fields...",F==="reviewing"&&"✅ Ready for review"]})]}),j&&p.jsxs("div",{className:"ai-error",children:["⚠️ ",j]}),(F==="reviewing"||F==="fields-ready")&&b.length>0&&p.jsxs("div",{className:"ai-field-tray",children:[p.jsxs("div",{className:"tray-header",children:[p.jsx("h3",{className:"tray-title",children:"AI Detected Fields"}),p.jsx("span",{className:"field-count",children:b.length})]}),F==="reviewing"&&p.jsxs("button",{onClick:Se,disabled:B.length===0,className:"apply-button",children:["Enable Dragging (",B.length," selected)"]}),p.jsx("div",{className:"field-list",children:b.map(z=>p.jsx(Ue,{field:z},z.id))})]}),Oe&&p.jsxs("div",{className:"field-editor",children:[p.jsx("h3",{className:"editor-title",children:"Edit Field"}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Label"}),p.jsx("input",{value:Oe.label||"",onChange:z=>ve({...Oe,label:z.target.value}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Type"}),p.jsxs("select",{value:Oe.type||"text",onChange:z=>ve({...Oe,type:z.target.value}),className:"form-select",children:[p.jsx("option",{value:"text",children:"Text Input"}),p.jsx("option",{value:"textarea",children:"Text Area"}),p.jsx("option",{value:"checkbox",children:"Checkbox"}),p.jsx("option",{value:"radio",children:"Radio Button"}),p.jsx("option",{value:"select",children:"Dropdown"}),p.jsx("option",{value:"signature",children:"Signature"}),p.jsx("option",{value:"date",children:"Date Picker"}),p.jsx("option",{value:"number",children:"Number Input"}),p.jsx("option",{value:"email",children:"Email Input"}),p.jsx("option",{value:"phone",children:"Phone Input"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Font Size"}),p.jsx("input",{type:"number",min:"8",max:"72",value:Oe.fontSize||11,onChange:z=>ve({...Oe,fontSize:parseInt(z.target.value)||11}),className:"form-input"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Alignment"}),p.jsxs("select",{value:Oe.align||"left",onChange:z=>ve({...Oe,align:z.target.value}),className:"form-select",children:[p.jsx("option",{value:"left",children:"Left"}),p.jsx("option",{value:"center",children:"Center"}),p.jsx("option",{value:"right",children:"Right"})]})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Required"}),p.jsx("input",{type:"checkbox",checked:Oe.required||!1,onChange:z=>ve({...Oe,required:z.target.checked}),className:"form-checkbox"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{className:"form-label",children:"Placeholder"}),p.jsx("input",{type:"text",value:Oe.placeholder||"",onChange:z=>ve({...Oe,placeholder:z.target.value}),className:"form-input",placeholder:"Enter placeholder text..."})]}),p.jsx("button",{onClick:()=>Re(Oe.id),className:"delete-button",children:"Delete Field"})]}),p.jsxs("div",{className:"quick-stats",children:[p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"Total Fields:"}),p.jsx("span",{className:"stat-value",children:l.fields.length})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"This Page:"}),p.jsx("span",{className:"stat-value",children:l.fields.filter(z=>z.page===c).length})]}),p.jsxs("div",{className:"stat-item",children:[p.jsx("span",{className:"stat-label",children:"AI Detected:"}),p.jsx("span",{className:"stat-value",children:b.length})]})]}),p.jsxs("div",{className:"keyboard-shortcuts",children:[p.jsx("h4",{className:"shortcuts-title",children:"Keyboard Shortcuts"}),p.jsxs("div",{className:"shortcuts-list",children:[p.jsxs("div",{className:"shortcut-item",children:[p.jsx("span",{className:"shortcut-key",children:"Ctrl/Cmd + S"}),p.jsx("span",{className:"shortcut-desc",children:"Save"})]}),p.jsxs("div",{className:"shortcut-item",children:[p.jsx("span",{className:"shortcut-key",children:"Delete"}),p.jsx("span",{className:"shortcut-desc",children:"Delete Field"})]}),p.jsxs("div",{className:"shortcut-item",children:[p.jsx("span",{className:"shortcut-key",children:"Escape"}),p.jsx("span",{className:"shortcut-desc",children:"Deselect"})]}),p.jsxs("div",{className:"shortcut-item",children:[p.jsx("span",{className:"shortcut-key",children:"N"}),p.jsx("span",{className:"shortcut-desc",children:"New Field"})]})]})]})]})})]})]}),p.jsx(Z9,{children:K?p.jsxs("div",{className:"drag-overlay",children:["Dragging: ",($e=b.find(z=>z.id===K))==null?void 0:$e.label]}):null})]})}const Jg=({children:t})=>{const{user:e,loading:n,isAdmin:r}=bn(),i=ci();return console.log("ProtectedAdminRoute:",{user:e,loading:n,isAdmin:r,location:i.pathname}),n?(console.log("ProtectedAdminRoute: Still loading..."),p.jsx("div",{className:"flex items-center justify-center min-h-screen",children:p.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})):!e||!r?(console.log("ProtectedAdminRoute: Access denied, redirecting to dashboard",{user:e==null?void 0:e.email,isAdmin:r}),p.jsx(ZC,{to:"/dashboard",state:{from:i},replace:!0})):(console.log("ProtectedAdminRoute: Access granted, rendering admin content"),t)};function i$(){return p.jsxs(F2,{children:[p.jsx(Yo,{path:"/dashboard/*",element:p.jsx(kz,{})}),p.jsx(Yo,{path:"/admin",element:p.jsx(Jg,{children:p.jsx(Nz,{})})}),p.jsx(Yo,{path:"/admin/mapper/:appId/:formId",element:p.jsx(Jg,{children:p.jsx(r$,{})})}),p.jsx(Yo,{path:"/admin/interview/:appId/:formId",element:p.jsx(Jg,{children:p.jsx(Rz,{})})}),p.jsx(Yo,{path:"*",element:p.jsx(ZC,{to:"/dashboard",replace:!0})})]})}const Ji={ANIMATING:"animating",SHOWN:"shown",HIDING:"hiding",HIDDEN:"hidden"},gi="fs-loader";function s$({children:t}){const e=Bh(),n=pI(),[r,i]=D.useState(!1),[s,o]=D.useState(!1),[a,l]=D.useState(!1),[u,c]=D.useState(null),[d,f]=D.useState("spinner-hidden"),[g,v]=D.useState("loader-content-info-hidden"),[m,S]=D.useState(Ji.ANIMATING),_=(u==null?void 0:u.preloader.title)||"",y=(u==null?void 0:u.preloader.subtitle)||"";D.useEffect(()=>{const x=e.resolvePath("/data/settings.json");fetch(x).then(w=>w.json()).then(w=>{c(w)})},[]),D.useEffect(()=>{if(!u)return;const x=u.preloader.enabled;if(i(x),!x){R();return}u&&a&&s&&E()},[a,s,u]);const E=()=>{n.clearAllWithTag(gi),i(!0),n.schedule(()=>{f("")},100,gi),n.schedule(()=>{v("")},500,gi),n.schedule(()=>{S(Ji.SHOWN),e.addClassToBody("body-with-image")},900,gi),n.schedule(()=>{I()},2500,gi)},I=()=>{let x=0;n.interval(()=>{if(x+=.2,x>=5){N();return}if(document.querySelectorAll("img").length<=2)return;e.didLoadAllImages()&&N()},200,gi)},N=()=>{n.clearAllWithTag(gi),S(Ji.HIDING),n.schedule(()=>{S(Ji.HIDDEN),i(!1)},400,gi)},R=()=>{e.addClassToBody("body-with-image"),n.clearAllWithTag(gi),S(Ji.HIDDEN),i(!1)};return console.log("Preloader loaded"),p.jsxs(p.Fragment,{children:[r&&p.jsx("div",{className:`loader loader-${m===Ji.ANIMATING||m===Ji.SHOWN?"visible":"hidden"}`,children:p.jsxs("div",{className:"loader-content text-white",children:[p.jsx("img",{src:e.resolvePath("/images/svg/pacman.svg"),onLoad:()=>{o(!0)},className:`spinner ${d}`,alt:"loader"}),p.jsxs("div",{className:`loader-content-info ${g}`,children:[p.jsxs("div",{className:"title-wrapper",children:[p.jsx("img",{src:e.resolvePath("/images/svg/logo.svg"),onLoad:()=>{l(!0)},className:"logo me-3",alt:"logo"}),p.jsx("h5",{dangerouslySetInnerHTML:{__html:_}})]}),p.jsx("p",{className:"opacity-50 text-4 text-center",dangerouslySetInnerHTML:{__html:y}})]})]})}),m!==Ji.ANIMATING&&p.jsx(p.Fragment,{children:t})]})}BC(document.getElementById("root")).render(p.jsx(D.StrictMode,{children:p.jsx(DO,{children:p.jsx(OO,{children:p.jsx(jO,{children:p.jsx(lO,{children:p.jsx(Y3,{children:p.jsx(K3,{children:p.jsx(s$,{children:p.jsx(i$,{})})})})})})})})}));
