(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L0={exports:{}},Kc={},j0={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ul=Symbol.for("react.element"),ck=Symbol.for("react.portal"),dk=Symbol.for("react.fragment"),hk=Symbol.for("react.strict_mode"),fk=Symbol.for("react.profiler"),pk=Symbol.for("react.provider"),mk=Symbol.for("react.context"),gk=Symbol.for("react.forward_ref"),yk=Symbol.for("react.suspense"),vk=Symbol.for("react.memo"),_k=Symbol.for("react.lazy"),Wy=Symbol.iterator;function wk(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var M0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V0=Object.assign,F0={};function mo(t,e,n){this.props=t,this.context=e,this.refs=F0,this.updater=n||M0}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U0(){}U0.prototype=mo.prototype;function Vp(t,e,n){this.props=t,this.context=e,this.refs=F0,this.updater=n||M0}var Fp=Vp.prototype=new U0;Fp.constructor=Vp;V0(Fp,mo.prototype);Fp.isPureReactComponent=!0;var qy=Array.isArray,z0=Object.prototype.hasOwnProperty,Up={current:null},B0={key:!0,ref:!0,__self:!0,__source:!0};function $0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z0.call(e,r)&&!B0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ul,type:t,key:s,ref:o,props:i,_owner:Up.current}}function Ek(t,e){return{$$typeof:ul,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ul}function xk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ky=/\/+/g;function oh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xk(""+t.key):e.toString(36)}function ku(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ul:case ck:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+oh(o,0):r,qy(i)?(n="",t!=null&&(n=t.replace(Ky,"$&/")+"/"),ku(i,e,n,"",function(c){return c})):i!=null&&(zp(i)&&(i=Ek(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ky,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+oh(s,a);o+=ku(s,e,n,l,i)}else if(l=wk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+oh(s,a++),o+=ku(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gl(t,e,n){if(t==null)return t;var r=[],i=0;return ku(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Cu={transition:null},Ik={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:Up};function H0(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Gl,forEach:function(t,e,n){Gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gl(t,function(){e++}),e},toArray:function(t){return Gl(t,function(e){return e})||[]},only:function(t){if(!zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=mo;Ee.Fragment=dk;Ee.Profiler=fk;Ee.PureComponent=Vp;Ee.StrictMode=hk;Ee.Suspense=yk;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ik;Ee.act=H0;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=V0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Up.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)z0.call(e,l)&&!B0.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ul,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:mk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pk,_context:t},t.Consumer=t};Ee.createElement=$0;Ee.createFactory=function(t){var e=$0.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:gk,render:t}};Ee.isValidElement=zp;Ee.lazy=function(t){return{$$typeof:_k,_payload:{_status:-1,_result:t},_init:Sk}};Ee.memo=function(t,e){return{$$typeof:vk,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};Ee.unstable_act=H0;Ee.useCallback=function(t,e){return Mt.current.useCallback(t,e)};Ee.useContext=function(t){return Mt.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Mt.current.useEffect(t,e)};Ee.useId=function(){return Mt.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Mt.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};Ee.useRef=function(t){return Mt.current.useRef(t)};Ee.useState=function(t){return Mt.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Mt.current.useTransition()};Ee.version="18.3.1";j0.exports=Ee;var D=j0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk=D,kk=Symbol.for("react.element"),Ck=Symbol.for("react.fragment"),Ak=Object.prototype.hasOwnProperty,Pk=Tk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rk={key:!0,ref:!0,__self:!0,__source:!0};function W0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ak.call(e,r)&&!Rk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kk,type:t,key:s,ref:o,props:i,_owner:Pk.current}}Kc.Fragment=Ck;Kc.jsx=W0;Kc.jsxs=W0;L0.exports=Kc;var h=L0.exports,q0={exports:{}},cn={},K0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,ee){var A=B.length;B.push(ee);e:for(;0<A;){var X=A-1>>>1,q=B[X];if(0<i(q,ee))B[X]=ee,B[A]=q,A=X;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ee=B[0],A=B.pop();if(A!==ee){B[0]=A;e:for(var X=0,q=B.length,P=q>>>1;X<P;){var J=2*(X+1)-1,re=B[J],se=J+1,ve=B[se];if(0>i(re,A))se<q&&0>i(ve,re)?(B[X]=ve,B[se]=A,X=se):(B[X]=re,B[J]=A,X=J);else if(se<q&&0>i(ve,A))B[X]=ve,B[se]=A,X=se;else break e}}return ee}function i(B,ee){var A=B.sortIndex-ee.sortIndex;return A!==0?A:B.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,m=3,g=!1,T=!1,w=!1,O=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=B)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function L(B){if(w=!1,x(B),!T)if(n(l)!==null)T=!0,te(V);else{var ee=n(c);ee!==null&&Z(L,ee.startTime-B)}}function V(B,ee){T=!1,w&&(w=!1,_(S),S=-1),g=!0;var A=m;try{for(x(ee),f=n(l);f!==null&&(!(f.expirationTime>ee)||B&&!I());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var q=X(f.expirationTime<=ee);ee=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(l)&&r(l),x(ee)}else r(l);f=n(l)}if(f!==null)var P=!0;else{var J=n(c);J!==null&&Z(L,J.startTime-ee),P=!1}return P}finally{f=null,m=A,g=!1}}var j=!1,b=null,S=-1,C=5,k=-1;function I(){return!(t.unstable_now()-k<C)}function N(){if(b!==null){var B=t.unstable_now();k=B;var ee=!0;try{ee=b(!0,B)}finally{ee?E():(j=!1,b=null)}}else j=!1}var E;if(typeof v=="function")E=function(){v(N)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=N,E=function(){$.postMessage(null)}}else E=function(){O(N,0)};function te(B){b=B,j||(j=!0,E())}function Z(B,ee){S=O(function(){B(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,te(V))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var A=m;m=ee;try{return B()}finally{m=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var A=m;m=B;try{return ee()}finally{m=A}},t.unstable_scheduleCallback=function(B,ee,A){var X=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?X+A:X):A=X,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=A+q,B={id:d++,callback:ee,priorityLevel:B,startTime:A,expirationTime:q,sortIndex:-1},A>X?(B.sortIndex=A,e(c,B),n(l)===null&&B===n(c)&&(w?(_(S),S=-1):w=!0,Z(L,A-X))):(B.sortIndex=q,e(l,B),T||g||(T=!0,te(V))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var ee=m;return function(){var A=m;m=ee;try{return B.apply(this,arguments)}finally{m=A}}}})(G0);K0.exports=G0;var bk=K0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=D,un=bk;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q0=new Set,ja={};function ss(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(ja[t]=e,t=0;t<e.length;t++)Q0.add(e[t])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,Dk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gy={},Qy={};function Ok(t){return of.call(Qy,t)?!0:of.call(Gy,t)?!1:Dk.test(t)?Qy[t]=!0:(Gy[t]=!0,!1)}function Lk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jk(t,e,n,r){if(e===null||typeof e>"u"||Lk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bp=/[\-:]([a-z])/g;function $p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bp,$p);vt[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bp,$p);vt[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bp,$p);vt[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hp(t,e,n,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jk(e,n,i,r)&&(n=null),r||i===null?Ok(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),As=Symbol.for("react.fragment"),Wp=Symbol.for("react.strict_mode"),af=Symbol.for("react.profiler"),Y0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),qp=Symbol.for("react.forward_ref"),lf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Kp=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),J0=Symbol.for("react.offscreen"),Yy=Symbol.iterator;function Go(t){return t===null||typeof t!="object"?null:(t=Yy&&t[Yy]||t["@@iterator"],typeof t=="function"?t:null)}var qe=Object.assign,ah;function aa(t){if(ah===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ah=e&&e[1]||""}return`
`+ah+t}var lh=!1;function uh(t,e){if(!t||lh)return"";lh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function Mk(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=uh(t.type,!1),t;case 11:return t=uh(t.type.render,!1),t;case 1:return t=uh(t.type,!0),t;default:return""}}function cf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case As:return"Fragment";case Cs:return"Portal";case af:return"Profiler";case Wp:return"StrictMode";case lf:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X0:return(t.displayName||"Context")+".Consumer";case Y0:return(t._context.displayName||"Context")+".Provider";case qp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kp:return e=t.displayName||null,e!==null?e:cf(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return cf(t(e))}catch{}}return null}function Vk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cf(e);case 8:return e===Wp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fk(t){var e=Z0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=Fk(t))}function eE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function df(t,e){var n=e.checked;return qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tE(t,e){e=e.checked,e!=null&&Hp(t,"checked",e,!1)}function hf(t,e){tE(t,e);var n=di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&ff(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ff(t,e,n){(e!=="number"||Zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var la=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(la(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function nE(t,e){var n=di(e.value),r=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ev(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xl,iE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xl=Xl||document.createElement("div"),Xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uk=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){Uk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function sE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function oE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var zk=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gf(t,e){if(e){if(zk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function yf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function Gp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _f=null,zs=null,Bs=null;function tv(t){if(t=hl(t)){if(typeof _f!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Jc(e),_f(t.stateNode,t.type,e))}}function aE(t){zs?Bs?Bs.push(t):Bs=[t]:zs=t}function lE(){if(zs){var t=zs,e=Bs;if(Bs=zs=null,tv(t),e)for(t=0;t<e.length;t++)tv(e[t])}}function uE(t,e){return t(e)}function cE(){}var ch=!1;function dE(t,e,n){if(ch)return t(e,n);ch=!0;try{return uE(t,e,n)}finally{ch=!1,(zs!==null||Bs!==null)&&(cE(),lE())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var wf=!1;if(yr)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){wf=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{wf=!1}function Bk(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var va=!1,ec=null,tc=!1,Ef=null,$k={onError:function(t){va=!0,ec=t}};function Hk(t,e,n,r,i,s,o,a,l){va=!1,ec=null,Bk.apply($k,arguments)}function Wk(t,e,n,r,i,s,o,a,l){if(Hk.apply(this,arguments),va){if(va){var c=ec;va=!1,ec=null}else throw Error(Q(198));tc||(tc=!0,Ef=c)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nv(t){if(os(t)!==t)throw Error(Q(188))}function qk(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nv(i),t;if(s===r)return nv(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function fE(t){return t=qk(t),t!==null?pE(t):null}function pE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=pE(t);if(e!==null)return e;t=t.sibling}return null}var mE=un.unstable_scheduleCallback,rv=un.unstable_cancelCallback,Kk=un.unstable_shouldYield,Gk=un.unstable_requestPaint,Je=un.unstable_now,Qk=un.unstable_getCurrentPriorityLevel,Qp=un.unstable_ImmediatePriority,gE=un.unstable_UserBlockingPriority,nc=un.unstable_NormalPriority,Yk=un.unstable_LowPriority,yE=un.unstable_IdlePriority,Gc=null,Hn=null;function Xk(t){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(Gc,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:eC,Jk=Math.log,Zk=Math.LN2;function eC(t){return t>>>=0,t===0?32:31-(Jk(t)/Zk|0)|0}var Jl=64,Zl=4194304;function ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ua(a):(s&=o,s!==0&&(r=ua(s)))}else o=n&~i,o!==0?r=ua(o):s!==0&&(r=ua(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pn(e),i=1<<n,r|=t[n],e&=~i;return r}function tC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=tC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vE(){var t=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),t}function dh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function rC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Re=0;function _E(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var wE,Xp,EE,xE,SE,Sf=!1,eu=[],Jr=null,Zr=null,ei=null,Fa=new Map,Ua=new Map,$r=[],iC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iv(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function Yo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hl(e),e!==null&&Xp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sC(t,e,n,r,i){switch(e){case"focusin":return Jr=Yo(Jr,t,e,n,r,i),!0;case"dragenter":return Zr=Yo(Zr,t,e,n,r,i),!0;case"mouseover":return ei=Yo(ei,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fa.set(s,Yo(Fa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,Yo(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function IE(t){var e=Fi(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=hE(n),e!==null){t.blockedOn=e,SE(t.priority,function(){EE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=If(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vf=r,n.target.dispatchEvent(r),vf=null}else return e=hl(n),e!==null&&Xp(e),t.blockedOn=n,!1;e.shift()}return!0}function sv(t,e,n){Au(t)&&n.delete(e)}function oC(){Sf=!1,Jr!==null&&Au(Jr)&&(Jr=null),Zr!==null&&Au(Zr)&&(Zr=null),ei!==null&&Au(ei)&&(ei=null),Fa.forEach(sv),Ua.forEach(sv)}function Xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Sf||(Sf=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,oC)))}function za(t){function e(i){return Xo(i,t)}if(0<eu.length){Xo(eu[0],t);for(var n=1;n<eu.length;n++){var r=eu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jr!==null&&Xo(Jr,t),Zr!==null&&Xo(Zr,t),ei!==null&&Xo(ei,t),Fa.forEach(e),Ua.forEach(e),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)IE(n),n.blockedOn===null&&$r.shift()}var $s=Ar.ReactCurrentBatchConfig,ic=!0;function aC(t,e,n,r){var i=Re,s=$s.transition;$s.transition=null;try{Re=1,Jp(t,e,n,r)}finally{Re=i,$s.transition=s}}function lC(t,e,n,r){var i=Re,s=$s.transition;$s.transition=null;try{Re=4,Jp(t,e,n,r)}finally{Re=i,$s.transition=s}}function Jp(t,e,n,r){if(ic){var i=If(t,e,n,r);if(i===null)Eh(t,e,r,sc,n),iv(t,r);else if(sC(i,t,e,n,r))r.stopPropagation();else if(iv(t,r),e&4&&-1<iC.indexOf(t)){for(;i!==null;){var s=hl(i);if(s!==null&&wE(s),s=If(t,e,n,r),s===null&&Eh(t,e,r,sc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Eh(t,e,r,null,n)}}var sc=null;function If(t,e,n,r){if(sc=null,t=Gp(r),t=Fi(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function TE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case Qp:return 1;case gE:return 4;case nc:case Yk:return 16;case yE:return 536870912;default:return 16}default:return 16}}var Qr=null,Zp=null,Pu=null;function kE(){if(Pu)return Pu;var t,e=Zp,n=e.length,r,i="value"in Qr?Qr.value:Qr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Pu=i.slice(t,1<r?1-r:void 0)}function Ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function ov(){return!1}function dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tu:ov,this.isPropagationStopped=ov,this}return qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},em=dn(go),dl=qe({},go,{view:0,detail:0}),uC=dn(dl),hh,fh,Jo,Qc=qe({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jo&&(Jo&&t.type==="mousemove"?(hh=t.screenX-Jo.screenX,fh=t.screenY-Jo.screenY):fh=hh=0,Jo=t),hh)},movementY:function(t){return"movementY"in t?t.movementY:fh}}),av=dn(Qc),cC=qe({},Qc,{dataTransfer:0}),dC=dn(cC),hC=qe({},dl,{relatedTarget:0}),ph=dn(hC),fC=qe({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),pC=dn(fC),mC=qe({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gC=dn(mC),yC=qe({},go,{data:0}),lv=dn(yC),vC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_C={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wC[t])?!!e[t]:!1}function tm(){return EC}var xC=qe({},dl,{key:function(t){if(t.key){var e=vC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_C[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tm,charCode:function(t){return t.type==="keypress"?Ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),SC=dn(xC),IC=qe({},Qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uv=dn(IC),TC=qe({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tm}),kC=dn(TC),CC=qe({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=dn(CC),PC=qe({},Qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RC=dn(PC),bC=[9,13,27,32],nm=yr&&"CompositionEvent"in window,_a=null;yr&&"documentMode"in document&&(_a=document.documentMode);var NC=yr&&"TextEvent"in window&&!_a,CE=yr&&(!nm||_a&&8<_a&&11>=_a),cv=" ",dv=!1;function AE(t,e){switch(t){case"keyup":return bC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function DC(t,e){switch(t){case"compositionend":return PE(e);case"keypress":return e.which!==32?null:(dv=!0,cv);case"textInput":return t=e.data,t===cv&&dv?null:t;default:return null}}function OC(t,e){if(Ps)return t==="compositionend"||!nm&&AE(t,e)?(t=kE(),Pu=Zp=Qr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return CE&&e.locale!=="ko"?null:e.data;default:return null}}var LC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LC[t.type]:e==="textarea"}function RE(t,e,n,r){aE(r),e=oc(e,"onChange"),0<e.length&&(n=new em("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wa=null,Ba=null;function jC(t){zE(t,0)}function Yc(t){var e=Ns(t);if(eE(e))return t}function MC(t,e){if(t==="change")return e}var bE=!1;if(yr){var mh;if(yr){var gh="oninput"in document;if(!gh){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),gh=typeof fv.oninput=="function"}mh=gh}else mh=!1;bE=mh&&(!document.documentMode||9<document.documentMode)}function pv(){wa&&(wa.detachEvent("onpropertychange",NE),Ba=wa=null)}function NE(t){if(t.propertyName==="value"&&Yc(Ba)){var e=[];RE(e,Ba,t,Gp(t)),dE(jC,e)}}function VC(t,e,n){t==="focusin"?(pv(),wa=e,Ba=n,wa.attachEvent("onpropertychange",NE)):t==="focusout"&&pv()}function FC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yc(Ba)}function UC(t,e){if(t==="click")return Yc(e)}function zC(t,e){if(t==="input"||t==="change")return Yc(e)}function BC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bn=typeof Object.is=="function"?Object.is:BC;function $a(t,e){if(bn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!of.call(e,i)||!bn(t[i],e[i]))return!1}return!0}function mv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gv(t,e){var n=mv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mv(n)}}function DE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?DE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OE(){for(var t=window,e=Zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zu(t.document)}return e}function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $C(t){var e=OE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&DE(n.ownerDocument.documentElement,n)){if(r!==null&&rm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gv(n,s);var o=gv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HC=yr&&"documentMode"in document&&11>=document.documentMode,Rs=null,Tf=null,Ea=null,kf=!1;function yv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kf||Rs==null||Rs!==Zu(r)||(r=Rs,"selectionStart"in r&&rm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ea&&$a(Ea,r)||(Ea=r,r=oc(Tf,"onSelect"),0<r.length&&(e=new em("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bs={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},yh={},LE={};yr&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function Xc(t){if(yh[t])return yh[t];if(!bs[t])return t;var e=bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LE)return yh[t]=e[n];return t}var jE=Xc("animationend"),ME=Xc("animationiteration"),VE=Xc("animationstart"),FE=Xc("transitionend"),UE=new Map,vv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){UE.set(t,e),ss(e,[t])}for(var vh=0;vh<vv.length;vh++){var _h=vv[vh],WC=_h.toLowerCase(),qC=_h[0].toUpperCase()+_h.slice(1);wi(WC,"on"+qC)}wi(jE,"onAnimationEnd");wi(ME,"onAnimationIteration");wi(VE,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(FE,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function _v(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Wk(r,e,void 0,t),t.currentTarget=null}function zE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_v(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_v(i,a,c),s=l}}}if(tc)throw t=Ef,tc=!1,Ef=null,t}function Fe(t,e){var n=e[bf];n===void 0&&(n=e[bf]=new Set);var r=t+"__bubble";n.has(r)||(BE(e,t,2,!1),n.add(r))}function wh(t,e,n){var r=0;e&&(r|=4),BE(n,t,r,e)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[ru]){t[ru]=!0,Q0.forEach(function(n){n!=="selectionchange"&&(KC.has(n)||wh(n,!1,t),wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ru]||(e[ru]=!0,wh("selectionchange",!1,e))}}function BE(t,e,n,r){switch(TE(e)){case 1:var i=aC;break;case 4:i=lC;break;default:i=Jp}n=i.bind(null,e,n,t),i=void 0,!wf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Eh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Fi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}dE(function(){var c=s,d=Gp(n),f=[];e:{var m=UE.get(t);if(m!==void 0){var g=em,T=t;switch(t){case"keypress":if(Ru(n)===0)break e;case"keydown":case"keyup":g=SC;break;case"focusin":T="focus",g=ph;break;case"focusout":T="blur",g=ph;break;case"beforeblur":case"afterblur":g=ph;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=kC;break;case jE:case ME:case VE:g=pC;break;case FE:g=AC;break;case"scroll":g=uC;break;case"wheel":g=RC;break;case"copy":case"cut":case"paste":g=gC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=uv}var w=(e&4)!==0,O=!w&&t==="scroll",_=w?m!==null?m+"Capture":null:m;w=[];for(var v=c,x;v!==null;){x=v;var L=x.stateNode;if(x.tag===5&&L!==null&&(x=L,_!==null&&(L=Va(v,_),L!=null&&w.push(Wa(v,L,x)))),O)break;v=v.return}0<w.length&&(m=new g(m,T,null,n,d),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==vf&&(T=n.relatedTarget||n.fromElement)&&(Fi(T)||T[vr]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=c,T=T?Fi(T):null,T!==null&&(O=os(T),T!==O||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=c),g!==T)){if(w=av,L="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=uv,L="onPointerLeave",_="onPointerEnter",v="pointer"),O=g==null?m:Ns(g),x=T==null?m:Ns(T),m=new w(L,v+"leave",g,n,d),m.target=O,m.relatedTarget=x,L=null,Fi(d)===c&&(w=new w(_,v+"enter",T,n,d),w.target=x,w.relatedTarget=O,L=w),O=L,g&&T)t:{for(w=g,_=T,v=0,x=w;x;x=vs(x))v++;for(x=0,L=_;L;L=vs(L))x++;for(;0<v-x;)w=vs(w),v--;for(;0<x-v;)_=vs(_),x--;for(;v--;){if(w===_||_!==null&&w===_.alternate)break t;w=vs(w),_=vs(_)}w=null}else w=null;g!==null&&wv(f,m,g,w,!1),T!==null&&O!==null&&wv(f,O,T,w,!0)}}e:{if(m=c?Ns(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var V=MC;else if(hv(m))if(bE)V=zC;else{V=FC;var j=VC}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=UC);if(V&&(V=V(t,c))){RE(f,V,n,d);break e}j&&j(t,m,c),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&ff(m,"number",m.value)}switch(j=c?Ns(c):window,t){case"focusin":(hv(j)||j.contentEditable==="true")&&(Rs=j,Tf=c,Ea=null);break;case"focusout":Ea=Tf=Rs=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,yv(f,n,d);break;case"selectionchange":if(HC)break;case"keydown":case"keyup":yv(f,n,d)}var b;if(nm)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ps?AE(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(CE&&n.locale!=="ko"&&(Ps||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ps&&(b=kE()):(Qr=d,Zp="value"in Qr?Qr.value:Qr.textContent,Ps=!0)),j=oc(c,S),0<j.length&&(S=new lv(S,t,null,n,d),f.push({event:S,listeners:j}),b?S.data=b:(b=PE(n),b!==null&&(S.data=b)))),(b=NC?DC(t,n):OC(t,n))&&(c=oc(c,"onBeforeInput"),0<c.length&&(d=new lv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=b))}zE(f,e)})}function Wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function oc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Va(t,n),s!=null&&r.unshift(Wa(t,s,i)),s=Va(t,e),s!=null&&r.push(Wa(t,s,i))),t=t.return}return r}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function wv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Va(n,s),l!=null&&o.unshift(Wa(n,l,a))):i||(l=Va(n,s),l!=null&&o.push(Wa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GC=/\r\n?/g,QC=/\u0000|\uFFFD/g;function Ev(t){return(typeof t=="string"?t:""+t).replace(GC,`
`).replace(QC,"")}function iu(t,e,n){if(e=Ev(e),Ev(t)!==e&&n)throw Error(Q(425))}function ac(){}var Cf=null,Af=null;function Pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rf=typeof setTimeout=="function"?setTimeout:void 0,YC=typeof clearTimeout=="function"?clearTimeout:void 0,xv=typeof Promise=="function"?Promise:void 0,XC=typeof queueMicrotask=="function"?queueMicrotask:typeof xv<"u"?function(t){return xv.resolve(null).then(t).catch(JC)}:Rf;function JC(t){setTimeout(function(){throw t})}function xh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);za(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+yo,qa="__reactProps$"+yo,vr="__reactContainer$"+yo,bf="__reactEvents$"+yo,ZC="__reactListeners$"+yo,eA="__reactHandles$"+yo;function Fi(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sv(t);t!==null;){if(n=t[Bn])return n;t=Sv(t)}return e}t=n,n=t.parentNode}return null}function hl(t){return t=t[Bn]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ns(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Jc(t){return t[qa]||null}var Nf=[],Ds=-1;function Ei(t){return{current:t}}function ze(t){0>Ds||(t.current=Nf[Ds],Nf[Ds]=null,Ds--)}function Le(t,e){Ds++,Nf[Ds]=t.current,t.current=e}var hi={},Pt=Ei(hi),qt=Ei(!1),Gi=hi;function Zs(t,e){var n=t.type.contextTypes;if(!n)return hi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kt(t){return t=t.childContextTypes,t!=null}function lc(){ze(qt),ze(Pt)}function Iv(t,e,n){if(Pt.current!==hi)throw Error(Q(168));Le(Pt,e),Le(qt,n)}function $E(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,Vk(t)||"Unknown",i));return qe({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,Gi=Pt.current,Le(Pt,t),Le(qt,qt.current),!0}function Tv(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=$E(t,e,Gi),r.__reactInternalMemoizedMergedChildContext=t,ze(qt),ze(Pt),Le(Pt,t)):ze(qt),Le(qt,n)}var ar=null,Zc=!1,Sh=!1;function HE(t){ar===null?ar=[t]:ar.push(t)}function tA(t){Zc=!0,HE(t)}function xi(){if(!Sh&&ar!==null){Sh=!0;var t=0,e=Re;try{var n=ar;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,Zc=!1}catch(i){throw ar!==null&&(ar=ar.slice(t+1)),mE(Qp,xi),i}finally{Re=e,Sh=!1}}return null}var Os=[],Ls=0,cc=null,dc=0,fn=[],pn=0,Qi=null,lr=1,ur="";function Li(t,e){Os[Ls++]=dc,Os[Ls++]=cc,cc=t,dc=e}function WE(t,e,n){fn[pn++]=lr,fn[pn++]=ur,fn[pn++]=Qi,Qi=t;var r=lr;t=ur;var i=32-Pn(r)-1;r&=~(1<<i),n+=1;var s=32-Pn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,lr=1<<32-Pn(e)+i|n<<i|r,ur=s+t}else lr=1<<s|n<<i|r,ur=t}function im(t){t.return!==null&&(Li(t,1),WE(t,1,0))}function sm(t){for(;t===cc;)cc=Os[--Ls],Os[Ls]=null,dc=Os[--Ls],Os[Ls]=null;for(;t===Qi;)Qi=fn[--pn],fn[pn]=null,ur=fn[--pn],fn[pn]=null,lr=fn[--pn],fn[pn]=null}var ln=null,sn=null,Be=!1,Cn=null;function qE(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,sn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,sn=null,!0):!1;default:return!1}}function Df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(Be){var e=sn;if(e){var n=e;if(!kv(t,e)){if(Df(t))throw Error(Q(418));e=ti(n.nextSibling);var r=ln;e&&kv(t,e)?qE(r,n):(t.flags=t.flags&-4097|2,Be=!1,ln=t)}}else{if(Df(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Be=!1,ln=t}}}function Cv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function su(t){if(t!==ln)return!1;if(!Be)return Cv(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pf(t.type,t.memoizedProps)),e&&(e=sn)){if(Df(t))throw KE(),Error(Q(418));for(;e;)qE(t,e),e=ti(e.nextSibling)}if(Cv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=ln?ti(t.stateNode.nextSibling):null;return!0}function KE(){for(var t=sn;t;)t=ti(t.nextSibling)}function eo(){sn=ln=null,Be=!1}function om(t){Cn===null?Cn=[t]:Cn.push(t)}var nA=Ar.ReactCurrentBatchConfig;function Zo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Av(t){var e=t._init;return e(t._payload)}function GE(t){function e(_,v){if(t){var x=_.deletions;x===null?(_.deletions=[v],_.flags|=16):x.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function r(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function i(_,v){return _=si(_,v),_.index=0,_.sibling=null,_}function s(_,v,x){return _.index=x,t?(x=_.alternate,x!==null?(x=x.index,x<v?(_.flags|=2,v):x):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,x,L){return v===null||v.tag!==6?(v=Rh(x,_.mode,L),v.return=_,v):(v=i(v,x),v.return=_,v)}function l(_,v,x,L){var V=x.type;return V===As?d(_,v,x.props.children,L,x.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===zr&&Av(V)===v.type)?(L=i(v,x.props),L.ref=Zo(_,v,x),L.return=_,L):(L=Mu(x.type,x.key,x.props,null,_.mode,L),L.ref=Zo(_,v,x),L.return=_,L)}function c(_,v,x,L){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=bh(x,_.mode,L),v.return=_,v):(v=i(v,x.children||[]),v.return=_,v)}function d(_,v,x,L,V){return v===null||v.tag!==7?(v=Wi(x,_.mode,L,V),v.return=_,v):(v=i(v,x),v.return=_,v)}function f(_,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rh(""+v,_.mode,x),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ql:return x=Mu(v.type,v.key,v.props,null,_.mode,x),x.ref=Zo(_,null,v),x.return=_,x;case Cs:return v=bh(v,_.mode,x),v.return=_,v;case zr:var L=v._init;return f(_,L(v._payload),x)}if(la(v)||Go(v))return v=Wi(v,_.mode,x,null),v.return=_,v;ou(_,v)}return null}function m(_,v,x,L){var V=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return V!==null?null:a(_,v,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ql:return x.key===V?l(_,v,x,L):null;case Cs:return x.key===V?c(_,v,x,L):null;case zr:return V=x._init,m(_,v,V(x._payload),L)}if(la(x)||Go(x))return V!==null?null:d(_,v,x,L,null);ou(_,x)}return null}function g(_,v,x,L,V){if(typeof L=="string"&&L!==""||typeof L=="number")return _=_.get(x)||null,a(v,_,""+L,V);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ql:return _=_.get(L.key===null?x:L.key)||null,l(v,_,L,V);case Cs:return _=_.get(L.key===null?x:L.key)||null,c(v,_,L,V);case zr:var j=L._init;return g(_,v,x,j(L._payload),V)}if(la(L)||Go(L))return _=_.get(x)||null,d(v,_,L,V,null);ou(v,L)}return null}function T(_,v,x,L){for(var V=null,j=null,b=v,S=v=0,C=null;b!==null&&S<x.length;S++){b.index>S?(C=b,b=null):C=b.sibling;var k=m(_,b,x[S],L);if(k===null){b===null&&(b=C);break}t&&b&&k.alternate===null&&e(_,b),v=s(k,v,S),j===null?V=k:j.sibling=k,j=k,b=C}if(S===x.length)return n(_,b),Be&&Li(_,S),V;if(b===null){for(;S<x.length;S++)b=f(_,x[S],L),b!==null&&(v=s(b,v,S),j===null?V=b:j.sibling=b,j=b);return Be&&Li(_,S),V}for(b=r(_,b);S<x.length;S++)C=g(b,_,S,x[S],L),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?S:C.key),v=s(C,v,S),j===null?V=C:j.sibling=C,j=C);return t&&b.forEach(function(I){return e(_,I)}),Be&&Li(_,S),V}function w(_,v,x,L){var V=Go(x);if(typeof V!="function")throw Error(Q(150));if(x=V.call(x),x==null)throw Error(Q(151));for(var j=V=null,b=v,S=v=0,C=null,k=x.next();b!==null&&!k.done;S++,k=x.next()){b.index>S?(C=b,b=null):C=b.sibling;var I=m(_,b,k.value,L);if(I===null){b===null&&(b=C);break}t&&b&&I.alternate===null&&e(_,b),v=s(I,v,S),j===null?V=I:j.sibling=I,j=I,b=C}if(k.done)return n(_,b),Be&&Li(_,S),V;if(b===null){for(;!k.done;S++,k=x.next())k=f(_,k.value,L),k!==null&&(v=s(k,v,S),j===null?V=k:j.sibling=k,j=k);return Be&&Li(_,S),V}for(b=r(_,b);!k.done;S++,k=x.next())k=g(b,_,S,k.value,L),k!==null&&(t&&k.alternate!==null&&b.delete(k.key===null?S:k.key),v=s(k,v,S),j===null?V=k:j.sibling=k,j=k);return t&&b.forEach(function(N){return e(_,N)}),Be&&Li(_,S),V}function O(_,v,x,L){if(typeof x=="object"&&x!==null&&x.type===As&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ql:e:{for(var V=x.key,j=v;j!==null;){if(j.key===V){if(V=x.type,V===As){if(j.tag===7){n(_,j.sibling),v=i(j,x.props.children),v.return=_,_=v;break e}}else if(j.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===zr&&Av(V)===j.type){n(_,j.sibling),v=i(j,x.props),v.ref=Zo(_,j,x),v.return=_,_=v;break e}n(_,j);break}else e(_,j);j=j.sibling}x.type===As?(v=Wi(x.props.children,_.mode,L,x.key),v.return=_,_=v):(L=Mu(x.type,x.key,x.props,null,_.mode,L),L.ref=Zo(_,v,x),L.return=_,_=L)}return o(_);case Cs:e:{for(j=x.key;v!==null;){if(v.key===j)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(_,v.sibling),v=i(v,x.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=bh(x,_.mode,L),v.return=_,_=v}return o(_);case zr:return j=x._init,O(_,v,j(x._payload),L)}if(la(x))return T(_,v,x,L);if(Go(x))return w(_,v,x,L);ou(_,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(_,v.sibling),v=i(v,x),v.return=_,_=v):(n(_,v),v=Rh(x,_.mode,L),v.return=_,_=v),o(_)):n(_,v)}return O}var to=GE(!0),QE=GE(!1),hc=Ei(null),fc=null,js=null,am=null;function lm(){am=js=fc=null}function um(t){var e=hc.current;ze(hc),t._currentValue=e}function Lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hs(t,e){fc=t,am=js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(am!==t)if(t={context:t,memoizedValue:e,next:null},js===null){if(fc===null)throw Error(Q(308));js=t,fc.dependencies={lanes:0,firstContext:t}}else js=js.next=t;return e}var Ui=null;function cm(t){Ui===null?Ui=[t]:Ui.push(t)}function YE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cm(e)):(n.next=i.next,i.next=n),e.interleaved=n,_r(t,r)}function _r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Br=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_r(t,n)}return i=r.interleaved,i===null?(e.next=e,cm(r)):(e.next=i.next,i.next=e),r.interleaved=e,_r(t,n)}function bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yp(t,n)}}function Pv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var i=t.updateQueue;Br=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,w=a;switch(m=e,g=n,w.tag){case 1:if(T=w.payload,typeof T=="function"){f=T.call(g,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=w.payload,m=typeof T=="function"?T.call(g,f,m):T,m==null)break e;f=qe({},f,m);break e;case 2:Br=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=f):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xi|=o,t.lanes=o,t.memoizedState=f}}function Rv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var fl={},Wn=Ei(fl),Ka=Ei(fl),Ga=Ei(fl);function zi(t){if(t===fl)throw Error(Q(174));return t}function hm(t,e){switch(Le(Ga,e),Le(Ka,t),Le(Wn,fl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}ze(Wn),Le(Wn,e)}function no(){ze(Wn),ze(Ka),ze(Ga)}function JE(t){zi(Ga.current);var e=zi(Wn.current),n=mf(e,t.type);e!==n&&(Le(Ka,t),Le(Wn,n))}function fm(t){Ka.current===t&&(ze(Wn),ze(Ka))}var He=Ei(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ih=[];function pm(){for(var t=0;t<Ih.length;t++)Ih[t]._workInProgressVersionPrimary=null;Ih.length=0}var Nu=Ar.ReactCurrentDispatcher,Th=Ar.ReactCurrentBatchConfig,Yi=0,We=null,st=null,ct=null,gc=!1,xa=!1,Qa=0,rA=0;function St(){throw Error(Q(321))}function mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bn(t[n],e[n]))return!1;return!0}function gm(t,e,n,r,i,s){if(Yi=s,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nu.current=t===null||t.memoizedState===null?aA:lA,t=n(r,i),xa){s=0;do{if(xa=!1,Qa=0,25<=s)throw Error(Q(301));s+=1,ct=st=null,e.updateQueue=null,Nu.current=uA,t=n(r,i)}while(xa)}if(Nu.current=yc,e=st!==null&&st.next!==null,Yi=0,ct=st=We=null,gc=!1,e)throw Error(Q(300));return t}function ym(){var t=Qa!==0;return Qa=0,t}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?We.memoizedState=ct=t:ct=ct.next=t,ct}function xn(){if(st===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ct===null?We.memoizedState:ct.next;if(e!==null)ct=e,st=t;else{if(t===null)throw Error(Q(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ct===null?We.memoizedState=ct=t:ct=ct.next=t}return ct}function Ya(t,e){return typeof e=="function"?e(t):e}function kh(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=st,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Yi&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,We.lanes|=d,Xi|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,bn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,We.lanes|=s,Xi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ch(t){var e=xn(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);bn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ZE(){}function ex(t,e){var n=We,r=xn(),i=e(),s=!bn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,vm(rx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ct!==null&&ct.memoizedState.tag&1){if(n.flags|=2048,Xa(9,nx.bind(null,n,r,i,e),void 0,null),dt===null)throw Error(Q(349));Yi&30||tx(n,e,i)}return i}function tx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nx(t,e,n,r){e.value=n,e.getSnapshot=r,ix(e)&&sx(t)}function rx(t,e,n){return n(function(){ix(e)&&sx(t)})}function ix(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bn(t,n)}catch{return!0}}function sx(t){var e=_r(t,1);e!==null&&Rn(e,t,1,-1)}function bv(t){var e=Fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:t},e.queue=t,t=t.dispatch=oA.bind(null,We,t),[e.memoizedState,t]}function Xa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ox(){return xn().memoizedState}function Du(t,e,n,r){var i=Fn();We.flags|=t,i.memoizedState=Xa(1|e,n,void 0,r===void 0?null:r)}function ed(t,e,n,r){var i=xn();r=r===void 0?null:r;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,r!==null&&mm(r,o.deps)){i.memoizedState=Xa(e,n,s,r);return}}We.flags|=t,i.memoizedState=Xa(1|e,n,s,r)}function Nv(t,e){return Du(8390656,8,t,e)}function vm(t,e){return ed(2048,8,t,e)}function ax(t,e){return ed(4,2,t,e)}function lx(t,e){return ed(4,4,t,e)}function ux(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cx(t,e,n){return n=n!=null?n.concat([t]):null,ed(4,4,ux.bind(null,e,t),n)}function _m(){}function dx(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hx(t,e){var n=xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fx(t,e,n){return Yi&21?(bn(n,e)||(n=vE(),We.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function iA(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Th.transition;Th.transition={};try{t(!1),e()}finally{Re=n,Th.transition=r}}function px(){return xn().memoizedState}function sA(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mx(t))gx(e,n);else if(n=YE(t,e,n,r),n!==null){var i=jt();Rn(n,t,r,i),yx(n,e,r)}}function oA(t,e,n){var r=ii(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mx(t))gx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,bn(a,o)){var l=e.interleaved;l===null?(i.next=i,cm(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=YE(t,e,i,r),n!==null&&(i=jt(),Rn(n,t,r,i),yx(n,e,r))}}function mx(t){var e=t.alternate;return t===We||e!==null&&e===We}function gx(t,e){xa=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yp(t,n)}}var yc={readContext:En,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},aA={readContext:En,useCallback:function(t,e){return Fn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:Nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Du(4194308,4,ux.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Du(4194308,4,t,e)},useInsertionEffect:function(t,e){return Du(4,2,t,e)},useMemo:function(t,e){var n=Fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sA.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=Fn();return t={current:t},e.memoizedState=t},useState:bv,useDebugValue:_m,useDeferredValue:function(t){return Fn().memoizedState=t},useTransition:function(){var t=bv(!1),e=t[0];return t=iA.bind(null,t[1]),Fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,i=Fn();if(Be){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),dt===null)throw Error(Q(349));Yi&30||tx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Nv(rx.bind(null,r,s,t),[t]),r.flags|=2048,Xa(9,nx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Fn(),e=dt.identifierPrefix;if(Be){var n=ur,r=lr;n=(r&~(1<<32-Pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lA={readContext:En,useCallback:dx,useContext:En,useEffect:vm,useImperativeHandle:cx,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:hx,useReducer:kh,useRef:ox,useState:function(){return kh(Ya)},useDebugValue:_m,useDeferredValue:function(t){var e=xn();return fx(e,st.memoizedState,t)},useTransition:function(){var t=kh(Ya)[0],e=xn().memoizedState;return[t,e]},useMutableSource:ZE,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1},uA={readContext:En,useCallback:dx,useContext:En,useEffect:vm,useImperativeHandle:cx,useInsertionEffect:ax,useLayoutEffect:lx,useMemo:hx,useReducer:Ch,useRef:ox,useState:function(){return Ch(Ya)},useDebugValue:_m,useDeferredValue:function(t){var e=xn();return st===null?e.memoizedState=t:fx(e,st.memoizedState,t)},useTransition:function(){var t=Ch(Ya)[0],e=xn().memoizedState;return[t,e]},useMutableSource:ZE,useSyncExternalStore:ex,useId:px,unstable_isNewReconciler:!1};function Tn(t,e){if(t&&t.defaultProps){e=qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var td={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=ii(t),s=fr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ni(t,s,i),e!==null&&(Rn(e,t,i,r),bu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=ii(t),s=fr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ni(t,s,i),e!==null&&(Rn(e,t,i,r),bu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=ii(t),i=fr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ni(t,i,r),e!==null&&(Rn(e,t,r,n),bu(e,t,r))}};function Dv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(i,s):!0}function vx(t,e,n){var r=!1,i=hi,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(i=Kt(e)?Gi:Pt.current,r=e.contextTypes,s=(r=r!=null)?Zs(t,i):hi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=td,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ov(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&td.enqueueReplaceState(e,e.state,null)}function Mf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},dm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=En(s):(s=Kt(e)?Gi:Pt.current,i.context=Zs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&td.enqueueReplaceState(i,i.state,null),pc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ro(t,e){try{var n="",r=e;do n+=Mk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ah(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cA=typeof WeakMap=="function"?WeakMap:Map;function _x(t,e,n){n=fr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_c||(_c=!0,Gf=r),Vf(t,e)},n}function wx(t,e,n){n=fr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Vf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vf(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Lv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new cA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=IA.bind(null,t,e,n),e.then(t,t))}function jv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fr(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var dA=Ar.ReactCurrentOwner,Wt=!1;function Lt(t,e,n,r){e.child=t===null?QE(e,null,n,r):to(e,t.child,n,r)}function Vv(t,e,n,r,i){n=n.render;var s=e.ref;return Hs(e,i),r=gm(t,e,n,r,s,i),n=ym(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(Be&&n&&im(e),e.flags|=1,Lt(t,e,r,i),e.child)}function Fv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Cm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Ex(t,e,s,r,i)):(t=Mu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(o,r)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=si(s,r),t.ref=e.ref,t.return=e,e.child=t}function Ex(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($a(s,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,wr(t,e,i)}return Ff(t,e,n,r,i)}function xx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Vs,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Vs,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Vs,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Vs,rn),rn|=r;return Lt(t,e,i,n),e.child}function Sx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ff(t,e,n,r,i){var s=Kt(n)?Gi:Pt.current;return s=Zs(e,s),Hs(e,i),n=gm(t,e,n,r,s,i),r=ym(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(Be&&r&&im(e),e.flags|=1,Lt(t,e,n,i),e.child)}function Uv(t,e,n,r,i){if(Kt(n)){var s=!0;uc(e)}else s=!1;if(Hs(e,i),e.stateNode===null)Ou(t,e),vx(e,n,r),Mf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Kt(n)?Gi:Pt.current,c=Zs(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Ov(e,o,r,c),Br=!1;var m=e.memoizedState;o.state=m,pc(e,r,o,i),l=e.memoizedState,a!==r||m!==l||qt.current||Br?(typeof d=="function"&&(jf(e,n,d,r),l=e.memoizedState),(a=Br||Dv(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XE(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Tn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=En(l):(l=Kt(n)?Gi:Pt.current,l=Zs(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Ov(e,o,r,l),Br=!1,m=e.memoizedState,o.state=m,pc(e,r,o,i);var T=e.memoizedState;a!==f||m!==T||qt.current||Br?(typeof g=="function"&&(jf(e,n,g,r),T=e.memoizedState),(c=Br||Dv(e,n,c,r,m,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Uf(t,e,n,r,s,i)}function Uf(t,e,n,r,i,s){Sx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Tv(e,n,!1),wr(t,e,s);r=e.stateNode,dA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,s),e.child=to(e,null,a,s)):Lt(t,e,a,s),e.memoizedState=r.state,i&&Tv(e,n,!0),e.child}function Ix(t){var e=t.stateNode;e.pendingContext?Iv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Iv(t,e.context,!1),hm(t,e.containerInfo)}function zv(t,e,n,r,i){return eo(),om(i),e.flags|=256,Lt(t,e,n,r),e.child}var zf={dehydrated:null,treeContext:null,retryLane:0};function Bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tx(t,e,n){var r=e.pendingProps,i=He.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(He,i&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=id(o,r,0,null),t=Wi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bf(n),e.memoizedState=zf,t):wm(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=si(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=si(a,s):(s=Wi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zf,r}return s=t.child,t=s.sibling,r=si(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wm(t,e){return e=id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function au(t,e,n,r){return r!==null&&om(r),to(e,t.child,null,n),t=wm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ah(Error(Q(422))),au(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=id({mode:"visible",children:r.children},i,0,null),s=Wi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=Bf(o),e.memoizedState=zf,s);if(!(e.mode&1))return au(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=Ah(s,r,void 0),au(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_r(t,i),Rn(r,t,i,-1))}return km(),r=Ah(Error(Q(421))),au(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,sn=ti(i.nextSibling),ln=e,Be=!0,Cn=null,t!==null&&(fn[pn++]=lr,fn[pn++]=ur,fn[pn++]=Qi,lr=t.id,ur=t.overflow,Qi=e),e=wm(e,r.children),e.flags|=4096,e)}function Bv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Lf(t.return,e,n)}function Ph(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function kx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Lt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bv(t,n,e);else if(t.tag===19)Bv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ph(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ph(e,!0,n,null,s);break;case"together":Ph(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fA(t,e,n){switch(e.tag){case 3:Ix(e),eo();break;case 5:JE(e);break;case 1:Kt(e.type)&&uc(e);break;case 4:hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(hc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?Tx(t,e,n):(Le(He,He.current&1),t=wr(t,e,n),t!==null?t.sibling:null);Le(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return kx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,xx(t,e,n)}return wr(t,e,n)}var Cx,$f,Ax,Px;Cx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$f=function(){};Ax=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zi(Wn.current);var s=null;switch(n){case"input":i=df(t,i),r=df(t,r),s=[];break;case"select":i=qe({},i,{value:void 0}),r=qe({},r,{value:void 0}),s=[];break;case"textarea":i=pf(t,i),r=pf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}gf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ja.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ja.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Fe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Px=function(t,e,n,r){n!==r&&(e.flags|=4)};function ea(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function It(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pA(t,e,n){var r=e.pendingProps;switch(sm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(e),null;case 1:return Kt(e.type)&&lc(),It(e),null;case 3:return r=e.stateNode,no(),ze(qt),ze(Pt),pm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cn!==null&&(Xf(Cn),Cn=null))),$f(t,e),It(e),null;case 5:fm(e);var i=zi(Ga.current);if(n=e.type,t!==null&&e.stateNode!=null)Ax(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return It(e),null}if(t=zi(Wn.current),su(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Bn]=e,r[qa]=s,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<ca.length;i++)Fe(ca[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Xy(r,s),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fe("invalid",r);break;case"textarea":Zy(r,s),Fe("invalid",r)}gf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&iu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&iu(r.textContent,a,t),i=["children",""+a]):ja.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Yl(r),Jy(r,s,!0);break;case"textarea":Yl(r),ev(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Bn]=e,t[qa]=r,Cx(t,e,!1,!1),e.stateNode=t;e:{switch(o=yf(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<ca.length;i++)Fe(ca[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":Xy(t,r),i=df(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=qe({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":Zy(t,r),i=pf(t,r),Fe("invalid",t);break;default:i=r}gf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?oE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&iE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ma(t,l):typeof l=="number"&&Ma(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ja.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Fe("scroll",t):l!=null&&Hp(t,s,l,o))}switch(n){case"input":Yl(t),Jy(t,r,!1);break;case"textarea":Yl(t),ev(t);break;case"option":r.value!=null&&t.setAttribute("value",""+di(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Us(t,!!r.multiple,s,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return It(e),null;case 6:if(t&&e.stateNode!=null)Px(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=zi(Ga.current),zi(Wn.current),su(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return It(e),null;case 13:if(ze(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&sn!==null&&e.mode&1&&!(e.flags&128))KE(),eo(),e.flags|=98560,s=!1;else if(s=su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[Bn]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;It(e),s=!1}else Cn!==null&&(Xf(Cn),Cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ot===0&&(ot=3):km())),e.updateQueue!==null&&(e.flags|=4),It(e),null);case 4:return no(),$f(t,e),t===null&&Ha(e.stateNode.containerInfo),It(e),null;case 10:return um(e.type._context),It(e),null;case 17:return Kt(e.type)&&lc(),It(e),null;case 19:if(ze(He),s=e.memoizedState,s===null)return It(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ea(s,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mc(t),o!==null){for(e.flags|=128,ea(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&Je()>io&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304)}else{if(!r)if(t=mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ea(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return It(e),null}else 2*Je()-s.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,ea(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Je(),e.sibling=null,n=He.current,Le(He,r?n&1|2:n&1),e):(It(e),null);case 22:case 23:return Tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(It(e),e.subtreeFlags&6&&(e.flags|=8192)):It(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function mA(t,e){switch(sm(e),e.tag){case 1:return Kt(e.type)&&lc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),ze(qt),ze(Pt),pm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fm(e),null;case 13:if(ze(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(He),null;case 4:return no(),null;case 10:return um(e.type._context),null;case 22:case 23:return Tm(),null;case 24:return null;default:return null}}var lu=!1,Ct=!1,gA=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Ms(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Hf(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var $v=!1;function yA(t,e){if(Cf=ic,t=OE(),rm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Af={focusedElem:t,selectionRange:n},ic=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var w=T.memoizedProps,O=T.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:Tn(e.type,w),O);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(L){Qe(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return T=$v,$v=!1,T}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hf(e,n,s)}i=i.next}while(i!==r)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rx(t){var e=t.alternate;e!==null&&(t.alternate=null,Rx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[qa],delete e[bf],delete e[ZC],delete e[eA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bx(t){return t.tag===5||t.tag===3||t.tag===4}function Hv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}function Kf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}var ft=null,kn=!1;function Mr(t,e,n){for(n=n.child;n!==null;)Nx(t,e,n),n=n.sibling}function Nx(t,e,n){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(Gc,n)}catch{}switch(n.tag){case 5:Ct||Ms(n,e);case 6:var r=ft,i=kn;ft=null,Mr(t,e,n),ft=r,kn=i,ft!==null&&(kn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(kn?(t=ft,n=n.stateNode,t.nodeType===8?xh(t.parentNode,n):t.nodeType===1&&xh(t,n),za(t)):xh(ft,n.stateNode));break;case 4:r=ft,i=kn,ft=n.stateNode.containerInfo,kn=!0,Mr(t,e,n),ft=r,kn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hf(n,e,o),i=i.next}while(i!==r)}Mr(t,e,n);break;case 1:if(!Ct&&(Ms(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}Mr(t,e,n);break;case 21:Mr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,Mr(t,e,n),Ct=r):Mr(t,e,n);break;default:Mr(t,e,n)}}function Wv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gA),e.forEach(function(r){var i=kA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ft=a.stateNode,kn=!1;break e;case 3:ft=a.stateNode.containerInfo,kn=!0;break e;case 4:ft=a.stateNode.containerInfo,kn=!0;break e}a=a.return}if(ft===null)throw Error(Q(160));Nx(s,o,i),ft=null,kn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dx(e,t),e=e.sibling}function Dx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),Vn(t),r&4){try{Sa(3,t,t.return),nd(3,t)}catch(w){Qe(t,t.return,w)}try{Sa(5,t,t.return)}catch(w){Qe(t,t.return,w)}}break;case 1:In(e,t),Vn(t),r&512&&n!==null&&Ms(n,n.return);break;case 5:if(In(e,t),Vn(t),r&512&&n!==null&&Ms(n,n.return),t.flags&32){var i=t.stateNode;try{Ma(i,"")}catch(w){Qe(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tE(i,s),yf(a,o);var c=yf(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?oE(i,f):d==="dangerouslySetInnerHTML"?iE(i,f):d==="children"?Ma(i,f):Hp(i,d,f,c)}switch(a){case"input":hf(i,s);break;case"textarea":nE(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Us(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Us(i,!!s.multiple,s.defaultValue,!0):Us(i,!!s.multiple,s.multiple?[]:"",!1))}i[qa]=s}catch(w){Qe(t,t.return,w)}}break;case 6:if(In(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Qe(t,t.return,w)}}break;case 3:if(In(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(w){Qe(t,t.return,w)}break;case 4:In(e,t),Vn(t);break;case 13:In(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Sm=Je())),r&4&&Wv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||d,In(e,t),Ct=c):In(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(ae=t,d=t.child;d!==null;){for(f=ae=d;ae!==null;){switch(m=ae,g=m.child,m.tag){case 0:case 11:case 14:case 15:Sa(4,m,m.return);break;case 1:Ms(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(w){Qe(r,n,w)}}break;case 5:Ms(m,m.return);break;case 22:if(m.memoizedState!==null){Kv(f);continue}}g!==null?(g.return=m,ae=g):Kv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sE("display",o))}catch(w){Qe(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){Qe(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:In(e,t),Vn(t),r&4&&Wv(t);break;case 21:break;default:In(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bx(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var s=Hv(t);Kf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hv(t);qf(t,a,o);break;default:throw Error(Q(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vA(t,e,n){ae=t,Ox(t)}function Ox(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ct;a=lu;var c=Ct;if(lu=o,(Ct=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?Gv(i):l!==null?(l.return=o,ae=l):Gv(i);for(;s!==null;)ae=s,Ox(s),s=s.sibling;ae=i,lu=a,Ct=c}qv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):qv(t)}}function qv(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&za(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Ct||e.flags&512&&Wf(e)}catch(m){Qe(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Kv(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function Gv(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Qe(e,i,l)}}var s=e.return;try{Wf(e)}catch(l){Qe(e,s,l)}break;case 5:var o=e.return;try{Wf(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var _A=Math.ceil,vc=Ar.ReactCurrentDispatcher,Em=Ar.ReactCurrentOwner,_n=Ar.ReactCurrentBatchConfig,Te=0,dt=null,tt=null,yt=0,rn=0,Vs=Ei(0),ot=0,Ja=null,Xi=0,rd=0,xm=0,Ia=null,$t=null,Sm=0,io=1/0,or=null,_c=!1,Gf=null,ri=null,uu=!1,Yr=null,wc=0,Ta=0,Qf=null,Lu=-1,ju=0;function jt(){return Te&6?Je():Lu!==-1?Lu:Lu=Je()}function ii(t){return t.mode&1?Te&2&&yt!==0?yt&-yt:nA.transition!==null?(ju===0&&(ju=vE()),ju):(t=Re,t!==0||(t=window.event,t=t===void 0?16:TE(t.type)),t):1}function Rn(t,e,n,r){if(50<Ta)throw Ta=0,Qf=null,Error(Q(185));cl(t,n,r),(!(Te&2)||t!==dt)&&(t===dt&&(!(Te&2)&&(rd|=n),ot===4&&Hr(t,yt)),Gt(t,r),n===1&&Te===0&&!(e.mode&1)&&(io=Je()+500,Zc&&xi()))}function Gt(t,e){var n=t.callbackNode;nC(t,e);var r=rc(t,t===dt?yt:0);if(r===0)n!==null&&rv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rv(n),e===1)t.tag===0?tA(Qv.bind(null,t)):HE(Qv.bind(null,t)),XC(function(){!(Te&6)&&xi()}),n=null;else{switch(_E(r)){case 1:n=Qp;break;case 4:n=gE;break;case 16:n=nc;break;case 536870912:n=yE;break;default:n=nc}n=Bx(n,Lx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lx(t,e){if(Lu=-1,ju=0,Te&6)throw Error(Q(327));var n=t.callbackNode;if(Ws()&&t.callbackNode!==n)return null;var r=rc(t,t===dt?yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ec(t,r);else{e=r;var i=Te;Te|=2;var s=Mx();(dt!==t||yt!==e)&&(or=null,io=Je()+500,Hi(t,e));do try{xA();break}catch(a){jx(t,a)}while(!0);lm(),vc.current=s,Te=i,tt!==null?e=0:(dt=null,yt=0,e=ot)}if(e!==0){if(e===2&&(i=xf(t),i!==0&&(r=i,e=Yf(t,i))),e===1)throw n=Ja,Hi(t,0),Hr(t,r),Gt(t,Je()),n;if(e===6)Hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!wA(i)&&(e=Ec(t,r),e===2&&(s=xf(t),s!==0&&(r=s,e=Yf(t,s))),e===1))throw n=Ja,Hi(t,0),Hr(t,r),Gt(t,Je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:ji(t,$t,or);break;case 3:if(Hr(t,r),(r&130023424)===r&&(e=Sm+500-Je(),10<e)){if(rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rf(ji.bind(null,t,$t,or),e);break}ji(t,$t,or);break;case 4:if(Hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Pn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_A(r/1960))-r,10<r){t.timeoutHandle=Rf(ji.bind(null,t,$t,or),r);break}ji(t,$t,or);break;case 5:ji(t,$t,or);break;default:throw Error(Q(329))}}}return Gt(t,Je()),t.callbackNode===n?Lx.bind(null,t):null}function Yf(t,e){var n=Ia;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=Ec(t,e),t!==2&&(e=$t,$t=n,e!==null&&Xf(e)),t}function Xf(t){$t===null?$t=t:$t.push.apply($t,t)}function wA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!bn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~xm,e&=~rd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),r=1<<n;t[n]=-1,e&=~r}}function Qv(t){if(Te&6)throw Error(Q(327));Ws();var e=rc(t,0);if(!(e&1))return Gt(t,Je()),null;var n=Ec(t,e);if(t.tag!==0&&n===2){var r=xf(t);r!==0&&(e=r,n=Yf(t,r))}if(n===1)throw n=Ja,Hi(t,0),Hr(t,e),Gt(t,Je()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ji(t,$t,or),Gt(t,Je()),null}function Im(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(io=Je()+500,Zc&&xi())}}function Ji(t){Yr!==null&&Yr.tag===0&&!(Te&6)&&Ws();var e=Te;Te|=1;var n=_n.transition,r=Re;try{if(_n.transition=null,Re=1,t)return t()}finally{Re=r,_n.transition=n,Te=e,!(Te&6)&&xi()}}function Tm(){rn=Vs.current,ze(Vs)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YC(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(sm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lc();break;case 3:no(),ze(qt),ze(Pt),pm();break;case 5:fm(r);break;case 4:no();break;case 13:ze(He);break;case 19:ze(He);break;case 10:um(r.type._context);break;case 22:case 23:Tm()}n=n.return}if(dt=t,tt=t=si(t.current,null),yt=rn=e,ot=0,Ja=null,xm=rd=Xi=0,$t=Ia=null,Ui!==null){for(e=0;e<Ui.length;e++)if(n=Ui[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ui=null}return t}function jx(t,e){do{var n=tt;try{if(lm(),Nu.current=yc,gc){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gc=!1}if(Yi=0,ct=st=We=null,xa=!1,Qa=0,Em.current=null,n===null||n.return===null){ot=1,Ja=e,tt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=jv(o);if(g!==null){g.flags&=-257,Mv(g,o,a,s,e),g.mode&1&&Lv(s,c,e),e=g,l=c;var T=e.updateQueue;if(T===null){var w=new Set;w.add(l),e.updateQueue=w}else T.add(l);break e}else{if(!(e&1)){Lv(s,c,e),km();break e}l=Error(Q(426))}}else if(Be&&a.mode&1){var O=jv(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Mv(O,o,a,s,e),om(ro(l,a));break e}}s=l=ro(l,a),ot!==4&&(ot=2),Ia===null?Ia=[s]:Ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=_x(s,l,e);Pv(s,_);break e;case 1:a=l;var v=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ri===null||!ri.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=wx(s,a,e);Pv(s,L);break e}}s=s.return}while(s!==null)}Fx(n)}catch(V){e=V,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function Mx(){var t=vc.current;return vc.current=yc,t===null?yc:t}function km(){(ot===0||ot===3||ot===2)&&(ot=4),dt===null||!(Xi&268435455)&&!(rd&268435455)||Hr(dt,yt)}function Ec(t,e){var n=Te;Te|=2;var r=Mx();(dt!==t||yt!==e)&&(or=null,Hi(t,e));do try{EA();break}catch(i){jx(t,i)}while(!0);if(lm(),Te=n,vc.current=r,tt!==null)throw Error(Q(261));return dt=null,yt=0,ot}function EA(){for(;tt!==null;)Vx(tt)}function xA(){for(;tt!==null&&!Kk();)Vx(tt)}function Vx(t){var e=zx(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?Fx(t):tt=e,Em.current=null}function Fx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mA(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,tt=null;return}}else if(n=pA(n,e,rn),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);ot===0&&(ot=5)}function ji(t,e,n){var r=Re,i=_n.transition;try{_n.transition=null,Re=1,SA(t,e,n,r)}finally{_n.transition=i,Re=r}return null}function SA(t,e,n,r){do Ws();while(Yr!==null);if(Te&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rC(t,s),t===dt&&(tt=dt=null,yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,Bx(nc,function(){return Ws(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var o=Re;Re=1;var a=Te;Te|=4,Em.current=null,yA(t,n),Dx(n,t),$C(Af),ic=!!Cf,Af=Cf=null,t.current=n,vA(n),Gk(),Te=a,Re=o,_n.transition=s}else t.current=n;if(uu&&(uu=!1,Yr=t,wc=i),s=t.pendingLanes,s===0&&(ri=null),Xk(n.stateNode),Gt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_c)throw _c=!1,t=Gf,Gf=null,t;return wc&1&&t.tag!==0&&Ws(),s=t.pendingLanes,s&1?t===Qf?Ta++:(Ta=0,Qf=t):Ta=0,xi(),null}function Ws(){if(Yr!==null){var t=_E(wc),e=_n.transition,n=Re;try{if(_n.transition=null,Re=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,wc=0,Te&6)throw Error(Q(331));var i=Te;for(Te|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:Sa(8,d,s)}var f=d.child;if(f!==null)f.return=d,ae=f;else for(;ae!==null;){d=ae;var m=d.sibling,g=d.return;if(Rx(d),d===c){ae=null;break}if(m!==null){m.return=g,ae=m;break}ae=g}}}var T=s.alternate;if(T!==null){var w=T.child;if(w!==null){T.child=null;do{var O=w.sibling;w.sibling=null,w=O}while(w!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sa(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,ae=_;break e}ae=s.return}}var v=t.current;for(ae=v;ae!==null;){o=ae;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ae=x;else e:for(o=v;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:nd(9,a)}}catch(V){Qe(a,a.return,V)}if(a===o){ae=null;break e}var L=a.sibling;if(L!==null){L.return=a.return,ae=L;break e}ae=a.return}}if(Te=i,xi(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(Gc,t)}catch{}r=!0}return r}finally{Re=n,_n.transition=e}}return!1}function Yv(t,e,n){e=ro(n,e),e=_x(t,e,1),t=ni(t,e,1),e=jt(),t!==null&&(cl(t,1,e),Gt(t,e))}function Qe(t,e,n){if(t.tag===3)Yv(t,t,n);else for(;e!==null;){if(e.tag===3){Yv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=ro(n,t),t=wx(e,t,1),e=ni(e,t,1),t=jt(),e!==null&&(cl(e,1,t),Gt(e,t));break}}e=e.return}}function IA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(yt&n)===n&&(ot===4||ot===3&&(yt&130023424)===yt&&500>Je()-Sm?Hi(t,0):xm|=n),Gt(t,e)}function Ux(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var n=jt();t=_r(t,e),t!==null&&(cl(t,e,n),Gt(t,n))}function TA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ux(t,n)}function kA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Ux(t,n)}var zx;zx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,fA(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Be&&e.flags&1048576&&WE(e,dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ou(t,e),t=e.pendingProps;var i=Zs(e,Pt.current);Hs(e,n),i=gm(null,e,r,t,i,n);var s=ym();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(s=!0,uc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,dm(e),i.updater=td,e.stateNode=i,i._reactInternals=e,Mf(e,r,t,n),e=Uf(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&im(e),Lt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AA(r),t=Tn(r,t),i){case 0:e=Ff(null,e,r,t,n);break e;case 1:e=Uv(null,e,r,t,n);break e;case 11:e=Vv(null,e,r,t,n);break e;case 14:e=Fv(null,e,r,Tn(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Ff(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Uv(t,e,r,i,n);case 3:e:{if(Ix(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,XE(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ro(Error(Q(423)),e),e=zv(t,e,r,n,i);break e}else if(r!==i){i=ro(Error(Q(424)),e),e=zv(t,e,r,n,i);break e}else for(sn=ti(e.stateNode.containerInfo.firstChild),ln=e,Be=!0,Cn=null,n=QE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===i){e=wr(t,e,n);break e}Lt(t,e,r,n)}e=e.child}return e;case 5:return JE(e),t===null&&Of(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pf(r,i)?o=null:s!==null&&Pf(r,s)&&(e.flags|=32),Sx(t,e),Lt(t,e,o,n),e.child;case 6:return t===null&&Of(e),null;case 13:return Tx(t,e,n);case 4:return hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=to(e,null,r,n):Lt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Vv(t,e,r,i,n);case 7:return Lt(t,e,e.pendingProps,n),e.child;case 8:return Lt(t,e,e.pendingProps.children,n),e.child;case 12:return Lt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(hc,r._currentValue),r._currentValue=o,s!==null)if(bn(s.value,o)){if(s.children===i.children&&!qt.current){e=wr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Lt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Hs(e,n),i=En(i),r=r(i),e.flags|=1,Lt(t,e,r,n),e.child;case 14:return r=e.type,i=Tn(r,e.pendingProps),i=Tn(r.type,i),Fv(t,e,r,i,n);case 15:return Ex(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Tn(r,i),Ou(t,e),e.tag=1,Kt(r)?(t=!0,uc(e)):t=!1,Hs(e,n),vx(e,r,i),Mf(e,r,i,n),Uf(null,e,r,!0,t,n);case 19:return kx(t,e,n);case 22:return xx(t,e,n)}throw Error(Q(156,e.tag))};function Bx(t,e){return mE(t,e)}function CA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new CA(t,e,n,r)}function Cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AA(t){if(typeof t=="function")return Cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qp)return 11;if(t===Kp)return 14}return 2}function si(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Cm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case As:return Wi(n.children,i,s,e);case Wp:o=8,i|=8;break;case af:return t=vn(12,n,e,i|2),t.elementType=af,t.lanes=s,t;case lf:return t=vn(13,n,e,i),t.elementType=lf,t.lanes=s,t;case uf:return t=vn(19,n,e,i),t.elementType=uf,t.lanes=s,t;case J0:return id(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y0:o=10;break e;case X0:o=9;break e;case qp:o=11;break e;case Kp:o=14;break e;case zr:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=vn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wi(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function id(t,e,n,r){return t=vn(22,t,r,e),t.elementType=J0,t.lanes=n,t.stateNode={isHidden:!1},t}function Rh(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function bh(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dh(0),this.expirationTimes=dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Am(t,e,n,r,i,s,o,a,l){return t=new PA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dm(s),t}function RA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $x(t){if(!t)return hi;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Kt(n))return $E(t,n,e)}return e}function Hx(t,e,n,r,i,s,o,a,l){return t=Am(n,r,!0,t,i,s,o,a,l),t.context=$x(null),n=t.current,r=jt(),i=ii(n),s=fr(r,i),s.callback=e??null,ni(n,s,i),t.current.lanes=i,cl(t,i,r),Gt(t,r),t}function sd(t,e,n,r){var i=e.current,s=jt(),o=ii(i);return n=$x(n),e.context===null?e.context=n:e.pendingContext=n,e=fr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(i,e,o),t!==null&&(Rn(t,i,o,s),bu(t,i,o)),o}function xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pm(t,e){Xv(t,e),(t=t.alternate)&&Xv(t,e)}function bA(){return null}var Wx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rm(t){this._internalRoot=t}od.prototype.render=Rm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));sd(t,e,null,null)};od.prototype.unmount=Rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){sd(null,t,null,null)}),e[vr]=null}};function od(t){this._internalRoot=t}od.prototype.unstable_scheduleHydration=function(t){if(t){var e=xE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$r.length&&e!==0&&e<$r[n].priority;n++);$r.splice(n,0,t),n===0&&IE(t)}};function bm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jv(){}function NA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xc(o);s.call(c)}}var o=Hx(e,r,t,0,null,!1,!1,"",Jv);return t._reactRootContainer=o,t[vr]=o.current,Ha(t.nodeType===8?t.parentNode:t),Ji(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=xc(l);a.call(c)}}var l=Am(t,0,!1,null,null,!1,!1,"",Jv);return t._reactRootContainer=l,t[vr]=l.current,Ha(t.nodeType===8?t.parentNode:t),Ji(function(){sd(e,l,n,r)}),l}function ld(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=xc(o);a.call(l)}}sd(e,o,t,i)}else o=NA(n,e,t,i,r);return xc(o)}wE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ua(e.pendingLanes);n!==0&&(Yp(e,n|1),Gt(e,Je()),!(Te&6)&&(io=Je()+500,xi()))}break;case 13:Ji(function(){var r=_r(t,1);if(r!==null){var i=jt();Rn(r,t,1,i)}}),Pm(t,1)}};Xp=function(t){if(t.tag===13){var e=_r(t,134217728);if(e!==null){var n=jt();Rn(e,t,134217728,n)}Pm(t,134217728)}};EE=function(t){if(t.tag===13){var e=ii(t),n=_r(t,e);if(n!==null){var r=jt();Rn(n,t,e,r)}Pm(t,e)}};xE=function(){return Re};SE=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};_f=function(t,e,n){switch(e){case"input":if(hf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jc(r);if(!i)throw Error(Q(90));eE(r),hf(r,i)}}}break;case"textarea":nE(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};uE=Im;cE=Ji;var DA={usingClientEntryPoint:!1,Events:[hl,Ns,Jc,aE,lE,Im]},ta={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OA={bundleType:ta.bundleType,version:ta.version,rendererPackageName:ta.rendererPackageName,rendererConfig:ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fE(t),t===null?null:t.stateNode},findFiberByHostInstance:ta.findFiberByHostInstance||bA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{Gc=cu.inject(OA),Hn=cu}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DA;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(e))throw Error(Q(200));return RA(t,e,null,n)};cn.createRoot=function(t,e){if(!bm(t))throw Error(Q(299));var n=!1,r="",i=Wx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Am(t,1,!1,null,null,n,!1,r,i),t[vr]=e.current,Ha(t.nodeType===8?t.parentNode:t),new Rm(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=fE(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return Ji(t)};cn.hydrate=function(t,e,n){if(!ad(e))throw Error(Q(200));return ld(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!bm(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Wx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Hx(e,null,t,1,n??null,i,!1,s,o),t[vr]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new od(e)};cn.render=function(t,e,n){if(!ad(e))throw Error(Q(200));return ld(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!ad(t))throw Error(Q(40));return t._reactRootContainer?(Ji(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};cn.unstable_batchedUpdates=Im;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ad(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return ld(t,e,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function qx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qx)}catch(t){console.error(t)}}qx(),q0.exports=cn;var LA=q0.exports,Kx,Zv=LA;Kx=Zv.createRoot,Zv.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e_="popstate";function jA(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Jf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Za(i)}return VA(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Nn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MA(){return Math.random().toString(36).substring(2,10)}function t_(t,e){return{usr:t.state,key:t.key,idx:e}}function Jf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?vo(e):e,state:n,key:e&&e.key||r||MA()}}function Za({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function VA(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let O=d(),_=O==null?null:O-c;c=O,l&&l({action:a,location:w.location,delta:_})}function m(O,_){a="PUSH";let v=Jf(w.location,O,_);c=d()+1;let x=t_(v,c),L=w.createHref(v);try{o.pushState(x,"",L)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;i.location.assign(L)}s&&l&&l({action:a,location:w.location,delta:1})}function g(O,_){a="REPLACE";let v=Jf(w.location,O,_);c=d();let x=t_(v,c),L=w.createHref(v);o.replaceState(x,"",L),s&&l&&l({action:a,location:w.location,delta:0})}function T(O){return FA(O)}let w={get action(){return a},get location(){return t(i,o)},listen(O){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(e_,f),l=O,()=>{i.removeEventListener(e_,f),l=null}},createHref(O){return e(i,O)},createURL:T,encodeLocation(O){let _=T(O);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(O){return o.go(O)}};return w}function FA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),$e(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Za(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Gx(t,e,n="/"){return UA(t,e,n,!1)}function UA(t,e,n,r){let i=typeof e=="string"?vo(e):e,s=Er(i.pathname||"/",n);if(s==null)return null;let o=Qx(t);zA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=JA(s);a=YA(o[l],c,r)}return a}function Qx(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&l)return;$e(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=pr([r,d.relativePath]),m=n.concat(d);o.children&&o.children.length>0&&($e(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Qx(o.children,e,m,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:GA(f,o.index),routesMeta:m})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of Yx(o.path))s(o,a,!0,c)}),e}function Yx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Yx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function zA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var BA=/^:[\w-]+$/,$A=3,HA=2,WA=1,qA=10,KA=-2,n_=t=>t==="*";function GA(t,e){let n=t.split("/"),r=n.length;return n.some(n_)&&(r+=KA),e&&(r+=HA),n.filter(i=>!n_(i)).reduce((i,s)=>i+(BA.test(s)?$A:s===""?WA:qA),r)}function QA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function YA(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=Sc({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Sc({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:pr([s,f.pathname]),pathnameBase:nP(pr([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=pr([s,f.pathnameBase]))}return o}function Sc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=XA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:d,isOptional:f},m)=>{if(d==="*"){let T=a[m]||"";o=s.slice(0,s.length-T.length).replace(/(.)\/+$/,"$1")}const g=a[m];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function XA(t,e=!1,n=!0){Nn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function JA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Er(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ZA(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?vo(t):t;return{pathname:n?n.startsWith("/")?n:eP(n,e):e,search:rP(r),hash:iP(i)}}function eP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Nh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nm(t){let e=tP(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Dm(t,e,n,r=!1){let i;typeof t=="string"?i=vo(t):(i={...t},$e(!i.pathname||!i.pathname.includes("?"),Nh("?","pathname","search",i)),$e(!i.pathname||!i.pathname.includes("#"),Nh("#","pathname","hash",i)),$e(!i.search||!i.search.includes("#"),Nh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=ZA(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var pr=t=>t.join("/").replace(/\/\/+/g,"/"),nP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Xx=["POST","PUT","PATCH","DELETE"];new Set(Xx);var oP=["GET",...Xx];new Set(oP);var _o=D.createContext(null);_o.displayName="DataRouter";var ud=D.createContext(null);ud.displayName="DataRouterState";D.createContext(!1);var Jx=D.createContext({isTransitioning:!1});Jx.displayName="ViewTransition";var aP=D.createContext(new Map);aP.displayName="Fetchers";var lP=D.createContext(null);lP.displayName="Await";var Ln=D.createContext(null);Ln.displayName="Navigation";var pl=D.createContext(null);pl.displayName="Location";var jn=D.createContext({outlet:null,matches:[],isDataRoute:!1});jn.displayName="Route";var Om=D.createContext(null);Om.displayName="RouteError";function uP(t,{relative:e}={}){$e(wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=D.useContext(Ln),{hash:i,pathname:s,search:o}=ml(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:pr([n,s])),r.createHref({pathname:a,search:o,hash:i})}function wo(){return D.useContext(pl)!=null}function er(){return $e(wo(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(pl).location}var Zx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function e1(t){D.useContext(Ln).static||D.useLayoutEffect(t)}function t1(){let{isDataRoute:t}=D.useContext(jn);return t?xP():cP()}function cP(){$e(wo(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(_o),{basename:e,navigator:n}=D.useContext(Ln),{matches:r}=D.useContext(jn),{pathname:i}=er(),s=JSON.stringify(Nm(r)),o=D.useRef(!1);return e1(()=>{o.current=!0}),D.useCallback((l,c={})=>{if(Nn(o.current,Zx),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=Dm(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:pr([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,s,i,t])}D.createContext(null);function n1(){let{matches:t}=D.useContext(jn),e=t[t.length-1];return e?e.params:{}}function ml(t,{relative:e}={}){let{matches:n}=D.useContext(jn),{pathname:r}=er(),i=JSON.stringify(Nm(n));return D.useMemo(()=>Dm(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function dP(t,e){return r1(t,e)}function r1(t,e,n,r){var _;$e(wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=D.useContext(Ln),{matches:s}=D.useContext(jn),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",d=o&&o.route;{let v=d&&d.path||"";i1(l,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=er(),m;if(e){let v=typeof e=="string"?vo(e):e;$e(c==="/"||((_=v.pathname)==null?void 0:_.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${v.pathname}" was given in the \`location\` prop.`),m=v}else m=f;let g=m.pathname||"/",T=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");T="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let w=Gx(t,{pathname:T});Nn(d||w!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Nn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=gP(w&&w.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:pr([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:pr([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&O?D.createElement(pl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},O):O}function hP(){let t=EP(),e=sP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,o)}var fP=D.createElement(hP,null),pP=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?D.createElement(jn.Provider,{value:this.props.routeContext},D.createElement(Om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mP({routeContext:t,match:e,children:n}){let r=D.useContext(_o);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(jn.Provider,{value:t},n)}function gP(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,s=n==null?void 0:n.errors;if(s!=null){let l=i.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);$e(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(n)for(let l=0;l<i.length;l++){let c=i[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:d,errors:f}=n,m=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||m){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,c,d)=>{let f,m=!1,g=null,T=null;n&&(f=s&&c.route.id?s[c.route.id]:void 0,g=c.route.errorElement||fP,o&&(a<0&&d===0?(i1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,T=null):a===d&&(m=!0,T=c.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,d+1)),O=()=>{let _;return f?_=g:m?_=T:c.route.Component?_=D.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=l,D.createElement(mP,{match:c,routeContext:{outlet:l,matches:w,isDataRoute:n!=null},children:_})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?D.createElement(pP,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:O(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):O()},null)}function Lm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yP(t){let e=D.useContext(_o);return $e(e,Lm(t)),e}function vP(t){let e=D.useContext(ud);return $e(e,Lm(t)),e}function _P(t){let e=D.useContext(jn);return $e(e,Lm(t)),e}function jm(t){let e=_P(t),n=e.matches[e.matches.length-1];return $e(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function wP(){return jm("useRouteId")}function EP(){var r;let t=D.useContext(Om),e=vP("useRouteError"),n=jm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function xP(){let{router:t}=yP("useNavigate"),e=jm("useNavigate"),n=D.useRef(!1);return e1(()=>{n.current=!0}),D.useCallback(async(i,s={})=>{Nn(n.current,Zx),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var r_={};function i1(t,e,n){!e&&!r_[t]&&(r_[t]=!0,Nn(!1,n))}D.memo(SP);function SP({routes:t,future:e,state:n}){return r1(t,void 0,n,e)}function s1({to:t,replace:e,state:n,relative:r}){$e(wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=D.useContext(Ln);Nn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=D.useContext(jn),{pathname:o}=er(),a=t1(),l=Dm(t,Nm(s),o,r==="path"),c=JSON.stringify(l);return D.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function Es(t){$e(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IP({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){$e(!wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=D.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=vo(n));let{pathname:l="/",search:c="",hash:d="",state:f=null,key:m="default"}=n,g=D.useMemo(()=>{let T=Er(l,o);return T==null?null:{location:{pathname:T,search:c,hash:d,state:f,key:m},navigationType:r}},[o,l,c,d,f,m,r]);return Nn(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:D.createElement(Ln.Provider,{value:a},D.createElement(pl.Provider,{children:e,value:g}))}function TP({children:t,location:e}){return dP(Zf(t),e)}function Zf(t,e=[]){let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Zf(r.props.children,s));return}$e(r.type===Es,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$e(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zf(r.props.children,s)),n.push(o)}),n}var Vu="get",Fu="application/x-www-form-urlencoded";function cd(t){return t!=null&&typeof t.tagName=="string"}function kP(t){return cd(t)&&t.tagName.toLowerCase()==="button"}function CP(t){return cd(t)&&t.tagName.toLowerCase()==="form"}function AP(t){return cd(t)&&t.tagName.toLowerCase()==="input"}function PP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RP(t,e){return t.button===0&&(!e||e==="_self")&&!PP(t)}var du=null;function bP(){if(du===null)try{new FormData(document.createElement("form"),0),du=!1}catch{du=!0}return du}var NP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dh(t){return t!=null&&!NP.has(t)?(Nn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fu}"`),null):t}function DP(t,e){let n,r,i,s,o;if(CP(t)){let a=t.getAttribute("action");r=a?Er(a,e):null,n=t.getAttribute("method")||Vu,i=Dh(t.getAttribute("enctype"))||Fu,s=new FormData(t)}else if(kP(t)||AP(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Er(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Vu,i=Dh(t.getAttribute("formenctype"))||Dh(a.getAttribute("enctype"))||Fu,s=new FormData(a,t),!bP()){let{name:c,type:d,value:f}=t;if(d==="image"){let m=c?`${c}.`:"";s.append(`${m}x`,"0"),s.append(`${m}y`,"0")}else c&&s.append(c,f)}}else{if(cd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Vu,r=null,i=Fu,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function OP(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&Er(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function LP(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jP(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function MP(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await LP(s,n);return o.links?o.links():[]}return[]}));return zP(r.flat(1).filter(jP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function i_(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var f;let d=r.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function VP(t,e,{includeHydrateFallback:n}={}){return FP(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function FP(t){return[...new Set(t)]}function UP(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function zP(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(UP(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function o1(){let t=D.useContext(_o);return Mm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function BP(){let t=D.useContext(ud);return Mm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Vm=D.createContext(void 0);Vm.displayName="FrameworkContext";function a1(){let t=D.useContext(Vm);return Mm(t,"You must render this element inside a <HydratedRouter> element"),t}function $P(t,e){let n=D.useContext(Vm),[r,i]=D.useState(!1),[s,o]=D.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,m=D.useRef(null);D.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=_=>{_.forEach(v=>{o(v.isIntersecting)})},O=new IntersectionObserver(w,{threshold:.5});return m.current&&O.observe(m.current),()=>{O.disconnect()}}},[t]),D.useEffect(()=>{if(r){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[r]);let g=()=>{i(!0)},T=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,m,{}]:[s,m,{onFocus:na(a,g),onBlur:na(l,T),onMouseEnter:na(c,g),onMouseLeave:na(d,T),onTouchStart:na(f,g)}]:[!1,m,{}]}function na(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function HP({page:t,...e}){let{router:n}=o1(),r=D.useMemo(()=>Gx(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?D.createElement(qP,{page:t,matches:r,...e}):null}function WP(t){let{manifest:e,routeModules:n}=a1(),[r,i]=D.useState([]);return D.useEffect(()=>{let s=!1;return MP(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function qP({page:t,matches:e,...n}){let r=er(),{manifest:i,routeModules:s}=a1(),{basename:o}=o1(),{loaderData:a,matches:l}=BP(),c=D.useMemo(()=>i_(t,e,l,i,r,"data"),[t,e,l,i,r]),d=D.useMemo(()=>i_(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=D.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let T=new Set,w=!1;if(e.forEach(_=>{var x;let v=i.routes[_.route.id];!v||!v.hasLoader||(!c.some(L=>L.route.id===_.route.id)&&_.route.id in a&&((x=s[_.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?w=!0:T.add(_.route.id))}),T.size===0)return[];let O=OP(t,o,"data");return w&&T.size>0&&O.searchParams.set("_routes",e.filter(_=>T.has(_.route.id)).map(_=>_.route.id).join(",")),[O.pathname+O.search]},[o,a,r,i,c,e,t,s]),m=D.useMemo(()=>VP(d,i),[d,i]),g=WP(d);return D.createElement(D.Fragment,null,f.map(T=>D.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...n})),m.map(T=>D.createElement("link",{key:T,rel:"modulepreload",href:T,...n})),g.map(({key:T,link:w})=>D.createElement("link",{key:T,nonce:n.nonce,...w})))}function KP(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l1&&(window.__reactRouterVersion="7.8.1")}catch{}function GP({basename:t,children:e,window:n}){let r=D.useRef();r.current==null&&(r.current=jA({window:n,v5Compat:!0}));let i=r.current,[s,o]=D.useState({action:i.action,location:i.location}),a=D.useCallback(l=>{D.startTransition(()=>o(l))},[o]);return D.useLayoutEffect(()=>i.listen(a),[i,a]),D.createElement(IP,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bi=D.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f,...m},g){let{basename:T}=D.useContext(Ln),w=typeof c=="string"&&u1.test(c),O,_=!1;if(typeof c=="string"&&w&&(O=c,l1))try{let C=new URL(window.location.href),k=c.startsWith("//")?new URL(C.protocol+c):new URL(c),I=Er(k.pathname,T);k.origin===C.origin&&I!=null?c=I+k.search+k.hash:_=!0}catch{Nn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=uP(c,{relative:i}),[x,L,V]=$P(r,m),j=JP(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function b(C){e&&e(C),C.defaultPrevented||j(C)}let S=D.createElement("a",{...m,...V,href:O||v,onClick:_||s?e:b,ref:KP(g,L),target:l,"data-discover":!w&&n==="render"?"true":void 0});return x&&!w?D.createElement(D.Fragment,null,S,D.createElement(HP,{page:v})):S});Bi.displayName="Link";var QP=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},d){let f=ml(o,{relative:c.relative}),m=er(),g=D.useContext(ud),{navigator:T,basename:w}=D.useContext(Ln),O=g!=null&&rR(f)&&a===!0,_=T.encodeLocation?T.encodeLocation(f).pathname:f.pathname,v=m.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,_=_.toLowerCase()),x&&w&&(x=Er(x,w)||x);const L=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let V=v===_||!i&&v.startsWith(_)&&v.charAt(L)==="/",j=x!=null&&(x===_||!i&&x.startsWith(_)&&x.charAt(_.length)==="/"),b={isActive:V,isPending:j,isTransitioning:O},S=V?e:void 0,C;typeof r=="function"?C=r(b):C=[r,V?"active":null,j?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let k=typeof s=="function"?s(b):s;return D.createElement(Bi,{...c,"aria-current":S,className:C,ref:d,style:k,to:o,viewTransition:a},typeof l=="function"?l(b):l)});QP.displayName="NavLink";var YP=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=Vu,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:f,...m},g)=>{let T=tR(),w=nR(a,{relative:c}),O=o.toLowerCase()==="get"?"get":"post",_=typeof a=="string"&&u1.test(a),v=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let L=x.nativeEvent.submitter,V=(L==null?void 0:L.getAttribute("formmethod"))||o;T(L||x.currentTarget,{fetcherKey:e,method:V,navigate:n,replace:i,state:s,relative:c,preventScrollReset:d,viewTransition:f})};return D.createElement("form",{ref:g,method:O,action:w,onSubmit:r?l:v,...m,"data-discover":!_&&t==="render"?"true":void 0})});YP.displayName="Form";function XP(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c1(t){let e=D.useContext(_o);return $e(e,XP(t)),e}function JP(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=t1(),l=er(),c=ml(t,{relative:s});return D.useCallback(d=>{if(RP(d,e)){d.preventDefault();let f=n!==void 0?n:Za(l)===Za(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var ZP=0,eR=()=>`__${String(++ZP)}__`;function tR(){let{router:t}=c1("useSubmit"),{basename:e}=D.useContext(Ln),n=wP();return D.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=DP(r,e);if(i.navigate===!1){let d=i.fetcherKey||eR();await t.fetch(d,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function nR(t,{relative:e}={}){let{basename:n}=D.useContext(Ln),r=D.useContext(jn);$e(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ml(t||".",{relative:e})},o=er();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:pr([n,s.pathname])),Za(s)}function rR(t,{relative:e}={}){let n=D.useContext(Jx);$e(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=c1("useViewTransitionState"),i=ml(t,{relative:e});if(!n.isTransitioning)return!1;let s=Er(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Er(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Sc(i.pathname,o)!=null||Sc(i.pathname,s)!=null}const dd=()=>{const t="/".replace(/\/$/,""),e=["rgb(255, 99, 132)","rgb(54, 162, 235)","rgb(255, 205, 86)","rgb(197,176,255)","rgb(142, 227, 197)","rgb(238, 183, 154)","rgb(164,205,253)","rgb(246,169,255)","rgb(171, 235, 198)","rgb(255, 201, 214)","rgb(209, 247, 200)","rgb(235, 214, 169)","rgb(174, 229, 248)","rgb(246, 224, 196)","rgb(255, 217, 232)"],n=I=>{document.body.classList.add(I)},r=I=>{document.body.classList.remove(I)},i=(I,N,E)=>Math.min(Math.max(I,N),E),s=I=>{const N=document.documentElement;return getComputedStyle(N).getPropertyValue("--bs-"+I).trim()},o=I=>{const N=document.documentElement;return getComputedStyle(N).getPropertyValue("--"+I).trim()},a=I=>I?(I.charAt(0)!=="/"&&(I="/"+I),t+I):null,l=(I,N)=>I?N:"",c=I=>I+new Date().getTime()+"-r-"+Math.random().toFixed(3).replace(".",""),d=(I,N)=>{if(N=N||0,!I)return!0;const E=I.getBoundingClientRect();return E?E.bottom+N<0||E.right+N<0||E.left-N>window.innerWidth||E.top-N>window.innerHeight:!0},f=()=>{const I=window.navigator.userAgent.toLowerCase();return/android/.test(I)},m=()=>{const I=window.navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(I)},g=()=>{const I=window.navigator.userAgent.toLowerCase();return/ipad/.test(I)},T=()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,w=()=>{const I=navigator.userAgent||navigator.vendor||window.opera;return/CriOS/.test(I)},O=()=>{const I=navigator.userAgent||navigator.vendor||window.opera;return/Firefox/.test(I)},_=()=>{const I=navigator.userAgent;return/^((?!chrome|android).)*safari/i.test(I)},v=I=>{if(typeof I!="string")return I;let N=I;return N=N.replace(/\*\*(.*?)\*\*/g,'<span class="text-highlight">$1</span>'),N},x=(I,N)=>I.length<=N?I:I.substring(0,N-5)+"(...)",L=I=>{const N=document.querySelectorAll(I||"img");let E=!0;return N.forEach(W=>{(!W.complete||W.naturalHeight===0)&&(E=!1)}),E},V=(I,N,E,W)=>{if(!I||I==="")return"";if(!I.includes("/"))return I;const $={year:"numeric",month:E?"short":"numeric",day:W?void 0:"numeric"},te=new Date(I);te.setDate(te.getDate()+1);let Z=te.toLocaleString(N,$);return Z=Z.charAt(0).toUpperCase()+Z.slice(1),Z};return{addClassToBody:n,removeClassFromBody:r,clamp:i,getBootstrapColor:s,getRootSCSSVariable:o,resolvePath:a,strIf:l,randomTag:c,isElementOutsideBounds:d,isAndroid:f,isIOS:m,isIPad:g,isTouchDevice:T,isChrome:w,isFirefox:O,isSafari:_,parseJsonText:v,limitTextSize:x,didLoadAllImages:L,formatDate:V,formatDateInterval:(I,N,E,W,$)=>{let te="";const Z=V(I,E,W,$),B=V(N,E,W,$);return Z!==""&&(te+=Z),B!==""&&(te.length!==0&&(te+="  "),te+=B),te},getYearsPassedSince:I=>{if(!I)return 0;const N=new Date(I),W=new Date-N,$=365.25*24*60*60*1e3;return W/$},isUrlExternal:I=>{const N=document.createElement("a");return N.href=I,N.hostname!==window.location.hostname},setPageScrollingEnabled:I=>{const N=document.body;I?(N.classList.remove("body-no-scroll"),N.classList.remove("position-fixed"),window.savedScrollY&&(window.scrollTo(0,window.savedScrollY),window.savedScrollY=null)):(window.savedScrollY=window.scrollY,N.classList.add("body-no-scroll"),m()&&N.classList.add("position-fixed"))},getColorForChart:I=>e[I]}};class gl{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const iR=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},mt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:iR()},Fm=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},sR=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Fm(t);mt.publicKey=n.publicKey,mt.blockHeadless=n.blockHeadless,mt.storageProvider=n.storageProvider,mt.blockList=n.blockList,mt.limitRate=n.limitRate,mt.origin=n.origin||e},d1=async(t,e,n={})=>{const r=await fetch(mt.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),s=new gl(r.status,i);if(r.ok)return s;throw s},h1=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},oR=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},f1=t=>t.webdriver||!t.languages||t.languages.length===0,p1=()=>new gl(451,"Unavailable For Headless Browser"),aR=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},lR=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},uR=(t,e)=>t instanceof FormData?t.get(e):t[e],m1=(t,e)=>{if(lR(t))return!1;aR(t.list,t.watchVariable);const n=uR(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},g1=()=>new gl(403,"Forbidden"),cR=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},dR=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},y1=async(t,e,n)=>{if(!e.throttle||!n)return!1;cR(e.throttle,e.id);const r=e.id||t;return await dR(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},v1=()=>new gl(429,"Too Many Requests"),hR=async(t,e,n,r)=>{const i=Fm(r),s=i.publicKey||mt.publicKey,o=i.blockHeadless||mt.blockHeadless,a=i.storageProvider||mt.storageProvider,l={...mt.blockList,...i.blockList},c={...mt.limitRate,...i.limitRate};return o&&f1(navigator)?Promise.reject(p1()):(h1(s,t,e),oR(n),n&&m1(l,n)?Promise.reject(g1()):await y1(location.pathname,c,a)?Promise.reject(v1()):d1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},fR=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},pR=t=>typeof t=="string"?document.querySelector(t):t,mR=async(t,e,n,r)=>{const i=Fm(r),s=i.publicKey||mt.publicKey,o=i.blockHeadless||mt.blockHeadless,a=mt.storageProvider||i.storageProvider,l={...mt.blockList,...i.blockList},c={...mt.limitRate,...i.limitRate};if(o&&f1(navigator))return Promise.reject(p1());const d=pR(n);h1(s,t,e),fR(d);const f=new FormData(d);return m1(l,f)?Promise.reject(g1()):await y1(location.pathname,c,a)?Promise.reject(v1()):(f.append("lib_version","4.4.1"),f.append("service_id",t),f.append("template_id",e),f.append("user_id",s),d1("/api/v1.0/email/send-form",f))},s_={init:sR,send:hR,sendForm:mR,EmailJSResponseStatus:gl},ra={didInit:!1,config:null},gR=()=>{const t=r=>{s_.init(r.publicKey),ra.config=r,ra.didInit=!0},e=()=>ra.didInit;return{init:t,isInitialized:e,sendContactEmail:async(r,i,s,o)=>{if(!e())return;const a={from_name:r,from_email:i,custom_subject:s,message:o};try{const l=await s_.send(ra.config.serviceId,ra.config.templateId,a);return!0}catch{return!1}}}},_1=D.createContext(null),yR=()=>D.useContext(_1),o_={NOT_LOADED:0,LOADED:1},vR=({children:t})=>{const e=dd(),n=gR(),[r,i]=D.useState(o_.NOT_LOADED),[s,o]=D.useState({settings:{},strings:{},sections:[],categories:[]}),[a,l]=D.useState(!1);D.useEffect(()=>{c().then(v=>{})},[]),D.useEffect(()=>{s.settings&&(a||d(),s.settings.emailjs&&n.init(s.settings.emailjs))},[s]);const c=async()=>{const v=await f("/data/settings.json"),x=await f("/data/strings.json"),L=await f("/data/structure.json"),V=L.categories,j=L.sections;for(const S of j){const C=V.find(k=>k.id===S.categoryId);if(!C)throw new Error(`[DataProvider] The section with id "${S.id}" has an invalid categoryId "${S.categoryId}". There's no such category.`);S.category=C,S.content=await f(S.jsonPath)}const b=V.filter(S=>j.find(C=>C.categoryId===S.id));o(S=>({...S,settings:v,strings:x,categories:b,sections:L.sections})),i(o_.LOADED)},d=()=>{s.sections.length&&l(!0)},f=async v=>{const x=e.resolvePath(v);return(await fetch(x)).json()},m=()=>s.settings,g=()=>s.strings,T=()=>s.sections,w=()=>s.categories,O=v=>v?s.sections.filter(x=>x.categoryId===v.id):[],_=()=>{const v=m(),x=T(),L=[e.resolvePath(v.profile.logoUrl),e.resolvePath(v.profile.profilePictureUrl)];return x.forEach(V=>{!V.content||!V.content.articles||V.content.articles.forEach(j=>{j.items&&j.items.forEach(b=>{!b.icon||!b.icon.img||L.push(e.resolvePath(b.icon.img))})})}),L};return h.jsx(_1.Provider,{value:{getSettings:m,getStrings:g,getSections:T,getCategories:w,getCategorySections:O,listImagesForCache:_},children:t})},_R=D.createContext(null),wR=({children:t})=>{const e=dd(),{getSettings:n}=yR(),r=n(),[i,s]=D.useState([]),[o,a]=D.useState(!0),[l,c]=D.useState(!0),[d,f]=D.useState(null),[m,g]=D.useState(null),[T,w]=D.useState(null),[O,_]=D.useState(null);D.useEffect(()=>{a(!e.isTouchDevice()&&r.animatedCursorEnabled)},[]);const v=(B,ee)=>{if(i.find(X=>X.id===B))return;const A={id:B,message:ee};s(X=>[...X,A])},x=()=>i.length,L=()=>i,V=B=>{s(ee=>ee.filter(A=>A.id!==B))},j=()=>o,b=()=>l,S=()=>{c(!l)},C=(B,ee,A)=>{f({type:B,title:ee,message:A})},k=()=>{f(null)},I=(B,ee,A)=>{g({url:B,title:ee,description:A})},N=()=>{g(null)},E=(B,ee,A,X,q)=>{_({title:B,message:ee,cancelButtonLabel:A,confirmButtonLabel:X,onConfirm:q})},W=()=>{_(null)},$=(B,ee,A,X)=>{w({screenshots:B,aspectRatio:ee,title:A,description:X})},te=()=>{w(null)},Z=()=>x()||m||T||O;return h.jsx(_R.Provider,{value:{isShowingSpinner:x,listSpinnerActivities:L,showActivitySpinner:v,hideActivitySpinner:V,isAnimatedCursorEnabled:j,isAnimatedCursorActive:b,toggleAnimatedCursorActive:S,displayingNotification:d,displayNotification:C,killNotification:k,displayingYoutubeVideo:m,displayYoutubeVideo:I,hideYoutubeVideo:N,displayingGallery:T,displayGallery:$,hideGallery:te,pendingConfirmation:O,showConfirmationDialog:E,hideConfirmationDialog:W,isModalOpen:Z},children:t})},Di=[],Oi=[],w1=()=>({schedule:(i,s,o)=>{const a=setTimeout(i,s);Di.push({id:a,tag:o})},interval:(i,s,o)=>{const a=setInterval(i,s);Oi.push({id:a,tag:o})},clearAllWithTag:i=>{for(let s=Di.length-1;s>=0;s--)Di[s].tag===i&&(clearTimeout(Di[s].id),Di.splice(s,1));for(let s=Oi.length-1;s>=0;s--)Oi[s].tag===i&&(clearInterval(Oi[s].id),Oi.splice(s,1))},clearAll:()=>{Di.forEach(i=>{clearTimeout(i.id)}),Oi.forEach(i=>{clearInterval(i.id)}),Di.length=0,Oi.length=0}}),ER=D.createContext(null),_s={xxs:0,xs:360,sm:576,md:768,lg:992,xl:1200,xxl:1400},a_=.1,hu=dd(),Oh=w1(),xR=({children:t})=>{const[e,n]=D.useState(0),[r,i]=D.useState(0),[s,o]=D.useState(window.innerWidth),[a,l]=D.useState(window.innerHeight),[c,d]=D.useState(0),[f,m]=D.useState(!1);D.useEffect(()=>(g(),()=>{T()}),[]);const g=()=>{window.addEventListener("scroll",w),window.addEventListener("resize",O),window.addEventListener("keydown",v),w(),O(),Oh.clearAllWithTag("window-provider"),Oh.interval(()=>{_()},a_*1e3,"window-provider"),m(!0)},T=()=>{window.removeEventListener("scroll",w),window.removeEventListener("resize",O),window.removeEventListener("keydown",v),Oh.clearAllWithTag("window-provider"),m(!1)},w=()=>{n(window.scrollX),i(window.scrollY)},O=()=>{o(window.innerWidth),l(window.innerHeight)},_=()=>{d(S=>S+a_)},v=S=>{switch(S.key){case"ArrowUp":case"ArrowDown":b();break}},x=S=>s>=_s[S],L=()=>{const S=s;return S<_s.sm?"xs":S<_s.md?"sm":S<_s.lg?"md":S<_s.xl?"lg":S<_s.xxl?"xl":"xxl"},V=()=>!x(hu.getRootSCSSVariable("mobile-layout-breakpoint")||"md"),j=()=>hu.isIOS()&&hu.isChrome(),b=()=>{const S=document.querySelector(".custom-scrollable"),C=document.querySelector(".custom-modal");!S||hu.isTouchDevice()||C||S.focus()};return h.jsx(ER.Provider,{value:{scrollX:e,scrollY:r,innerWidth:s,innerHeight:a,currentTimeSpan:c,isBreakpoint:x,getBreakpoint:L,isMobileLayout:V,hasFooterOffset:j,focusMainView:b},children:f&&h.jsx(h.Fragment,{children:t})})},SR=()=>{};var l_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),r.push(n[d],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(E1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new TR;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const T=c<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kR=function(t){const e=E1(t);return x1.encodeByteArray(e,!0)},Ic=function(t){return kR(t).replace(/\./g,"")},S1=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>CR().__FIREBASE_DEFAULTS__,PR=()=>{if(typeof process>"u"||typeof l_>"u")return;const t=l_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S1(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return SR()||AR()||PR()||RR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I1=t=>{var e,n;return(n=(e=hd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bR=t=>{const e=I1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},T1=()=>{var t;return(t=hd())===null||t===void 0?void 0:t.config},k1=t=>{var e;return(e=hd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ic(JSON.stringify(n)),Ic(JSON.stringify(o)),""].join(".")}const ka={};function OR(){const t={prod:[],emulator:[]};for(const e of Object.keys(ka))ka[e]?t.emulator.push(e):t.prod.push(e);return t}function LR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let u_=!1;function A1(t,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||ka[t]===e||ka[t]||u_)return;ka[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=OR().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{u_=!0,o()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=LR(r),g=n("text"),T=document.getElementById(g)||document.createElement("span"),w=n("learnmore"),O=document.getElementById(w)||document.createElement("a"),_=n("preprendIcon"),v=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;a(x),d(O,w);const L=c();l(v,_),x.append(v,T,O,L),document.body.appendChild(x)}s?(T.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rt())}function MR(){var t;const e=(t=hd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zR(){const t=Rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BR(){return!MR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function HR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR="FirebaseError";class Pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WR,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?qR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pr(i,a,r)}}function qR(t,e){return t.replace(KR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const KR=/\{\$([^}]+)}/g;function GR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(c_(s)&&c_(o)){if(!xr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function c_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function da(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function ha(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function QR(t,e){const n=new YR(t,e);return n.subscribe.bind(n)}class YR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lh),i.error===void 0&&(i.error=Lh),i.complete===void 0&&(i.complete=Lh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new NR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eb(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZR(t){return t===Mi?void 0:t}function eb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const nb={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},rb=xe.INFO,ib={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},sb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ib[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=rb,this._logHandler=sb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const ob=(t,e)=>e.some(n=>t instanceof n);let d_,h_;function ab(){return d_||(d_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lb(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,ep=new WeakMap,R1=new WeakMap,jh=new WeakMap,zm=new WeakMap;function ub(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(oi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),zm.set(e,t),e}function cb(t){if(ep.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ep.set(t,e)}let tp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function db(t){tp=t(tp)}function hb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mh(this),e,...n);return R1.set(r,e.sort?e.sort():[e]),oi(r)}:lb().includes(t)?function(...e){return t.apply(Mh(this),e),oi(P1.get(this))}:function(...e){return oi(t.apply(Mh(this),e))}}function fb(t){return typeof t=="function"?hb(t):(t instanceof IDBTransaction&&cb(t),ob(t,ab())?new Proxy(t,tp):t)}function oi(t){if(t instanceof IDBRequest)return ub(t);if(jh.has(t))return jh.get(t);const e=fb(t);return e!==t&&(jh.set(t,e),zm.set(e,t)),e}const Mh=t=>zm.get(t);function pb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=oi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(oi(o.result),l.oldVersion,l.newVersion,oi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const mb=["get","getKey","getAll","getAllKeys","count"],gb=["put","add","delete","clear"],Vh=new Map;function f_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=gb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||mb.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Vh.set(e,s),s}db(t=>({...t,get:(e,n,r)=>f_(e,n)||t.get(e,n,r),has:(e,n)=>!!f_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const np="@firebase/app",p_="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Um("@firebase/app"),_b="@firebase/app-compat",wb="@firebase/analytics-compat",Eb="@firebase/analytics",xb="@firebase/app-check-compat",Sb="@firebase/app-check",Ib="@firebase/auth",Tb="@firebase/auth-compat",kb="@firebase/database",Cb="@firebase/data-connect",Ab="@firebase/database-compat",Pb="@firebase/functions",Rb="@firebase/functions-compat",bb="@firebase/installations",Nb="@firebase/installations-compat",Db="@firebase/messaging",Ob="@firebase/messaging-compat",Lb="@firebase/performance",jb="@firebase/performance-compat",Mb="@firebase/remote-config",Vb="@firebase/remote-config-compat",Fb="@firebase/storage",Ub="@firebase/storage-compat",zb="@firebase/firestore",Bb="@firebase/ai",$b="@firebase/firestore-compat",Hb="firebase",Wb="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]",qb={[np]:"fire-core",[_b]:"fire-core-compat",[Eb]:"fire-analytics",[wb]:"fire-analytics-compat",[Sb]:"fire-app-check",[xb]:"fire-app-check-compat",[Ib]:"fire-auth",[Tb]:"fire-auth-compat",[kb]:"fire-rtdb",[Cb]:"fire-data-connect",[Ab]:"fire-rtdb-compat",[Pb]:"fire-fn",[Rb]:"fire-fn-compat",[bb]:"fire-iid",[Nb]:"fire-iid-compat",[Db]:"fire-fcm",[Ob]:"fire-fcm-compat",[Lb]:"fire-perf",[jb]:"fire-perf-compat",[Mb]:"fire-rc",[Vb]:"fire-rc-compat",[Fb]:"fire-gcs",[Ub]:"fire-gcs-compat",[zb]:"fire-fst",[$b]:"fire-fst-compat",[Bb]:"fire-vertex","fire-js":"fire-js",[Hb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,Kb=new Map,ip=new Map;function m_(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function so(t){const e=t.name;if(ip.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,t);for(const n of Tc.values())m_(n,t);for(const n of Kb.values())m_(n,t);return!0}function Bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ai=new yl("app","Firebase",Gb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ai.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=Wb;function b1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ai.create("bad-app-name",{appName:String(i)});if(n||(n=T1()),!n)throw ai.create("no-options");const s=Tc.get(i);if(s){if(xr(n,s.options)&&xr(r,s.config))return s;throw ai.create("duplicate-app",{appName:i})}const o=new tb(i);for(const l of ip.values())o.addComponent(l);const a=new Qb(n,r,o);return Tc.set(i,a),a}function N1(t=rp){const e=Tc.get(t);if(!e&&t===rp&&T1())return b1();if(!e)throw ai.create("no-app",{appName:t});return e}function li(t,e,n){var r;let i=(r=qb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(a.join(" "));return}so(new Zi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="firebase-heartbeat-database",Xb=1,el="firebase-heartbeat-store";let Fh=null;function D1(){return Fh||(Fh=pb(Yb,Xb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw ai.create("idb-open",{originalErrorMessage:t.message})})),Fh}async function Jb(t){try{const n=(await D1()).transaction(el),r=await n.objectStore(el).get(O1(t));return await n.done,r}catch(e){if(e instanceof Pr)Sr.warn(e.message);else{const n=ai.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function g_(t,e){try{const r=(await D1()).transaction(el,"readwrite");await r.objectStore(el).put(e,O1(t)),await r.done}catch(n){if(n instanceof Pr)Sr.warn(n.message);else{const r=ai.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(r.message)}}}function O1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=1024,eN=30;class tN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=y_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>eN){const o=iN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=y_(),{heartbeatsToSend:r,unsentEntries:i}=nN(this._heartbeatsCache.heartbeats),s=Ic(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Sr.warn(n),""}}}function y_(){return new Date().toISOString().substring(0,10)}function nN(t,e=Zb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),v_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),v_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?HR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return g_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function v_(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}function iN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sN(t){so(new Zi("platform-logger",e=>new yb(e),"PRIVATE")),so(new Zi("heartbeat",e=>new tN(e),"PRIVATE")),li(np,p_,t),li(np,p_,"esm2017"),li("fire-js","")}sN("");var oN="firebase",aN="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(oN,aN,"app");function $m(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function L1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lN=L1,j1=new yl("auth","Firebase",L1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Um("@firebase/auth");function uN(t,...e){kc.logLevel<=xe.WARN&&kc.warn(`Auth (${xo}): ${t}`,...e)}function Uu(t,...e){kc.logLevel<=xe.ERROR&&kc.error(`Auth (${xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Hm(t,...e)}function qn(t,...e){return Hm(t,...e)}function M1(t,e,n){const r=Object.assign(Object.assign({},lN()),{[e]:n});return new yl("auth","Firebase",r).create(e,{appName:t.name})}function mr(t){return M1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j1.create(t,...e)}function ce(t,e,...n){if(!t)throw Hm(e,...n)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uu(e),new Error(e)}function Ir(t,e){t||cr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cN(){return __()==="http:"||__()==="https:"}function __(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cN()||FR()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ir(n>e,"Short delay should be less than long delay!"),this.isMobile=jR()||UR()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(t,e){Ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mN=new _l(3e4,6e4);function Si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rr(t,e,n,r,i={}){return F1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=vl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return VR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(c.credentials="include"),V1.fetch()(await U1(t,t.config.apiHost,n,a),c)})}async function F1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},fN),e);try{const i=new yN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw fu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw fu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw M1(t,d,c);Dn(t,d)}}catch(i){if(i instanceof Pr)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function wl(t,e,n,r,i={}){const s=await Rr(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function U1(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Wm(t.config,i):`${t.config.apiScheme}://${i}`;return pN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function gN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),mN.get())})}}function fu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qn(t,e,r);return i.customData._tokenResponse=n,i}function w_(t){return t!==void 0&&t.enterprise!==void 0}class vN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _N(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function Cc(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ca(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EN(t,e=!1){const n=it(t),r=await n.getIdToken(e),i=qm(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ca(Uh(i.auth_time)),issuedAtTime:Ca(Uh(i.iat)),expirationTime:Ca(Uh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Uh(t){return Number(t)*1e3}function qm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{const i=S1(n);return i?JSON.parse(i):(Uu("Failed to decode base64 JWT payload"),null)}catch(i){return Uu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E_(t){const e=qm(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pr&&xN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function xN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t){var e;const n=t.auth,r=await t.getIdToken(),i=await oo(t,Cc(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?z1(s.providerUserInfo):[],a=TN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new op(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function IN(t){const e=it(t);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z1(t){return t.map(e=>{var{providerId:n}=e,r=$m(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e){const n=await F1(t,{},async()=>{const r=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await U1(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Eo(t.emulatorConfig.host)&&(l.credentials="include"),V1.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function CN(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=E_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await kN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qs;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qs,this.toJSON())}_performRefresh(){return cr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$m(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new SN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new op(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await oo(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EN(this,e)}reload(){return IN(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ac(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await oo(this,wN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:x,emailVerified:L,isAnonymous:V,providerData:j,stsTokenManager:b}=n;ce(x&&b,e,"internal-error");const S=qs.fromJSON(this.name,b);ce(typeof x=="string",e,"internal-error"),Vr(f,e.name),Vr(m,e.name),ce(typeof L=="boolean",e,"internal-error"),ce(typeof V=="boolean",e,"internal-error"),Vr(g,e.name),Vr(T,e.name),Vr(w,e.name),Vr(O,e.name),Vr(_,e.name),Vr(v,e.name);const C=new An({uid:x,auth:e,email:m,emailVerified:L,displayName:f,isAnonymous:V,photoURL:T,phoneNumber:g,tenantId:w,stsTokenManager:S,createdAt:_,lastLoginAt:v});return j&&Array.isArray(j)&&(C.providerData=j.map(k=>Object.assign({},k))),O&&(C._redirectEventId=O),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new qs;i.updateFromServerResponse(n);const s=new An({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ac(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?z1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qs;a.updateFromIdToken(r);const l=new An({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new op(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function dr(t){Ir(t instanceof Function,"Expected a class definition");let e=x_.get(t);return e?(Ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B1.type="NONE";const S_=B1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ks{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zu(this.userKey,i.apiKey,s),this.fullPersistenceKey=zu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Cc(this.auth,{idToken:e}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,e):null}return An._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ks(dr(S_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||dr(S_);const o=zu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const m=await Cc(e,{idToken:d}).catch(()=>{});if(!m)break;f=await An._fromGetAccountInfoResponse(e,m,d)}else f=An._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ks(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ks(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(G1(e))return"Blackberry";if(Q1(e))return"Webos";if(H1(e))return"Safari";if((e.includes("chrome/")||W1(e))&&!e.includes("edge/"))return"Chrome";if(K1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $1(t=Rt()){return/firefox\//i.test(t)}function H1(t=Rt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W1(t=Rt()){return/crios\//i.test(t)}function q1(t=Rt()){return/iemobile/i.test(t)}function K1(t=Rt()){return/android/i.test(t)}function G1(t=Rt()){return/blackberry/i.test(t)}function Q1(t=Rt()){return/webos/i.test(t)}function Km(t=Rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function AN(t=Rt()){var e;return Km(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PN(){return zR()&&document.documentMode===10}function Y1(t=Rt()){return Km(t)||K1(t)||Q1(t)||G1(t)||/windows phone/i.test(t)||q1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e=[]){let n;switch(t){case"Browser":n=I_(Rt());break;case"Worker":n=`${I_(Rt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=6;class DN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:NN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T_(this),this.idTokenSubscription=new T_(this),this.beforeStateQueue=new RN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Cc(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(mr(this));const n=e?it(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bN(this),n=new DN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await CN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&uN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function as(t){return it(t)}class T_{constructor(e){this.auth=e,this.observer=null,this.addObserver=QR(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LN(t){fd=t}function J1(t){return fd.loadJS(t)}function jN(){return fd.recaptchaEnterpriseScript}function MN(){return fd.gapiScript}function VN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FN{constructor(){this.enterprise=new UN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class UN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const zN="recaptcha-enterprise",Z1="NO_RECAPTCHA";class BN{constructor(e){this.type=zN,this.auth=as(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{_N(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new vN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;w_(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Z1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&w_(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=jN();l.length!==0&&(l+=a),J1(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function k_(t,e,n,r=!1,i=!1){const s=new BN(t);let o;if(i)o=Z1;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ap(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await k_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await k_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){const n=Bm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xr(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function HN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WN(t,e,n){const r=as(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=eS(e),{host:o,port:a}=qN(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(xr(c,r.config.emulator)&&xr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Eo(o)?(C1(`${s}//${o}${l}`),A1("Auth",!0)):KN()}function eS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qN(t){const e=eS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:C_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:C_(o)}}}function C_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function KN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function GN(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){return wl(t,"POST","/v1/accounts:signInWithPassword",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return wl(t,"POST","/v1/accounts:signInWithEmailLink",Si(t,e))}async function XN(t,e){return wl(t,"POST","/v1/accounts:signInWithEmailLink",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Gm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,n,"signInWithPassword",QN);case"emailLink":return YN(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ap(e,r,"signUpPassword",GN);case"emailLink":return XN(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t,e){return wl(t,"POST","/v1/accounts:signInWithIdp",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="http://localhost";class es extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$m(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new es(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gs(e,n)}buildRequest(){const e={requestUri:JN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function e2(t){const e=da(ha(t)).link,n=e?da(ha(e)).deep_link_id:null,r=da(ha(t)).deep_link_id;return(r?da(ha(r)).link:null)||r||n||e||t}class Qm{constructor(e){var n,r,i,s,o,a;const l=da(ha(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=ZN((i=l.mode)!==null&&i!==void 0?i:null);ce(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=e2(e);try{return new Qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,n){return tl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qm.parseLink(n);return ce(r,"argument-error"),tl._fromEmailAndCode(e,r.code,r.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends tS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends El{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends El{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return es._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends El{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends El{constructor(){super("twitter.com")}static credential(e,n){return es._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e){return wl(t,"POST","/v1/accounts:signUp",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await An._fromIdTokenResponse(e,r,i),o=A_(r);return new ts({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A_(r);return new ts({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Pc(e,n,r,i)}}function nS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,s,e,r):s})}async function n2(t,e,n=!1){const r=await oo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e,n=!1){const{auth:r}=t;if(gn(r.app))return Promise.reject(mr(r));const i="reauthenticate";try{const s=await oo(t,nS(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=qm(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),ts._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e,n=!1){if(gn(t.app))return Promise.reject(mr(t));const r="signIn",i=await nS(t,r,e),s=await ts._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function i2(t,e){return rS(as(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t){const e=as(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function s2(t,e,n){if(gn(t.app))return Promise.reject(mr(t));const r=as(t),o=await ap(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",t2).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&iS(t),l}),a=await ts._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function sS(t,e,n){return gn(t.app)?Promise.reject(mr(t)):i2(it(t),So.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e){return Rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=it(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await oo(r,o2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function l2(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function u2(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function c2(t,e,n,r){return it(t).onAuthStateChanged(e,n,r)}function d2(t){return it(t).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=1e3,f2=10;class aS extends oS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);PN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,f2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},h2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}aS.type="LOCAL";const p2=aS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS extends oS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lS.type="SESSION";const uS=lS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await m2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Ym("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return window}function y2(t){Kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(){return typeof Kn().WorkerGlobalScope<"u"&&typeof Kn().importScripts=="function"}async function v2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function w2(){return cS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="firebaseLocalStorageDb",E2=1,bc="firebaseLocalStorage",hS="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([bc],e?"readwrite":"readonly").objectStore(bc)}function x2(){const t=indexedDB.deleteDatabase(dS);return new xl(t).toPromise()}function lp(){const t=indexedDB.open(dS,E2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bc,{keyPath:hS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bc)?e(r):(r.close(),await x2(),e(await lp()))})})}async function P_(t,e,n){const r=md(t,!0).put({[hS]:e,value:n});return new xl(r).toPromise()}async function S2(t,e){const n=md(t,!1).get(e),r=await new xl(n).toPromise();return r===void 0?null:r.value}function R_(t,e){const n=md(t,!0).delete(e);return new xl(n).toPromise()}const I2=800,T2=3;class fS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>T2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(w2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await v2(),!this.activeServiceWorker)return;this.sender=new g2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lp();return await P_(e,Rc,"1"),await R_(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>S2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=md(i,!1).getAll();return new xl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fS.type="LOCAL";const k2=fS;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e){return e?dr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function A2(t){return rS(t.auth,new Xm(t),t.bypassAuthState)}function P2(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),r2(n,new Xm(t),t.bypassAuthState)}async function R2(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),n2(n,new Xm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A2;case"linkViaPopup":case"linkViaRedirect":return R2;case"reauthViaPopup":case"reauthViaRedirect":return P2;default:Dn(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new _l(2e3,1e4);class Fs extends pS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="pendingRedirect",Bu=new Map;class D2 extends pS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bu.get(this.auth._key());if(!e){try{const r=await O2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bu.set(this.auth._key(),e)}return this.bypassAuthState||Bu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O2(t,e){const n=M2(e),r=j2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function L2(t,e){Bu.set(t._key(),e)}function j2(t){return dr(t._redirectPersistence)}function M2(t){return zu(N2,t.config.apiKey,t.name)}async function V2(t,e,n=!1){if(gn(t.app))return Promise.reject(mr(t));const r=as(t),i=C2(r,e),o=await new D2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=10*60*1e3;class U2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!mS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F2&&this.cachedEventUids.clear(),this.cachedEventUids.has(b_(e))}saveEventToCache(e){this.cachedEventUids.add(b_(e)),this.lastProcessedEventTime=Date.now()}}function b_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function mS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H2=/^https?/;async function W2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await B2(t);for(const n of e)try{if(q2(n))return}catch{}Dn(t,"unauthorized-domain")}function q2(t){const e=sp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H2.test(n))return!1;if($2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new _l(3e4,6e4);function N_(){const t=Kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function G2(t){return new Promise((e,n)=>{var r,i,s;function o(){N_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N_(),n(qn(t,"network-request-failed"))},timeout:K2.get()})}if(!((i=(r=Kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Kn().gapi)===null||s===void 0)&&s.load)o();else{const a=VN("iframefcb");return Kn()[a]=()=>{gapi.load?o():n(qn(t,"network-request-failed"))},J1(`${MN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw $u=null,e})}let $u=null;function Q2(t){return $u=$u||G2(t),$u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new _l(5e3,15e3),X2="__/auth/iframe",J2="emulator/auth/iframe",Z2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tD(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Wm(e,J2):`https://${t.config.authDomain}/${X2}`,r={apiKey:e.apiKey,appName:t.name,v:xo},i=eD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${vl(r).slice(1)}`}async function nD(t){const e=await Q2(t),n=Kn().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:tD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=Kn().setTimeout(()=>{s(o)},Y2.get());function l(){Kn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iD=500,sD=600,oD="_blank",aD="http://localhost";class D_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lD(t,e,n,r=iD,i=sD){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},rD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Rt().toLowerCase();n&&(a=W1(c)?oD:n),$1(c)&&(e=e||aD,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,T])=>`${m}${g}=${T},`,"");if(AN(c)&&a!=="_self")return uD(e||"",a),new D_(null);const f=window.open(e||"",a,d);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new D_(f)}function uD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="__/auth/handler",dD="emulator/auth/handler",hD=encodeURIComponent("fac");async function O_(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xo,eventId:i};if(e instanceof tS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof El){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${hD}=${encodeURIComponent(l)}`:"";return`${fD(t)}?${vl(a).slice(1)}${c}`}function fD({config:t}){return t.emulator?Wm(t,dD):`https://${t.authDomain}/${cD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="webStorageSupport";class pD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uS,this._completeRedirectFn=V2,this._overrideRedirectResult=L2}async _openPopup(e,n,r,i){var s;Ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await O_(e,n,r,sp(),i);return lD(e,o,Ym())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await O_(e,n,r,sp(),i);return y2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await nD(e),r=new U2(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zh,{type:zh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[zh];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=W2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y1()||H1()||Km()}}const mD=pD;var L_="@firebase/auth",j_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vD(t){so(new Zi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X1(t)},c=new ON(r,i,s,l);return HN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),so(new Zi("auth-internal",e=>{const n=as(e.getProvider("auth").getImmediate());return(r=>new gD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(L_,j_,yD(t)),li(L_,j_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=5*60,wD=k1("authIdTokenMaxAge")||_D;let M_=null;const ED=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wD)return;const i=n==null?void 0:n.token;M_!==i&&(M_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xD(t=N1()){const e=Bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$N(t,{popupRedirectResolver:mD,persistence:[k2,p2,uS]}),r=k1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ED(s.toString());u2(n,o,()=>o(n.currentUser)),l2(n,a=>o(a))}}const i=I1("auth");return i&&WN(n,`http://${i}`),n}function SD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=qn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",SD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vD("Browser");var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,gS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,S){function C(){}C.prototype=S.prototype,b.D=S.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(k,I,N){for(var E=Array(arguments.length-2),W=2;W<arguments.length;W++)E[W-2]=arguments[W];return S.prototype[I].apply(k,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,S,C){C||(C=0);var k=Array(16);if(typeof S=="string")for(var I=0;16>I;++I)k[I]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(I=0;16>I;++I)k[I]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=b.g[0],C=b.g[1],I=b.g[2];var N=b.g[3],E=S+(N^C&(I^N))+k[0]+3614090360&4294967295;S=C+(E<<7&4294967295|E>>>25),E=N+(I^S&(C^I))+k[1]+3905402710&4294967295,N=S+(E<<12&4294967295|E>>>20),E=I+(C^N&(S^C))+k[2]+606105819&4294967295,I=N+(E<<17&4294967295|E>>>15),E=C+(S^I&(N^S))+k[3]+3250441966&4294967295,C=I+(E<<22&4294967295|E>>>10),E=S+(N^C&(I^N))+k[4]+4118548399&4294967295,S=C+(E<<7&4294967295|E>>>25),E=N+(I^S&(C^I))+k[5]+1200080426&4294967295,N=S+(E<<12&4294967295|E>>>20),E=I+(C^N&(S^C))+k[6]+2821735955&4294967295,I=N+(E<<17&4294967295|E>>>15),E=C+(S^I&(N^S))+k[7]+4249261313&4294967295,C=I+(E<<22&4294967295|E>>>10),E=S+(N^C&(I^N))+k[8]+1770035416&4294967295,S=C+(E<<7&4294967295|E>>>25),E=N+(I^S&(C^I))+k[9]+2336552879&4294967295,N=S+(E<<12&4294967295|E>>>20),E=I+(C^N&(S^C))+k[10]+4294925233&4294967295,I=N+(E<<17&4294967295|E>>>15),E=C+(S^I&(N^S))+k[11]+2304563134&4294967295,C=I+(E<<22&4294967295|E>>>10),E=S+(N^C&(I^N))+k[12]+1804603682&4294967295,S=C+(E<<7&4294967295|E>>>25),E=N+(I^S&(C^I))+k[13]+4254626195&4294967295,N=S+(E<<12&4294967295|E>>>20),E=I+(C^N&(S^C))+k[14]+2792965006&4294967295,I=N+(E<<17&4294967295|E>>>15),E=C+(S^I&(N^S))+k[15]+1236535329&4294967295,C=I+(E<<22&4294967295|E>>>10),E=S+(I^N&(C^I))+k[1]+4129170786&4294967295,S=C+(E<<5&4294967295|E>>>27),E=N+(C^I&(S^C))+k[6]+3225465664&4294967295,N=S+(E<<9&4294967295|E>>>23),E=I+(S^C&(N^S))+k[11]+643717713&4294967295,I=N+(E<<14&4294967295|E>>>18),E=C+(N^S&(I^N))+k[0]+3921069994&4294967295,C=I+(E<<20&4294967295|E>>>12),E=S+(I^N&(C^I))+k[5]+3593408605&4294967295,S=C+(E<<5&4294967295|E>>>27),E=N+(C^I&(S^C))+k[10]+38016083&4294967295,N=S+(E<<9&4294967295|E>>>23),E=I+(S^C&(N^S))+k[15]+3634488961&4294967295,I=N+(E<<14&4294967295|E>>>18),E=C+(N^S&(I^N))+k[4]+3889429448&4294967295,C=I+(E<<20&4294967295|E>>>12),E=S+(I^N&(C^I))+k[9]+568446438&4294967295,S=C+(E<<5&4294967295|E>>>27),E=N+(C^I&(S^C))+k[14]+3275163606&4294967295,N=S+(E<<9&4294967295|E>>>23),E=I+(S^C&(N^S))+k[3]+4107603335&4294967295,I=N+(E<<14&4294967295|E>>>18),E=C+(N^S&(I^N))+k[8]+1163531501&4294967295,C=I+(E<<20&4294967295|E>>>12),E=S+(I^N&(C^I))+k[13]+2850285829&4294967295,S=C+(E<<5&4294967295|E>>>27),E=N+(C^I&(S^C))+k[2]+4243563512&4294967295,N=S+(E<<9&4294967295|E>>>23),E=I+(S^C&(N^S))+k[7]+1735328473&4294967295,I=N+(E<<14&4294967295|E>>>18),E=C+(N^S&(I^N))+k[12]+2368359562&4294967295,C=I+(E<<20&4294967295|E>>>12),E=S+(C^I^N)+k[5]+4294588738&4294967295,S=C+(E<<4&4294967295|E>>>28),E=N+(S^C^I)+k[8]+2272392833&4294967295,N=S+(E<<11&4294967295|E>>>21),E=I+(N^S^C)+k[11]+1839030562&4294967295,I=N+(E<<16&4294967295|E>>>16),E=C+(I^N^S)+k[14]+4259657740&4294967295,C=I+(E<<23&4294967295|E>>>9),E=S+(C^I^N)+k[1]+2763975236&4294967295,S=C+(E<<4&4294967295|E>>>28),E=N+(S^C^I)+k[4]+1272893353&4294967295,N=S+(E<<11&4294967295|E>>>21),E=I+(N^S^C)+k[7]+4139469664&4294967295,I=N+(E<<16&4294967295|E>>>16),E=C+(I^N^S)+k[10]+3200236656&4294967295,C=I+(E<<23&4294967295|E>>>9),E=S+(C^I^N)+k[13]+681279174&4294967295,S=C+(E<<4&4294967295|E>>>28),E=N+(S^C^I)+k[0]+3936430074&4294967295,N=S+(E<<11&4294967295|E>>>21),E=I+(N^S^C)+k[3]+3572445317&4294967295,I=N+(E<<16&4294967295|E>>>16),E=C+(I^N^S)+k[6]+76029189&4294967295,C=I+(E<<23&4294967295|E>>>9),E=S+(C^I^N)+k[9]+3654602809&4294967295,S=C+(E<<4&4294967295|E>>>28),E=N+(S^C^I)+k[12]+3873151461&4294967295,N=S+(E<<11&4294967295|E>>>21),E=I+(N^S^C)+k[15]+530742520&4294967295,I=N+(E<<16&4294967295|E>>>16),E=C+(I^N^S)+k[2]+3299628645&4294967295,C=I+(E<<23&4294967295|E>>>9),E=S+(I^(C|~N))+k[0]+4096336452&4294967295,S=C+(E<<6&4294967295|E>>>26),E=N+(C^(S|~I))+k[7]+1126891415&4294967295,N=S+(E<<10&4294967295|E>>>22),E=I+(S^(N|~C))+k[14]+2878612391&4294967295,I=N+(E<<15&4294967295|E>>>17),E=C+(N^(I|~S))+k[5]+4237533241&4294967295,C=I+(E<<21&4294967295|E>>>11),E=S+(I^(C|~N))+k[12]+1700485571&4294967295,S=C+(E<<6&4294967295|E>>>26),E=N+(C^(S|~I))+k[3]+2399980690&4294967295,N=S+(E<<10&4294967295|E>>>22),E=I+(S^(N|~C))+k[10]+4293915773&4294967295,I=N+(E<<15&4294967295|E>>>17),E=C+(N^(I|~S))+k[1]+2240044497&4294967295,C=I+(E<<21&4294967295|E>>>11),E=S+(I^(C|~N))+k[8]+1873313359&4294967295,S=C+(E<<6&4294967295|E>>>26),E=N+(C^(S|~I))+k[15]+4264355552&4294967295,N=S+(E<<10&4294967295|E>>>22),E=I+(S^(N|~C))+k[6]+2734768916&4294967295,I=N+(E<<15&4294967295|E>>>17),E=C+(N^(I|~S))+k[13]+1309151649&4294967295,C=I+(E<<21&4294967295|E>>>11),E=S+(I^(C|~N))+k[4]+4149444226&4294967295,S=C+(E<<6&4294967295|E>>>26),E=N+(C^(S|~I))+k[11]+3174756917&4294967295,N=S+(E<<10&4294967295|E>>>22),E=I+(S^(N|~C))+k[2]+718787259&4294967295,I=N+(E<<15&4294967295|E>>>17),E=C+(N^(I|~S))+k[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(I+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+I&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var C=S-this.blockSize,k=this.B,I=this.h,N=0;N<S;){if(I==0)for(;N<=C;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<S;)if(k[I++]=b.charCodeAt(N++),I==this.blockSize){i(this,k),I=0;break}}else for(;N<S;)if(k[I++]=b[N++],I==this.blockSize){i(this,k),I=0;break}}this.h=I,this.o+=S},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var C=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=C&255,C/=256;for(this.u(b),b=Array(16),S=C=0;4>S;++S)for(var k=0;32>k;k+=8)b[C++]=this.g[S]>>>k&255;return b};function s(b,S){var C=a;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=S(b)}function o(b,S){this.h=S;for(var C=[],k=!0,I=b.length-1;0<=I;I--){var N=b[I]|0;k&&N==S||(C[I]=N,k=!1)}this.g=C}var a={};function l(b){return-128<=b&&128>b?s(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return O(c(-b));for(var S=[],C=1,k=0;b>=C;k++)S[k]=b/C|0,C*=4294967296;return new o(S,0)}function d(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return O(d(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(S,8)),k=f,I=0;I<b.length;I+=8){var N=Math.min(8,b.length-I),E=parseInt(b.substring(I,I+N),S);8>N?(N=c(Math.pow(S,N)),k=k.j(N).add(c(E))):(k=k.j(C),k=k.add(c(E)))}return k}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-O(this).m();for(var b=0,S=1,C=0;C<this.g.length;C++){var k=this.i(C);b+=(0<=k?k:4294967296+k)*S,S*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(w(this))return"-"+O(this).toString(b);for(var S=c(Math.pow(b,6)),C=this,k="";;){var I=L(C,S).g;C=_(C,I.j(S));var N=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=I,T(C))return N+k;for(;6>N.length;)N="0"+N;k=N+k}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function w(b){return b.h==-1}t.l=function(b){return b=_(this,b),w(b)?-1:T(b)?0:1};function O(b){for(var S=b.g.length,C=[],k=0;k<S;k++)C[k]=~b.g[k];return new o(C,~b.h).add(m)}t.abs=function(){return w(this)?O(this):this},t.add=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],k=0,I=0;I<=S;I++){var N=k+(this.i(I)&65535)+(b.i(I)&65535),E=(N>>>16)+(this.i(I)>>>16)+(b.i(I)>>>16);k=E>>>16,N&=65535,E&=65535,C[I]=E<<16|N}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(b,S){return b.add(O(S))}t.j=function(b){if(T(this)||T(b))return f;if(w(this))return w(b)?O(this).j(O(b)):O(O(this).j(b));if(w(b))return O(this.j(O(b)));if(0>this.l(g)&&0>b.l(g))return c(this.m()*b.m());for(var S=this.g.length+b.g.length,C=[],k=0;k<2*S;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<b.g.length;I++){var N=this.i(k)>>>16,E=this.i(k)&65535,W=b.i(I)>>>16,$=b.i(I)&65535;C[2*k+2*I]+=E*$,v(C,2*k+2*I),C[2*k+2*I+1]+=N*$,v(C,2*k+2*I+1),C[2*k+2*I+1]+=E*W,v(C,2*k+2*I+1),C[2*k+2*I+2]+=N*W,v(C,2*k+2*I+2)}for(k=0;k<S;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=S;k<2*S;k++)C[k]=0;return new o(C,0)};function v(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function x(b,S){this.g=b,this.h=S}function L(b,S){if(T(S))throw Error("division by zero");if(T(b))return new x(f,f);if(w(b))return S=L(O(b),S),new x(O(S.g),O(S.h));if(w(S))return S=L(b,O(S)),new x(O(S.g),S.h);if(30<b.g.length){if(w(b)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var C=m,k=S;0>=k.l(b);)C=V(C),k=V(k);var I=j(C,1),N=j(k,1);for(k=j(k,2),C=j(C,2);!T(k);){var E=N.add(k);0>=E.l(b)&&(I=I.add(C),N=E),k=j(k,1),C=j(C,1)}return S=_(b,I.j(S)),new x(I,S)}for(I=f;0<=b.l(S);){for(C=Math.max(1,Math.floor(b.m()/S.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),N=c(C),E=N.j(S);w(E)||0<E.l(b);)C-=k,N=c(C),E=N.j(S);T(N)&&(N=m),I=I.add(N),b=_(b,E)}return new x(I,b)}t.A=function(b){return L(this,b).h},t.and=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)&b.i(k);return new o(C,this.h&b.h)},t.or=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)|b.i(k);return new o(C,this.h|b.h)},t.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),C=[],k=0;k<S;k++)C[k]=this.i(k)^b.i(k);return new o(C,this.h^b.h)};function V(b){for(var S=b.g.length+1,C=[],k=0;k<S;k++)C[k]=b.i(k)<<1|b.i(k-1)>>>31;return new o(C,b.h)}function j(b,S){var C=S>>5;S%=32;for(var k=b.g.length-C,I=[],N=0;N<k;N++)I[N]=0<S?b.i(N+C)>>>S|b.i(N+C+1)<<32-S:b.i(N+C);return new o(I,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ui=o}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yS,fa,vS,Hu,up,_S,wS,ES;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,y){return u==Array.prototype||u==Object.prototype||(u[p]=y.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pu=="object"&&pu];for(var p=0;p<u.length;++p){var y=u[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var y=r;u=u.split(".");for(var R=0;R<u.length-1;R++){var M=u[R];if(!(M in y))break e;y=y[M]}u=u[u.length-1],R=y[u],p=p(R),p!=R&&p!=null&&e(y,u,{configurable:!0,writable:!0,value:p})}}function s(u,p){u instanceof String&&(u+="");var y=0,R=!1,M={next:function(){if(!R&&y<u.length){var F=y++;return{value:p(F,u[F]),done:!1}}return R=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,y){return u.call.apply(u.bind,arguments)}function f(u,p,y){if(!u)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,R),u.apply(p,M)}}return function(){return u.apply(p,arguments)}}function m(u,p,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function g(u,p){var y=Array.prototype.slice.call(arguments,1);return function(){var R=y.slice();return R.push.apply(R,arguments),u.apply(this,R)}}function T(u,p){function y(){}y.prototype=p.prototype,u.aa=p.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(R,M,F){for(var ne=Array(arguments.length-2),be=2;be<arguments.length;be++)ne[be-2]=arguments[be];return p.prototype[M].apply(R,ne)}}function w(u){const p=u.length;if(0<p){const y=Array(p);for(let R=0;R<p;R++)y[R]=u[R];return y}return[]}function O(u,p){for(let y=1;y<arguments.length;y++){const R=arguments[y];if(l(R)){const M=u.length||0,F=R.length||0;u.length=M+F;for(let ne=0;ne<F;ne++)u[M+ne]=R[ne]}else u.push(R)}}class _{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(u){return/^[\s\xa0]*$/.test(u)}function x(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function L(u){return L[" "](u),u}L[" "]=function(){};var V=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function j(u,p,y){for(const R in u)p.call(y,u[R],R,u)}function b(u,p){for(const y in u)p.call(void 0,u[y],y,u)}function S(u){const p={};for(const y in u)p[y]=u[y];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,p){let y,R;for(let M=1;M<arguments.length;M++){R=arguments[M];for(y in R)u[y]=R[y];for(let F=0;F<C.length;F++)y=C[F],Object.prototype.hasOwnProperty.call(R,y)&&(u[y]=R[y])}}function I(u){var p=1;u=u.split(":");const y=[];for(;0<p&&u.length;)y.push(u.shift()),p--;return u.length&&y.push(u.join(":")),y}function N(u){a.setTimeout(()=>{throw u},0)}function E(){var u=ee;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,y){const R=$.get();R.set(p,y),this.h?this.h.next=R:this.g=R,this.h=R}}var $=new _(()=>new te,u=>u.reset());class te{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,B=!1,ee=new W,A=()=>{const u=a.Promise.resolve(void 0);Z=()=>{u.then(X)}};var X=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(y){N(y)}var p=$;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return u}();function re(u,p){if(P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,R=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(V){e:{try{L(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else y=="mouseover"?p=u.fromElement:y=="mouseout"&&(p=u.toElement);this.relatedTarget=p,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&re.aa.h.call(this)}}T(re,P);var se={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),K=0;function le(u,p,y,R,M){this.listener=u,this.proxy=null,this.src=p,this.type=y,this.capture=!!R,this.ha=M,this.key=++K,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ne(u){this.src=u,this.g={},this.h=0}Ne.prototype.add=function(u,p,y,R,M){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var ne=Nt(u,p,R,M);return-1<ne?(p=u[ne],y||(p.fa=!1)):(p=new le(p,this.src,F,!!R,M),p.fa=y,u.push(p)),p};function wt(u,p){var y=p.type;if(y in u.g){var R=u.g[y],M=Array.prototype.indexOf.call(R,p,void 0),F;(F=0<=M)&&Array.prototype.splice.call(R,M,1),F&&(ye(p),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Nt(u,p,y,R){for(var M=0;M<u.length;++M){var F=u[M];if(!F.da&&F.listener==p&&F.capture==!!y&&F.ha==R)return M}return-1}var Mn="closure_lm_"+(1e6*Math.random()|0),Ut={};function br(u,p,y,R,M){if(Array.isArray(p)){for(var F=0;F<p.length;F++)br(u,p[F],y,R,M);return null}return y=Nl(y),u&&u[ve]?u.K(p,y,c(R)?!!R.capture:!1,M):Ai(u,p,y,!1,R,M)}function Ai(u,p,y,R,M,F){if(!p)throw Error("Invalid event type");var ne=c(M)?!!M.capture:!!M,be=Oo(u);if(be||(u[Mn]=be=new Ne(u)),y=be.add(p,y,R,ne,F),y.proxy)return y;if(R=hs(),y.proxy=R,R.src=u,R.listener=y,u.addEventListener)J||(M=ne),M===void 0&&(M=!1),u.addEventListener(p.toString(),R,M);else if(u.attachEvent)u.attachEvent(bl(p.toString()),R);else if(u.addListener&&u.removeListener)u.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return y}function hs(){function u(y){return p.call(u.src,u.listener,y)}const p=Wd;return u}function Do(u,p,y,R,M){if(Array.isArray(p))for(var F=0;F<p.length;F++)Do(u,p[F],y,R,M);else R=c(R)?!!R.capture:!!R,y=Nl(y),u&&u[ve]?(u=u.i,p=String(p).toString(),p in u.g&&(F=u.g[p],y=Nt(F,y,R,M),-1<y&&(ye(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete u.g[p],u.h--)))):u&&(u=Oo(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Nt(p,y,R,M)),(y=-1<u?p[u]:null)&&fs(y))}function fs(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ve])wt(p.i,u);else{var y=u.type,R=u.proxy;p.removeEventListener?p.removeEventListener(y,R,u.capture):p.detachEvent?p.detachEvent(bl(y),R):p.addListener&&p.removeListener&&p.removeListener(R),(y=Oo(p))?(wt(y,u),y.h==0&&(y.src=null,p[Mn]=null)):ye(u)}}}function bl(u){return u in Ut?Ut[u]:Ut[u]="on"+u}function Wd(u,p){if(u.da)u=!0;else{p=new re(p,this);var y=u.listener,R=u.ha||u.src;u.fa&&fs(u),u=y.call(R,p)}return u}function Oo(u){return u=u[Mn],u instanceof Ne?u:null}var Lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nl(u){return typeof u=="function"?u:(u[Lo]||(u[Lo]=function(p){return u.handleEvent(p)}),u[Lo])}function U(){q.call(this),this.i=new Ne(this),this.M=this,this.F=null}T(U,q),U.prototype[ve]=!0,U.prototype.removeEventListener=function(u,p,y,R){Do(this,u,p,y,R)};function G(u,p){var y,R=u.F;if(R)for(y=[];R;R=R.F)y.push(R);if(u=u.M,R=p.type||p,typeof p=="string")p=new P(p,u);else if(p instanceof P)p.target=p.target||u;else{var M=p;p=new P(R,u),k(p,M)}if(M=!0,y)for(var F=y.length-1;0<=F;F--){var ne=p.g=y[F];M=he(ne,R,!0,p)&&M}if(ne=p.g=u,M=he(ne,R,!0,p)&&M,M=he(ne,R,!1,p)&&M,y)for(F=0;F<y.length;F++)ne=p.g=y[F],M=he(ne,R,!1,p)&&M}U.prototype.N=function(){if(U.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var y=u.g[p],R=0;R<y.length;R++)ye(y[R]);delete u.g[p],u.h--}}this.F=null},U.prototype.K=function(u,p,y,R){return this.i.add(String(u),p,!1,y,R)},U.prototype.L=function(u,p,y,R){return this.i.add(String(u),p,!0,y,R)};function he(u,p,y,R){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,F=0;F<p.length;++F){var ne=p[F];if(ne&&!ne.da&&ne.capture==y){var be=ne.listener,ht=ne.ha||ne.src;ne.fa&&wt(u.i,ne),M=be.call(ht,R)!==!1&&M}}return M&&!R.defaultPrevented}function we(u,p,y){if(typeof u=="function")y&&(u=m(u,y));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Ae(u){u.g=we(()=>{u.g=null,u.i&&(u.i=!1,Ae(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Jt extends q{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ae(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(u){q.call(this),this.h=u,this.g={}}T(Zt,q);var hn=[];function Nr(u){j(u.g,function(p,y){this.g.hasOwnProperty(y)&&fs(p)},u),u.g={}}Zt.prototype.N=function(){Zt.aa.N.call(this),Nr(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nr=a.JSON.stringify,Dt=a.JSON.parse,Dr=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function en(){}en.prototype.h=null;function ey(u){return u.h||(u.h=u.i())}function ty(){}var jo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qd(){P.call(this,"d")}T(qd,P);function Kd(){P.call(this,"c")}T(Kd,P);var Pi={},ny=null;function Dl(){return ny=ny||new U}Pi.La="serverreachability";function ry(u){P.call(this,Pi.La,u)}T(ry,P);function Mo(u){const p=Dl();G(p,new ry(p))}Pi.STAT_EVENT="statevent";function iy(u,p){P.call(this,Pi.STAT_EVENT,u),this.stat=p}T(iy,P);function Ot(u){const p=Dl();G(p,new iy(p,u))}Pi.Ma="timingevent";function sy(u,p){P.call(this,Pi.Ma,u),this.size=p}T(sy,P);function Vo(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function zT(u,p,y,R,M,F){u.info(function(){if(u.g)if(F)for(var ne="",be=F.split("&"),ht=0;ht<be.length;ht++){var ke=be[ht].split("=");if(1<ke.length){var Et=ke[0];ke=ke[1];var xt=Et.split("_");ne=2<=xt.length&&xt[1]=="type"?ne+(Et+"="+ke+"&"):ne+(Et+"=redacted&")}}else ne=null;else ne=F;return"XMLHTTP REQ ("+R+") [attempt "+M+"]: "+p+`
`+y+`
`+ne})}function BT(u,p,y,R,M,F,ne){u.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+M+"]: "+p+`
`+y+`
`+F+" "+ne})}function ps(u,p,y,R){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+HT(u,y)+(R?" "+R:"")})}function $T(u,p){u.info(function(){return"TIMEOUT: "+p})}Fo.prototype.info=function(){};function HT(u,p){if(!u.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var R=y[u];if(!(2>R.length)){var M=R[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var ne=1;ne<M.length;ne++)M[ne]=""}}}}return nr(y)}catch{return p}}var Ol={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gd;function Ll(){}T(Ll,en),Ll.prototype.g=function(){return new XMLHttpRequest},Ll.prototype.i=function(){return{}},Gd=new Ll;function Or(u,p,y,R){this.j=u,this.i=p,this.l=y,this.R=R||1,this.U=new Zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ay}function ay(){this.i=null,this.g="",this.h=!1}var ly={},Qd={};function Yd(u,p,y){u.L=1,u.v=Fl(rr(p)),u.m=y,u.P=!0,uy(u,null)}function uy(u,p){u.F=Date.now(),jl(u),u.A=rr(u.v);var y=u.A,R=u.R;Array.isArray(R)||(R=[String(R)]),Sy(y.i,"t",R),u.C=0,y=u.j.J,u.h=new ay,u.g=zy(u.j,y?p:null,!u.m),0<u.O&&(u.M=new Jt(m(u.Y,u,u.g),u.O)),p=u.U,y=u.g,R=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(hn[0]=M.toString()),M=hn);for(var F=0;F<M.length;F++){var ne=br(y,M[F],R||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Mo(),zT(u.i,u.u,u.A,u.l,u.R,u.m)}Or.prototype.ca=function(u){u=u.target;const p=this.M;p&&ir(u)==3?p.j():this.Y(u)},Or.prototype.Y=function(u){try{if(u==this.g)e:{const xt=ir(this.g);var p=this.g.Ba();const ys=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Ry(this.g)))){this.J||xt!=4||p==7||(p==8||0>=ys?Mo(3):Mo(2)),Xd(this);var y=this.g.Z();this.X=y;t:if(cy(this)){var R=Ry(this.g);u="";var M=R.length,F=ir(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),Uo(this);var ne="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,u+=this.h.i.decode(R[p],{stream:!(F&&p==M-1)});R.length=0,this.h.g+=u,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,BT(this.i,this.u,this.A,this.l,this.R,xt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ht=this.g;if((be=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(be)){var ke=be;break t}}ke=null}if(y=ke)ps(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jd(this,y);else{this.o=!1,this.s=3,Ot(12),Ri(this),Uo(this);break e}}if(this.P){y=!0;let Sn;for(;!this.J&&this.C<ne.length;)if(Sn=WT(this,ne),Sn==Qd){xt==4&&(this.s=4,Ot(14),y=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==ly){this.s=4,Ot(15),ps(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else ps(this.i,this.l,Sn,null),Jd(this,Sn);if(cy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||ne.length!=0||this.h.h||(this.s=1,Ot(16),y=!1),this.o=this.o&&y,!y)ps(this.i,this.l,ne,"[Invalid Chunked Response]"),Ri(this),Uo(this);else if(0<ne.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ih(Et),Et.M=!0,Ot(11))}}else ps(this.i,this.l,ne,null),Jd(this,ne);xt==4&&Ri(this),this.o&&!this.J&&(xt==4?My(this.j,this):(this.o=!1,jl(this)))}else lk(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),Ri(this),Uo(this)}}}catch{}finally{}};function cy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function WT(u,p){var y=u.C,R=p.indexOf(`
`,y);return R==-1?Qd:(y=Number(p.substring(y,R)),isNaN(y)?ly:(R+=1,R+y>p.length?Qd:(p=p.slice(R,R+y),u.C=R+y,p)))}Or.prototype.cancel=function(){this.J=!0,Ri(this)};function jl(u){u.S=Date.now()+u.I,dy(u,u.I)}function dy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vo(m(u.ba,u),p)}function Xd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Or.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($T(this.i,this.A),this.L!=2&&(Mo(),Ot(17)),Ri(this),this.s=2,Uo(this)):dy(this,this.S-u)};function Uo(u){u.j.G==0||u.J||My(u.j,u)}function Ri(u){Xd(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Nr(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Jd(u,p){try{var y=u.j;if(y.G!=0&&(y.g==u||Zd(y.h,u))){if(!u.K&&Zd(y.h,u)&&y.G==3){try{var R=y.Da.g.parse(p)}catch{R=null}if(Array.isArray(R)&&R.length==3){var M=R;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Wl(y),$l(y);else break e;rh(y),Ot(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Vo(m(y.Za,y),6e3));if(1>=py(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ni(y,11)}else if((u.K||y.g==u)&&Wl(y),!v(p))for(M=y.Da.g.parse(p),p=0;p<M.length;p++){let ke=M[p];if(y.T=ke[0],ke=ke[1],y.G==2)if(ke[0]=="c"){y.K=ke[1],y.ia=ke[2];const Et=ke[3];Et!=null&&(y.la=Et,y.j.info("VER="+y.la));const xt=ke[4];xt!=null&&(y.Aa=xt,y.j.info("SVER="+y.Aa));const ys=ke[5];ys!=null&&typeof ys=="number"&&0<ys&&(R=1.5*ys,y.L=R,y.j.info("backChannelRequestTimeoutMs_="+R)),R=y;const Sn=u.g;if(Sn){const Kl=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kl){var F=R.h;F.g||Kl.indexOf("spdy")==-1&&Kl.indexOf("quic")==-1&&Kl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(eh(F,F.h),F.h=null))}if(R.D){const sh=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;sh&&(R.ya=sh,Ve(R.I,R.D,sh))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),R=y;var ne=u;if(R.qa=Uy(R,R.J?R.ia:null,R.W),ne.K){my(R.h,ne);var be=ne,ht=R.L;ht&&(be.I=ht),be.B&&(Xd(be),jl(be)),R.g=ne}else Ly(R);0<y.i.length&&Hl(y)}else ke[0]!="stop"&&ke[0]!="close"||Ni(y,7);else y.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Ni(y,7):nh(y):ke[0]!="noop"&&y.l&&y.l.ta(ke),y.v=0)}}Mo(4)}catch{}}var qT=class{constructor(u,p){this.g=u,this.map=p}};function hy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function py(u){return u.h?1:u.g?u.g.size:0}function Zd(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function eh(u,p){u.g?u.g.add(p):u.h=p}function my(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}hy.prototype.cancel=function(){if(this.i=gy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const y of u.g.values())p=p.concat(y.D);return p}return w(u.i)}function KT(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],y=u.length,R=0;R<y;R++)p.push(u[R]);return p}p=[],y=0;for(R in u)p[y++]=u[R];return p}function GT(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var y=0;y<u;y++)p.push(y);return p}p=[],y=0;for(const R in u)p[y++]=R;return p}}}function yy(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var y=GT(u),R=KT(u),M=R.length,F=0;F<M;F++)p.call(void 0,R[F],y&&y[F],u)}var vy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QT(u,p){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var R=u[y].indexOf("="),M=null;if(0<=R){var F=u[y].substring(0,R);M=u[y].substring(R+1)}else F=u[y];p(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function bi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof bi){this.h=u.h,Ml(this,u.j),this.o=u.o,this.g=u.g,Vl(this,u.s),this.l=u.l;var p=u.i,y=new $o;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),_y(this,y),this.m=u.m}else u&&(p=String(u).match(vy))?(this.h=!1,Ml(this,p[1]||"",!0),this.o=zo(p[2]||""),this.g=zo(p[3]||"",!0),Vl(this,p[4]),this.l=zo(p[5]||"",!0),_y(this,p[6]||"",!0),this.m=zo(p[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}bi.prototype.toString=function(){var u=[],p=this.j;p&&u.push(Bo(p,wy,!0),":");var y=this.g;return(y||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Bo(p,wy,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Bo(y,y.charAt(0)=="/"?JT:XT,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Bo(y,ek)),u.join("")};function rr(u){return new bi(u)}function Ml(u,p,y){u.j=y?zo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Vl(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function _y(u,p,y){p instanceof $o?(u.i=p,tk(u.i,u.h)):(y||(p=Bo(p,ZT)),u.i=new $o(p,u.h))}function Ve(u,p,y){u.i.set(p,y)}function Fl(u){return Ve(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function zo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bo(u,p,y){return typeof u=="string"?(u=encodeURI(u).replace(p,YT),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function YT(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var wy=/[#\/\?@]/g,XT=/[#\?:]/g,JT=/[#\?]/g,ZT=/[#\?@]/g,ek=/#/g;function $o(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Lr(u){u.g||(u.g=new Map,u.h=0,u.i&&QT(u.i,function(p,y){u.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=$o.prototype,t.add=function(u,p){Lr(this),this.i=null,u=ms(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(p),this.h+=1,this};function Ey(u,p){Lr(u),p=ms(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function xy(u,p){return Lr(u),p=ms(u,p),u.g.has(p)}t.forEach=function(u,p){Lr(this),this.g.forEach(function(y,R){y.forEach(function(M){u.call(p,M,R,this)},this)},this)},t.na=function(){Lr(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let R=0;R<p.length;R++){const M=u[R];for(let F=0;F<M.length;F++)y.push(p[R])}return y},t.V=function(u){Lr(this);let p=[];if(typeof u=="string")xy(this,u)&&(p=p.concat(this.g.get(ms(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)p=p.concat(u[y])}return p},t.set=function(u,p){return Lr(this),this.i=null,u=ms(this,u),xy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Sy(u,p,y){Ey(u,p),0<y.length&&(u.i=null,u.g.set(ms(u,p),w(y)),u.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var R=p[y];const F=encodeURIComponent(String(R)),ne=this.V(R);for(R=0;R<ne.length;R++){var M=F;ne[R]!==""&&(M+="="+encodeURIComponent(String(ne[R]))),u.push(M)}}return this.i=u.join("&")};function ms(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function tk(u,p){p&&!u.j&&(Lr(u),u.i=null,u.g.forEach(function(y,R){var M=R.toLowerCase();R!=M&&(Ey(this,R),Sy(this,M,y))},u)),u.j=p}function nk(u,p){const y=new Fo;if(a.Image){const R=new Image;R.onload=g(jr,y,"TestLoadImage: loaded",!0,p,R),R.onerror=g(jr,y,"TestLoadImage: error",!1,p,R),R.onabort=g(jr,y,"TestLoadImage: abort",!1,p,R),R.ontimeout=g(jr,y,"TestLoadImage: timeout",!1,p,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=u}else p(!1)}function rk(u,p){const y=new Fo,R=new AbortController,M=setTimeout(()=>{R.abort(),jr(y,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:R.signal}).then(F=>{clearTimeout(M),F.ok?jr(y,"TestPingServer: ok",!0,p):jr(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),jr(y,"TestPingServer: error",!1,p)})}function jr(u,p,y,R,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),R(y)}catch{}}function ik(){this.g=new Dr}function sk(u,p,y){const R=y||"";try{yy(u,function(M,F){let ne=M;c(M)&&(ne=nr(M)),p.push(R+F+"="+encodeURIComponent(ne))})}catch(M){throw p.push(R+"type="+encodeURIComponent("_badmap")),M}}function Ul(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Ul,en),Ul.prototype.g=function(){return new zl(this.l,this.j)},Ul.prototype.i=function(u){return function(){return u}}({});function zl(u,p){U.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(zl,U),t=zl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,Wo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ho(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Ho(this):Wo(this),this.readyState==3&&Iy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ho(this))},t.Qa=function(u){this.g&&(this.response=u,Ho(this))},t.ga=function(){this.g&&Ho(this)};function Ho(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wo(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=p.next();return u.join(`\r
`)};function Wo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ty(u){let p="";return j(u,function(y,R){p+=R,p+=":",p+=y,p+=`\r
`}),p}function th(u,p,y){e:{for(R in y){var R=!1;break e}R=!0}R||(y=Ty(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Ve(u,p,y))}function Ge(u){U.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ge,U);var ok=/^https?$/i,ak=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,y,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gd.g(),this.v=this.o?ey(this.o):ey(Gd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(F){ky(this,F);return}if(u=y||"",y=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var M in R)y.set(M,R[M]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const F of R.keys())y.set(F,R.get(F));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ak,p,void 0))||R||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ne]of y)this.g.setRequestHeader(F,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Py(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){ky(this,F)}};function ky(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Cy(u),Bl(u)}function Cy(u){u.A||(u.A=!0,G(u,"complete"),G(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,G(this,"complete"),G(this,"abort"),Bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bl(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ay(this):this.bb())},t.bb=function(){Ay(this)};function Ay(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ir(u)!=4||u.Z()!=2)){if(u.u&&ir(u)==4)we(u.Ea,0,u);else if(G(u,"readystatechange"),ir(u)==4){u.h=!1;try{const ne=u.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var R;if(R=ne===0){var M=String(u.D).match(vy)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),R=!ok.test(M?M.toLowerCase():"")}y=R}if(y)G(u,"complete"),G(u,"success");else{u.m=6;try{var F=2<ir(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",Cy(u)}}finally{Bl(u)}}}}function Bl(u,p){if(u.g){Py(u);const y=u.g,R=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||G(u,"ready");try{y.onreadystatechange=R}catch{}}}function Py(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function ir(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<ir(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Dt(p)}};function Ry(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function lk(u){const p={};u=(u.g&&2<=ir(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<u.length;R++){if(v(u[R]))continue;var y=I(u[R]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=p[M]||[];p[M]=F,F.push(y)}b(p,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(u,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||p}function by(u){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qo("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qo("baseRetryDelayMs",5e3,u),this.cb=qo("retryDelaySeedMs",1e4,u),this.Wa=qo("forwardChannelMaxRetries",2,u),this.wa=qo("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hy(u&&u.concurrentRequestLimit),this.Da=new ik,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=by.prototype,t.la=8,t.G=1,t.connect=function(u,p,y,R){Ot(0),this.W=u,this.H=p||{},y&&R!==void 0&&(this.H.OSID=y,this.H.OAID=R),this.F=this.X,this.I=Uy(this,null,this.W),Hl(this)};function nh(u){if(Ny(u),u.G==3){var p=u.U++,y=rr(u.I);if(Ve(y,"SID",u.K),Ve(y,"RID",p),Ve(y,"TYPE","terminate"),Ko(u,y),p=new Or(u,u.j,p),p.L=2,p.v=Fl(rr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=zy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),jl(p)}Fy(u)}function $l(u){u.g&&(ih(u),u.g.cancel(),u.g=null)}function Ny(u){$l(u),u.u&&(a.clearTimeout(u.u),u.u=null),Wl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Hl(u){if(!fy(u.h)&&!u.s){u.s=!0;var p=u.Ga;Z||A(),B||(Z(),B=!0),ee.add(p,u),u.B=0}}function uk(u,p){return py(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vo(m(u.Ga,u,p),Vy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Or(this,this.j,u);let F=this.o;if(this.S&&(F?(F=S(F),k(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var R=this.i[y];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(p+=R,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Oy(this,M,p),y=rr(this.I),Ve(y,"RID",u),Ve(y,"CVER",22),this.D&&Ve(y,"X-HTTP-Session-Id",this.D),Ko(this,y),F&&(this.O?p="headers="+encodeURIComponent(String(Ty(F)))+"&"+p:this.m&&th(y,this.m,F)),eh(this.h,M),this.Ua&&Ve(y,"TYPE","init"),this.P?(Ve(y,"$req",p),Ve(y,"SID","null"),M.T=!0,Yd(M,y,null)):Yd(M,y,p),this.G=2}}else this.G==3&&(u?Dy(this,u):this.i.length==0||fy(this.h)||Dy(this))};function Dy(u,p){var y;p?y=p.l:y=u.U++;const R=rr(u.I);Ve(R,"SID",u.K),Ve(R,"RID",y),Ve(R,"AID",u.T),Ko(u,R),u.m&&u.o&&th(R,u.m,u.o),y=new Or(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Oy(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),eh(u.h,y),Yd(y,R,p)}function Ko(u,p){u.H&&j(u.H,function(y,R){Ve(p,R,y)}),u.l&&yy({},function(y,R){Ve(p,R,y)})}function Oy(u,p,y){y=Math.min(u.i.length,y);var R=u.l?m(u.l.Na,u.l,u):null;e:{var M=u.i;let F=-1;for(;;){const ne=["count="+y];F==-1?0<y?(F=M[0].g,ne.push("ofs="+F)):F=0:ne.push("ofs="+F);let be=!0;for(let ht=0;ht<y;ht++){let ke=M[ht].g;const Et=M[ht].map;if(ke-=F,0>ke)F=Math.max(0,M[ht].g-100),be=!1;else try{sk(Et,ne,"req"+ke+"_")}catch{R&&R(Et)}}if(be){R=ne.join("&");break e}}}return u=u.i.splice(0,y),p.D=u,R}function Ly(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Z||A(),B||(Z(),B=!0),ee.add(p,u),u.v=0}}function rh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vo(m(u.Fa,u),Vy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,jy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vo(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),$l(this),jy(this))};function ih(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function jy(u){u.g=new Or(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=rr(u.qa);Ve(p,"RID","rpc"),Ve(p,"SID",u.K),Ve(p,"AID",u.T),Ve(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ve(p,"TO",u.ja),Ve(p,"TYPE","xmlhttp"),Ko(u,p),u.m&&u.o&&th(p,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Fl(rr(p)),y.m=null,y.P=!0,uy(y,u)}t.Za=function(){this.C!=null&&(this.C=null,$l(this),rh(this),Ot(19))};function Wl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function My(u,p){var y=null;if(u.g==p){Wl(u),ih(u),u.g=null;var R=2}else if(Zd(u.h,p))y=p.D,my(u.h,p),R=1;else return;if(u.G!=0){if(p.o)if(R==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var M=u.B;R=Dl(),G(R,new sy(R,y)),Hl(u)}else Ly(u);else if(M=p.s,M==3||M==0&&0<p.X||!(R==1&&uk(u,p)||R==2&&rh(u)))switch(y&&0<y.length&&(p=u.h,p.i=p.i.concat(y)),M){case 1:Ni(u,5);break;case 4:Ni(u,10);break;case 3:Ni(u,6);break;default:Ni(u,2)}}}function Vy(u,p){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*p}function Ni(u,p){if(u.j.info("Error code "+p),p==2){var y=m(u.fb,u),R=u.Xa;const M=!R;R=new bi(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ml(R,"https"),Fl(R),M?nk(R.toString(),y):rk(R.toString(),y)}else Ot(2);u.G=0,u.l&&u.l.sa(p),Fy(u),Ny(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function Fy(u){if(u.G=0,u.ka=[],u.l){const p=gy(u.h);(p.length!=0||u.i.length!=0)&&(O(u.ka,p),O(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function Uy(u,p,y){var R=y instanceof bi?rr(y):new bi(y);if(R.g!="")p&&(R.g=p+"."+R.g),Vl(R,R.s);else{var M=a.location;R=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var F=new bi(null);R&&Ml(F,R),p&&(F.g=p),M&&Vl(F,M),y&&(F.l=y),R=F}return y=u.D,p=u.ya,y&&p&&Ve(R,y,p),Ve(R,"VER",u.la),Ko(u,R),R}function zy(u,p,y){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ge(new Ul({eb:y})):new Ge(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function By(){}t=By.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ql(){}ql.prototype.g=function(u,p){return new tn(u,p)};function tn(u,p){U.call(this),this.g=new by(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!v(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new gs(this)}T(tn,U),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){nh(this.g)},tn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=nr(u),u=y);p.i.push(new qT(p.Ya++,u)),p.G==3&&Hl(p)},tn.prototype.N=function(){this.g.l=null,delete this.j,nh(this.g),delete this.g,tn.aa.N.call(this)};function $y(u){qd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const y in p){u=y;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}T($y,qd);function Hy(){Kd.call(this),this.status=1}T(Hy,Kd);function gs(u){this.g=u}T(gs,By),gs.prototype.ua=function(){G(this.g,"a")},gs.prototype.ta=function(u){G(this.g,new $y(u))},gs.prototype.sa=function(u){G(this.g,new Hy)},gs.prototype.ra=function(){G(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,ES=function(){return new ql},wS=function(){return Dl()},_S=Pi,up={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ol.NO_ERROR=0,Ol.TIMEOUT=8,Ol.HTTP_ERROR=6,Hu=Ol,oy.COMPLETE="complete",vS=oy,ty.EventType=jo,jo.OPEN="a",jo.CLOSE="b",jo.ERROR="c",jo.MESSAGE="d",U.prototype.listen=U.prototype.K,fa=ty,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,yS=Ge}).apply(typeof pu<"u"?pu:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",U_="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Um("@firebase/firestore");function xs(){return ns.logLevel}function oe(t,...e){if(ns.logLevel<=xe.DEBUG){const n=e.map(Jm);ns.debug(`Firestore (${Io}): ${t}`,...n)}}function Tr(t,...e){if(ns.logLevel<=xe.ERROR){const n=e.map(Jm);ns.error(`Firestore (${Io}): ${t}`,...n)}}function fi(t,...e){if(ns.logLevel<=xe.WARN){const n=e.map(Jm);ns.warn(`Firestore (${Io}): ${t}`,...n)}}function Jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xS(t,r,n)}function xS(t,e,n){let r=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tr(r),new Error(r)}function Pe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||xS(e,i,r)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ID{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class kD{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new SS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new kt(e)}}class CD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new CD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new z_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=RD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function cp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return _e(r,i);{const s=IS(),o=bD(s.encode(B_(t,n)),s.encode(B_(e,n)));return o!==0?o:_e(r,i)}}n+=r>65535?2:1}return _e(t.length,e.length)}function B_(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function bD(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return _e(t[n],e[n]);return _e(t.length,e.length)}function ao(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="__name__";class zn{constructor(e,n,r){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&de(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=zn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return _e(e.length,n.length)}static compareSegments(e,n){const r=zn.isNumericId(e),i=zn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?zn.extractNumericId(e).compare(zn.extractNumericId(n)):cp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class Oe extends zn{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const ND=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends zn{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return ND.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$_}static keyField(){return new gt([$_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ie(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ie(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(Oe.fromString(e))}static fromName(e){return new ue(Oe.fromString(e).popFirst(5))}static empty(){return new ue(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t,e,n){if(!n)throw new ie(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DD(t,e,n,r){if(e===!0&&r===!0)throw new ie(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H_(t){if(!ue.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W_(t){if(ue.isDocumentKey(t))throw new ie(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function Qt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gd(t);throw new ie(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Sl(t,e){if(!kS(t))throw new ie(z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ie(z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,K_=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*K_);return new Ue(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q_)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/K_}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sl(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:rt("string",Ue._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new Ue(0,0))}static max(){return new pe(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function OD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new pi(i,ue.empty(),e)}function LD(t){return new pi(t.readTime,t.key,nl)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(pe.min(),ue.empty(),nl)}static max(){return new pi(pe.max(),ue.empty(),nl)}}function jD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==MD)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function FD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function vd(t){return t==null}function Nc(t){return t===0&&1/t==-1/0}function UD(t){return typeof t=="number"&&Number.isInteger(t)&&!Nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="";function zD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G_(e)),e=BD(t.get(n),e);return G_(e)}function BD(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case CS:n+="";break;default:n+=s}}return n}function G_(t){return t+CS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pt.RED,this.left=i??pt.EMPTY,this.right=s??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y_(this.data.getIterator())}getIteratorFrom(e){return new Y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class Y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new on([])}unionWith(e){let n=new at(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new PS("Invalid base64 string: "+s):s}}(e);return new _t(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const $D=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=$D.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="server_timestamp",bS="__type__",NS="__previous_value__",DS="__local_write_time__";function tg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[bS])===null||n===void 0?void 0:n.stringValue)===RS}function _d(t){const e=t.mapValue.fields[NS];return tg(e)?_d(e):e}function rl(t){const e=mi(t.mapValue.fields[DS].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,i,s,o,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Dc="(default)";class il{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new il("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="__type__",WD="__max__",gu={mapValue:{}},LS="__vector__",Oc="value";function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tg(t)?4:KD(t)?9007199254740991:qD(t)?10:11:de(28295,{value:t})}function Jn(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=mi(i.timestampValue),a=mi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gi(i.bytesValue).isEqual(gi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?Nc(o)===Nc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Q_(o)!==Q_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Jn(o[l],a[l])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function sl(t,e){return(t.values||[]).find(n=>Jn(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Xe(s.integerValue||s.doubleValue),l=Xe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return X_(t.timestampValue,e.timestampValue);case 4:return X_(rl(t),rl(e));case 5:return cp(t.stringValue,e.stringValue);case 6:return function(s,o){const a=gi(s),l=gi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=_e(a[c],l[c]);if(d!==0)return d}return _e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=_e(Xe(s.latitude),Xe(o.latitude));return a!==0?a:_e(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const f=s.fields||{},m=o.fields||{},g=(a=f[Oc])===null||a===void 0?void 0:a.arrayValue,T=(l=m[Oc])===null||l===void 0?void 0:l.arrayValue,w=_e(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:J_(g,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===gu.mapValue&&o===gu.mapValue)return 0;if(s===gu.mapValue)return 1;if(o===gu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=cp(l[f],d[f]);if(m!==0)return m;const g=lo(a[l[f]],c[d[f]]);if(g!==0)return g}return _e(l.length,d.length)}(t.mapValue,e.mapValue);default:throw de(23264,{le:n})}}function X_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=mi(t),r=mi(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function J_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=lo(n[i],r[i]);if(s)return s}return _e(n.length,r.length)}function uo(t){return dp(t)}function dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=mi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dp(n.fields[o])}`;return i+"}"}(t.mapValue):de(61005,{value:t})}function Wu(t){switch(yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_d(t);return e?16+Wu(e):16;case 5:return 2*t.stringValue.length;case 6:return gi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Wu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ii(r.fields,(s,o)=>{i+=s.length+Wu(o)}),i}(t.mapValue);default:throw de(13486,{value:t})}}function Z_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hp(t){return!!t&&"integerValue"in t}function ng(t){return!!t&&"arrayValue"in t}function ew(t){return!!t&&"nullValue"in t}function tw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qu(t){return!!t&&"mapValue"in t}function qD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[OS])===null||n===void 0?void 0:n.stringValue)===LS}function Aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Aa(n)}setAll(e){let n=gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Aa(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ii(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(Aa(this.value))}}function jS(t){const e=[];return Ii(t.fields,(n,r)=>{const i=new gt([n]);if(qu(r)){const s=jS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new At(e,0,pe.min(),pe.min(),pe.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,pe.min(),pe.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,pe.min(),pe.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.position=e,this.inclusive=n}}function nw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function GD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{}class nt extends MS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YD(e,n,r):n==="array-contains"?new ZD(e,r):n==="in"?new eO(e,r):n==="not-in"?new tO(e,r):n==="array-contains-any"?new nO(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XD(e,r):new JD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(lo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends MS{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new On(e,n)}matches(e){return VS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function VS(t){return t.op==="and"}function FS(t){return QD(t)&&VS(t)}function QD(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function fp(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(FS(t))return t.filters.map(e=>fp(e)).join(",");{const e=t.filters.map(n=>fp(n)).join(",");return`${t.op}(${e})`}}function US(t,e){return t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&Jn(r.value,i.value)}(t,e):t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&US(o,i.filters[a]),!0):!1}(t,e):void de(19439)}function zS(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(zS).join(" ,")+"}"}(t):"Filter"}class YD extends nt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class XD extends nt{constructor(e,n){super(e,"in",n),this.keys=BS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JD extends nt{constructor(e,n){super(e,"not-in",n),this.keys=BS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class ZD extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ng(n)&&sl(n.arrayValue,this.value)}}class eO extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class tO extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sl(this.value.arrayValue,n)}}class nO extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function iw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new rO(t,e,n,r,i,s,o)}function rg(t){const e=me(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.Pe=n}return e.Pe}function ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!US(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rw(t.startAt,e.startAt)&&rw(t.endAt,e.endAt)}function pp(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function iO(t,e,n,r,i,s,o,a){return new Co(t,e,n,r,i,s,o,a)}function wd(t){return new Co(t)}function sw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $S(t){return t.collectionGroup!==null}function Pa(t){const e=me(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new at(gt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new ol(s,r))}),n.has(gt.keyField().canonicalString())||e.Te.push(new ol(gt.keyField(),r))}return e.Te}function Gn(t){const e=me(t);return e.Ie||(e.Ie=sO(e,Pa(t))),e.Ie}function sO(t,e){if(t.limitType==="F")return iw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ol(i.field,s)});const n=t.endAt?new Lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lc(t.startAt.position,t.startAt.inclusive):null;return iw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mp(t,e){const n=t.filters.concat([e]);return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gp(t,e,n){return new Co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ed(t,e){return ig(Gn(t),Gn(e))&&t.limitType===e.limitType}function HS(t){return`${rg(Gn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zS(i)).join(", ")}]`),vd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>uo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>uo(i)).join(",")),`Target(${r})`}(Gn(t))}; limitType=${t.limitType})`}function xd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ue.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Pa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=nw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Pa(r),i)||r.endAt&&!function(o,a,l){const c=nw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Pa(r),i))}(t,e)}function oO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WS(t){return(e,n)=>{let r=!1;for(const i of Pa(t)){const s=aO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aO(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?lo(l,c):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Ke(ue.comparator);function kr(){return lO}const qS=new Ke(ue.comparator);function pa(...t){let e=qS;for(const n of t)e=e.insert(n.key,n);return e}function KS(t){let e=qS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $i(){return Ra()}function GS(){return Ra()}function Ra(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const uO=new Ke(ue.comparator),cO=new at(ue.comparator);function Se(...t){let e=cO;for(const n of t)e=e.add(n);return e}const dO=new at(_e);function hO(){return dO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nc(e)?"-0":e}}function QS(t){return{integerValue:""+t}}function fO(t,e){return UD(e)?QS(e):sg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function pO(t,e,n){return t instanceof al?function(i,s){const o={fields:{[bS]:{stringValue:RS},[DS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tg(s)&&(s=_d(s)),s&&(o.fields[NS]=s),{mapValue:o}}(n,e):t instanceof co?XS(t,e):t instanceof ho?JS(t,e):function(i,s){const o=YS(i,s),a=ow(o)+ow(i.Ee);return hp(o)&&hp(i.Ee)?QS(a):sg(i.serializer,a)}(t,e)}function mO(t,e,n){return t instanceof co?XS(t,e):t instanceof ho?JS(t,e):n}function YS(t,e){return t instanceof jc?function(r){return hp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class al extends Sd{}class co extends Sd{constructor(e){super(),this.elements=e}}function XS(t,e){const n=ZS(e);for(const r of t.elements)n.some(i=>Jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ho extends Sd{constructor(e){super(),this.elements=e}}function JS(t,e){let n=ZS(e);for(const r of t.elements)n=n.filter(i=>!Jn(i,r));return{arrayValue:{values:n}}}class jc extends Sd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function ow(t){return Xe(t.integerValue||t.doubleValue)}function ZS(t){return ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,n){this.field=e,this.transform=n}}function gO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof co&&i instanceof co||r instanceof ho&&i instanceof ho?ao(r.elements,i.elements,Jn):r instanceof jc&&i instanceof jc?Jn(r.Ee,i.Ee):r instanceof al&&i instanceof al}(t.transform,e.transform)}class yO{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Id{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ag(t.key,wn.none()):new Il(t.key,t.data,wn.none());{const n=t.data,r=Ht.empty();let i=new at(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(t.key,r,new on(i.toArray()),wn.none())}}function vO(t,e,n){t instanceof Il?function(i,s,o){const a=i.value.clone(),l=lw(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,s,o){if(!Ku(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=lw(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(tI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ba(t,e,n,r){return t instanceof Il?function(s,o,a,l){if(!Ku(s.precondition,o))return a;const c=s.value.clone(),d=uw(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(s,o,a,l){if(!Ku(s.precondition,o))return a;const c=uw(s.fieldTransforms,l,o),d=o.data;return d.setAll(tI(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Ku(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _O(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=YS(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function aw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ao(r,i,(s,o)=>gO(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Il extends Id{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ti extends Id{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lw(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,mO(o,a,n[i]))}return r}function uw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,pO(s,o,e))}return r}class ag extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wO extends Id{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&vO(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=GS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=eI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>aw(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>aw(n,r))}}class lg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return uO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,Ie;function IO(t){switch(t){case z.OK:return de(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function nI(t){if(t===void 0)return Tr("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ze.OK:return z.OK;case Ze.CANCELLED:return z.CANCELLED;case Ze.UNKNOWN:return z.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return z.INTERNAL;case Ze.UNAVAILABLE:return z.UNAVAILABLE;case Ze.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ze.NOT_FOUND:return z.NOT_FOUND;case Ze.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ze.ABORTED:return z.ABORTED;case Ze.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ze.DATA_LOSS:return z.DATA_LOSS;default:return de(39323,{code:t})}}(Ie=Ze||(Ze={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new ui([4294967295,4294967295],0);function cw(t){const e=IS().encode(t),n=new gS;return n.update(e),new Uint8Array(n.digest())}function dw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ui([n,r],0),new ui([i,s],0)]}class ug{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ma(`Invalid padding: ${n}`);if(r<0)throw new ma(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ma(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ma(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ui.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ui.fromNumber(r)));return i.compare(TO)===1&&(i=new ui([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=cw(e),[r,i]=dw(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ug(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=cw(e),[r,i]=dw(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ma extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Td(pe.min(),i,new Ke(_e),kr(),Se())}}class Tl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tl(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class rI{constructor(e,n){this.targetId=e,this.De=n}}class iI{constructor(e,n,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hw{constructor(){this.ve=0,this.Ce=fw(),this.Fe=_t.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Se(),n=Se(),r=Se();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:de(38017,{changeType:s})}}),new Tl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=fw()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class kO{constructor(e){this.We=e,this.Ge=new Map,this.ze=kr(),this.je=yu(),this.Je=yu(),this.He=new Ke(_e)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(pp(s))if(r===0){const o=new ue(s.path);this.Xe(n,o,At.newNoDocument(o,pe.min()))}else Pe(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=gi(r).toUint8Array()}catch(l){if(l instanceof PS)return fi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ug(o,i,s)}catch(l){return fi(l instanceof ma?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&pp(a.target)){const l=new ue(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,At.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=Se();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Td(e,n,this.He,this.ze,r);return this.ze=kr(),this.je=yu(),this.Je=yu(),this.He=new Ke(_e),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new hw,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new at(_e),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new at(_e),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hw),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function yu(){return new Ke(ue.comparator)}function fw(){return new Ke(ue.comparator)}const CO={asc:"ASCENDING",desc:"DESCENDING"},AO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PO={and:"AND",or:"OR"};class RO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(t,e){return t.useProto3Json||vd(e)?e:{value:e}}function Mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bO(t,e){return Mc(t,e.toTimestamp())}function Qn(t){return Pe(!!t,49232),pe.fromTimestamp(function(n){const r=mi(n);return new Ue(r.seconds,r.nanos)}(t))}function cg(t,e){return vp(t,e).canonicalString()}function vp(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oI(t){const e=Oe.fromString(t);return Pe(dI(e),10190,{key:e.toString()}),e}function _p(t,e){return cg(t.databaseId,e.path)}function Bh(t,e){const n=oI(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(lI(n))}function aI(t,e){return cg(t.databaseId,e)}function NO(t){const e=oI(t);return e.length===4?Oe.emptyPath():lI(e)}function wp(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lI(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pw(t,e,n){return{name:_p(t,e),fields:n.value.mapValue.fields}}function DO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:de(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),_t.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),_t.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?z.UNKNOWN:nI(c.code);return new ie(d,c.message||"")}(o);n=new iI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bh(t,r.document.name),s=Qn(r.document.updateTime),o=r.document.createTime?Qn(r.document.createTime):pe.min(),a=new Ht({mapValue:{fields:r.document.fields}}),l=At.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Gu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bh(t,r.document),s=r.readTime?Qn(r.readTime):pe.min(),o=At.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Gu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bh(t,r.document),s=r.removedTargetIds||[];n=new Gu([],s,i,null)}else{if(!("filter"in e))return de(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new SO(i,s),a=r.targetId;n=new rI(a,o)}}return n}function OO(t,e){let n;if(e instanceof Il)n={update:pw(t,e.key,e.value)};else if(e instanceof ag)n={delete:_p(t,e.key)};else if(e instanceof Ti)n={update:pw(t,e.key,e.data),updateMask:$O(e.fieldMask)};else{if(!(e instanceof wO))return de(16599,{Rt:e.type});n={verify:_p(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof al)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof co)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ho)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw de(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:bO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:de(27497)}(t,e.precondition)),n}function LO(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Qn(i.updateTime):Qn(s);return o.isEqual(pe.min())&&(o=Qn(s)),new yO(o,i.transformResults||[])}(n,e))):[]}function jO(t,e){return{documents:[aI(t,e.path)]}}function MO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aI(t,i);const s=function(c){if(c.length!==0)return cI(On.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Is(m.field),direction:UO(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function VO(t){let e=NO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=uI(f);return m instanceof On&&FS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(T){return new ol(Ts(T.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,vd(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Lc(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new Lc(g,m)}(n.endAt)),iO(e,i,o,s,a,"F",l,c)}function FO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ts(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ts(n.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ts(n.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ts(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Ts(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>uI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function UO(t){return CO[t]}function zO(t){return AO[t]}function BO(t){return PO[t]}function Is(t){return{fieldPath:t.canonicalString()}}function Ts(t){return gt.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof nt?function(n){if(n.op==="=="){if(tw(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(ew(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tw(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(ew(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:zO(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(i=>cI(i));return r.length===1?r[0]:{compositeFilter:{op:BO(n.op),filters:r}}}(t):de(54877,{filter:t})}function $O(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function dI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=_t.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.gt=e}}function WO(t){const e=VO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(){this.Dn=new KO}addToCollectionParentIndex(e,n){return this.Dn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(pi.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class KO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Oe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hI=41943040;class Bt{static withCacheSize(e){return new Bt(e,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt.DEFAULT_COLLECTION_PERCENTILE=10,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bt.DEFAULT=new Bt(hI,Bt.DEFAULT_COLLECTION_PERCENTILE,Bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bt.DISABLED=new Bt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new fo(0)}static ur(){return new fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="LruGarbageCollector",GO=1048576;function yw([t,e],[n,r]){const i=_e(t,n);return i===0?_e(e,r):i}class QO{constructor(e){this.Tr=e,this.buffer=new at(yw),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(gw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?oe(gw,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Rr(3e5)})}}class XO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(yd.ue);const r=new QO(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(mw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mw):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),xs()<=xe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function JO(t,e){return new XO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ba(r.mutation,i,on.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pa();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=kr();const o=Ra(),a=function(){return Ra()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof Ti)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ba(d.mutation,c,d.mutation.getFieldMask(),Ue.now())):o.set(c.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new eL(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ra();let i=new Ke((o,a)=>o-a),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||on.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(i.get(a.batchId)||Se()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=GS();d.forEach(m=>{if(!s.has(m)){const g=eI(n.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$S(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve($i());let a=nl,l=s;return o.next(c=>H.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Se())).next(d=>({batchId:a,changes:KS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=pa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=pa();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{const c=function(f,m){return new Co(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,At.newInvalidDocument(d)))});let a=pa();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&ba(d.mutation,c,on.empty(),Ue.now()),xd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return H.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:WO(i.bundledQuery),readTime:Qn(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this.overlays=new Ke(ue.comparator),this.kr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$i();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=$i(),s=n.length+1,o=new ue(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=$i(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=$i(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return H.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xO(n,r));let s=this.kr.get(n);s===void 0&&(s=Se(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(){this.qr=new at(ut.Qr),this.$r=new at(ut.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ut(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ue(new Oe([])),r=new ut(n,e),i=new ut(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ue(new Oe([])),r=new ut(n,e),i=new ut(n,e+1);let s=Se();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ut(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ue.comparator(e.key,n.key)||_e(e.Hr,n.Hr)}static Ur(e,n){return _e(e.Hr,n.Hr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new at(ut.Qr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EO(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?eg:this.er-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),i=new ut(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(_e);return n.forEach(i=>{const s=new ut(i,0),o=new ut(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),H.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ue.isDocumentKey(s)||(s=s.child(""));const o=new ut(new ue(s),0);let a=new at(_e);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),H.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return H.forEach(n.mutations,i=>{const s=new ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new ut(n,0),i=this.Yr.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.ni=e,this.docs=function(){return new Ke(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=kr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=kr();const o=n.path,a=new ue(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||jD(LD(d),r)<=0||(i.has(d.key)||xd(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){de(9500)}ri(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aL(this)}getSize(e){return H.resolve(this.size)}}class aL extends ZO{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.persistence=e,this.ii=new ls(n=>rg(n),ig),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.si=0,this.oi=new dg,this.targetCount=0,this._i=fo.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),H.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.hr(n),H.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.ai={},this.overlays={},this.ui=new yd(0),this.ci=!1,this.ci=!0,this.li=new iL,this.referenceDelegate=e(this),this.hi=new lL(this),this.indexManager=new qO,this.remoteDocumentCache=function(i){return new oL(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new HO(n),this.Ti=new nL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new sL(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new uL(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return H.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class uL extends VD{constructor(e){super(),this.currentSequenceNumber=e}}class hg{constructor(e){this.persistence=e,this.Ai=new dg,this.Ri=null}static Vi(e){return new hg(e)}get mi(){if(this.Ri)return this.Ri;throw de(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.mi,r=>{const i=ue.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return H.or([()=>H.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Vc{constructor(e,n){this.persistence=e,this.gi=new ls(r=>zD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JO(this,n)}static Vi(e,n){return new Vc(e,n)}Ii(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return H.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?H.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),H.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wu(e.data.value)),n}Sr(e,n,r){return H.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Se(),i=Se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return BR()?8:FD(Rt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cL;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(xs()<=xe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(xs()<=xe.DEBUG&&oe("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(xs()<=xe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gn(n))):H.resolve())}ps(e,n){if(sw(n))return H.resolve(null);let r=Gn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gp(n,null,"F"),r=Gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Se(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,gp(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,i){return sw(n)||i.isEqual(pe.min())?H.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?H.resolve(null):(xs()<=xe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ss(n)),this.vs(e,o,n,OD(i,nl)).next(a=>a))})}bs(e,n){let r=new at(WS(e));return n.forEach((i,s)=>{xd(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return xs()<=xe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.gs.getDocumentsMatchingQuery(e,n,pi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="LocalStore",hL=3e8;class fL{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Ke(_e),this.Ms=new ls(s=>rg(s),ig),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function pL(t,e,n,r){return new fL(t,e,n,r)}async function pI(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Se();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function mL(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,m=f.keys();let g=H.resolve();return m.forEach(T=>{g=g.next(()=>d.getEntry(l,T)).next(w=>{const O=c.docVersions.get(T);Pe(O!==null,48541),w.version.compareTo(O)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mI(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function gL(t,e){const n=me(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.hi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.hi.addMatchingKeys(s,d.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(_t.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(w,O,_){return w.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=hL?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,d)&&a.push(n.hi.updateTargetData(s,g))});let l=kr(),c=Se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(yL(s,o,e.documentUpdates).next(d=>{l=d.Ls,c=d.ks})),!r.isEqual(pe.min())){const d=n.hi.getLastRemoteSnapshotVersion(s).next(f=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function yL(t,e,n){let r=Se(),i=Se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=kr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe(pg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function vL(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=eg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _L(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Ep(t,e,n){const r=me(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ko(o))throw o;oe(pg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function vw(t,e,n){const r=me(t);let i=pe.min(),s=Se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=me(l),m=f.Ms.get(d);return m!==void 0?H.resolve(f.Fs.get(m)):f.hi.getTargetData(c,d)}(r,o,Gn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:Se())).next(a=>(wL(r,oO(e),a),{documents:a,qs:s})))}function wL(t,e,n){let r=t.xs.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class _w{constructor(){this.activeTargetIds=hO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EL{constructor(){this.Fo=new _w,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _w,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="ConnectivityMonitor";class Ew{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(ww,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function xp(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="RestConnection",SL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=xp(),a=this.Go(e,n.toUriEncodedString());oe($h,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(a),d=Eo(c);return this.jo(e,a,l,r,d).then(f=>(oe($h,`Received RPC '${e}' ${o}: `,f),f),f=>{throw fi($h,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=SL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="WebChannelConnection";class kL extends IL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=xp();return new Promise((a,l)=>{const c=new yS;c.setWithCredentials(!0),c.listenOnce(vS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Hu.NO_ERROR:const f=c.getResponseJson();oe(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Hu.TIMEOUT:oe(Tt,`RPC '${e}' ${o} timed out`),l(new ie(z.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const m=c.getStatus();if(oe(Tt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const w=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(T.status);l(new ie(w,T.message))}else l(new ie(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ie(z.UNAVAILABLE,"Connection failed."));break;default:de(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{oe(Tt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);oe(Tt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}P_(e,n,r){const i=xp(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ES(),a=wS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");oe(Tt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);this.T_(f);let m=!1,g=!1;const T=new TL({Ho:O=>{g?oe(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(m||(oe(Tt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),oe(Tt,`RPC '${e}' stream ${i} sending:`,O),f.send(O))},Yo:()=>f.close()}),w=(O,_,v)=>{O.listen(_,x=>{try{v(x)}catch(L){setTimeout(()=>{throw L},0)}})};return w(f,fa.EventType.OPEN,()=>{g||(oe(Tt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),w(f,fa.EventType.CLOSE,()=>{g||(g=!0,oe(Tt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(f))}),w(f,fa.EventType.ERROR,O=>{g||(g=!0,fi(Tt,`RPC '${e}' stream ${i} transport errored. Name:`,O.name,"Message:",O.message),T.__(new ie(z.UNAVAILABLE,"The operation could not be completed")))}),w(f,fa.EventType.MESSAGE,O=>{var _;if(!g){const v=O.data[0];Pe(!!v,16349);const x=v,L=(x==null?void 0:x.error)||((_=x[0])===null||_===void 0?void 0:_.error);if(L){oe(Tt,`RPC '${e}' stream ${i} received error:`,L);const V=L.status;let j=function(C){const k=Ze[C];if(k!==void 0)return nI(k)}(V),b=L.message;j===void 0&&(j=z.INTERNAL,b="Unknown error status: "+V+" with message "+L.message),g=!0,T.__(new ie(j,b)),f.close()}else oe(Tt,`RPC '${e}' stream ${i} received:`,v),T.a_(v)}}),w(a,_S.STAT_EVENT,O=>{O.stat===up.PROXY?oe(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===up.NOPROXY&&oe(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new RO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="PersistentStream";class yI{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(Tr(n.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ie(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return oe(xw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(oe(xw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CL extends yI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=DO(this.serializer,e),r=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?Qn(o.readTime):pe.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=wp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=pp(l)?{documents:jO(s,l)}:{query:MO(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sI(s,o.resumeToken);const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=Mc(s,o.snapshotVersion.toTimestamp());const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=FO(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=wp(this.serializer),n.removeTarget=e,this.k_(n)}}class AL extends yI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=LO(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=wp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>OO(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{}class RL extends PL{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,vp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(z.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,vp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(z.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class bL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Tr(n),this._a=!1):oe("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="RemoteStore";class NL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{us(this)&&(oe(rs,"Restarting streams for network reachability change."),await async function(l){const c=me(l);c.Ia.add(4),await kl(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Cd(c)}(this))})}),this.Aa=new bL(r,i)}}async function Cd(t){if(us(t))for(const e of t.da)await e(!0)}async function kl(t){for(const e of t.da)await e(!1)}function vI(t,e){const n=me(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),vg(n)?yg(n):Ao(n).x_()&&gg(n,e))}function mg(t,e){const n=me(t),r=Ao(n);n.Ta.delete(e),r.x_()&&_I(n,e),n.Ta.size===0&&(r.x_()?r.B_():us(n)&&n.Aa.set("Unknown"))}function gg(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).H_(e)}function _I(t,e){t.Ra.$e(e),Ao(t).Y_(e)}function yg(t){t.Ra=new kO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.Aa.aa()}function vg(t){return us(t)&&!Ao(t).M_()&&t.Ta.size>0}function us(t){return me(t).Ia.size===0}function wI(t){t.Ra=void 0}async function DL(t){t.Aa.set("Online")}async function OL(t){t.Ta.forEach((e,n)=>{gg(t,e)})}async function LL(t,e){wI(t),vg(t)?(t.Aa.la(e),yg(t)):t.Aa.set("Unknown")}async function jL(t,e,n){if(t.Aa.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){oe(rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fc(t,r)}else if(e instanceof Gu?t.Ra.Ye(e):e instanceof rI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(pe.min()))try{const r=await mI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ta.get(c);d&&s.Ta.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.Ta.get(l);if(!d)return;s.Ta.set(l,d.withResumeToken(_t.EMPTY_BYTE_STRING,d.snapshotVersion)),_I(s,l);const f=new Xr(d.target,l,c,d.sequenceNumber);gg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){oe(rs,"Failed to raise snapshot:",r),await Fc(t,r)}}async function Fc(t,e,n){if(!ko(e))throw e;t.Ia.add(1),await kl(t),t.Aa.set("Offline"),n||(n=()=>mI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(rs,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Cd(t)})}function EI(t,e){return e().catch(n=>Fc(t,n,e))}async function Ad(t){const e=me(t),n=vi(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:eg;for(;ML(e);)try{const i=await vL(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,VL(e,i)}catch(i){await Fc(e,i)}xI(e)&&SI(e)}function ML(t){return us(t)&&t.Pa.length<10}function VL(t,e){t.Pa.push(e);const n=vi(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function xI(t){return us(t)&&!vi(t).M_()&&t.Pa.length>0}function SI(t){vi(t).start()}async function FL(t){vi(t).na()}async function UL(t){const e=vi(t);for(const n of t.Pa)e.X_(n.mutations)}async function zL(t,e,n){const r=t.Pa.shift(),i=lg.from(r,e,n);await EI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ad(t)}async function BL(t,e){e&&vi(t).Z_&&await async function(r,i){if(function(o){return IO(o)&&o!==z.ABORTED}(i.code)){const s=r.Pa.shift();vi(r).N_(),await EI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ad(r)}}(t,e),xI(t)&&SI(t)}async function Sw(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),oe(rs,"RemoteStore received new credentials");const r=us(n);n.Ia.add(3),await kl(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Cd(n)}async function $L(t,e){const n=me(t);e?(n.Ia.delete(2),await Cd(n)):e||(n.Ia.add(2),await kl(n),n.Aa.set("Unknown"))}function Ao(t){return t.Va||(t.Va=function(n,r,i){const s=me(n);return s.ia(),new CL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:DL.bind(null,t),e_:OL.bind(null,t),n_:LL.bind(null,t),J_:jL.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),vg(t)?yg(t):t.Aa.set("Unknown")):(await t.Va.stop(),wI(t))})),t.Va}function vi(t){return t.ma||(t.ma=function(n,r,i){const s=me(n);return s.ia(),new AL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:FL.bind(null,t),n_:BL.bind(null,t),ea:UL.bind(null,t),ta:zL.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Ad(t)):(await t.ma.stop(),t.Pa.length>0&&(oe(rs,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new _g(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(t,e){if(Tr("AsyncQueue",`${e}: ${t}`),ko(t))return new ie(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{static emptySet(e){return new Qs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=pa(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.fa=new Ke(ue.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):de(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,Qs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class WL{constructor(){this.queries=Tw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=me(n),s=i.queries;i.queries=Tw(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new ie(z.ABORTED,"Firestore shutting down"))}}function Tw(){return new ls(t=>HS(t),Ed)}async function Eg(t,e){const n=me(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new HL,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wg(o,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&Sg(n)}async function xg(t,e){const n=me(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qL(t,e){const n=me(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Sg(n)}function KL(t,e,n){const r=me(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function Sg(t){t.Da.forEach(e=>{e.next()})}var Sp,kw;(kw=Sp||(Sp={})).Fa="default",kw.Cache="cache";class Ig{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Sp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.key=e}}class TI{constructor(e){this.key=e}}class GL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Se(),this.mutatedKeys=Se(),this.Xa=WS(e),this.eu=new Qs(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Iw,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),g=xd(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let O=!1;m&&g?m.data.isEqual(g.data)?T!==w&&(r.track({type:3,doc:g}),O=!0):this.iu(m,g)||(r.track({type:2,doc:g}),O=!0,(l&&this.Xa(g,l)>0||c&&this.Xa(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),O=!0):m&&!g&&(r.track({type:1,doc:m}),O=!0,(l||c)&&(a=!0)),O&&(g?(o=o.add(g),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((d,f)=>function(g,T){const w=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{At:O})}};return w(g)-w(T)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new po(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Iw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Se(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new TI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new II(r))}),n}uu(e){this.Ha=e.qs,this.Za=Se();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return po.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Tg="SyncEngine";class QL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class YL{constructor(e){this.key=e,this.lu=!1}}class XL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new ls(a=>HS(a),Ed),this.Tu=new Map,this.Iu=new Set,this.du=new Ke(ue.comparator),this.Eu=new Map,this.Au=new dg,this.Ru={},this.Vu=new Map,this.mu=fo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function JL(t,e,n=!0){const r=bI(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await kI(r,e,n,!0),i}async function ZL(t,e){const n=bI(t);await kI(n,e,!0,!1)}async function kI(t,e,n,r){const i=await _L(t.localStore,Gn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ej(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&vI(t.remoteStore,i),a}async function ej(t,e,n,r,i){t.gu=(f,m,g)=>async function(w,O,_,v){let x=O.view.nu(_);x.Ds&&(x=await vw(w.localStore,O.query,!1).then(({documents:b})=>O.view.nu(b,x)));const L=v&&v.targetChanges.get(O.targetId),V=v&&v.targetMismatches.get(O.targetId)!=null,j=O.view.applyChanges(x,w.isPrimaryClient,L,V);return Aw(w,O.targetId,j._u),j.snapshot}(t,f,m,g);const s=await vw(t.localStore,e,!0),o=new GL(e,s.qs),a=o.nu(s.documents),l=Tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Aw(t,n,c._u);const d=new QL(e,n,o);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function tj(t,e,n){const r=me(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!Ed(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mg(r.remoteStore,i.targetId),Ip(r,i.targetId)}).catch(To)):(Ip(r,i.targetId),await Ep(r.localStore,i.targetId,!0))}async function nj(t,e){const n=me(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mg(n.remoteStore,r.targetId))}async function rj(t,e,n){const r=cj(t);try{const i=await function(o,a){const l=me(o),c=Ue.now(),d=a.reduce((g,T)=>g.add(T.key),Se());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=kr(),w=Se();return l.Os.getEntries(g,d).next(O=>{T=O,T.forEach((_,v)=>{v.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,T)).next(O=>{f=O;const _=[];for(const v of a){const x=_O(v,f.get(v.key).overlayedDocument);x!=null&&_.push(new Ti(v.key,x,jS(x.value.mapValue),wn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,_,a)}).next(O=>{m=O;const _=O.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(g,O.batchId,_)})}).then(()=>({batchId:m.batchId,changes:KS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Ke(_e)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await Cl(r,i.changes),await Ad(r.remoteStore)}catch(i){const s=wg(i,"Failed to persist write");n.reject(s)}}async function CI(t,e){const n=me(t);try{const r=await gL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?Pe(o.lu,14607):i.removedDocuments.size>0&&(Pe(o.lu,42227),o.lu=!1))}),await Cl(n,r,e)}catch(r){await To(r)}}function Cw(t,e,n){const r=me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=me(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const m of f.wa)m.va(a)&&(c=!0)}),c&&Sg(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ij(t,e,n){const r=me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Ke(ue.comparator);o=o.insert(s,At.newNoDocument(s,pe.min()));const a=Se().add(s),l=new Td(pe.min(),new Map,new Ke(_e),o,a);await CI(r,l),r.du=r.du.remove(s),r.Eu.delete(e),kg(r)}else await Ep(r.localStore,e,!1).then(()=>Ip(r,e,n)).catch(To)}async function sj(t,e){const n=me(t),r=e.batch.batchId;try{const i=await mL(n.localStore,e);PI(n,r,null),AI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cl(n,i)}catch(i){await To(i)}}async function oj(t,e,n){const r=me(t);try{const i=await function(o,a){const l=me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Pe(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);PI(r,e,n),AI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Cl(r,i)}catch(i){await To(i)}}function AI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function PI(t,e,n){const r=me(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||RI(t,r)})}function RI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mg(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),kg(t))}function Aw(t,e,n){for(const r of n)r instanceof II?(t.Au.addReference(r.key,e),aj(t,r)):r instanceof TI?(oe(Tg,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||RI(t,r.key)):de(19791,{yu:r})}function aj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(oe(Tg,"New document in limbo: "+n),t.Iu.add(r),kg(t))}function kg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ue(Oe.fromString(e)),r=t.mu.next();t.Eu.set(r,new YL(n)),t.du=t.du.insert(n,r),vI(t.remoteStore,new Xr(Gn(wd(n.path)),r,"TargetPurposeLimboResolution",yd.ue))}}async function Cl(t,e,n){const r=me(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=fg.Es(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,c){const d=me(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,m=>H.forEach(m.Is,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>H.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!ko(f))throw f;oe(pg,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.Fs.get(m),T=g.snapshotVersion,w=g.withLastLimboFreeSnapshotVersion(T);d.Fs=d.Fs.insert(m,w)}}}(r.localStore,s))}async function lj(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){oe(Tg,"User change. New user:",e.toKey());const r=await pI(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new ie(z.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cl(n,r.Bs)}}function uj(t,e){const n=me(t),r=n.Eu.get(e);if(r&&r.lu)return Se().add(r.key);{let i=Se();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function bI(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ij.bind(null,e),e.hu.J_=qL.bind(null,e.eventManager),e.hu.pu=KL.bind(null,e.eventManager),e}function cj(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oj.bind(null,e),e}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return pL(this.persistence,new dL,e.initialUser,this.serializer)}Du(e){return new fI(hg.Vi,this.serializer)}bu(e){return new EL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class dj extends Uc{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){Pe(this.persistence.referenceDelegate instanceof Vc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YO(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Bt.withCacheSize(this.cacheSizeBytes):Bt.DEFAULT;return new fI(r=>Vc.Vi(r,n),this.serializer)}}class Tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lj.bind(null,this.syncEngine),await $L(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new WL}()}createDatastore(e){const n=kd(e.databaseInfo.databaseId),r=function(s){return new kL(s)}(e.databaseInfo);return function(s,o,a,l){return new RL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new NL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Cw(this.syncEngine,n,0),function(){return Ew.C()?new Ew:new xL}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const f=new XL(i,s,o,a,l,c);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=me(i);oe(rs,"RemoteStore shutting down."),s.Ia.add(5),await kl(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class hj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe(_i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(_i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wh(t,e){t.asyncQueue.verifyOperationInProgress(),oe(_i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await pI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{fi("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{fi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function Pw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fj(t);oe(_i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Sw(e.remoteStore,i)),t._onlineComponents=e}async function fj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(_i,"Using user provided OfflineComponentProvider");try{await Wh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;fi("Error using user provided cache. Falling back to memory cache: "+n),await Wh(t,new Uc)}}else oe(_i,"Using default OfflineComponentProvider"),await Wh(t,new dj(void 0));return t._offlineComponents}async function NI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(_i,"Using user provided OnlineComponentProvider"),await Pw(t,t._uninitializedComponentsProvider._online)):(oe(_i,"Using default OnlineComponentProvider"),await Pw(t,new Tp))),t._onlineComponents}function pj(t){return NI(t).then(e=>e.syncEngine)}async function zc(t){const e=await NI(t),n=e.eventManager;return n.onListen=JL.bind(null,e.syncEngine),n.onUnlisten=tj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nj.bind(null,e.syncEngine),n}function mj(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Cg({next:m=>{d.Ou(),o.enqueueAndForget(()=>xg(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new ie(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new ie(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Ig(wd(a.path),d,{includeMetadataChanges:!0,ka:!0});return Eg(s,f)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}function gj(t,e,n={}){const r=new gr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new Cg({next:m=>{d.Ou(),o.enqueueAndForget(()=>xg(s,f)),m.fromCache&&l.source==="server"?c.reject(new ie(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Ig(a,d,{includeMetadataChanges:!0,ka:!0});return Eg(s,f)}(await zc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="firestore.googleapis.com",bw=!0;class Nw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OI,this.ssl=bw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:bw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GO)throw new ie(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ie(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ID;switch(r.type){case"firstParty":return new AD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rw.get(n);r&&(oe("ComponentProvider","Removing Datastore"),Rw.delete(n),r.terminate())}(this),Promise.resolve()}}function yj(t,e,n,r={}){var i;t=Qt(t,Pd);const s=Eo(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(C1(`https://${l}`),A1("Firestore",!0)),o.host!==OI&&o.host!==l&&fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!xr(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=kt.MOCK_USER;else{d=DR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ie(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new kt(m)}t._authCredentials=new TD(new SS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Ye{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ye(this.firestore,e,this._key)}toJSON(){return{type:Ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Sl(n,Ye._jsonSchema))return new Ye(e,r||null,new ue(Oe.fromString(n.referencePath)))}}Ye._jsonSchemaVersion="firestore/documentReference/1.0",Ye._jsonSchema={type:rt("string",Ye._jsonSchemaVersion),referencePath:rt("string")};class ci extends ki{constructor(e,n,r){super(e,n,wd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ye(this.firestore,null,new ue(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function tr(t,e,...n){if(t=it(t),TS("collection","path",e),t instanceof Pd){const r=Oe.fromString(e,...n);return W_(r),new ci(t,null,r)}{if(!(t instanceof Ye||t instanceof ci))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return W_(r),new ci(t.firestore,null,r)}}function lt(t,e,...n){if(t=it(t),arguments.length===1&&(e=Zm.newId()),TS("doc","path",e),t instanceof Pd){const r=Oe.fromString(e,...n);return H_(r),new Ye(t,null,new ue(r))}{if(!(t instanceof Ye||t instanceof ci))throw new ie(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return H_(r),new Ye(t.firestore,t instanceof ci?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="AsyncQueue";class Ow{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gI(this,"async_queue_retry"),this.oc=()=>{const r=Hh();r&&oe(Dw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Hh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ko(e))throw e;oe(Dw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Tr("INTERNAL UNHANDLED ERROR: ",Lw(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=_g.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&de(47125,{hc:Lw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function Lw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Cr extends Pd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ow,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ow(e),this._firestoreClient=void 0,await e}}}function vj(t,e){const n=typeof t=="object"?t:N1(),r=typeof t=="string"?t:Dc,i=Bm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bR("firestore");s&&yj(i,...s)}return i}function Rd(t){if(t._terminated)throw new ie(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_j(t),t._firestoreClient}function _j(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new HD(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new hj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(_t.fromBase64String(e))}catch(n){throw new ie(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yn(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sl(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:rt("string",yn._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yn._jsonSchemaVersion}}static fromJSON(e){if(Sl(e,Yn._jsonSchema))return new Yn(e.latitude,e.longitude)}}Yn._jsonSchemaVersion="firestore/geoPoint/1.0",Yn._jsonSchema={type:rt("string",Yn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Xn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sl(e,Xn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Xn(e.vectorValues);throw new ie(z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xn._jsonSchemaVersion="firestore/vectorValue/1.0",Xn._jsonSchema={type:rt("string",Xn._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=/^__.*__$/;class Ej{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class LI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ec:t})}}class Nd{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Nd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Bc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(jI(this.Ec)&&wj.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class xj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kd(e)}Dc(e,n,r,i=!1){return new Nd({Ec:e,methodName:n,bc:r,path:gt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(t){const e=t._freezeSettings(),n=kd(t._databaseId);return new xj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MI(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);bg("Data must be an object, but it was:",o,r);const a=FI(r,o);let l,c;if(s.merge)l=new on(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=kp(e,f,n);if(!o.contains(m))throw new ie(z.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zI(d,m)||d.push(m)}l=new on(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Ej(new Ht(a),l,c)}class Od extends Po{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Od}}function VI(t,e,n){return new Nd({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ag extends Po{_toFieldTransform(e){return new og(e.path,new al)}isEqual(e){return e instanceof Ag}}class Pg extends Po{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=VI(this,e,!0),r=this.vc.map(s=>cs(s,n)),i=new co(r);return new og(e.path,i)}isEqual(e){return e instanceof Pg&&xr(this.vc,e.vc)}}class Rg extends Po{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=VI(this,e,!0),r=this.vc.map(s=>cs(s,n)),i=new ho(r);return new og(e.path,i)}isEqual(e){return e instanceof Rg&&xr(this.vc,e.vc)}}function Sj(t,e,n,r){const i=t.Dc(1,e,n);bg("Data must be an object, but it was:",i,r);const s=[],o=Ht.empty();Ii(r,(l,c)=>{const d=Ng(e,l,n);c=it(c);const f=i.gc(d);if(c instanceof Od)s.push(d);else{const m=cs(c,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new on(s);return new LI(o,a,i.fieldTransforms)}function Ij(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[kp(e,r,n)],l=[i];if(s.length%2!=0)throw new ie(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(kp(e,s[m])),l.push(s[m+1]);const c=[],d=Ht.empty();for(let m=a.length-1;m>=0;--m)if(!zI(c,a[m])){const g=a[m];let T=l[m];T=it(T);const w=o.gc(g);if(T instanceof Od)c.push(g);else{const O=cs(T,w);O!=null&&(c.push(g),d.set(g,O))}}const f=new on(c);return new LI(d,f,o.fieldTransforms)}function Tj(t,e,n,r=!1){return cs(n,t.Dc(r?4:3,e))}function cs(t,e){if(UI(t=it(t)))return bg("Unsupported field value:",e,t),FI(t,e);if(t instanceof Po)return function(r,i){if(!jI(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=cs(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ue.fromDate(r);return{timestampValue:Mc(i.serializer,s)}}if(r instanceof Ue){const s=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mc(i.serializer,s)}}if(r instanceof Yn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yn)return{bytesValue:sI(i.serializer,r._byteString)};if(r instanceof Ye){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xn)return function(o,a){return{mapValue:{fields:{[OS]:{stringValue:LS},[Oc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return sg(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${gd(r)}`)}(t,e)}function FI(t,e){const n={};return AS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(r,i)=>{const s=cs(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function UI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Yn||t instanceof yn||t instanceof Ye||t instanceof Po||t instanceof Xn)}function bg(t,e,n){if(!UI(n)||!kS(n)){const r=gd(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function kp(t,e,n){if((e=it(e))instanceof bd)return e._internalPath;if(typeof e=="string")return Ng(t,e);throw Bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const kj=new RegExp("[~\\*/\\[\\]]");function Ng(t,e,n){if(e.search(kj)>=0)throw Bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bd(...e.split("."))._internalPath}catch{throw Bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ie(z.INVALID_ARGUMENT,a+t+l)}function zI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Cj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Cj extends BI{data(){return super.data()}}function Ld(t,e){return typeof e=="string"?Ng(t,e):e instanceof bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class HI extends Dg{}function ks(t,e,...n){let r=[];e instanceof Dg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Og).length,a=s.filter(l=>l instanceof jd).length;if(o>1||o>0&&a>0)throw new ie(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jd extends HI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jd(e,n,r)}_apply(e){const n=this._parse(e);return qI(e._query,n),new ki(e.firestore,e.converter,mp(e._query,n))}_parse(e){const n=Dd(e.firestore);return function(s,o,a,l,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ie(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Vw(f,d);const T=[];for(const w of f)T.push(Mw(l,s,w));m={arrayValue:{values:T}}}else m=Mw(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Vw(f,d),m=Tj(a,o,f,d==="in"||d==="not-in");return nt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _u(t,e,n){const r=e,i=Ld("where",t);return jd._create(i,r,n)}class Og extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:On.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)qI(o,l),o=mp(o,l)}(e._query,n),new ki(e.firestore,e.converter,mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends HI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(s,o)}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Co(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function WI(t,e="asc"){const n=e,r=Ld("orderBy",t);return Lg._create(r,n)}function Mw(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new ie(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$S(e)&&n.indexOf("/")!==-1)throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Oe.fromString(n));if(!ue.isDocumentKey(r))throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z_(t,new ue(r))}if(n instanceof Ye)return Z_(t,n._key);throw new ie(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gd(n)}.`)}function Vw(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Aj{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ii(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Oc].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new Xn(s)}convertGeoPoint(e){return new Yn(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_d(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=mi(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);Pe(dI(r),9688,{name:e});const i=new il(r.get(1),r.get(3)),s=new ue(r.popFirst(5));return i.isEqual(n)||Tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ga{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qi extends BI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:rt("string",qi._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class Qu extends qi{data(e={}){return super.data(e)}}class Ki{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ga(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qu(this._firestore,this._userDataWriter,r.key,r,new ga(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ga(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Qu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ga(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Pj(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ki._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Pj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t){t=Qt(t,Ye);const e=Qt(t.firestore,Cr);return mj(Rd(e),t._key).then(n=>QI(e,t,n))}Ki._jsonSchemaVersion="firestore/querySnapshot/1.0",Ki._jsonSchema={type:rt("string",Ki._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};class jg extends Aj{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ye(this.firestore,null,n)}}function Al(t){t=Qt(t,ki);const e=Qt(t.firestore,Cr),n=Rd(e),r=new jg(e);return $I(t._query),gj(n,t._query).then(i=>new Ki(e,r,t,i))}function Ro(t,e,n){t=Qt(t,Ye);const r=Qt(t.firestore,Cr),i=KI(t.converter,e,n);return Md(r,[MI(Dd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wn.none())])}function is(t,e,n,...r){t=Qt(t,Ye);const i=Qt(t.firestore,Cr),s=Dd(i);let o;return o=typeof(e=it(e))=="string"||e instanceof bd?Ij(s,"updateDoc",t._key,e,n,r):Sj(s,"updateDoc",t._key,e),Md(i,[o.toMutation(t._key,wn.exists(!0))])}function Rj(t){return Md(Qt(t.firestore,Cr),[new ag(t._key,wn.none())])}function GI(t,e){const n=Qt(t.firestore,Cr),r=lt(t),i=KI(t.converter,e);return Md(n,[MI(Dd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function $c(t,...e){var n,r,i;t=it(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jw(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jw(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,d;if(t instanceof Ye)c=Qt(t.firestore,Cr),d=wd(t._key.path),l={next:f=>{e[o]&&e[o](QI(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Qt(t,ki);c=Qt(f.firestore,Cr),d=f._query;const m=new jg(c);l={next:g=>{e[o]&&e[o](new Ki(c,m,f,g))},error:e[o+1],complete:e[o+2]},$I(t._query)}return function(m,g,T,w){const O=new Cg(w),_=new Ig(g,O,T);return m.asyncQueue.enqueueAndForget(async()=>Eg(await zc(m),_)),()=>{O.Ou(),m.asyncQueue.enqueueAndForget(async()=>xg(await zc(m),_))}}(Rd(c),d,a,l)}function Md(t,e){return function(r,i){const s=new gr;return r.asyncQueue.enqueueAndForget(async()=>rj(await pj(r),i,s)),s.promise}(Rd(t),e)}function QI(t,e,n){const r=n.docs.get(e._key),i=new jg(t);return new qi(t,i,e._key,r,new ga(n.hasPendingWrites,n.fromCache),e.converter)}function bj(){return new Ag("serverTimestamp")}function YI(...t){return new Pg("arrayUnion",t)}function XI(...t){return new Rg("arrayRemove",t)}(function(e,n=!0){(function(i){Io=i})(xo),so(new Zi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Cr(new kD(r.getProvider("auth-internal")),new PD(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),li(F_,U_,e),li(F_,U_,"esm2017")})();const Nj={apiKey:"AIzaSyCELChCVfy8kelSr0fZV7b7m0r_zceLr2w",authDomain:"mehko-ai.firebaseapp.com",projectId:"mehko-ai"},JI=b1(Nj),Na=xD(JI),Me=vj(JI),ZI=D.createContext();function Dj({children:t}){const[e,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>c2(Na,l=>{n(l),i(!1)}),[]);const s=(a,l)=>sS(Na,a,l),o=()=>d2(Na);return h.jsx(ZI.Provider,{value:{user:e,loading:r,login:s,logout:o},children:t})}function Ft(){return D.useContext(ZI)}const eT=D.createContext(),tT=()=>{const t=D.useContext(eT);if(!t)throw new Error("useAuthModal must be used within an AuthModalProvider");return t},Oj=({children:t})=>{const[e,n]=D.useState(!1),s={isOpen:e,openAuthModal:()=>n(!0),closeAuthModal:()=>n(!1)};return h.jsx(eT.Provider,{value:s,children:t})};function Lj(){const[t,e]=D.useState({}),[n,r]=D.useState({}),[i,s]=D.useState({});return{collapsedApps:t,collapsedSteps:n,collapsedSupport:i,setCollapsedApps:e,setCollapsedSteps:r,setCollapsedSupport:s,toggle:(a,l,c,d=null)=>{a(f=>({...f,[c]:d!==null?d:!f[c]}))}}}const jj=({applications:t,activeApplicationId:e,onRemove:n,activeSection:r,setActiveSection:i,onSelect:s,onStepSelect:o,selectedStepId:a})=>{const{collapsedApps:l,collapsedSteps:c,collapsedSupport:d,setCollapsedApps:f,setCollapsedSteps:m,setCollapsedSupport:g,toggle:T}=Lj(),{user:w}=Ft(),[O,_]=D.useState({});return D.useEffect(()=>{async function v(){if(!w||!t.length)return;const x=[];return t.forEach(L=>{const V=lt(Me,"users",w.uid,"applicationProgress",L.id),j=$c(V,b=>{_(S=>({...S,[L.id]:b.exists()?b.data().completedStepIds||[]:[]}))});x.push(j)}),()=>x.forEach(L=>L())}v()},[w,t]),h.jsxs("div",{className:"sidebar",children:[h.jsx("div",{className:"sidebar-header",children:h.jsx("h3",{children:"Your Applications"})}),h.jsx("ul",{className:"sidebar-list",children:t.map(v=>{var N,E,W,$;const x=v.id===e,L=l[v.id],V=c[v.id],j=d[v.id],b=O[v.id]||[],S=((N=v.steps)==null?void 0:N.length)||0,C=b.length,k=S>0?Math.round(C/S*100):0,I=!!((E=v.supportTools)!=null&&E.commentsEnabled);return h.jsxs("div",{className:"sidebar-item-wrapper",children:[h.jsxs("div",{className:`sidebar-item ${x?"active":""}`,children:[h.jsx("div",{className:"sidebar-app-title",onClick:()=>s(v.id),children:v.title}),h.jsxs("div",{className:"sidebar-progress",children:[h.jsx("div",{className:"sidebar-progress-bar",children:h.jsx("div",{className:"sidebar-progress-fill",style:{width:`${k}%`}})}),h.jsxs("small",{children:[C," of ",S," steps complete"]})]}),x&&h.jsxs("div",{className:"sidebar-controls",children:[h.jsx("button",{className:"collapse-btn",onClick:()=>T(f,l,v.id),children:L?"":""}),h.jsx("button",{className:"remove-btn",onClick:te=>{te.stopPropagation(),n(v.id)},title:"Remove",children:""})]})]}),!L&&x&&h.jsxs("div",{className:"sidebar-sublist",style:{display:"flex",flexDirection:"column",height:"100%",maxHeight:"60vh"},children:[h.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[h.jsxs("li",{className:r==="overview"?"active-nav":"",onClick:()=>{i("overview"),T(m,c,v.id,!0),T(g,d,v.id,!0)},children:["Overview (",((W=v.steps)==null?void 0:W.length)||0," steps)"]}),h.jsx("li",{className:"sidebar-section-label",children:h.jsxs("span",{className:"collapsible-section",onClick:()=>T(m,c,v.id),children:[V?"":""," Steps"]})})]}),h.jsx("ul",{style:{listStyle:"none",margin:0,padding:0,flex:1,overflowY:"auto"},children:!V&&(($=v.steps)==null?void 0:$.map((te,Z)=>{const B=r==="steps"&&a===te.id;return h.jsxs("li",{className:`step-item ${B?"active-nav":""}`,onClick:()=>o&&o(te.id),children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[h.jsxs("span",{children:["Step ",Z+1,": ",te.title]}),h.jsxs("div",{className:"step-captions",children:[te.action_required&&h.jsx("span",{className:"step-badge step-badge--action",children:"Requires Action"}),te.fill_pdf&&h.jsx("span",{className:"step-badge step-badge--form",children:"PDF Form"}),!te.action_required&&!te.fill_pdf&&h.jsx("span",{className:"step-badge step-badge--info",children:"Info Only"})]})]}),b.includes(te.id)&&h.jsx("span",{className:"checkmark",children:""})]},te.id)}))}),I&&h.jsx("div",{style:{borderTop:"1px solid #eee",padding:"8px 12px",flexShrink:0},children:h.jsxs("ul",{style:{listStyle:"none",margin:0,padding:0},children:[h.jsx("li",{className:"sidebar-section-label",children:h.jsxs("span",{className:"collapsible-section",onClick:()=>T(g,d,v.id),children:[j?"":""," Support"]})}),!j&&h.jsx("li",{className:`sidebar-support-item ${r==="comments"?"active-nav":""}`,onClick:()=>i("comments"),children:"Community Comments"})]})})]})]},v.id)})})]})},Mj=({application:t,completedSteps:e=[],onClick:n})=>{var r;return(r=t.steps)!=null&&r.length,e.length,h.jsx("div",{className:"application-card",onClick:n,children:h.jsxs("div",{className:"application-card-inner",children:[h.jsx("h3",{children:t.title}),h.jsx("p",{children:t.description}),t.rootDomain&&h.jsx("div",{className:"application-source",children:h.jsxs("small",{children:["Source: ",t.rootDomain]})})]})})},Vj=({onApplicationSelect:t})=>{const[e,n]=D.useState([]),[r,i]=D.useState({}),[s,o]=D.useState(!0),{user:a}=Ft();return D.useEffect(()=>{async function l(){try{const c=await Al(tr(Me,"applications")),d={};c.forEach(f=>{d[f.id]={id:f.id,...f.data()}}),n(d)}catch(c){console.error("Failed to fetch applications:",c)}finally{o(!1)}}l()},[]),h.jsxs("div",{className:"application-card-grid",children:[h.jsx("h2",{className:"grid-title",children:"Select Your Application"}),h.jsxs("div",{className:"card-grid",children:[s&&h.jsx("p",{children:"Loading applications..."}),!s&&Object.keys(e).length===0&&h.jsx("p",{children:"No applications available at this time."}),!s&&Object.values(e).map(l=>h.jsx(Mj,{application:l,onClick:()=>t(l)},l.id))]})]})};function Fj({steps:t=[]}){return h.jsx("div",{className:"application-steps",children:t.length>0&&h.jsxs("div",{className:"steps-section",children:[h.jsx("h3",{children:"How to Apply"}),h.jsx("ol",{className:"steps-list",children:t.map((e,n)=>h.jsx("li",{children:e.title},n))})]})})}function Vd({onClick:t,disabled:e=!1,size:n="medium",variant:r="default",children:i="Report Issue"}){const s=`report-button report-button--${n} report-button--${r}`;return h.jsxs("button",{className:s,onClick:t,disabled:e,title:"Report an issue",children:[h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),h.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),h.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),i]})}const Fd="reports";async function Uj(t){try{const e={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"open",assignedTo:null,resolution:null,resolvedAt:null};return(await GI(tr(Me,Fd),e)).id}catch(e){throw console.error("Error submitting report:",e),new Error("Failed to submit report")}}async function nT(t={}){try{let e=tr(Me,Fd);return t.status&&(e=ks(e,_u("status","==",t.status))),t.context&&(e=ks(e,_u("context","==",t.context))),t.severity&&(e=ks(e,_u("severity","==",t.severity))),t.applicationId&&(e=ks(e,_u("applicationId","==",t.applicationId))),e=ks(e,WI("createdAt","desc")),(await Al(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error fetching reports:",e),new Error("Failed to fetch reports")}}async function zj(t,e,n=null,r=null){try{const i=lt(Me,Fd,t),s={status:e,updatedAt:new Date().toISOString()};n&&(s.assignedTo=n),r&&(s.resolution=r),(e==="resolved"||e==="closed")&&(s.resolvedAt=new Date().toISOString()),await is(i,s)}catch(i){throw console.error("Error updating report status:",i),new Error("Failed to update report status")}}async function Bj(t){try{const e=lt(Me,Fd,t);await Rj(e)}catch(e){throw console.error("Error deleting report:",e),new Error("Failed to delete report")}}async function $j(){try{const t=await nT(),e={total:t.length,byStatus:{},byContext:{},bySeverity:{},byApplication:{}};return t.forEach(n=>{e.byStatus[n.status]=(e.byStatus[n.status]||0)+1,e.byContext[n.context]=(e.byContext[n.context]||0)+1,e.bySeverity[n.severity]=(e.bySeverity[n.severity]||0)+1,e.byApplication[n.applicationId]=(e.byApplication[n.applicationId]||0)+1}),e}catch(t){throw console.error("Error fetching report stats:",t),new Error("Failed to fetch report statistics")}}function Ud({isOpen:t,onClose:e,application:n,step:r=null,onReportSubmitted:i}){const{user:s}=Ft(),[o,a]=D.useState({issueType:"general",description:"",severity:"medium"}),[l,c]=D.useState(!1),[d,f]=D.useState(""),m=async w=>{if(w.preventDefault(),!!o.description.trim()){c(!0),f("");try{const O={applicationId:n==null?void 0:n.id,applicationTitle:n==null?void 0:n.title,stepId:(r==null?void 0:r.id)||(r==null?void 0:r._id),stepTitle:r==null?void 0:r.title,issueType:o.issueType,description:o.description.trim(),severity:o.severity,context:r?"step":"application",userId:s==null?void 0:s.uid,userEmail:s==null?void 0:s.email},_=await Uj(O);f("success"),setTimeout(()=>{e(),i&&i({...O,id:_})},1500)}catch(O){console.error("Failed to submit report:",O),f("error")}finally{c(!1)}}},g=()=>{l||(a({issueType:"general",description:"",severity:"medium"}),f(""),e())},T=()=>r?`Report an issue with: ${r.title}`:`Report an issue with: ${n==null?void 0:n.title}`;return t?h.jsx("div",{className:"report-modal-overlay",onClick:g,children:h.jsxs("div",{className:"report-modal-content",onClick:w=>w.stopPropagation(),children:[h.jsxs("div",{className:"report-modal-header",children:[h.jsx("h3",{children:"Report an Issue"}),h.jsx("button",{className:"report-modal-close",onClick:g,disabled:l,children:""})]}),h.jsxs("div",{className:"report-issue-modal",children:[h.jsx("div",{className:"report-context",children:h.jsx("p",{children:T()})}),h.jsxs("form",{onSubmit:m,className:"report-form",children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"issueType",children:"Issue Type"}),h.jsxs("select",{id:"issueType",value:o.issueType,onChange:w=>a(O=>({...O,issueType:w.target.value})),disabled:l,children:[h.jsx("option",{value:"general",children:"General Issue"}),h.jsx("option",{value:"outdated",children:"Outdated Information"}),h.jsx("option",{value:"broken",children:"Broken Link/Function"}),h.jsx("option",{value:"content",children:"Content Error"}),h.jsx("option",{value:"ui",children:"UI/UX Problem"}),h.jsx("option",{value:"other",children:"Other"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"severity",children:"Severity"}),h.jsxs("select",{id:"severity",value:o.severity,onChange:w=>a(O=>({...O,severity:w.target.value})),disabled:l,children:[h.jsx("option",{value:"low",children:"Low - Minor inconvenience"}),h.jsx("option",{value:"medium",children:"Medium - Affects usability"}),h.jsx("option",{value:"high",children:"High - Blocks progress"}),h.jsx("option",{value:"critical",children:"Critical - Cannot proceed"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"description",children:"Description *"}),h.jsx("textarea",{id:"description",value:o.description,onChange:w=>a(O=>({...O,description:w.target.value})),placeholder:"Please describe the issue you encountered...",rows:4,required:!0,disabled:l})]}),d==="success"&&h.jsx("div",{className:"status-message success",children:" Report submitted successfully! Thank you for your feedback."}),d==="error"&&h.jsx("div",{className:"status-message error",children:" Failed to submit report. Please try again."}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"button",onClick:g,disabled:l,className:"btn-secondary",children:"Cancel"}),h.jsx("button",{type:"submit",disabled:l||!o.description.trim(),className:"btn-primary",children:l?"Submitting...":"Submit Report"})]})]})]})]})}):null}function Hj({application:t}){const[e,n]=D.useState(!1),{user:r}=Ft();if(!t)return null;const i=()=>{r&&n(!0)},s=o=>{console.log("Report submitted:",o)};return h.jsxs("div",{className:"application-view",children:[h.jsxs("div",{className:"application-header",children:[h.jsxs("div",{className:"header-content",children:[h.jsx("h2",{children:t.title}),h.jsx("p",{children:t.description})]}),r&&h.jsx("div",{className:"header-actions",children:h.jsx(Vd,{onClick:i,size:"medium",variant:"outline",children:"Report Issue"})})]}),t.steps&&h.jsx(Fj,{steps:t.steps}),h.jsx(Ud,{isOpen:e,onClose:()=>n(!1),application:t,onReportSubmitted:s})]})}const Wj=({isOpen:t,onClose:e,onSuccess:n})=>{const[r,i]=D.useState("login"),[s,o]=D.useState({name:"",email:"",password:"",confirmPassword:""}),[a,l]=D.useState({}),[c,d]=D.useState(!1),[f,m]=D.useState(!1);D.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),D.useEffect(()=>{const _=v=>{v.key==="Escape"&&t&&e()};return t&&document.addEventListener("keydown",_),()=>{document.removeEventListener("keydown",_)}},[t,e]);const g=_=>{const{name:v,value:x}=_.target;o(L=>({...L,[v]:x})),a[v]&&l(L=>({...L,[v]:""}))},T=()=>{const _={};return r==="signup"&&(s.name.trim()?s.name.trim().length<2&&(_.name="Name must be at least 2 characters"):_.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(_.email="Please enter a valid email"):_.email="Email is required",s.password?s.password.length<6&&(_.password="Password must be at least 6 characters"):_.password="Password is required",r==="signup"&&(s.confirmPassword?s.password!==s.confirmPassword&&(_.confirmPassword="Passwords do not match"):_.confirmPassword="Please confirm your password"),l(_),Object.keys(_).length===0},w=async _=>{if(_.preventDefault(),!!T()){d(!0);try{if(r==="login")await sS(Na,s.email,s.password),n(),e();else{const x=(await s2(Na,s.email,s.password)).user;await a2(x,{displayName:s.name.trim()}),await Ro(lt(Me,"users",x.uid),{email:x.email,displayName:s.name.trim(),createdAt:new Date().toISOString()}),n(),e()}}catch(v){let x="An error occurred. Please try again.";switch(v.code){case"auth/user-not-found":x="No account found with this email.";break;case"auth/wrong-password":x="Incorrect password.";break;case"auth/email-already-in-use":x="An account with this email already exists.";break;case"auth/weak-password":x="Password is too weak.";break;case"auth/invalid-email":x="Invalid email address.";break;default:x=v.message}l({general:x})}finally{d(!1)}}},O=()=>{i(r==="login"?"signup":"login"),o({name:"",email:"",password:"",confirmPassword:""}),l({})};return t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"auth-modal-backdrop",onClick:e}),h.jsx("div",{className:"auth-modal",children:h.jsxs("div",{className:"auth-modal-content",children:[h.jsx("button",{className:"auth-modal-close",onClick:e,children:h.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),h.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),h.jsxs("div",{className:"auth-modal-header",children:[h.jsx("div",{className:"auth-modal-logo",children:h.jsx("div",{className:"auth-modal-logo-icon",children:h.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"})})})}),h.jsx("h2",{className:"auth-modal-title",children:r==="login"?"Welcome Back":"Create Account"}),h.jsx("p",{className:"auth-modal-subtitle",children:r==="login"?"Sign in to continue your MEHKO application journey":"Join our community and start your MEHKO application"})]}),h.jsxs("form",{onSubmit:w,className:"auth-modal-form",children:[r==="signup"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),h.jsxs("div",{className:"input-wrapper",children:[h.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),h.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),h.jsx("input",{id:"name",name:"name",type:"text",value:s.name,onChange:g,className:`form-input ${a.name?"error":""}`,placeholder:"Enter your full name"})]}),a.name&&h.jsx("span",{className:"error-message",children:a.name})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),h.jsxs("div",{className:"input-wrapper",children:[h.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),h.jsx("polyline",{points:"22,6 12,13 2,6"})]}),h.jsx("input",{id:"email",name:"email",type:"email",value:s.email,onChange:g,className:`form-input ${a.email?"error":""}`,placeholder:"Enter your email address"})]}),a.email&&h.jsx("span",{className:"error-message",children:a.email})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),h.jsxs("div",{className:"input-wrapper",children:[h.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),h.jsx("circle",{cx:"12",cy:"16",r:"1"}),h.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),h.jsx("input",{id:"password",name:"password",type:f?"text":"password",value:s.password,onChange:g,className:`form-input ${a.password?"error":""}`,placeholder:"Enter your password"}),h.jsx("button",{type:"button",className:"password-toggle",onClick:()=>m(!f),children:h.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f?h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),h.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):h.jsxs(h.Fragment,{children:[h.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),h.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]}),a.password&&h.jsx("span",{className:"error-message",children:a.password})]}),r==="signup"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),h.jsxs("div",{className:"input-wrapper",children:[h.jsxs("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),h.jsx("circle",{cx:"12",cy:"16",r:"1"}),h.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),h.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:s.confirmPassword,onChange:g,className:`form-input ${a.confirmPassword?"error":""}`,placeholder:"Confirm your password"})]}),a.confirmPassword&&h.jsx("span",{className:"error-message",children:a.confirmPassword})]}),a.general&&h.jsxs("div",{className:"error-banner",children:[h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),h.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),h.jsx("span",{children:a.general})]}),h.jsx("button",{type:"submit",className:"auth-submit-btn",disabled:c,children:c?h.jsxs("div",{className:"loading-spinner",children:[h.jsx("div",{className:"spinner"}),h.jsx("span",{children:"Processing..."})]}):r==="login"?"Sign In":"Create Account"})]}),h.jsx("div",{className:"auth-modal-footer",children:h.jsxs("p",{className:"auth-modal-switch",children:[r==="login"?"Don't have an account?":"Already have an account?",h.jsx("button",{type:"button",onClick:O,className:"switch-btn",children:r==="login"?"Sign up":"Sign in"})]})})]})})]}):null};function qj(){const{user:t,logout:e}=Ft(),{isOpen:n,openAuthModal:r,closeAuthModal:i}=tT(),s=async()=>{await e()},o=()=>{};return h.jsxs("header",{style:ia.header,children:[h.jsx("h1",{style:{cursor:"pointer"},onClick:()=>window.location.reload(),children:"MEHKO.ai"}),h.jsx("div",{children:t?h.jsxs("div",{style:ia.authBox,children:[h.jsx("span",{style:{marginRight:"1rem"},children:t.displayName||t.email}),h.jsx("button",{onClick:s,style:ia.button,children:"Log Out"})]}):h.jsx("div",{style:ia.authBox,children:h.jsx("button",{onClick:r,style:ia.authButton,children:"Sign In"})})}),h.jsx(Wj,{isOpen:n,onClose:i,onSuccess:o})]})}const ia={header:{background:"#f8f9fa",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #ddd"},authBox:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap",maxWidth:"500px"},authButton:{padding:"0.5rem 1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(102, 126, 234, 0.2)"},button:{padding:"0.25rem 0.75rem",cursor:"pointer",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",fontSize:"0.85rem",transition:"background-color 0.2s ease"}};async function Kj(t,e,n){const r=lt(Me,"users",t,"aiChats",e);await Ro(r,{messages:n},{merge:!0})}async function Gj(t,e){const n=lt(Me,"users",t,"aiChats",e),r=await hr(n);return r.exists()?r.data().messages:[]}async function Qj(t,e,n,r){const i=lt(Me,"users",t,"formProgress",e);await Ro(i,{[n]:r},{merge:!0})}async function rT(t,e,n){const r=lt(Me,"users",t,"formProgress",e),i=await hr(r);return i.exists()?i.data()[n]||{}:{}}async function Mg(t,e,n="form"){const r=lt(Me,"users",t,"pinnedApplications",e);await Ro(r,{pinnedAt:new Date,triggeredBy:n},{merge:!0})}const Yj="http://127.0.0.1:8000",Xj="http://localhost:3000/api/ai-chat";function Fw({application:t,currentStep:e,currentStepId:n,completedStepIds:r=[]}){const{user:i}=Ft(),[s,o]=D.useState([]),[a,l]=D.useState(""),[c,d]=D.useState(!1),[f,m]=D.useState(null),g=D.useRef(null),[T,w]=D.useState({}),[O,_]=D.useState({}),[v,x]=D.useState({}),[L,V]=D.useState({}),j=D.useMemo(()=>((t==null?void 0:t.steps)||[]).map(W=>{const $=W.id||W._id;return{...W,_id:$,isComplete:r.includes($)}}),[t==null?void 0:t.steps,r]),b=D.useMemo(()=>((t==null?void 0:t.steps)||[]).filter(E=>E.type==="pdf"&&E.formId),[t==null?void 0:t.steps]);D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const E={};for(const W of t.steps)if(W.type==="pdf"&&W.formId)try{const te=await(await fetch(`${Yj}/apps/${t.id}/forms/${W.formId}/template`)).json();E[W.formId]=te.fields||[]}catch($){console.error("overlay fetch failed:",W.formId,$)}w(E)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(i!=null&&i.uid)||!(t!=null&&t.steps))return;const E={};for(const W of t.steps)if(W.type==="pdf"&&W.formId)try{const $=await rT(i.uid,t.id,W.formId);E[W.formId]=$||{}}catch($){console.error("loadFormData failed:",W.formId,$)}_(E)})()},[i==null?void 0:i.uid,t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{(async()=>{if(!(t!=null&&t.steps))return;const E={},W={};for(const $ of t.steps)if($.type==="pdf"&&$.formId){try{const te=await fetch(`http://127.0.0.1:8000/apps/${t.id}/forms/${$.formId}/text`);if(te.ok){const Z=await te.json();E[$.formId]=Array.isArray(Z.pages)?Z.pages.join(`

---

`):""}}catch{}W[$.formId]={title:$.title||$.formId,url:`http://127.0.0.1:8000/apps/${t.id}/forms/${$.formId}/pdf?inline=0`,previewBase:`http://127.0.0.1:8000/apps/${t.id}/forms/${$.formId}/preview-page?page=`}}x(E),V(W)})()},[t==null?void 0:t.id,t==null?void 0:t.steps]),D.useEffect(()=>{!i||!(t!=null&&t.id)||Gj(i.uid,t.id).then(E=>{E!=null&&E.length?o(E):o([{sender:"ai",text:`Welcome! I'm here to help with ${t.title}. Ask me anything or pick a quick task below.`,timestamp:new Date}])})},[i==null?void 0:i.uid,t==null?void 0:t.id]),D.useEffect(()=>{var E;(E=g.current)==null||E.scrollIntoView({behavior:"smooth"})},[s]);const S=[{title:"What should I do next?",prompt:"What's the next step I should complete in my MEHKO application?"},{title:"Help with current step",prompt:"I'm currently on this step. What do I need to do?"},{title:"Form completion help",prompt:"I need help filling out a form. What should I know?"},{title:"Application overview",prompt:"Give me an overview of the entire MEHKO application process."}],C=f?[{title:`Complete ${f.title}`,prompt:`I want to complete the ${f.title} form. What do I need to do?`},{title:"Form field help",prompt:`I'm confused about some fields in the ${f.title} form. Can you help?`},{title:"Form submission",prompt:`How do I submit the completed ${f.title} form?`}]:[],k=async(E,W=null)=>{if(!(E!=null&&E.trim()))return;const te={sender:"user",text:W?`[Form: ${W.title}] ${E}`:E,timestamp:new Date},Z=[...s,te];o(Z),l(""),d(!0);try{const A={sender:"ai",text:(await(await fetch(Xj,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:Z.map(q=>({role:q.sender==="ai"?"assistant":"user",content:q.text})),applicationId:t.id,context:{application:{id:t.id,title:t.title,rootDomain:t.rootDomain},steps:j,currentStep:e,currentStepId:n,completedStepIds:r,comments:t.comments||[],overlays:T,formData:O,pdfText:v,pdfLinks:L,selectedForm:W}})})).json()).reply||"Sorry, I don't have a response right now.",timestamp:new Date},X=[...Z,A];o(X),await Kj(i.uid,t.id,X),await Mg(i.uid,t.id,"ai")}catch(B){console.error(B),o(ee=>[...ee,{sender:"ai",text:"Oops, something went wrong.",timestamp:new Date}])}finally{d(!1)}},I=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),k(a,f))};function N(){return b.length?h.jsxs("div",{className:"ai-chat__form-actions",children:[h.jsx("div",{className:"ai-chat__form-actions-title",children:"Form-Specific Help:"}),h.jsx("div",{className:"ai-chat__form-actions-grid",children:b.map(E=>h.jsxs("div",{className:"ai-chat__form-card",children:[h.jsxs("div",{className:"ai-chat__form-card-header",children:[h.jsx("h4",{children:E.title}),h.jsx("button",{className:`ai-chat__form-select-btn ${(f==null?void 0:f.formId)===E.formId?"active":""}`,onClick:()=>m((f==null?void 0:f.formId)===E.formId?null:E),children:(f==null?void 0:f.formId)===E.formId?" Selected":"Select Form"})]}),(f==null?void 0:f.formId)===E.formId&&h.jsxs("div",{className:"ai-chat__form-card-content",children:[h.jsx("div",{className:"ai-chat__form-quick-tasks",children:C.map((W,$)=>h.jsx("button",{className:"ai-chat__form-task-btn",onClick:()=>k(W.prompt,E),children:W.title},$))}),h.jsxs("div",{className:"ai-chat__form-actions-buttons",children:[h.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const W=L[E.formId];W&&window.open(W.url,"_blank","noopener,noreferrer")},children:" Open PDF"}),h.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>{const W=L[E.formId];W&&window.open(W.previewBase+"0","_blank","noopener,noreferrer")},children:" Preview"})]})]})]},E.formId))})]}):null}return i?h.jsxs("div",{className:"ai-chat",children:[h.jsxs("div",{className:"ai-chat__header",children:[h.jsx("div",{className:"ai-chat__avatar",children:""}),h.jsxs("div",{className:"ai-chat__title",children:[h.jsxs("div",{className:"ai-chat__welcome",children:["Welcome back",i!=null&&i.displayName?`, ${i.displayName}`:"","!"]}),h.jsxs("div",{className:"ai-chat__subtitle",children:["Let's work on ",h.jsx("strong",{children:t==null?void 0:t.title}),"."]})]})]}),h.jsx(N,{}),h.jsxs("div",{className:"ai-chat__guide-card",children:[h.jsx("div",{className:"ai-chat__guide-title",children:"General Tasks I can assist you with:"}),h.jsx("ul",{className:"ai-chat__guide-list",children:S.map(E=>h.jsx("li",{children:h.jsx("button",{className:"ai-chat__guide-chip",onClick:()=>k(E.prompt),children:E.title})},E.title))})]}),f&&h.jsxs("div",{className:"ai-chat__form-context",children:[h.jsxs("div",{className:"ai-chat__form-context-header",children:[h.jsxs("span",{children:[" Working on: ",h.jsx("strong",{children:f.title})]}),h.jsx("button",{className:"ai-chat__form-context-clear",onClick:()=>m(null),children:" Clear"})]}),h.jsx("div",{className:"ai-chat__form-context-info",children:"Ask me anything specific about this form. I'll provide targeted help based on the form content and your progress."})]}),h.jsxs("div",{className:"ai-chat__history",children:[s.map((E,W)=>{var $,te;return h.jsxs("div",{className:`chat-msg ${E.sender}`,children:[h.jsx("div",{className:"chat-bubble",children:E.text}),h.jsx("div",{className:"timestamp",children:(((te=($=E.timestamp)==null?void 0:$.toDate)==null?void 0:te.call($))||new Date(E.timestamp)).toLocaleTimeString()})]},W)}),h.jsx("div",{ref:g})]}),h.jsx("div",{className:"ai-chat__composer",children:h.jsxs("div",{className:"ai-chat__input-section",children:[f&&h.jsxs("div",{className:"ai-chat__form-guidance",children:[h.jsx("strong",{children:" Form Guidance:"})," You're working on the"," ",h.jsx("strong",{children:f.title}),". This form is completed directly in the application - no PDF downloads needed!"]}),h.jsxs("div",{className:"ai-chat__input-container",children:[h.jsx("textarea",{placeholder:f?`Ask about ${f.title}... (e.g., "What does this field mean?")`:'Ask Orion (e.g., "What should I do next?")',value:a,onChange:E=>l(E.target.value),onKeyDown:I,disabled:c}),h.jsx("button",{onClick:()=>k(a,f),disabled:!a.trim()||c,children:c?"":"Send"})]})]})})]}):h.jsx("p",{className:"ai-chat__login",children:"Please log in to use this feature."})}async function qh(t){const e=tr(Me,"applications",t,"comments"),n=ks(e,WI("timestamp","asc"));return(await Al(n)).docs.map(i=>({id:i.id,...i.data()}))}async function Jj(t,e){const n=tr(Me,"applications",t,"comments");await GI(n,{...e,timestamp:bj(),reactions:{}})}async function Zj(t,e,n,r){const i=tr(Me,"applications",t,"comments"),s=lt(i,e),o=await hr(s);if(!o.exists())return;((o.data().reactions||{})[n]||[]).includes(r)||await is(s,{[`reactions.${n}`]:YI(r)})}async function eM(t,e,n,r){const i=tr(Me,"applications",t,"comments"),s=lt(i,e);await is(s,{[`reactions.${n}`]:XI(r)})}const Uw=["","","","","","","",""];function tM({application:t}){const[e,n]=D.useState([]),[r,i]=D.useState(""),[s,o]=D.useState(null),{user:a}=Ft(),l=D.useRef(null);D.useEffect(()=>{t!=null&&t.id&&qh(t.id).then(n)},[t==null?void 0:t.id]),D.useEffect(()=>{const g=T=>{l.current&&!l.current.contains(T.target)&&o(null)};return document.addEventListener("mousedown",g),()=>{document.removeEventListener("mousedown",g)}},[]);const c=async g=>{g.preventDefault(),r.trim()&&(await Jj(t.id,{text:r,userId:(a==null?void 0:a.uid)||"anon",displayName:(a==null?void 0:a.displayName)||(a==null?void 0:a.email)||"Anonymous",userEmail:(a==null?void 0:a.email)||"anonymous@example.com"}),i(""),qh(t.id).then(n))},d=async(g,T)=>{var _,v;if(!a)return;const w=e.find(x=>x.id===g);((v=(_=w==null?void 0:w.reactions)==null?void 0:_[a.uid])==null?void 0:v.includes(T))?await eM(t.id,g,a.uid,T):await Zj(t.id,g,a.uid,T),qh(t.id).then(n)},f=(g,T)=>g?Object.values(g).flat().filter(w=>w===T).length:0,m=(g,T)=>{var w;return!g||!a?!1:((w=g[a.uid])==null?void 0:w.includes(T))||!1};return h.jsxs("div",{className:"comments-section",children:[h.jsx("h3",{className:"comments-title",children:"Community Comments"}),a?h.jsxs("form",{className:"comment-form",onSubmit:c,children:[h.jsx("div",{className:"comment-form-header",children:h.jsxs("span",{className:"comment-author-label",children:["Commenting as: ",h.jsx("strong",{children:a.displayName||a.email})]})}),h.jsx("textarea",{className:"comment-textarea",value:r,onChange:g=>i(g.target.value),placeholder:"Share your experience or ask a question..."}),h.jsx("button",{type:"submit",disabled:!r.trim(),className:"submit-btn",children:"Submit Comment"})]}):h.jsx("p",{className:"comments-login-msg",children:"Please log in to leave a comment."}),h.jsx("ul",{className:"comment-list",children:e.map(g=>{var T;return h.jsxs("li",{className:"comment-item",children:[h.jsxs("div",{className:"comment-header",children:[h.jsx("span",{className:"comment-author",children:g.displayName}),h.jsx("span",{className:"comment-timestamp",children:(T=g.timestamp)!=null&&T.toDate?new Date(g.timestamp.toDate()).toLocaleDateString():"Recently"})]}),h.jsx("p",{className:"comment-text",children:g.text}),h.jsxs("div",{className:"comment-reactions",children:[s===g.id&&h.jsx("div",{className:"emoji-picker",ref:l,children:Uw.map(w=>h.jsx("button",{className:`emoji-option ${m(g.reactions,w)?"active":""}`,onClick:()=>{d(g.id,w),o(null)},title:w,children:w},w))}),h.jsx("button",{className:"emoji-trigger-btn",onClick:()=>o(s===g.id?null:g.id),title:"Add reaction",children:""}),Uw.map(w=>{const O=f(g.reactions,w);return O===0?null:h.jsxs("div",{className:"reaction-display",children:[h.jsx("span",{className:"emoji",children:w}),h.jsx("span",{className:"count",children:O})]},w)})]})]},g.id)})})]})}function nM(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const rM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sM={};function zw(t,e){return(sM.jsx?iM:rM).test(t)}const oM=/[ \t\n\f\r]/g;function aM(t){return typeof t=="object"?t.type==="text"?Bw(t.value):!1:Bw(t)}function Bw(t){return t.replace(oM,"")===""}class Pl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Pl.prototype.normal={};Pl.prototype.property={};Pl.prototype.space=void 0;function iT(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Pl(n,r,e)}function Cp(t){return t.toLowerCase()}class Xt{constructor(e,n){this.attribute=n,this.property=e}}Xt.prototype.attribute="";Xt.prototype.booleanish=!1;Xt.prototype.boolean=!1;Xt.prototype.commaOrSpaceSeparated=!1;Xt.prototype.commaSeparated=!1;Xt.prototype.defined=!1;Xt.prototype.mustUseProperty=!1;Xt.prototype.number=!1;Xt.prototype.overloadedBoolean=!1;Xt.prototype.property="";Xt.prototype.spaceSeparated=!1;Xt.prototype.space=void 0;let lM=0;const ge=ds(),et=ds(),Ap=ds(),Y=ds(),De=ds(),Ys=ds(),nn=ds();function ds(){return 2**++lM}const Pp=Object.freeze(Object.defineProperty({__proto__:null,boolean:ge,booleanish:et,commaOrSpaceSeparated:nn,commaSeparated:Ys,number:Y,overloadedBoolean:Ap,spaceSeparated:De},Symbol.toStringTag,{value:"Module"})),Kh=Object.keys(Pp);class Vg extends Xt{constructor(e,n,r,i){let s=-1;if(super(e,n),$w(this,"space",i),typeof r=="number")for(;++s<Kh.length;){const o=Kh[s];$w(this,Kh[s],(r&Pp[o])===Pp[o])}}}Vg.prototype.defined=!0;function $w(t,e,n){n&&(t[e]=n)}function bo(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Vg(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Cp(r)]=r,n[Cp(s.attribute)]=r}return new Pl(e,n,t.space)}const sT=bo({properties:{ariaActiveDescendant:null,ariaAtomic:et,ariaAutoComplete:null,ariaBusy:et,ariaChecked:et,ariaColCount:Y,ariaColIndex:Y,ariaColSpan:Y,ariaControls:De,ariaCurrent:null,ariaDescribedBy:De,ariaDetails:null,ariaDisabled:et,ariaDropEffect:De,ariaErrorMessage:null,ariaExpanded:et,ariaFlowTo:De,ariaGrabbed:et,ariaHasPopup:null,ariaHidden:et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:De,ariaLevel:Y,ariaLive:null,ariaModal:et,ariaMultiLine:et,ariaMultiSelectable:et,ariaOrientation:null,ariaOwns:De,ariaPlaceholder:null,ariaPosInSet:Y,ariaPressed:et,ariaReadOnly:et,ariaRelevant:null,ariaRequired:et,ariaRoleDescription:De,ariaRowCount:Y,ariaRowIndex:Y,ariaRowSpan:Y,ariaSelected:et,ariaSetSize:Y,ariaSort:null,ariaValueMax:Y,ariaValueMin:Y,ariaValueNow:Y,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oT(t,e){return e in t?t[e]:e}function aT(t,e){return oT(t,e.toLowerCase())}const uM=bo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ys,acceptCharset:De,accessKey:De,action:null,allow:null,allowFullScreen:ge,allowPaymentRequest:ge,allowUserMedia:ge,alt:null,as:null,async:ge,autoCapitalize:null,autoComplete:De,autoFocus:ge,autoPlay:ge,blocking:De,capture:null,charSet:null,checked:ge,cite:null,className:De,cols:Y,colSpan:null,content:null,contentEditable:et,controls:ge,controlsList:De,coords:Y|Ys,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ge,defer:ge,dir:null,dirName:null,disabled:ge,download:Ap,draggable:et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ge,formTarget:null,headers:De,height:Y,hidden:Ap,high:Y,href:null,hrefLang:null,htmlFor:De,httpEquiv:De,id:null,imageSizes:null,imageSrcSet:null,inert:ge,inputMode:null,integrity:null,is:null,isMap:ge,itemId:null,itemProp:De,itemRef:De,itemScope:ge,itemType:De,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ge,low:Y,manifest:null,max:null,maxLength:Y,media:null,method:null,min:null,minLength:Y,multiple:ge,muted:ge,name:null,nonce:null,noModule:ge,noValidate:ge,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ge,optimum:Y,pattern:null,ping:De,placeholder:null,playsInline:ge,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ge,referrerPolicy:null,rel:De,required:ge,reversed:ge,rows:Y,rowSpan:Y,sandbox:De,scope:null,scoped:ge,seamless:ge,selected:ge,shadowRootClonable:ge,shadowRootDelegatesFocus:ge,shadowRootMode:null,shape:null,size:Y,sizes:null,slot:null,span:Y,spellCheck:et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Y,step:null,style:null,tabIndex:Y,target:null,title:null,translate:null,type:null,typeMustMatch:ge,useMap:null,value:et,width:Y,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:De,axis:null,background:null,bgColor:null,border:Y,borderColor:null,bottomMargin:Y,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ge,declare:ge,event:null,face:null,frame:null,frameBorder:null,hSpace:Y,leftMargin:Y,link:null,longDesc:null,lowSrc:null,marginHeight:Y,marginWidth:Y,noResize:ge,noHref:ge,noShade:ge,noWrap:ge,object:null,profile:null,prompt:null,rev:null,rightMargin:Y,rules:null,scheme:null,scrolling:et,standby:null,summary:null,text:null,topMargin:Y,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Y,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ge,disableRemotePlayback:ge,prefix:null,property:null,results:Y,security:null,unselectable:null},space:"html",transform:aT}),cM=bo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:nn,accentHeight:Y,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Y,amplitude:Y,arabicForm:null,ascent:Y,attributeName:null,attributeType:null,azimuth:Y,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Y,by:null,calcMode:null,capHeight:Y,className:De,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Y,diffuseConstant:Y,direction:null,display:null,dur:null,divisor:Y,dominantBaseline:null,download:ge,dx:null,dy:null,edgeMode:null,editable:null,elevation:Y,enableBackground:null,end:null,event:null,exponent:Y,externalResourcesRequired:null,fill:null,fillOpacity:Y,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ys,g2:Ys,glyphName:Ys,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Y,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Y,horizOriginX:Y,horizOriginY:Y,id:null,ideographic:Y,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Y,k:Y,k1:Y,k2:Y,k3:Y,k4:Y,kernelMatrix:nn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Y,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Y,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Y,overlineThickness:Y,paintOrder:null,panose1:null,path:null,pathLength:Y,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:De,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Y,pointsAtY:Y,pointsAtZ:Y,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nn,rev:nn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nn,requiredFeatures:nn,requiredFonts:nn,requiredFormats:nn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Y,specularExponent:Y,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Y,strikethroughThickness:Y,string:null,stroke:null,strokeDashArray:nn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Y,strokeOpacity:Y,strokeWidth:null,style:null,surfaceScale:Y,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nn,tabIndex:Y,tableValues:null,target:null,targetX:Y,targetY:Y,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Y,underlineThickness:Y,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Y,values:null,vAlphabetic:Y,vMathematical:Y,vectorEffect:null,vHanging:Y,vIdeographic:Y,version:null,vertAdvY:Y,vertOriginX:Y,vertOriginY:Y,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Y,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oT}),lT=bo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),uT=bo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aT}),cT=bo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),dM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hM=/[A-Z]/g,Hw=/-[a-z]/g,fM=/^data[-\w.:]+$/i;function pM(t,e){const n=Cp(e);let r=e,i=Xt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&fM.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Hw,gM);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Hw.test(s)){let o=s.replace(hM,mM);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Vg}return new i(r,e)}function mM(t){return"-"+t.toLowerCase()}function gM(t){return t.charAt(1).toUpperCase()}const yM=iT([sT,uM,lT,uT,cT],"html"),Fg=iT([sT,cM,lT,uT,cT],"svg");function vM(t){return t.join(" ").trim()}var Ug={},Ww=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,_M=/\n/g,wM=/^\s*/,EM=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,xM=/^:\s*/,SM=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,IM=/^[;\s]*/,TM=/^\s+|\s+$/g,kM=`
`,qw="/",Kw="*",Vi="",CM="comment",AM="declaration",PM=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(T){var w=T.match(_M);w&&(n+=w.length);var O=T.lastIndexOf(kM);r=~O?T.length-O:r+T.length}function s(){var T={line:n,column:r};return function(w){return w.position=new o(T),c(),w}}function o(T){this.start=T,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(T){var w=new Error(e.source+":"+n+":"+r+": "+T);if(w.reason=T,w.filename=e.source,w.line=n,w.column=r,w.source=t,!e.silent)throw w}function l(T){var w=T.exec(t);if(w){var O=w[0];return i(O),t=t.slice(O.length),w}}function c(){l(wM)}function d(T){var w;for(T=T||[];w=f();)w!==!1&&T.push(w);return T}function f(){var T=s();if(!(qw!=t.charAt(0)||Kw!=t.charAt(1))){for(var w=2;Vi!=t.charAt(w)&&(Kw!=t.charAt(w)||qw!=t.charAt(w+1));)++w;if(w+=2,Vi===t.charAt(w-1))return a("End of comment missing");var O=t.slice(2,w-2);return r+=2,i(O),t=t.slice(w),r+=2,T({type:CM,comment:O})}}function m(){var T=s(),w=l(EM);if(w){if(f(),!l(xM))return a("property missing ':'");var O=l(SM),_=T({type:AM,property:Gw(w[0].replace(Ww,Vi)),value:O?Gw(O[0].replace(Ww,Vi)):Vi});return l(IM),_}}function g(){var T=[];d(T);for(var w;w=m();)w!==!1&&(T.push(w),d(T));return T}return c(),g()};function Gw(t){return t?t.replace(TM,Vi):Vi}var RM=Ju&&Ju.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.default=NM;var bM=RM(PM);function NM(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,bM.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var zd={};Object.defineProperty(zd,"__esModule",{value:!0});zd.camelCase=void 0;var DM=/^--[a-zA-Z0-9_-]+$/,OM=/-([a-z])/g,LM=/^[^-]+$/,jM=/^-(webkit|moz|ms|o|khtml)-/,MM=/^-(ms)-/,VM=function(t){return!t||LM.test(t)||DM.test(t)},FM=function(t,e){return e.toUpperCase()},Qw=function(t,e){return"".concat(e,"-")},UM=function(t,e){return e===void 0&&(e={}),VM(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(MM,Qw):t=t.replace(jM,Qw),t.replace(OM,FM))};zd.camelCase=UM;var zM=Ju&&Ju.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},BM=zM(Ug),$M=zd;function Rp(t,e){var n={};return!t||typeof t!="string"||(0,BM.default)(t,function(r,i){r&&i&&(n[(0,$M.camelCase)(r,e)]=i)}),n}Rp.default=Rp;var HM=Rp;const WM=O0(HM),dT=hT("end"),zg=hT("start");function hT(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function qM(t){const e=zg(t),n=dT(t);if(e&&n)return{start:e,end:n}}function Da(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Yw(t.position):"start"in t||"end"in t?Yw(t):"line"in t||"column"in t?bp(t):""}function bp(t){return Xw(t&&t.line)+":"+Xw(t&&t.column)}function Yw(t){return bp(t&&t.start)+"-"+bp(t&&t.end)}function Xw(t){return t&&typeof t=="number"?t:1}class bt extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Da(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}bt.prototype.file="";bt.prototype.name="";bt.prototype.reason="";bt.prototype.message="";bt.prototype.stack="";bt.prototype.column=void 0;bt.prototype.line=void 0;bt.prototype.ancestors=void 0;bt.prototype.cause=void 0;bt.prototype.fatal=void 0;bt.prototype.place=void 0;bt.prototype.ruleId=void 0;bt.prototype.source=void 0;const Bg={}.hasOwnProperty,KM=new Map,GM=/[A-Z]/g,QM=new Set(["table","tbody","thead","tfoot","tr"]),YM=new Set(["td","th"]),fT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function XM(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=sV(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iV(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Fg:yM,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=pT(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function pT(t,e,n){if(e.type==="element")return JM(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return ZM(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return tV(t,e,n);if(e.type==="mdxjsEsm")return eV(t,e);if(e.type==="root")return nV(t,e,n);if(e.type==="text")return rV(t,e)}function JM(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Fg,t.schema=i),t.ancestors.push(e);const s=gT(t,e.tagName,!1),o=oV(t,e);let a=Hg(t,e);return QM.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!aM(l):!0})),mT(t,o,s,e),$g(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function ZM(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ll(t,e.position)}function eV(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ll(t,e.position)}function tV(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Fg,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:gT(t,e.name,!0),o=aV(t,e),a=Hg(t,e);return mT(t,o,s,e),$g(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function nV(t,e,n){const r={};return $g(r,Hg(t,e)),t.create(e,t.Fragment,r,n)}function rV(t,e){return e.value}function mT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function $g(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function iV(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function sV(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=zg(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function oV(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Bg.call(e.properties,i)){const s=lV(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&YM.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function aV(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else ll(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else ll(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Hg(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:KM;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=pT(t,s,o);a!==void 0&&n.push(a)}return n}function lV(t,e,n){const r=pM(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?nM(n):vM(n)),r.property==="style"){let i=typeof n=="object"?n:uV(t,String(n));return t.stylePropertyNameCase==="css"&&(i=cV(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?dM[r.property]||r.property:r.attribute,n]}}function uV(t,e){try{return WM(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new bt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=fT+"#cannot-parse-style-attribute",i}}function gT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=zw(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=zw(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Bg.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);ll(t)}function ll(t,e){const n=new bt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=fT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function cV(t){const e={};let n;for(n in t)Bg.call(t,n)&&(e[dV(n)]=t[n]);return e}function dV(t){let e=t.replace(GM,hV);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function hV(t){return"-"+t.toLowerCase()}const Gh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},fV={};function pV(t,e){const n=fV,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return yT(t,r,i)}function yT(t,e,n){if(mV(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Jw(t.children,e,n)}return Array.isArray(t)?Jw(t,e,n):""}function Jw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=yT(t[i],e,n);return r.join("")}function mV(t){return!!(t&&typeof t=="object")}const Zw=document.createElement("i");function Wg(t){const e="&"+t+";";Zw.innerHTML=e;const n=Zw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Zn(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function mn(t,e){return t.length>0?(Zn(t,t.length,0,e),t):e}const e0={}.hasOwnProperty;function gV(t){const e={};let n=-1;for(;++n<t.length;)yV(e,t[n]);return e}function yV(t,e){let n;for(n in e){const i=(e0.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){e0.call(i,o)||(i[o]=[]);const a=s[o];vV(i[o],Array.isArray(a)?a:a?[a]:[])}}}function vV(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Zn(t,0,0,r)}function vT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Xs(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $n=Ci(/[A-Za-z]/),an=Ci(/[\dA-Za-z]/),_V=Ci(/[#-'*+\--9=?A-Z^-~]/);function Np(t){return t!==null&&(t<32||t===127)}const Dp=Ci(/\d/),wV=Ci(/[\dA-Fa-f]/),EV=Ci(/[!-/:-@[-`{-~]/);function fe(t){return t!==null&&t<-2}function Yt(t){return t!==null&&(t<0||t===32)}function Ce(t){return t===-2||t===-1||t===32}const xV=Ci(new RegExp("\\p{P}|\\p{S}","u")),SV=Ci(/\s/);function Ci(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function No(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&an(t.charCodeAt(n+1))&&an(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function je(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Ce(l)?(t.enter(n),a(l)):e(l)}function a(l){return Ce(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const IV={tokenize:TV};function TV(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),je(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return fe(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const kV={tokenize:CV},t0={tokenize:AV};function CV(t){const e=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const L=n[r];return e.containerState=L[1],t.attempt(L[0].continuation,l,c)(x)}return c(x)}function l(x){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const L=e.events.length;let V=L,j;for(;V--;)if(e.events[V][0]==="exit"&&e.events[V][1].type==="chunkFlow"){j=e.events[V][1].end;break}_(r);let b=L;for(;b<e.events.length;)e.events[b][1].end={...j},b++;return Zn(e.events,V+1,0,e.events.slice(L)),e.events.length=b,c(x)}return a(x)}function c(x){if(r===n.length){if(!i)return m(x);if(i.currentConstruct&&i.currentConstruct.concrete)return T(x);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(t0,d,f)(x)}function d(x){return i&&v(),_(r),m(x)}function f(x){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,T(x)}function m(x){return e.containerState={},t.attempt(t0,g,T)(x)}function g(x){return r++,n.push([e.currentConstruct,e.containerState]),m(x)}function T(x){if(x===null){i&&v(),_(0),t.consume(x);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(x)}function w(x){if(x===null){O(t.exit("chunkFlow"),!0),_(0),t.consume(x);return}return fe(x)?(t.consume(x),O(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(x),w)}function O(x,L){const V=e.sliceStream(x);if(L&&V.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(V),e.parser.lazy[x.start.line]){let j=i.events.length;for(;j--;)if(i.events[j][1].start.offset<o&&(!i.events[j][1].end||i.events[j][1].end.offset>o))return;const b=e.events.length;let S=b,C,k;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){if(C){k=e.events[S][1].end;break}C=!0}for(_(r),j=b;j<e.events.length;)e.events[j][1].end={...k},j++;Zn(e.events,S+1,0,e.events.slice(b)),e.events.length=j}}function _(x){let L=n.length;for(;L-- >x;){const V=n[L];e.containerState=V[1],V[0].exit.call(e,t)}n.length=x}function v(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function AV(t,e,n){return je(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function n0(t){if(t===null||Yt(t)||SV(t))return 1;if(xV(t))return 2}function qg(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Op={name:"attention",resolveAll:PV,tokenize:RV};function PV(t,e){let n=-1,r,i,s,o,a,l,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};r0(f,-l),r0(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=mn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=mn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=mn(c,qg(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=mn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=mn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,Zn(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function RV(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=n0(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),d=n0(l),f=!d||d===2&&i||n.includes(l),m=!i||i===2&&d||n.includes(r);return c._open=!!(s===42?f:f&&(i||!m)),c._close=!!(s===42?m:m&&(d||!f)),e(l)}}function r0(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const bV={name:"autolink",tokenize:NV};function NV(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return $n(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||an(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,l):(g===43||g===45||g===46||an(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function l(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||Np(g)?n(g):(t.consume(g),l)}function c(g){return g===64?(t.consume(g),d):_V(g)?(t.consume(g),c):n(g)}function d(g){return an(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||an(g))&&r++<63){const T=g===45?m:f;return t.consume(g),T}return n(g)}}const Bd={partial:!0,tokenize:DV};function DV(t,e,n){return r;function r(s){return Ce(s)?je(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||fe(s)?e(s):n(s)}}const _T={continuation:{tokenize:LV},exit:jV,name:"blockQuote",tokenize:OV};function OV(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ce(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function LV(t,e,n){const r=this;return i;function i(o){return Ce(o)?je(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(_T,e,n)(o)}}function jV(t){t.exit("blockQuote")}const wT={name:"characterEscape",tokenize:MV};function MV(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return EV(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const ET={name:"characterReference",tokenize:VV};function VV(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=an,d(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=wV,d):(t.enter("characterReferenceValue"),s=7,o=Dp,d(f))}function d(f){if(f===59&&i){const m=t.exit("characterReferenceValue");return o===an&&!Wg(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),d):n(f)}}const i0={partial:!0,tokenize:UV},s0={concrete:!0,name:"codeFenced",tokenize:FV};function FV(t,e,n){const r=this,i={partial:!0,tokenize:V};let s=0,o=0,a;return l;function l(j){return c(j)}function c(j){const b=r.events[r.events.length-1];return s=b&&b[1].type==="linePrefix"?b[2].sliceSerialize(b[1],!0).length:0,a=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===a?(o++,t.consume(j),d):o<3?n(j):(t.exit("codeFencedFenceSequence"),Ce(j)?je(t,f,"whitespace")(j):f(j))}function f(j){return j===null||fe(j)?(t.exit("codeFencedFence"),r.interrupt?e(j):t.check(i0,w,L)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(j))}function m(j){return j===null||fe(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(j)):Ce(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),je(t,g,"whitespace")(j)):j===96&&j===a?n(j):(t.consume(j),m)}function g(j){return j===null||fe(j)?f(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T(j))}function T(j){return j===null||fe(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(j)):j===96&&j===a?n(j):(t.consume(j),T)}function w(j){return t.attempt(i,L,O)(j)}function O(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),_}function _(j){return s>0&&Ce(j)?je(t,v,"linePrefix",s+1)(j):v(j)}function v(j){return j===null||fe(j)?t.check(i0,w,L)(j):(t.enter("codeFlowValue"),x(j))}function x(j){return j===null||fe(j)?(t.exit("codeFlowValue"),v(j)):(t.consume(j),x)}function L(j){return t.exit("codeFenced"),e(j)}function V(j,b,S){let C=0;return k;function k($){return j.enter("lineEnding"),j.consume($),j.exit("lineEnding"),I}function I($){return j.enter("codeFencedFence"),Ce($)?je(j,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):N($)}function N($){return $===a?(j.enter("codeFencedFenceSequence"),E($)):S($)}function E($){return $===a?(C++,j.consume($),E):C>=o?(j.exit("codeFencedFenceSequence"),Ce($)?je(j,W,"whitespace")($):W($)):S($)}function W($){return $===null||fe($)?(j.exit("codeFencedFence"),b($)):S($)}}}function UV(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Qh={name:"codeIndented",tokenize:BV},zV={partial:!0,tokenize:$V};function BV(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),je(t,s,"linePrefix",5)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):fe(c)?t.attempt(zV,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||fe(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function $V(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):je(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):fe(o)?i(o):n(o)}}const HV={name:"codeText",previous:qV,resolve:WV,tokenize:KV};function WV(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function qV(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function KV(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(s=t.enter("codeTextSequence"),i=0,d(f)):fe(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||fe(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function d(f){return f===96?(t.consume(f),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}class GV{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&sa(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),sa(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),sa(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);sa(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);sa(this.left,n.reverse())}}}function sa(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function xT(t){const e={};let n=-1,r,i,s,o,a,l,c;const d=new GV(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,QV(d,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return Zn(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function QV(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let d,f,m=-1,g=n,T=0,w=0;const O=[w];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),f&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(w=m+1,O.push(w),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):O.pop(),m=O.length;m--;){const _=a.slice(O[m],O[m+1]),v=s.pop();l.push([v,v+_.length-1]),t.splice(v,2,_)}for(l.reverse(),m=-1;++m<l.length;)c[T+l[m][0]]=T+l[m][1],T+=l[m][1]-l[m][0]-1;return c}const YV={resolve:JV,tokenize:ZV},XV={partial:!0,tokenize:e4};function JV(t){return xT(t),t}function ZV(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):fe(a)?t.check(XV,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function e4(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),je(t,s,"linePrefix")}function s(o){if(o===null||fe(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function ST(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(_){return _===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(_),t.exit(s),m):_===null||_===32||_===41||Np(_)?n(_):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),w(_))}function m(_){return _===62?(t.enter(s),t.consume(_),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===62?(t.exit("chunkString"),t.exit(a),m(_)):_===null||_===60||fe(_)?n(_):(t.consume(_),_===92?T:g)}function T(_){return _===60||_===62||_===92?(t.consume(_),g):g(_)}function w(_){return!d&&(_===null||_===41||Yt(_))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(_)):d<c&&_===40?(t.consume(_),d++,w):_===41?(t.consume(_),d--,w):_===null||_===32||_===40||Np(_)?n(_):(t.consume(_),_===92?O:w)}function O(_){return _===40||_===41||_===92?(t.consume(_),w):w(_)}}function IT(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),d}function d(g){return a>999||g===null||g===91||g===93&&!l||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):fe(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||fe(g)||a++>999?(t.exit("chunkString"),d(g)):(t.consume(g),l||(l=!Ce(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,f):f(g)}}function TT(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),l(o)):m===null?n(m):fe(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),je(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||fe(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?f:d)}function f(m){return m===o||m===92?(t.consume(m),d):d(m)}}function Oa(t,e){let n;return r;function r(i){return fe(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ce(i)?je(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const t4={name:"definition",tokenize:r4},n4={partial:!0,tokenize:i4};function r4(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return IT.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=Xs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),l):n(g)}function l(g){return Yt(g)?Oa(t,c)(g):c(g)}function c(g){return ST(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(n4,f,f)(g)}function f(g){return Ce(g)?je(t,m,"whitespace")(g):m(g)}function m(g){return g===null||fe(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function i4(t,e,n){return r;function r(a){return Yt(a)?Oa(t,i)(a):n(a)}function i(a){return TT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ce(a)?je(t,o,"whitespace")(a):o(a)}function o(a){return a===null||fe(a)?e(a):n(a)}}const s4={name:"hardBreakEscape",tokenize:o4};function o4(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return fe(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const a4={name:"headingAtx",resolve:l4,tokenize:u4};function l4(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Zn(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function u4(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||Yt(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),l(d)):d===null||fe(d)?(t.exit("atxHeading"),e(d)):Ce(d)?je(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function l(d){return d===35?(t.consume(d),l):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||Yt(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const c4=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],o0=["pre","script","style","textarea"],d4={concrete:!0,name:"htmlFlow",resolveTo:p4,tokenize:m4},h4={partial:!0,tokenize:y4},f4={partial:!0,tokenize:g4};function p4(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function m4(t,e,n){const r=this;let i,s,o,a,l;return c;function c(P){return d(P)}function d(P){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(P),f}function f(P){return P===33?(t.consume(P),m):P===47?(t.consume(P),s=!0,w):P===63?(t.consume(P),i=3,r.interrupt?e:A):$n(P)?(t.consume(P),o=String.fromCharCode(P),O):n(P)}function m(P){return P===45?(t.consume(P),i=2,g):P===91?(t.consume(P),i=5,a=0,T):$n(P)?(t.consume(P),i=4,r.interrupt?e:A):n(P)}function g(P){return P===45?(t.consume(P),r.interrupt?e:A):n(P)}function T(P){const J="CDATA[";return P===J.charCodeAt(a++)?(t.consume(P),a===J.length?r.interrupt?e:N:T):n(P)}function w(P){return $n(P)?(t.consume(P),o=String.fromCharCode(P),O):n(P)}function O(P){if(P===null||P===47||P===62||Yt(P)){const J=P===47,re=o.toLowerCase();return!J&&!s&&o0.includes(re)?(i=1,r.interrupt?e(P):N(P)):c4.includes(o.toLowerCase())?(i=6,J?(t.consume(P),_):r.interrupt?e(P):N(P)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?v(P):x(P))}return P===45||an(P)?(t.consume(P),o+=String.fromCharCode(P),O):n(P)}function _(P){return P===62?(t.consume(P),r.interrupt?e:N):n(P)}function v(P){return Ce(P)?(t.consume(P),v):k(P)}function x(P){return P===47?(t.consume(P),k):P===58||P===95||$n(P)?(t.consume(P),L):Ce(P)?(t.consume(P),x):k(P)}function L(P){return P===45||P===46||P===58||P===95||an(P)?(t.consume(P),L):V(P)}function V(P){return P===61?(t.consume(P),j):Ce(P)?(t.consume(P),V):x(P)}function j(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(t.consume(P),l=P,b):Ce(P)?(t.consume(P),j):S(P)}function b(P){return P===l?(t.consume(P),l=null,C):P===null||fe(P)?n(P):(t.consume(P),b)}function S(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||Yt(P)?V(P):(t.consume(P),S)}function C(P){return P===47||P===62||Ce(P)?x(P):n(P)}function k(P){return P===62?(t.consume(P),I):n(P)}function I(P){return P===null||fe(P)?N(P):Ce(P)?(t.consume(P),I):n(P)}function N(P){return P===45&&i===2?(t.consume(P),te):P===60&&i===1?(t.consume(P),Z):P===62&&i===4?(t.consume(P),X):P===63&&i===3?(t.consume(P),A):P===93&&i===5?(t.consume(P),ee):fe(P)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(h4,q,E)(P)):P===null||fe(P)?(t.exit("htmlFlowData"),E(P)):(t.consume(P),N)}function E(P){return t.check(f4,W,q)(P)}function W(P){return t.enter("lineEnding"),t.consume(P),t.exit("lineEnding"),$}function $(P){return P===null||fe(P)?E(P):(t.enter("htmlFlowData"),N(P))}function te(P){return P===45?(t.consume(P),A):N(P)}function Z(P){return P===47?(t.consume(P),o="",B):N(P)}function B(P){if(P===62){const J=o.toLowerCase();return o0.includes(J)?(t.consume(P),X):N(P)}return $n(P)&&o.length<8?(t.consume(P),o+=String.fromCharCode(P),B):N(P)}function ee(P){return P===93?(t.consume(P),A):N(P)}function A(P){return P===62?(t.consume(P),X):P===45&&i===2?(t.consume(P),A):N(P)}function X(P){return P===null||fe(P)?(t.exit("htmlFlowData"),q(P)):(t.consume(P),X)}function q(P){return t.exit("htmlFlow"),e(P)}}function g4(t,e,n){const r=this;return i;function i(o){return fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function y4(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Bd,e,n)}}const v4={name:"htmlText",tokenize:_4};function _4(t,e,n){const r=this;let i,s,o;return a;function a(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),l}function l(A){return A===33?(t.consume(A),c):A===47?(t.consume(A),V):A===63?(t.consume(A),x):$n(A)?(t.consume(A),S):n(A)}function c(A){return A===45?(t.consume(A),d):A===91?(t.consume(A),s=0,T):$n(A)?(t.consume(A),v):n(A)}function d(A){return A===45?(t.consume(A),g):n(A)}function f(A){return A===null?n(A):A===45?(t.consume(A),m):fe(A)?(o=f,Z(A)):(t.consume(A),f)}function m(A){return A===45?(t.consume(A),g):f(A)}function g(A){return A===62?te(A):A===45?m(A):f(A)}function T(A){const X="CDATA[";return A===X.charCodeAt(s++)?(t.consume(A),s===X.length?w:T):n(A)}function w(A){return A===null?n(A):A===93?(t.consume(A),O):fe(A)?(o=w,Z(A)):(t.consume(A),w)}function O(A){return A===93?(t.consume(A),_):w(A)}function _(A){return A===62?te(A):A===93?(t.consume(A),_):w(A)}function v(A){return A===null||A===62?te(A):fe(A)?(o=v,Z(A)):(t.consume(A),v)}function x(A){return A===null?n(A):A===63?(t.consume(A),L):fe(A)?(o=x,Z(A)):(t.consume(A),x)}function L(A){return A===62?te(A):x(A)}function V(A){return $n(A)?(t.consume(A),j):n(A)}function j(A){return A===45||an(A)?(t.consume(A),j):b(A)}function b(A){return fe(A)?(o=b,Z(A)):Ce(A)?(t.consume(A),b):te(A)}function S(A){return A===45||an(A)?(t.consume(A),S):A===47||A===62||Yt(A)?C(A):n(A)}function C(A){return A===47?(t.consume(A),te):A===58||A===95||$n(A)?(t.consume(A),k):fe(A)?(o=C,Z(A)):Ce(A)?(t.consume(A),C):te(A)}function k(A){return A===45||A===46||A===58||A===95||an(A)?(t.consume(A),k):I(A)}function I(A){return A===61?(t.consume(A),N):fe(A)?(o=I,Z(A)):Ce(A)?(t.consume(A),I):C(A)}function N(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),i=A,E):fe(A)?(o=N,Z(A)):Ce(A)?(t.consume(A),N):(t.consume(A),W)}function E(A){return A===i?(t.consume(A),i=void 0,$):A===null?n(A):fe(A)?(o=E,Z(A)):(t.consume(A),E)}function W(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||Yt(A)?C(A):(t.consume(A),W)}function $(A){return A===47||A===62||Yt(A)?C(A):n(A)}function te(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function Z(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),B}function B(A){return Ce(A)?je(t,ee,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):ee(A)}function ee(A){return t.enter("htmlTextData"),o(A)}}const Kg={name:"labelEnd",resolveAll:S4,resolveTo:I4,tokenize:T4},w4={tokenize:k4},E4={tokenize:C4},x4={tokenize:A4};function S4(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Zn(t,0,t.length,n),t}function I4(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=mn(a,t.slice(s+1,s+r+3)),a=mn(a,[["enter",d,e]]),a=mn(a,qg(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=mn(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=mn(a,t.slice(o+1)),a=mn(a,[["exit",l,e]]),Zn(t,s,t.length,a),t}function T4(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(Xs(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(w4,d,o?d:f)(m):m===91?t.attempt(E4,d,o?c:f)(m):o?d(m):f(m)}function c(m){return t.attempt(x4,d,f)(m)}function d(m){return e(m)}function f(m){return s._balanced=!0,n(m)}}function k4(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return Yt(f)?Oa(t,s)(f):s(f)}function s(f){return f===41?d(f):ST(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Yt(f)?Oa(t,l)(f):d(f)}function a(f){return n(f)}function l(f){return f===34||f===39||f===40?TT(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function c(f){return Yt(f)?Oa(t,d)(f):d(f)}function d(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function C4(t,e,n){const r=this;return i;function i(a){return IT.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Xs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function A4(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const P4={name:"labelStartImage",resolveAll:Kg.resolveAll,tokenize:R4};function R4(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const b4={name:"labelStartLink",resolveAll:Kg.resolveAll,tokenize:N4};function N4(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Yh={name:"lineEnding",tokenize:D4};function D4(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),je(t,e,"linePrefix")}}const Yu={name:"thematicBreak",tokenize:O4};function O4(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||fe(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Ce(c)?je(t,a,"whitespace")(c):a(c))}}const zt={continuation:{tokenize:V4},exit:U4,name:"list",tokenize:M4},L4={partial:!0,tokenize:z4},j4={partial:!0,tokenize:F4};function M4(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const T=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Dp(g)){if(r.containerState.type||(r.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(Yu,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(g)}return n(g)}function l(g){return Dp(g)&&++o<10?(t.consume(g),l):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(Bd,r.interrupt?n:d,t.attempt(L4,m,f))}function d(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Ce(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function V4(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Bd,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,je(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ce(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(j4,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,je(t,t.attempt(zt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function F4(t,e,n){const r=this;return je(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function U4(t){t.exit(this.containerState.type)}function z4(t,e,n){const r=this;return je(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ce(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const a0={name:"setextUnderline",resolveTo:B4,tokenize:$4};function B4(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function $4(t,e,n){const r=this;let i;return s;function s(c){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Ce(c)?je(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||fe(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const H4={tokenize:W4};function W4(t){const e=this,n=t.attempt(Bd,r,t.attempt(this.parser.constructs.flowInitial,i,je(t,t.attempt(this.parser.constructs.flow,i,t.attempt(YV,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const q4={resolveAll:CT()},K4=kT("string"),G4=kT("text");function kT(t){return{resolveAll:CT(t==="text"?Q4:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),l}function l(d){return c(d)?(n.exit("data"),s(d)):(n.consume(d),l)}function c(d){if(d===null)return!0;const f=i[d];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function CT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function Q4(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const Y4={42:zt,43:zt,45:zt,48:zt,49:zt,50:zt,51:zt,52:zt,53:zt,54:zt,55:zt,56:zt,57:zt,62:_T},X4={91:t4},J4={[-2]:Qh,[-1]:Qh,32:Qh},Z4={35:a4,42:Yu,45:[a0,Yu],60:d4,61:a0,95:Yu,96:s0,126:s0},eF={38:ET,92:wT},tF={[-5]:Yh,[-4]:Yh,[-3]:Yh,33:P4,38:ET,42:Op,60:[bV,v4],91:b4,92:[s4,wT],93:Kg,95:Op,96:HV},nF={null:[Op,q4]},rF={null:[42,95]},iF={null:[]},sF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rF,contentInitial:X4,disable:iF,document:Y4,flow:Z4,flowInitial:J4,insideSpan:nF,string:eF,text:tF},Symbol.toStringTag,{value:"Module"}));function oF(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:b(V),check:b(j),consume:v,enter:x,exit:L,interrupt:b(j,{interrupt:!0})},c={code:null,containerState:{},defineSkip:w,events:[],now:T,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function f(I){return o=mn(o,I),O(),o[o.length-1]!==null?[]:(S(e,0),c.events=qg(s,c.events,c),c.events)}function m(I,N){return lF(g(I),N)}function g(I){return aF(o,I)}function T(){const{_bufferIndex:I,_index:N,line:E,column:W,offset:$}=r;return{_bufferIndex:I,_index:N,line:E,column:W,offset:$}}function w(I){i[I.line]=I.column,k()}function O(){let I;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<N.length;)_(N.charCodeAt(r._bufferIndex));else _(N)}}function _(I){d=d(I)}function v(I){fe(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,k()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=I}function x(I,N){const E=N||{};return E.type=I,E.start=T(),c.events.push(["enter",E,c]),a.push(E),E}function L(I){const N=a.pop();return N.end=T(),c.events.push(["exit",N,c]),N}function V(I,N){S(I,N.from)}function j(I,N){N.restore()}function b(I,N){return E;function E(W,$,te){let Z,B,ee,A;return Array.isArray(W)?q(W):"tokenize"in W?q([W]):X(W);function X(se){return ve;function ve(K){const le=K!==null&&se[K],ye=K!==null&&se.null,Ne=[...Array.isArray(le)?le:le?[le]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return q(Ne)(K)}}function q(se){return Z=se,B=0,se.length===0?te:P(se[B])}function P(se){return ve;function ve(K){return A=C(),ee=se,se.partial||(c.currentConstruct=se),se.name&&c.parser.constructs.disable.null.includes(se.name)?re():se.tokenize.call(N?Object.assign(Object.create(c),N):c,l,J,re)(K)}}function J(se){return I(ee,A),$}function re(se){return A.restore(),++B<Z.length?P(Z[B]):te}}}function S(I,N){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&Zn(c.events,N,c.events.length-N,I.resolve(c.events.slice(N),c)),I.resolveTo&&(c.events=I.resolveTo(c.events,c))}function C(){const I=T(),N=c.previous,E=c.currentConstruct,W=c.events.length,$=Array.from(a);return{from:W,restore:te};function te(){r=I,c.previous=N,c.currentConstruct=E,c.events.length=W,a=$,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function aF(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function lF(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function uF(t){const r={constructs:gV([sF,...(t||{}).extensions||[]]),content:i(IV),defined:[],document:i(kV),flow:i(H4),lazy:{},string:i(K4),text:i(G4)};return r;function i(s){return o;function o(a){return oF(r,s,a)}}}function cF(t){for(;!xT(t););return t}const l0=/[\0\t\n\r]/g;function dF(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,d,f,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(l0.lastIndex=f,c=l0.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(f);break}if(g===10&&f===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<m&&(l.push(s.slice(f,m)),t+=m-f),g){case 0:{l.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,l.push(-2);t++<d;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const hF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function fF(t){return t.replace(hF,pF)}function pF(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return vT(n.slice(s?2:1),s?16:10)}return Wg(n)||t}const AT={}.hasOwnProperty;function mF(t,e,n){return typeof e!="string"&&(n=e,e=void 0),gF(n)(cF(uF(n).document().write(dF()(t,e,!0))))}function gF(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Do),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(Ut),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ne),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ne,o),codeText:s(wt,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Nt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Mn),hardBreakEscape:s(br),hardBreakTrailing:s(br),htmlFlow:s(Ai,o),htmlFlowData:C,htmlText:s(Ai,o),htmlTextData:C,image:s(hs),label:o,link:s(Do),listItem:s(bl),listItemValue:m,listOrdered:s(fs,f),listUnordered:s(fs),paragraph:s(Wd),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ut),strong:s(Oo),thematicBreak:s(Nl)},exit:{atxHeading:l(),atxHeadingSequence:V,autolink:l(),autolinkEmail:le,autolinkProtocol:K,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:re,characterReferenceMarkerNumeric:re,characterReferenceValue:se,characterReference:ve,codeFenced:l(O),codeFencedFence:w,codeFencedFenceInfo:g,codeFencedFenceMeta:T,codeFlowValue:k,codeIndented:l(_),codeText:l($),codeTextData:k,data:k,definition:l(),definitionDestinationString:L,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(E),htmlFlowData:k,htmlText:l(W),htmlTextData:k,image:l(Z),label:ee,labelText:B,lineEnding:I,link:l(te),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:J,resourceDestinationString:A,resourceTitleString:X,resource:q,setextHeading:l(S),setextHeadingLineSequence:b,setextHeadingText:j,strong:l(),thematicBreak:l()}};PT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(U){let G={type:"root",children:[]};const he={stack:[G],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},we=[];let Ae=-1;for(;++Ae<U.length;)if(U[Ae][1].type==="listOrdered"||U[Ae][1].type==="listUnordered")if(U[Ae][0]==="enter")we.push(Ae);else{const Jt=we.pop();Ae=i(U,Jt,Ae)}for(Ae=-1;++Ae<U.length;){const Jt=e[U[Ae][0]];AT.call(Jt,U[Ae][1].type)&&Jt[U[Ae][1].type].call(Object.assign({sliceSerialize:U[Ae][2].sliceSerialize},he),U[Ae][1])}if(he.tokenStack.length>0){const Jt=he.tokenStack[he.tokenStack.length-1];(Jt[1]||u0).call(he,void 0,Jt[0])}for(G.position={start:Fr(U.length>0?U[0][1].start:{line:1,column:1,offset:0}),end:Fr(U.length>0?U[U.length-2][1].end:{line:1,column:1,offset:0})},Ae=-1;++Ae<e.transforms.length;)G=e.transforms[Ae](G)||G;return G}function i(U,G,he){let we=G-1,Ae=-1,Jt=!1,Zt,hn,Nr,nr;for(;++we<=he;){const Dt=U[we];switch(Dt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Dt[0]==="enter"?Ae++:Ae--,nr=void 0;break}case"lineEndingBlank":{Dt[0]==="enter"&&(Zt&&!nr&&!Ae&&!Nr&&(Nr=we),nr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:nr=void 0}if(!Ae&&Dt[0]==="enter"&&Dt[1].type==="listItemPrefix"||Ae===-1&&Dt[0]==="exit"&&(Dt[1].type==="listUnordered"||Dt[1].type==="listOrdered")){if(Zt){let Dr=we;for(hn=void 0;Dr--;){const en=U[Dr];if(en[1].type==="lineEnding"||en[1].type==="lineEndingBlank"){if(en[0]==="exit")continue;hn&&(U[hn][1].type="lineEndingBlank",Jt=!0),en[1].type="lineEnding",hn=Dr}else if(!(en[1].type==="linePrefix"||en[1].type==="blockQuotePrefix"||en[1].type==="blockQuotePrefixWhitespace"||en[1].type==="blockQuoteMarker"||en[1].type==="listItemIndent"))break}Nr&&(!hn||Nr<hn)&&(Zt._spread=!0),Zt.end=Object.assign({},hn?U[hn][1].start:Dt[1].end),U.splice(hn||we,0,["exit",Zt,Dt[2]]),we++,he++}if(Dt[1].type==="listItemPrefix"){const Dr={type:"listItem",_spread:!1,start:Object.assign({},Dt[1].start),end:void 0};Zt=Dr,U.splice(we,0,["enter",Dr,Dt[2]]),we++,he++,Nr=void 0,nr=!0}}}return U[G][1]._spread=Jt,he}function s(U,G){return he;function he(we){a.call(this,U(we),we),G&&G.call(this,we)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(U,G,he){this.stack[this.stack.length-1].children.push(U),this.stack.push(U),this.tokenStack.push([G,he||void 0]),U.position={start:Fr(G.start),end:void 0}}function l(U){return G;function G(he){U&&U.call(this,he),c.call(this,he)}}function c(U,G){const he=this.stack.pop(),we=this.tokenStack.pop();if(we)we[0].type!==U.type&&(G?G.call(this,U,we[0]):(we[1]||u0).call(this,U,we[0]));else throw new Error("Cannot close `"+U.type+"` ("+Da({start:U.start,end:U.end})+"): its not open");he.position.end=Fr(U.end)}function d(){return pV(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(U){if(this.data.expectingFirstListItemValue){const G=this.stack[this.stack.length-2];G.start=Number.parseInt(this.sliceSerialize(U),10),this.data.expectingFirstListItemValue=void 0}}function g(){const U=this.resume(),G=this.stack[this.stack.length-1];G.lang=U}function T(){const U=this.resume(),G=this.stack[this.stack.length-1];G.meta=U}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function O(){const U=this.resume(),G=this.stack[this.stack.length-1];G.value=U.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const U=this.resume(),G=this.stack[this.stack.length-1];G.value=U.replace(/(\r?\n|\r)$/g,"")}function v(U){const G=this.resume(),he=this.stack[this.stack.length-1];he.label=G,he.identifier=Xs(this.sliceSerialize(U)).toLowerCase()}function x(){const U=this.resume(),G=this.stack[this.stack.length-1];G.title=U}function L(){const U=this.resume(),G=this.stack[this.stack.length-1];G.url=U}function V(U){const G=this.stack[this.stack.length-1];if(!G.depth){const he=this.sliceSerialize(U).length;G.depth=he}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function b(U){const G=this.stack[this.stack.length-1];G.depth=this.sliceSerialize(U).codePointAt(0)===61?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function C(U){const he=this.stack[this.stack.length-1].children;let we=he[he.length-1];(!we||we.type!=="text")&&(we=Lo(),we.position={start:Fr(U.start),end:void 0},he.push(we)),this.stack.push(we)}function k(U){const G=this.stack.pop();G.value+=this.sliceSerialize(U),G.position.end=Fr(U.end)}function I(U){const G=this.stack[this.stack.length-1];if(this.data.atHardBreak){const he=G.children[G.children.length-1];he.position.end=Fr(U.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(G.type)&&(C.call(this,U),k.call(this,U))}function N(){this.data.atHardBreak=!0}function E(){const U=this.resume(),G=this.stack[this.stack.length-1];G.value=U}function W(){const U=this.resume(),G=this.stack[this.stack.length-1];G.value=U}function $(){const U=this.resume(),G=this.stack[this.stack.length-1];G.value=U}function te(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=G,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function Z(){const U=this.stack[this.stack.length-1];if(this.data.inReference){const G=this.data.referenceType||"shortcut";U.type+="Reference",U.referenceType=G,delete U.url,delete U.title}else delete U.identifier,delete U.label;this.data.referenceType=void 0}function B(U){const G=this.sliceSerialize(U),he=this.stack[this.stack.length-2];he.label=fF(G),he.identifier=Xs(G).toLowerCase()}function ee(){const U=this.stack[this.stack.length-1],G=this.resume(),he=this.stack[this.stack.length-1];if(this.data.inReference=!0,he.type==="link"){const we=U.children;he.children=we}else he.alt=G}function A(){const U=this.resume(),G=this.stack[this.stack.length-1];G.url=U}function X(){const U=this.resume(),G=this.stack[this.stack.length-1];G.title=U}function q(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function J(U){const G=this.resume(),he=this.stack[this.stack.length-1];he.label=G,he.identifier=Xs(this.sliceSerialize(U)).toLowerCase(),this.data.referenceType="full"}function re(U){this.data.characterReferenceType=U.type}function se(U){const G=this.sliceSerialize(U),he=this.data.characterReferenceType;let we;he?(we=vT(G,he==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):we=Wg(G);const Ae=this.stack[this.stack.length-1];Ae.value+=we}function ve(U){const G=this.stack.pop();G.position.end=Fr(U.end)}function K(U){k.call(this,U);const G=this.stack[this.stack.length-1];G.url=this.sliceSerialize(U)}function le(U){k.call(this,U);const G=this.stack[this.stack.length-1];G.url="mailto:"+this.sliceSerialize(U)}function ye(){return{type:"blockquote",children:[]}}function Ne(){return{type:"code",lang:null,meta:null,value:""}}function wt(){return{type:"inlineCode",value:""}}function Nt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Mn(){return{type:"emphasis",children:[]}}function Ut(){return{type:"heading",depth:0,children:[]}}function br(){return{type:"break"}}function Ai(){return{type:"html",value:""}}function hs(){return{type:"image",title:null,url:"",alt:null}}function Do(){return{type:"link",title:null,url:"",children:[]}}function fs(U){return{type:"list",ordered:U.type==="listOrdered",start:null,spread:U._spread,children:[]}}function bl(U){return{type:"listItem",spread:U._spread,checked:null,children:[]}}function Wd(){return{type:"paragraph",children:[]}}function Oo(){return{type:"strong",children:[]}}function Lo(){return{type:"text",value:""}}function Nl(){return{type:"thematicBreak"}}}function Fr(t){return{line:t.line,column:t.column,offset:t.offset}}function PT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?PT(t,r):yF(t,r)}}function yF(t,e){let n;for(n in e)if(AT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function u0(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Da({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Da({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Da({start:e.start,end:e.end})+") is still open")}function vF(t){const e=this;e.parser=n;function n(r){return mF(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function _F(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function wF(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function EF(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function xF(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SF(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function IF(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=No(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function TF(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function kF(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function RT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function CF(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return RT(t,e);const i={src:No(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function AF(t,e){const n={src:No(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function PF(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function RF(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return RT(t,e);const i={href:No(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function bF(t,e){const n={href:No(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function NF(t,e,n){const r=t.all(e),i=n?DF(n):bT(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function DF(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=bT(n[r])}return e}function bT(t){const e=t.spread;return e??t.children.length>1}function OF(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function LF(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jF(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function MF(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VF(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=zg(e.children[1]),l=dT(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function FF(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const f=e.children[l],m={},g=o?o[l]:void 0;g&&(m.align=g);let T={type:"element",tagName:s,properties:m,children:[]};f&&(T.children=t.all(f),t.patch(f,T),T=t.applyData(f,T)),c.push(T)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function UF(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const c0=9,d0=32;function zF(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(h0(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(h0(e.slice(i),i>0,!1)),s.join("")}function h0(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===c0||s===d0;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===c0||s===d0;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function BF(t,e){const n={type:"text",value:zF(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function $F(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const HF={blockquote:_F,break:wF,code:EF,delete:xF,emphasis:SF,footnoteReference:IF,heading:TF,html:kF,imageReference:CF,image:AF,inlineCode:PF,linkReference:RF,link:bF,listItem:NF,list:OF,paragraph:LF,root:jF,strong:MF,table:VF,tableCell:UF,tableRow:FF,text:BF,thematicBreak:$F,toml:wu,yaml:wu,definition:wu,footnoteDefinition:wu};function wu(){}const NT=-1,$d=0,La=1,Hc=2,Gg=3,Qg=4,Yg=5,Xg=6,DT=7,OT=8,f0=typeof self=="object"?self:globalThis,WF=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case $d:case NT:return n(o,i);case La:{const a=n([],i);for(const l of o)a.push(r(l));return a}case Hc:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case Gg:return n(new Date(o),i);case Qg:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Yg:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case Xg:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case DT:{const{name:a,message:l}=o;return n(new f0[a](l),i)}case OT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new f0[s](o),i)};return r},p0=t=>WF(new Map,t)(0),ws="",{toString:qF}={},{keys:KF}=Object,oa=t=>{const e=typeof t;if(e!=="object"||!t)return[$d,e];const n=qF.call(t).slice(8,-1);switch(n){case"Array":return[La,ws];case"Object":return[Hc,ws];case"Date":return[Gg,ws];case"RegExp":return[Qg,ws];case"Map":return[Yg,ws];case"Set":return[Xg,ws];case"DataView":return[La,n]}return n.includes("Array")?[La,n]:n.includes("Error")?[DT,n]:[Hc,n]},Eu=([t,e])=>t===$d&&(e==="function"||e==="symbol"),GF=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=oa(o);switch(a){case $d:{let d=o;switch(l){case"bigint":a=OT,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return i([NT],o)}return i([a,d],o)}case La:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const d=[],f=i([a,d],o);for(const m of o)d.push(s(m));return f}case Hc:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],f=i([a,d],o);for(const m of KF(o))(t||!Eu(oa(o[m])))&&d.push([s(m),s(o[m])]);return f}case Gg:return i([a,o.toISOString()],o);case Qg:{const{source:d,flags:f}=o;return i([a,{source:d,flags:f}],o)}case Yg:{const d=[],f=i([a,d],o);for(const[m,g]of o)(t||!(Eu(oa(m))||Eu(oa(g))))&&d.push([s(m),s(g)]);return f}case Xg:{const d=[],f=i([a,d],o);for(const m of o)(t||!Eu(oa(m)))&&d.push(s(m));return f}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},m0=(t,{json:e,lossy:n}={})=>{const r=[];return GF(!(e||n),!!e,new Map,r)(t),r},Wc=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?p0(m0(t,e)):structuredClone(t):(t,e)=>p0(m0(t,e));function QF(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function YF(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function XF(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||QF,r=t.options.footnoteBackLabel||YF,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const d=t.all(c),f=String(c.identifier).toUpperCase(),m=No(f.toLowerCase());let g=0;const T=[],w=t.footnoteCounts.get(f);for(;w!==void 0&&++g<=w;){T.length>0&&T.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,g);typeof v=="string"&&(v={type:"text",value:v}),T.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,g),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const O=d[d.length-1];if(O&&O.type==="element"&&O.tagName==="p"){const v=O.children[O.children.length-1];v&&v.type==="text"?v.value+=" ":O.children.push({type:"text",value:" "}),O.children.push(...T)}else d.push(...T);const _={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(c,_),a.push(_)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Wc(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const LT=function(t){if(t==null)return t6;if(typeof t=="function")return Hd(t);if(typeof t=="object")return Array.isArray(t)?JF(t):ZF(t);if(typeof t=="string")return e6(t);throw new Error("Expected function, string, or object as test")};function JF(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=LT(t[n]);return Hd(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function ZF(t){const e=t;return Hd(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function e6(t){return Hd(e);function e(n){return n&&n.type===t}}function Hd(t){return e;function e(n,r,i){return!!(n6(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function t6(){return!0}function n6(t){return t!==null&&typeof t=="object"&&"type"in t}const jT=[],r6=!0,g0=!1,i6="skip";function s6(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=LT(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=jT,T,w,O;if((!e||s(l,c,d[d.length-1]||void 0))&&(g=o6(n(l,d)),g[0]===g0))return g;if("children"in l&&l.children){const _=l;if(_.children&&g[0]!==i6)for(w=(r?_.children.length:-1)+o,O=d.concat(_);w>-1&&w<_.children.length;){const v=_.children[w];if(T=a(v,w,O)(),T[0]===g0)return T;w=typeof T[1]=="number"?T[1]:w+o}}return g}}}function o6(t){return Array.isArray(t)?t:typeof t=="number"?[r6,t]:t==null?jT:[t]}function MT(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),s6(t,s,a,i);function a(l,c){const d=c[c.length-1],f=d?d.children.indexOf(l):void 0;return o(l,f,d)}}const Lp={}.hasOwnProperty,a6={};function l6(t,e){const n=e||a6,r=new Map,i=new Map,s=new Map,o={...HF,...n.handlers},a={all:c,applyData:c6,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:u6,wrap:h6};return MT(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,m=String(d.identifier).toUpperCase();f.has(m)||f.set(m,d)}}),a;function l(d,f){const m=d.type,g=a.handlers[m];if(Lp.call(a.handlers,m)&&g)return g(a,d,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in d){const{children:w,...O}=d,_=Wc(O);return _.children=a.all(d),_}return Wc(d)}return(a.options.unknownHandler||d6)(a,d,f)}function c(d){const f=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const T=a.one(m[g],d);if(T){if(g&&m[g-1].type==="break"&&(!Array.isArray(T)&&T.type==="text"&&(T.value=y0(T.value)),!Array.isArray(T)&&T.type==="element")){const w=T.children[0];w&&w.type==="text"&&(w.value=y0(w.value))}Array.isArray(T)?f.push(...T):f.push(T)}}}return f}}function u6(t,e){t.position&&(e.position=qM(t))}function c6(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Wc(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function d6(t,e){const n=e.data||{},r="value"in e&&!(Lp.call(n,"hProperties")||Lp.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function h6(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function y0(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function v0(t,e){const n=l6(t,e),r=n.one(t,void 0),i=XF(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function f6(t,e){return t&&"run"in t?async function(n,r){const i=v0(n,{file:r,...e});await t.run(i,r)}:function(n,r){return v0(n,{file:r,...t||e})}}function _0(t){if(t)throw t}var Xu=Object.prototype.hasOwnProperty,VT=Object.prototype.toString,w0=Object.defineProperty,E0=Object.getOwnPropertyDescriptor,x0=function(e){return typeof Array.isArray=="function"?Array.isArray(e):VT.call(e)==="[object Array]"},S0=function(e){if(!e||VT.call(e)!=="[object Object]")return!1;var n=Xu.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Xu.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Xu.call(e,i)},I0=function(e,n){w0&&n.name==="__proto__"?w0(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},T0=function(e,n){if(n==="__proto__")if(Xu.call(e,n)){if(E0)return E0(e,n).value}else return;return e[n]},p6=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=T0(a,n),i=T0(e,n),a!==i&&(d&&i&&(S0(i)||(s=x0(i)))?(s?(s=!1,o=r&&x0(r)?r:[]):o=r&&S0(r)?r:{},I0(a,{name:n,newValue:t(d,o,i)})):typeof i<"u"&&I0(a,{name:n,newValue:i}));return a};const Xh=O0(p6);function jp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function m6(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const d=t[++s];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,d?g6(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function g6(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Un={basename:y6,dirname:v6,extname:_6,join:w6,sep:"/"};function y6(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Rl(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function v6(t){if(Rl(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function _6(t){Rl(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function w6(...t){let e=-1,n;for(;++e<t.length;)Rl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":E6(n)}function E6(t){Rl(t);const e=t.codePointAt(0)===47;let n=x6(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function x6(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Rl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const S6={cwd:I6};function I6(){return"/"}function Mp(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function T6(t){if(typeof t=="string")t=new URL(t);else if(!Mp(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return k6(t)}function k6(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Jh=["history","path","basename","stem","extname","dirname"];class FT{constructor(e){let n;e?Mp(e)?n={path:e}:typeof e=="string"||C6(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":S6.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Jh.length;){const s=Jh[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Jh.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Un.basename(this.path):void 0}set basename(e){ef(e,"basename"),Zh(e,"basename"),this.path=Un.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Un.dirname(this.path):void 0}set dirname(e){k0(this.basename,"dirname"),this.path=Un.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Un.extname(this.path):void 0}set extname(e){if(Zh(e,"extname"),k0(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Un.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Mp(e)&&(e=T6(e)),ef(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Un.basename(this.path,this.extname):void 0}set stem(e){ef(e,"stem"),Zh(e,"stem"),this.path=Un.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new bt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Zh(t,e){if(t&&t.includes(Un.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Un.sep+"`")}function ef(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function k0(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function C6(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const A6=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},P6={}.hasOwnProperty;class Jg extends A6{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=m6()}copy(){const e=new Jg;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Xh(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(rf("data",this.frozen),this.namespace[e]=n,this):P6.call(this.namespace,e)&&this.namespace[e]||void 0:e?(rf("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=xu(e),r=this.parser||this.Parser;return tf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),tf("process",this.parser||this.Parser),nf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=xu(e),l=r.parse(a);r.run(l,a,function(d,f,m){if(d||!f||!m)return c(d);const g=f,T=r.stringify(g,m);N6(T)?m.value=T:m.result=T,c(d,m)});function c(d,f){d||!f?o(d):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),tf("processSync",this.parser||this.Parser),nf("processSync",this.compiler||this.Compiler),this.process(e,i),A0("processSync","process",n),r;function i(s,o){n=!0,_0(s),r=o}}run(e,n,r){C0(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=xu(n);i.run(e,l,c);function c(d,f,m){const g=f||e;d?a(d):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),A0("runSync","run",r),i;function s(o,a){_0(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=xu(n),i=this.compiler||this.Compiler;return nf("stringify",i),C0(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(rf("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...f]=c;l(d,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=Xh(!0,i.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const f=c[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,d){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...d]);else if(d.length>0){let[g,...T]=d;const w=r[m][1];jp(w)&&jp(g)&&(g=Xh(!0,w,g)),r[m]=[c,g,...T]}}}}const R6=new Jg().freeze();function tf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function nf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function rf(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function C0(t){if(!jp(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function A0(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function xu(t){return b6(t)?t:new FT(t)}function b6(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function N6(t){return typeof t=="string"||D6(t)}function D6(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const O6="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",P0=[],R0={allowDangerousHtml:!0},L6=/^(https?|ircs?|mailto|xmpp)$/i,j6=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function M6(t){const e=V6(t),n=F6(t);return U6(e.runSync(e.parse(n),n),t)}function V6(t){const e=t.rehypePlugins||P0,n=t.remarkPlugins||P0,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...R0}:R0;return R6().use(vF).use(n).use(f6,r).use(e)}function F6(t){const e=t.children||"",n=new FT;return typeof e=="string"&&(n.value=e),n}function U6(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||z6;for(const d of j6)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+O6+d.id,void 0);return MT(t,c),XM(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function c(d,f,m){if(d.type==="raw"&&m&&typeof f=="number")return o?m.children.splice(f,1):m.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let g;for(g in Gh)if(Object.hasOwn(Gh,g)&&Object.hasOwn(d.properties,g)){const T=d.properties[g],w=Gh[g];(w===null||w.includes(d.tagName))&&(d.properties[g]=l(String(T||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(d,f,m)),g&&m&&typeof f=="number")return a&&d.children?m.children.splice(f,1,...d.children):m.children.splice(f,1),f}}}function z6(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||L6.test(t.slice(0,e))?t:""}function Zg(t,e){const[n,r]=D.useState([]),[i,s]=D.useState(!1);D.useEffect(()=>{if(!t||!e){r([]);return}s(!0);const c=lt(Me,"users",t,"applicationProgress",e),d=$c(c,f=>{r(f.exists()?f.data().completedStepIds||[]:[]),s(!1)},()=>s(!1));return()=>d()},[t,e]);const o=D.useCallback(async()=>{if(!t||!e)return null;const c=lt(Me,"users",t,"applicationProgress",e);return(await hr(c)).exists()||await Ro(c,{completedStepIds:[]}),c},[t,e]),a=D.useCallback(async c=>{if(!t||!e||!c)return;const d=await o();d&&await is(d,{completedStepIds:YI(c)})},[t,e,o]),l=D.useCallback(async c=>{if(!t||!e||!c)return;const d=await o();d&&await is(d,{completedStepIds:XI(c)})},[t,e,o]);return{completedSteps:n,loading:i,markStepComplete:a,markStepIncomplete:l}}function B6({step:t,applicationId:e,hideCompleteToggle:n,application:r}){const{user:i}=Ft(),{completedSteps:s,markStepComplete:o,markStepIncomplete:a}=Zg(i==null?void 0:i.uid,e),[l,c]=D.useState(!1),d=t.id||t._id,f=s.includes(d),m=()=>{i&&c(!0)},g=T=>{console.log("Step report submitted:",T)};return h.jsxs("div",{className:"info-step",children:[h.jsxs("div",{className:"step-header",children:[h.jsx("h2",{children:t.title}),i&&h.jsx(Vd,{onClick:m,size:"small",variant:"subtle",children:"Report Issue"})]}),t.content?h.jsx(M6,{components:{a:({node:T,...w})=>h.jsx("a",{...w,target:"_blank",rel:"noopener noreferrer"})},children:t.content}):h.jsx("p",{children:"No additional information available for this step."}),i&&!n&&h.jsxs("label",{className:"step-complete-checkbox",children:[h.jsx("input",{type:"checkbox",checked:f,onChange:T=>{T.target.checked?o(d):a(d)}}),t.action_required?"Mark this step as complete":"Mark this step as read"]}),h.jsx(Ud,{isOpen:l,onClose:()=>c(!1),application:r,step:t,onReportSubmitted:g})]})}function $6(){const{user:t}=Ft(),[e,n]=D.useState([]),[r,i]=D.useState(!0);return D.useEffect(()=>{if(!t)return;async function s(){const a=(await Al(tr(Me,"users",t.uid,"pinnedApplications"))).docs.map(d=>d.id),c=(await Promise.all(a.map(d=>hr(lt(Me,"applications",d))))).filter(d=>d.exists()).map(d=>({id:d.id,...d.data()}));n(c),i(!1)}s()},[t]),{applications:e,loading:r}}function H6({applicationId:t,formName:e,stepId:n,hideCompleteToggle:r=!1,application:i,step:s}){const{user:o}=Ft(),{completedSteps:a,markStepComplete:l,markStepIncomplete:c}=Zg(o==null?void 0:o.uid,t),d=a.includes(n),[f,m]=D.useState([]),[g,T]=D.useState({}),[w,O]=D.useState("idle"),[_,v]=D.useState(!0),[x,L]=D.useState(!1);D.useEffect(()=>{(async()=>{v(!0);try{const N=await(await fetch(`http://localhost:3000/api/form-fields?applicationId=${t}&formName=${e}`)).json();if(m(N.fields||[]),o){const E=await rT(o.uid,t,e);T(E||{})}}catch(I){console.error("Error fetching fields or saved form data",I)}v(!1)})()},[t,e,o]);const V=async k=>{const I={...g,[k.target.name]:k.target.value};if(T(I),O("saving"),o)try{await Qj(o.uid,t,e,I),await Mg(o.uid,t,"form"),O("saved"),setTimeout(()=>O("idle"),1500)}catch(N){console.error("Failed to save form data",N),O("error")}},j=()=>{T({}),O("idle")},b=async()=>{try{const k=await fetch("/api/fill-pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:t,formName:e,formData:g})});if(!k.ok)throw new Error("PDF generation failed");const{url:I}=await k.json();window.location.href=I}catch(k){console.error("Error downloading PDF:",k),alert("Something went wrong generating the PDF.")}},S=()=>{o&&L(!0)},C=k=>{console.log("Form step report submitted:",k)};return o?_?h.jsxs("div",{className:"dynamic-form",children:[h.jsx("div",{className:"form-header",children:h.jsx("h2",{children:"Loading form..."})}),h.jsx("div",{className:"loading",children:"Loading form fields..."})]}):h.jsxs("div",{className:"dynamic-form",children:[h.jsxs("div",{className:"form-header",children:[h.jsx("h2",{children:e.replace(".pdf","").replace(/[_-]/g," ")}),o&&h.jsx(Vd,{onClick:S,size:"small",variant:"subtle",children:"Report Issue"})]}),h.jsxs("form",{onSubmit:k=>k.preventDefault(),children:[!r&&h.jsx("div",{className:"step-complete-checkbox",children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:d,onChange:k=>{k.target.checked?l(n):c(n)}}),"Mark this step as complete"]})}),h.jsx("div",{className:"form-status",children:h.jsx("span",{className:`status ${w}`,children:w==="saving"?"Saving...":w==="saved"?"Saved ":w==="error"?"Error ":""})}),f.map((k,I)=>h.jsxs("div",{className:"form-field",children:[h.jsx("label",{children:k.label||k.name}),h.jsx("input",{type:"text",name:k.name,value:g[k.name]||"",onChange:V}),k.description&&h.jsx("small",{className:"field-description",children:k.description})]},`${k.label}-${I}`)),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"button",onClick:j,children:"Reset Form"}),h.jsx("button",{type:"button",onClick:b,children:"Download Filled PDF"})]})]}),h.jsx(Ud,{isOpen:x,onClose:()=>L(!1),application:i,step:s,onReportSubmitted:C})]}):h.jsx("p",{children:"Please log in to use this feature."})}const W6=({isOpen:t,onClose:e,pdfUrl:n,currentFieldId:r,formOverlay:i,className:s=""})=>{const[o,a]=D.useState(null),[l,c]=D.useState(1),[d,f]=D.useState(1),m=D.useRef(null),g=D.useRef(null),T=()=>{const w=m.current;if(!w)return;const O=w.getContext("2d"),_=w.width,v=w.height;O.clearRect(0,0,_,v),O.fillStyle="#ffffff",O.fillRect(0,0,_,v),O.fillStyle="#333333",O.font="16px Arial",O.fillText("PDF Preview",20,40),O.fillText("This is a mock PDF preview",20,70),O.fillText("Field highlighting will be implemented here",20,100),[{id:"business_name",x:50,y:150,width:200,height:30,label:"Business Name"},{id:"owner_name",x:50,y:200,width:200,height:30,label:"Owner Name"},{id:"address",x:50,y:250,width:300,height:30,label:"Address"}].forEach(L=>{const V=r===L.id;O.fillStyle=V?"#e3f2fd":"#f5f5f5",O.fillRect(L.x,L.y,L.width,L.height),O.strokeStyle=V?"#2196f3":"#e0e0e0",O.lineWidth=V?2:1,O.strokeRect(L.x,L.y,L.width,L.height),O.fillStyle=V?"#1976d2":"#666666",O.font="12px Arial",O.fillText(L.label,L.x+5,L.y+20),V&&(O.shadowColor="#2196f3",O.shadowBlur=10,O.shadowOffsetX=0,O.shadowOffsetY=0,O.strokeRect(L.x-2,L.y-2,L.width+4,L.height+4),O.shadowBlur=0)})};return D.useEffect(()=>{t&&m.current&&T()},[t,r]),D.useEffect(()=>{const w=O=>{O.key==="Escape"&&t&&e()};return t?(document.addEventListener("keydown",w),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",w),document.body.style.overflow="unset"}},[t,e]),t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"pdf-preview-backdrop",onClick:e}),h.jsxs("div",{ref:g,className:`pdf-preview-panel ${s}`,style:{transform:t?"translateX(0)":"translateX(100%)"},children:[h.jsxs("div",{className:"pdf-preview-header",children:[h.jsxs("div",{className:"pdf-preview-title",children:[h.jsx("h3",{children:"PDF Preview"}),h.jsx("span",{className:"pdf-preview-subtitle",children:"Form Field Highlighting"})]}),h.jsx("button",{className:"pdf-preview-close",onClick:e,children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),h.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),h.jsxs("div",{className:"pdf-preview-controls",children:[h.jsxs("div",{className:"pdf-preview-scale",children:[h.jsx("button",{onClick:()=>f(Math.max(.5,d-.1)),disabled:d<=.5,children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),h.jsxs("span",{children:[Math.round(d*100),"%"]}),h.jsx("button",{onClick:()=>f(Math.min(2,d+.1)),disabled:d>=2,children:h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),h.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),h.jsxs("div",{className:"pdf-preview-pagination",children:[h.jsx("button",{onClick:()=>c(Math.max(1,l-1)),disabled:l<=1,children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("polyline",{points:"15,18 9,12 15,6"})})}),h.jsxs("span",{children:["Page ",l]}),h.jsx("button",{onClick:()=>c(l+1),disabled:l>=1,children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:h.jsx("polyline",{points:"9,18 15,12 9,6"})})})]})]}),h.jsx("div",{className:"pdf-preview-content",children:h.jsx("div",{className:"pdf-preview-canvas-container",children:h.jsx("canvas",{ref:m,width:400,height:600,className:"pdf-preview-canvas"})})}),h.jsx("div",{className:"pdf-preview-footer",children:h.jsx("div",{className:"pdf-preview-info",children:h.jsxs("span",{children:["Current Field: ",r||"None selected"]})})})]})]}):null},b0="http://127.0.0.1:8000";function UT({app:t,form:e,application:n,step:r}){const[i,s]=D.useState({fields:[]}),[o,a]=D.useState({}),[l,c]=D.useState(!0),[d,f]=D.useState(!1),[m,g]=D.useState(null),[T,w]=D.useState(!1),{user:O}=Ft(),_=er(),{openAuthModal:v}=tT(),x=_.pathname.startsWith("/admin");D.useEffect(()=>{(async()=>{c(!0),console.log("InterviewView fetching:",t,e);const N=await(await fetch(`${b0}/apps/${t}/forms/${e}/template`)).json();console.log("template response:",N);const E=Array.isArray(N==null?void 0:N.fields)?N.fields:[];s({fields:E});const W={};for(const $ of E)W[$.id]=$.type==="checkbox"?!1:"";a(W),c(!1)})()},[t,e]);function L(I,N,E){a(W=>({...W,[I]:N==="checkbox"?!!E:E}))}const V=I=>{g(I)},j=()=>{g(null)};async function b(I){I.preventDefault();const N=new FormData;N.append("answers_json",JSON.stringify(o));const E=await fetch(`${b0}/apps/${t}/forms/${e}/fill`,{method:"POST",body:N});if(!E.ok)return alert("Fill failed");const W=await E.blob(),$=URL.createObjectURL(W),te=document.createElement("a");te.href=$,te.download=`${t}_${e}_filled.pdf`,document.body.appendChild(te),te.click(),te.remove(),URL.revokeObjectURL($)}const S=D.useMemo(()=>{const I=new Map;for(const N of i.fields){const E=N.page??0;I.has(E)||I.set(E,[]),I.get(E).push(N)}return[...I.entries()].sort((N,E)=>N[0]-E[0])},[i]),C=()=>{O&&w(!0)},k=I=>{console.log("PDF step report submitted:",I)};return l?h.jsx("div",{style:{padding:16},children:"Loading"}):O?x&&O.email!=="avansardar@outlook.com"?h.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[h.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[h.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Access Denied"}),h.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),h.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",h.jsx("strong",{children:t})," ","application."]})]}):i.fields.length?h.jsxs("div",{style:{padding:0,maxWidth:900},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[h.jsxs("div",{children:[h.jsxs("h2",{style:{margin:"0 0 8px 0",fontSize:"1.5rem",color:"#111827"},children:["PDF Form: ",e]}),h.jsx("p",{style:{margin:0,color:"#6b7280",fontSize:"0.875rem"},children:"Fill out the form fields below to generate your completed PDF"})]}),O&&h.jsx(Vd,{onClick:C,size:"small",variant:"subtle",children:"Report Issue"})]}),h.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px",padding:"12px 0",borderBottom:"1px solid #e5e7eb"},children:h.jsxs("button",{type:"button",onClick:()=>f(!0),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",color:"#475569",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:I=>{I.target.style.background="#f1f5f9",I.target.style.borderColor="#cbd5e1",I.target.style.color="#334155"},onMouseLeave:I=>{I.target.style.background="#f8fafc",I.target.style.borderColor="#e2e8f0",I.target.style.color="#475569"},title:"Open PDF Preview",children:[h.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[h.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),h.jsx("polyline",{points:"14,2 14,8 20,8"}),h.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),h.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),h.jsx("polyline",{points:"10,9 9,9 8,9"})]}),"PDF Preview"]})}),h.jsxs("form",{onSubmit:b,style:{display:"grid",gap:12},children:[S.map(([I,N])=>h.jsxs("fieldset",{style:{border:"1px solid #eee",padding:12},children:[h.jsxs("legend",{children:["Page ",Number(I)+1]}),h.jsx("div",{style:{display:"grid",gap:8},children:N.map(E=>h.jsxs("div",{style:{display:"grid",gap:4},children:[h.jsx("label",{htmlFor:E.id,style:{fontWeight:600},children:E.label||E.id}),String(E.type||"text").toLowerCase()==="checkbox"?h.jsx("input",{id:E.id,type:"checkbox",checked:!!o[E.id],onChange:W=>L(E.id,"checkbox",W.target.checked),onFocus:()=>V(E.id),onBlur:j}):h.jsx("input",{id:E.id,type:"text",value:o[E.id]??"",onChange:W=>L(E.id,"text",W.target.value),placeholder:E.description||"",onFocus:()=>V(E.id),onBlur:j,style:{padding:"8px 10px",border:"1px solid #ccc",borderRadius:6}})]},E.id))})]},I)),h.jsx("div",{style:{display:"flex",gap:8},children:h.jsx("button",{type:"submit",style:{padding:"10px 14px",borderRadius:8,border:"1px solid #ccc",background:"#f7f7f7",cursor:"pointer"},children:"Download Filled PDF"})})]}),h.jsx(W6,{isOpen:d,onClose:()=>f(!1),currentFieldId:m,formId:e,appId:t}),h.jsx(Ud,{isOpen:T,onClose:()=>w(!1),application:n,step:r,onReportSubmitted:k})]}):h.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:600,margin:"0 auto"},children:[h.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #bae6fd",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[h.jsx("h3",{style:{color:"#0369a1",margin:"0 0 16px 0",fontSize:"20px"},children:" No Form Fields Available"}),h.jsx("p",{style:{color:"#0c4a6e",margin:"0 0 16px 0",lineHeight:"1.6"},children:"This form doesn't have any fillable fields defined yet. This usually means:"}),h.jsxs("ul",{style:{textAlign:"left",color:"#0c4a6e",lineHeight:"1.6",margin:"0 0 20px 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"The form is still being processed"}),h.jsx("li",{children:"This is an informational document only"}),h.jsx("li",{children:"Field extraction is in progress"})]}),h.jsxs("p",{style:{color:"#0c4a6e",margin:"0",fontSize:"14px"},children:[h.jsx("strong",{children:"What to do:"})," Check back later or contact support if you need this form to be fillable."]})]}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["Form: ",h.jsx("strong",{children:e})," | Application: ",h.jsx("strong",{children:t})]})]}):x?h.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[h.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[h.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Access Denied"}),h.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"Admin privileges required. Only authorized users can access this area."}),h.jsx("button",{onClick:()=>{window.location.href="/dashboard"},style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Return to Dashboard"})]}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This is an admin-only area for managing the ",h.jsx("strong",{children:t})," ","application."]})]}):h.jsxs("div",{style:{padding:24,textAlign:"center",maxWidth:500,margin:"0 auto"},children:[h.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"12px",padding:"24px",marginBottom:"24px"},children:[h.jsx("h3",{style:{color:"#dc2626",margin:"0 0 16px 0",fontSize:"20px"},children:" Authentication Required"}),h.jsx("p",{style:{color:"#7f1d1d",margin:"0 0 20px 0",lineHeight:"1.6"},children:"You need to be signed in to fill out this form. Please log in to continue with your application."}),h.jsx("button",{onClick:v,style:{background:"#dc2626",color:"white",border:"none",borderRadius:"8px",padding:"12px 24px",fontSize:"16px",cursor:"pointer",fontWeight:"500"},children:"Sign In to Continue"})]}),h.jsxs("p",{style:{color:"#6b7280",fontSize:"14px"},children:["This form is part of the ",h.jsx("strong",{children:t})," application process."]})]})}function q6(){const{app:t,form:e}=n1();return h.jsx(UT,{app:t,form:e})}function K6(){var q;const{applications:t,loading:e}=$6(),{user:n}=Ft(),[r,i]=D.useState([]),[s,o]=D.useState(null),[a,l]=D.useState("overview"),[c,d]=D.useState(null),[f,m]=D.useState(null),[g,T]=D.useState(typeof window<"u"?window.matchMedia("(min-width: 1200px)").matches:!0);D.useEffect(()=>{var re;if(typeof window>"u")return;const P=window.matchMedia("(min-width: 1200px)"),J=se=>T(se.matches);return(re=P.addEventListener)==null||re.call(P,"change",J),T(P.matches),()=>{var se;return(se=P.removeEventListener)==null?void 0:se.call(P,"change",J)}},[]),D.useEffect(()=>{!e&&t.length>0&&i(t)},[e,t]);const w=r.find(P=>P.id===s)||null,{completedSteps:O,markStepComplete:_,markStepIncomplete:v}=Zg(n==null?void 0:n.uid,s),x=D.useMemo(()=>((w==null?void 0:w.steps)||[]).map((J,re)=>({...J,_id:J.id??String(re),title:J.title??`Step ${re+1}`,type:J.type??"unknown"})),[w]),L=((q=x[0])==null?void 0:q._id)||null;D.useEffect(()=>{if(!n||!s){m(null);return}const P=r.find(se=>se.id===s);if(!P)return;const J=$c(lt(Me,"users",n.uid,"applicationProgress",P.id),se=>{const ve=se.exists()?se.data().completedStepIds||[]:[];m(K=>({...K||P,completedStepIds:ve}))}),re=$c(tr(Me,"applications",P.id,"comments"),se=>{const ve=se.docs.map(K=>K.data());m(K=>({...K||P,comments:ve}))});return m(P),()=>{J(),re()}},[n,s,r]),D.useEffect(()=>{a==="steps"&&!c&&L&&d(L)},[a,c,L]);const V=P=>{r.find(J=>J.id===P.id)||i(J=>[...J,P]),o(P.id),l("overview"),d(null),Mg(n==null?void 0:n.uid,P.id)},j=P=>{o(P),l("overview"),d(null)},b=P=>{var re;const J=r.filter(se=>se.id!==P);i(J),s===P&&(o(((re=J[0])==null?void 0:re.id)??null),l("overview"),d(null))},S=P=>{l("steps"),d(P)},C=()=>{if(!r.length)return null;const P=!!s,J=w?`Home > ${w.title}${a!=="overview"?` > ${a}`:""}`:"Home";return h.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,justifyContent:"space-between",marginBottom:12},children:h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[P&&h.jsx("button",{onClick:()=>{o(null),l("overview"),d(null)},style:{padding:"4px 8px",borderRadius:6,border:"1px solid #e2e2e2",background:"#fff",cursor:"pointer",fontSize:14},"aria-label":"Back to Application Grid",title:"Back to Application Grid",children:" Back"}),h.jsx("div",{style:{fontSize:14,color:"#666"},children:J})]})})},k=x.findIndex(P=>P._id===c),I=x.length,N=I?Math.round((k+1)/I*100):0,E=k>0,W=k<I-1,$=()=>E&&d(x[k-1]._id),te=()=>W&&d(x[k+1]._id),Z=k>=0?x[k]:null,B=Z?O.includes(Z.id||Z._id):!1,ee=()=>{if(a!=="steps"||!Z)return null;const P=()=>{const J=Z.id||Z._id;B?v(J):_(J)};return h.jsxs("div",{style:{display:"grid",gap:8,border:"1px solid #eee",borderRadius:12,padding:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[h.jsx("button",{onClick:$,disabled:!E,title:"Previous step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:E?"pointer":"not-allowed",opacity:E?1:.5},children:""}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsxs("div",{style:{fontSize:13,color:"#6b7280"},children:["Step ",k+1," of ",I]}),h.jsx("div",{style:{fontSize:18,fontWeight:700,color:"#111827",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:Z.title,children:Z.title})]}),h.jsx("button",{onClick:te,disabled:!W,title:"Next step",style:{padding:"6px 10px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:W?"pointer":"not-allowed",opacity:W?1:.5},children:""}),h.jsx("button",{onClick:P,style:{marginLeft:8,padding:"8px 12px",borderRadius:10,border:"1px solid "+(B?"#10b981":"#d1d5db"),background:B?"#ecfdf5":"#fff",color:B?"#065f46":"#374151",cursor:"pointer",fontSize:13,whiteSpace:"nowrap"},title:"Toggle completion",children:B?"Completed ":Z.action_required?"Mark Complete":"Mark Read"})]}),h.jsx("div",{role:"progressbar","aria-valuenow":N,"aria-valuemin":0,"aria-valuemax":100,style:{height:6,background:"#f3f4f6",borderRadius:999,overflow:"hidden"},children:h.jsx("div",{style:{width:`${N}%`,height:"100%",background:"#5b9df9"}})})]})},A=()=>{if(a!=="steps")return null;const P=x.find(J=>J._id===c);return P?P.type==="form"?h.jsx(H6,{applicationId:w.id,stepId:P.id||P._id,formName:P.formName,hideCompleteToggle:!0,application:w,step:P}):P.type==="pdf"?h.jsx("div",{style:{display:"grid",gap:8},children:h.jsx(UT,{app:w.id,form:P.formId,application:w,step:P},`${w.id}:${P.formId}`)}):P.type==="info"||P.content?h.jsx(B6,{step:P,applicationId:w.id,hideCompleteToggle:!0,application:w}):h.jsx("p",{children:"Unsupported step type."}):h.jsx("div",{children:"Select a step to begin."})},X=()=>{if(!w||g)return null;const P=(J,re)=>h.jsx("button",{onClick:()=>l(J),style:{padding:"6px 10px",borderRadius:8,border:"1px solid #ddd",background:a===J?"#eef":"#fff",cursor:"pointer",fontSize:14},children:re},J);return h.jsxs("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:[P("overview","Overview"),P("steps","Steps"),P("comments","Comments")]})};return h.jsxs(h.Fragment,{children:[h.jsx(qj,{}),h.jsxs("div",{className:"app-wrapper",children:[h.jsx(jj,{applications:r,activeApplicationId:s,onRemove:b,activeSection:a,setActiveSection:l,onSelect:j,onStepSelect:S,selectedStepId:c}),h.jsxs("div",{style:{flex:1,display:"grid",gridTemplateColumns:w&&g?"1fr 380px":"1fr",gap:16,minHeight:"calc(100vh - 90px)"},children:[h.jsxs("main",{className:"main-content",style:{minWidth:0},children:[h.jsx(C,{}),r.length===0||!w?h.jsx(Vj,{onApplicationSelect:V}):h.jsxs(h.Fragment,{children:[h.jsx(X,{}),a==="overview"&&h.jsxs("div",{style:{display:"grid",gap:12},children:[h.jsx(Hj,{application:w}),x.length>0&&h.jsx("button",{onClick:()=>{l("steps"),d(L)},style:{padding:"10px 14px",border:"1px solid #ccc",borderRadius:8,width:"fit-content",background:"#f7f7f7",cursor:"pointer"},children:"Start application "})]}),a==="steps"&&h.jsxs("div",{style:{display:"grid",gap:12},children:[h.jsx(ee,{}),h.jsx("div",{style:{minHeight:200},children:h.jsx(A,{})})]}),a==="comments"&&w&&h.jsx(tM,{application:w}),!g&&w&&h.jsx("section",{style:{marginTop:16,border:"1px solid #eee",borderRadius:12,background:"#fff"},children:h.jsx("div",{style:{height:420,overflow:"auto",padding:8},children:h.jsx(Fw,{application:f||w,currentStep:Z,currentStepId:(Z==null?void 0:Z.id)||(Z==null?void 0:Z._id)||null,completedStepIds:O})})})]})]}),w&&g&&h.jsxs("aside",{style:{borderLeft:"1px solid #eee",paddingLeft:12,position:"sticky",top:70,height:"calc(100vh - 90px)",display:"flex",flexDirection:"column",gap:8,background:"transparent",minHeight:0},children:[h.jsx("div",{style:{fontSize:14,fontWeight:700,color:"#30343a"},children:"Your AI Assistant"}),h.jsx("div",{style:{border:"1px solid #e8e8e8",borderRadius:12,background:"#fff",boxShadow:"0 1px 2px rgba(0,0,0,0.04)",flex:1,minHeight:0,display:"flex",overflow:"hidden"},children:h.jsx("div",{style:{flex:1,minHeight:0,overflow:"auto",padding:8},children:h.jsx(Fw,{application:f||w,currentStep:Z,currentStepId:(Z==null?void 0:Z.id)||(Z==null?void 0:Z._id)||null,completedStepIds:O})})})]})]})]})]})}function G6(){const[t,e]=D.useState([]),[n,r]=D.useState("all"),[i,s]=D.useState("all"),[o,a]=D.useState(!0),[l,c]=D.useState(null);D.useEffect(()=>{d(),f()},[]);const d=async()=>{try{a(!0);const v=await nT();e(v)}catch(v){console.error("Failed to load reports:",v)}finally{a(!1)}},f=async()=>{try{const v=await $j();c(v)}catch(v){console.error("Failed to load stats:",v)}},m=async(v,x)=>{try{await zj(v,x),await d(),await f()}catch(L){console.error("Failed to update report status:",L),alert("Failed to update report status")}},g=async v=>{if(window.confirm("Are you sure you want to delete this report? This cannot be undone."))try{await Bj(v),await d(),await f()}catch(x){console.error("Failed to delete report:",x),alert("Failed to delete report")}},T=t.filter(v=>!(n!=="all"&&v.context!==n||i!=="all"&&v.status!==i)),w=v=>{switch(v){case"critical":return"#dc2626";case"high":return"#ea580c";case"medium":return"#d97706";case"low":return"#059669";default:return"#6b7280"}},O=v=>{switch(v){case"open":return"#3b82f6";case"in-progress":return"#f59e0b";case"resolved":return"#10b981";case"closed":return"#6b7280";default:return"#6b7280"}},_=v=>new Date(v).toLocaleString();return o?h.jsx("div",{className:"reports-viewer",children:h.jsxs("div",{className:"loading-state",children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{children:"Loading reports..."})]})}):t.length===0?h.jsx("div",{className:"reports-viewer",children:h.jsxs("div",{className:"no-reports",children:[h.jsx("h3",{children:"No Reports Yet"}),h.jsx("p",{children:"When users submit issue reports, they will appear here."})]})}):h.jsxs("div",{className:"reports-viewer",children:[h.jsxs("div",{className:"reports-header",children:[h.jsxs("h2",{children:["Issue Reports (",t.length,")"]}),h.jsxs("div",{className:"header-actions",children:[h.jsxs("select",{value:n,onChange:v=>r(v.target.value),className:"filter-select",children:[h.jsx("option",{value:"all",children:"All Contexts"}),h.jsx("option",{value:"application",children:"Application Issues"}),h.jsx("option",{value:"step",children:"Step Issues"})]}),h.jsxs("select",{value:i,onChange:v=>s(v.target.value),className:"filter-select",children:[h.jsx("option",{value:"all",children:"All Statuses"}),h.jsx("option",{value:"open",children:"Open"}),h.jsx("option",{value:"in-progress",children:"In Progress"}),h.jsx("option",{value:"resolved",children:"Resolved"}),h.jsx("option",{value:"closed",children:"Closed"})]}),h.jsx("button",{onClick:d,className:"refresh-btn",children:"Refresh"})]})]}),l&&h.jsxs("div",{className:"stats-section",children:[h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-number",children:l.total}),h.jsx("div",{className:"stat-label",children:"Total Reports"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-number",children:l.byStatus.open||0}),h.jsx("div",{className:"stat-label",children:"Open"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-number",children:l.byStatus["in-progress"]||0}),h.jsx("div",{className:"stat-label",children:"In Progress"})]}),h.jsxs("div",{className:"stat-card",children:[h.jsx("div",{className:"stat-number",children:l.byStatus.resolved||0}),h.jsx("div",{className:"stat-label",children:"Resolved"})]})]}),h.jsx("div",{className:"reports-list",children:T.map(v=>h.jsxs("div",{className:"report-card",children:[h.jsxs("div",{className:"report-header",children:[h.jsxs("div",{className:"report-meta",children:[h.jsx("span",{className:"severity-badge",style:{backgroundColor:w(v.severity)},children:v.severity}),h.jsx("span",{className:"status-badge",style:{backgroundColor:O(v.status)},children:v.status}),h.jsx("span",{className:"context-badge",children:v.context==="application"?"Application":"Step"}),h.jsx("span",{className:"issue-type",children:v.issueType})]}),h.jsx("span",{className:"timestamp",children:_(v.createdAt)})]}),h.jsxs("div",{className:"report-content",children:[h.jsxs("h4",{className:"report-title",children:[v.applicationTitle,v.stepTitle&&h.jsxs("span",{className:"step-title",children:["  ",v.stepTitle]})]}),h.jsx("p",{className:"description",children:v.description})]}),h.jsxs("div",{className:"report-details",children:[h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Application:"})," ",v.applicationTitle]}),v.stepTitle&&h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Step:"})," ",v.stepTitle]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Issue Type:"})," ",v.issueType]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Severity:"})," ",v.severity]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Reported by:"})," ",v.userEmail]}),h.jsxs("div",{className:"detail-item",children:[h.jsx("strong",{children:"Status:"})," ",v.status]})]}),h.jsxs("div",{className:"report-actions",children:[h.jsxs("select",{value:v.status,onChange:x=>m(v.id,x.target.value),className:"status-select",children:[h.jsx("option",{value:"open",children:"Open"}),h.jsx("option",{value:"in-progress",children:"In Progress"}),h.jsx("option",{value:"resolved",children:"Resolved"}),h.jsx("option",{value:"closed",children:"Closed"})]}),h.jsx("button",{onClick:()=>g(v.id),className:"delete-btn",title:"Delete report",children:"Delete"})]})]},v.id))})]})}const N0="/api";function Q6(){const{user:t,loading:e}=Ft(),[n,r]=D.useState("apps");if(e)return h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t||t.email!=="avansardar@outlook.com")return h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Admin privileges required."}),h.jsx("p",{className:"text-sm text-gray-500",children:"Only authorized users can access this area."}),h.jsx(Bi,{to:"/dashboard",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Dashboard"})]})});const[i,s]=D.useState([]),[o,a]=D.useState(""),l=D.useMemo(()=>i.find(K=>K.id===o)||null,[i,o]),[c,d]=D.useState(""),[f,m]=D.useState(""),[g,T]=D.useState(""),[w,O]=D.useState(""),[_,v]=D.useState([]),[x,L]=D.useState("info"),[V,j]=D.useState(""),[b,S]=D.useState(""),[C,k]=D.useState(""),[I,N]=D.useState(""),[E,W]=D.useState(null),[$,te]=D.useState([]),[Z,B]=D.useState(""),ee=K=>{B(K),setTimeout(()=>B(""),2500)};async function A(){const le=(await Al(tr(Me,"applications"))).docs.map(ye=>({id:ye.id,...ye.data()}));s(le.sort((ye,Ne)=>ye.id.localeCompare(Ne.id)))}function X(K){a(K);const le=i.find(ye=>ye.id===K);le&&(d(le.id),m(le.title||""),T(le.rootDomain||""),O(le.description||""),v(Array.isArray(le.steps)?le.steps:[])),te([])}function q(){a(""),d(""),m(""),T(""),O(""),v([]),te([])}D.useEffect(()=>{A()},[]);async function P(){if(!c)return alert("App id required");const K=await fetch(`${N0}/apps`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({app:c,title:f,description:w,rootDomain:g})});let le={};try{le=await K.json()}catch{}if(!K.ok)return alert(le.detail||"Backend /api/apps failed");const ye=lt(Me,"applications",c),Ne=await hr(ye),wt={id:c,title:f||c.replace(/_/g," ").replace(/\b\w/g,Nt=>Nt.toUpperCase()),rootDomain:g||"",description:w||"",steps:Ne.exists()?Ne.data().steps||[]:[]};await Ro(ye,wt,{merge:!0}),await A(),a(c),ee(" App saved")}function J(){if(!c)return alert("Select or create an app first");if(!V)return alert("Step title is required");const K={id:`${Date.now()}_${x}`,title:V,type:x,content:b||"",appId:c};if(x==="form"){if(!C)return alert("formName is required for a form step");te(le=>[...le,{...K,formName:C}])}else if(x==="pdf"){if(!I)return alert("formId is required for a PDF step");if(!E)return alert("Select a PDF file to upload");te(le=>[...le,{...K,formId:I,_file:E}])}else te(le=>[...le,K]);j(""),S(""),k(""),N(""),W(null),ee(" Step queued")}function re(K){te(le=>le.filter((ye,Ne)=>Ne!==K))}async function se(){if(!c)return alert("App id required");if($.length===0)return ee("No steps queued");for(let Mn=0;Mn<$.length;Mn++){const Ut=$[Mn];if(Ut.type==="pdf"&&Ut._file){const br=new FormData;br.append("file",Ut._file);const Ai=await fetch(`${N0}/apps/${c}/forms/${Ut.formId}/pdf`,{method:"POST",body:br});let hs={};try{hs=await Ai.json()}catch{}if(!Ai.ok)return alert(hs.detail||`PDF upload failed for ${Ut.formId}`)}}const K=lt(Me,"applications",c),le=await hr(K),ye=le.exists()&&Array.isArray(le.data().steps)?le.data().steps:[],Ne=$.map(({_file:Mn,...Ut})=>Ut),wt=[...ye,...Ne];await is(K,{steps:wt}),await A(),te([]);const Nt=(await hr(K)).data();v(Nt.steps||[]),ee(" Steps saved")}async function ve(K){if(!c)return alert("App id required");if(!window.confirm("Delete this step?"))return;const le=lt(Me,"applications",c),ye=await hr(le),wt=(ye.exists()?ye.data().steps||[]:[]).filter(Nt=>Nt.id!==K);await is(le,{steps:wt}),v(wt),await A(),ee(" Step deleted")}return h.jsxs("div",{style:{display:"flex",height:"100vh",minHeight:600},children:[h.jsxs("aside",{style:{width:280,borderRight:"1px solid #eee",overflowY:"auto",padding:12},children:[h.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:h.jsx("h3",{style:{margin:0},children:"Admin Panel"})}),h.jsxs("div",{style:{marginTop:16},children:[h.jsx("button",{onClick:()=>r("apps"),style:{width:"100%",padding:"8px 12px",marginBottom:"8px",border:"1px solid #e5e7eb",borderRadius:"6px",background:n==="apps"?"#eef2ff":"#fff",color:n==="apps"?"#3730a3":"#374151",cursor:"pointer"},children:"Applications"}),h.jsx("button",{onClick:()=>r("reports"),style:{width:"100%",padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"6px",background:n==="reports"?"#eef2ff":"#fff",color:n==="reports"?"#3730a3":"#374151",cursor:"pointer"},children:"Issue Reports"})]}),n==="apps"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{marginTop:8},children:h.jsx("button",{onClick:q,style:{width:"100%"},children:"+ New Application"})}),h.jsx("ul",{style:{listStyle:"none",padding:0,marginTop:12},children:i.map(K=>h.jsx("li",{style:{marginBottom:6},children:h.jsxs("button",{onClick:()=>X(K.id),style:{width:"100%",textAlign:"left",padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:8,background:o===K.id?"#eef2ff":"#fff"},children:[h.jsx("div",{style:{fontWeight:600},children:K.title||K.id}),h.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:K.id})]})},K.id))})]})]}),h.jsxs("main",{style:{flex:1,overflowY:"auto",padding:16},children:[h.jsxs("div",{style:{position:"sticky",top:0,background:"#fff",zIndex:5,paddingBottom:8,display:"flex",alignItems:"center",gap:12},children:[h.jsx("h2",{style:{margin:0,flex:1},children:n==="apps"?"Admin Dashboard":"Issue Reports"}),h.jsx(Bi,{to:"/dashboard",style:{fontSize:13},children:" Back to Dashboard"}),n==="apps"&&Z&&h.jsx("div",{style:{marginLeft:8,padding:"6px 10px",background:"#ecfeff",border:"1px solid #a5f3fc",borderRadius:8,color:"#155e75",fontSize:13},children:Z})]}),n==="reports"?h.jsx(G6,{}):h.jsxs(h.Fragment,{children:[h.jsxs("section",{style:{border:"1px solid #eee",borderRadius:12,padding:12,marginTop:12,background:"#fff"},children:[h.jsx("h3",{style:{marginTop:0},children:"Application"}),h.jsxs("div",{style:{display:"grid",gap:8},children:[h.jsx("input",{placeholder:"app id (e.g., san_diego_mehko)",value:c,onChange:K=>d(K.target.value)}),h.jsx("input",{placeholder:"title (e.g., San Diego MEHKO)",value:f,onChange:K=>m(K.target.value)}),h.jsx("input",{placeholder:"root domain (e.g., sandiegocounty.gov)",value:g,onChange:K=>T(K.target.value)}),h.jsx("textarea",{placeholder:"description",rows:3,value:w,onChange:K=>O(K.target.value),style:{resize:"vertical"}}),h.jsx("div",{style:{display:"flex",gap:8},children:h.jsx("button",{onClick:P,children:"Save App"})})]})]}),l&&h.jsxs("section",{style:{border:"1px solid #eee",borderRadius:12,padding:12,marginTop:12,background:"#fff"},children:[h.jsx("h3",{style:{marginTop:0},children:"Existing Steps"}),_.length===0?h.jsx("p",{style:{color:"#6b7280"},children:"No steps yet."}):h.jsx("ol",{style:{paddingLeft:18},children:_.map((K,le)=>h.jsx("li",{style:{marginBottom:8},children:h.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:8,padding:8,background:"#fafafa"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[h.jsxs("strong",{style:{flex:1},children:[le+1,". ",K.title," ",h.jsxs("span",{style:{color:"#6b7280"},children:["(",K.type,")"]})]}),h.jsx("button",{onClick:()=>ve(K.id),style:{color:"#dc2626",borderColor:"#fecaca"},title:"Delete step",children:"Delete"})]}),K.type==="pdf"&&h.jsxs("div",{style:{fontSize:13,color:"#374151"},children:["formId: ",h.jsx("code",{children:K.formId})," |"," ",h.jsx(Bi,{to:`/admin/mapper/${c}/${K.formId}`,children:"Mapper"})," ","|"," ",h.jsx(Bi,{to:`/admin/interview/${c}/${K.formId}`,children:"Interview"})]}),K.type==="form"&&h.jsxs("div",{style:{fontSize:13,color:"#374151"},children:["formName: ",h.jsx("code",{children:K.formName})]}),K.content&&h.jsx("div",{style:{marginTop:4,fontSize:13,color:"#6b7280"},children:K.content})]})},K.id))})]}),h.jsxs("section",{style:{border:"1px solid #eee",borderRadius:12,padding:12,marginTop:12,background:"#fff",marginBottom:24},children:[h.jsx("h3",{style:{marginTop:0},children:"Add Steps"}),h.jsxs("div",{style:{display:"grid",gap:8,alignItems:"start"},children:[h.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[h.jsxs("select",{value:x,onChange:K=>L(K.target.value),children:[h.jsx("option",{value:"info",children:"Info"}),h.jsx("option",{value:"form",children:"Form"}),h.jsx("option",{value:"pdf",children:"PDF"})]}),h.jsx("input",{placeholder:"step title",value:V,onChange:K=>j(K.target.value)})]}),h.jsx("textarea",{placeholder:"step description / content (optional for form/pdf)",rows:2,value:b,onChange:K=>S(K.target.value),style:{resize:"vertical"}}),x==="form"&&h.jsx("input",{placeholder:"formName (e.g., MEHKO_SOP-English.pdf)",value:C,onChange:K=>k(K.target.value)}),x==="pdf"&&h.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[h.jsx("input",{placeholder:"formId (e.g., MEHKO_SOP-English)",value:I,onChange:K=>N(K.target.value)}),h.jsx("input",{type:"file",accept:"application/pdf",onChange:K=>{var le;return W(((le=K.target.files)==null?void 0:le[0])||null)}})]}),h.jsxs("div",{style:{display:"flex",gap:8},children:[h.jsx("button",{onClick:J,children:"+ Add to Queue"}),h.jsx("button",{onClick:se,disabled:!c||$.length===0,children:"Save Queued Steps"}),h.jsxs("div",{style:{alignSelf:"center",fontSize:13,color:"#6b7280"},children:[$.length," queued"]})]}),$.length>0&&h.jsxs("div",{style:{marginTop:8,border:"1px dashed #e5e7eb",borderRadius:8,padding:8},children:[h.jsx("strong",{children:"Queued"}),h.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18},children:$.map((K,le)=>h.jsxs("li",{style:{marginBottom:6},children:[K.title," ",h.jsxs("em",{children:["(",K.type,")"]}),K.type==="pdf"&&h.jsxs(h.Fragment,{children:[" "," formId: ",h.jsx("code",{children:K.formId})]}),K.type==="form"&&h.jsxs(h.Fragment,{children:[" "," formName: ",h.jsx("code",{children:K.formName})]}),h.jsx("button",{onClick:()=>re(le),style:{marginLeft:8,fontSize:12},title:"Remove from queue",children:"remove"})]},le))})]})]})]})]})]})]})}const Y6=({app:t,form:e,onMappingComplete:n})=>{const[r,i]=D.useState(!1),[s,o]=D.useState([]),[a,l]=D.useState("idle"),[c,d]=D.useState(0),[f,m]=D.useState(null),[g,T]=D.useState([]),[w,O]=D.useState({fields:[]}),_=D.useRef(null);D.useRef(null),D.useEffect(()=>{v()},[t,e]);const v=async()=>{try{const k=await(await fetch(`/api/apps/${t}/forms/${e}/template`)).json();O(k)}catch{console.log("No existing overlay found")}},x=async C=>{const k=C.target.files[0];if(console.log("File selected:",k),!k||!k.type.includes("pdf")){m("Please select a valid PDF file");return}i(!0),l("analyzing"),d(0),m(null);try{d(20),console.log("Starting PDF upload...");const I=new FormData;I.append("pdf",k),console.log("Sending request to:","http://localhost:3000/api/ai-analyze-pdf");const N=await fetch("http://localhost:3000/api/ai-analyze-pdf",{method:"POST",body:I});if(console.log("Upload response status:",N.status),console.log("Upload response ok:",N.ok),!N.ok){const te=await N.text();throw console.error("Upload failed with response:",te),new Error(`Failed to upload PDF for analysis: ${N.status} ${te}`)}const E=await N.json();console.log("Analysis data received:",E),d(60),l("mapping");const W=L(E.fields);console.log("Processed suggestions:",W),o(W),d(80),l("reviewing");const $=W.filter(te=>te.confidence>.8);console.log("High confidence fields:",$),T($.map(te=>te.id)),d(100)}catch(I){console.error("Error in handleFileUpload:",I),m(I.message),l("idle")}finally{i(!1)}},L=C=>C.map((k,I)=>({id:`ai_field_${I+1}`,label:k.label||`Field ${I+1}`,page:k.page||0,type:k.type||"text",rect:k.rect||[0,0,100,20],fontSize:k.fontSize||11,align:k.align||"left",shrink:k.shrink!==!1,confidence:k.confidence||.5,aiReasoning:k.reasoning||"AI detected form field",originalId:k.originalId,originalRect:k.rect,width:k.rect?k.rect[2]-k.rect[0]:100,height:k.rect?k.rect[3]-k.rect[1]:20})),V=(C,k)=>{T(k?I=>[...I,C]:I=>I.filter(N=>N!==C))},j=async()=>{if(g.length===0){m("Please select at least one field to apply");return}try{const C=s.filter(E=>g.includes(E.id)),k={...w,fields:[...w.fields,...C.map(E=>({id:E.id,label:E.label,page:E.page,type:E.type,rect:E.rect,fontSize:E.fontSize,align:E.align,shrink:E.shrink}))]},I=new FormData;if(I.append("overlay_json",JSON.stringify(k)),!(await fetch(`/api/apps/${t}/forms/${e}/template`,{method:"POST",body:I})).ok)throw new Error("Failed to save field mapping");O(k),n==null||n(k),o([]),T([]),l("idle")}catch(C){m(C.message)}},b=()=>h.jsxs("div",{className:"progress-container",children:[h.jsx("div",{className:"progress-bar",children:h.jsx("div",{className:"progress-fill",style:{width:`${c}%`}})}),h.jsxs("div",{className:"progress-text",children:[a==="analyzing"&&"AI analyzing PDF structure...",a==="mapping"&&"Mapping detected fields...",a==="reviewing"&&"Review AI suggestions..."]})]}),S=()=>h.jsxs("div",{className:"field-suggestions",children:[h.jsx("h3",{children:"AI Field Suggestions"}),h.jsx("div",{className:"suggestions-grid",children:s.map(C=>h.jsxs("div",{className:`field-suggestion ${g.includes(C.id)?"selected":""}`,children:[h.jsxs("div",{className:"field-header",children:[h.jsx("input",{type:"checkbox",checked:g.includes(C.id),onChange:k=>V(C.id,k.target.checked)}),h.jsx("span",{className:"field-label",children:C.label}),h.jsxs("span",{className:`confidence-badge confidence-${Math.floor(C.confidence*10)}`,children:[Math.round(C.confidence*100),"%"]})]}),h.jsxs("div",{className:"field-details",children:[h.jsxs("div",{className:"field-type",children:["Type: ",C.type]}),h.jsxs("div",{className:"field-page",children:["Page: ",C.page+1]}),h.jsxs("div",{className:"field-dimensions",children:["Size: ",Math.round(C.width),"",Math.round(C.height)," px"]}),h.jsx("div",{className:"ai-reasoning",children:C.aiReasoning})]})]},C.id))}),s.length>0&&h.jsx("div",{className:"mapping-actions",children:h.jsxs("button",{className:"apply-mapping-btn",onClick:j,disabled:g.length===0,children:["Apply Selected Fields (",g.length,")"]})})]});return h.jsxs("div",{className:"ai-field-mapper",children:[h.jsxs("div",{className:"mapper-header",children:[h.jsx("h2",{children:" AI-Powered Field Mapping"}),h.jsx("p",{children:"Upload a PDF and let AI automatically detect and map form fields"})]}),!r&&a==="idle"&&h.jsxs("div",{className:"upload-section",children:[h.jsxs("div",{className:"upload-area",onClick:()=>{var C;return(C=_.current)==null?void 0:C.click()},children:[h.jsx("div",{className:"upload-icon",children:""}),h.jsxs("div",{className:"upload-text",children:[h.jsx("strong",{children:"Click to upload PDF"}),h.jsx("span",{children:"or drag and drop"})]})]}),h.jsx("input",{ref:_,type:"file",accept:".pdf",onChange:x,style:{display:"none"}})]}),r&&h.jsx("div",{className:"processing-section",children:b()}),f&&h.jsxs("div",{className:"error-message",children:[h.jsx("span",{className:"error-icon",children:""}),f]}),a==="reviewing"&&s.length>0&&S(),w.fields.length>0&&h.jsxs("div",{className:"existing-fields",children:[h.jsx("h3",{children:"Existing Mapped Fields"}),h.jsxs("div",{className:"fields-count",children:[w.fields.length," field(s) already mapped"]})]})]})},Su="/api",qc=144,Iu=t=>t*(qc/72),Tu=t=>t*(72/qc),X6=(t=[0,0,0,0])=>[Iu(t[0]),Iu(t[1]),Iu(t[2]),Iu(t[3])],J6=(t=[0,0,0,0])=>[Tu(t[0]),Tu(t[1]),Tu(t[2]),Tu(t[3])];function Z6(){const{user:t,loading:e}=Ft();if(e)return h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t||t.email!=="avansardar@outlook.com")return h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),h.jsx("p",{className:"text-gray-600 mb-4",children:"Admin privileges required."}),h.jsx("p",{className:"text-sm text-gray-500",children:"Only authorized users can access this area."}),h.jsx(Bi,{to:"/dashboard",className:"mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Return to Dashboard"})]})});const n=n1(),r=n.app||n.appId,i=n.form||n.formId,[s,o]=D.useState({fields:[]}),[a,l]=D.useState(0),[c,d]=D.useState(1),[f,m]=D.useState(null),[g,T]=D.useState(null),[w,O]=D.useState(null),[_,v]=D.useState(!1),[x,L]=D.useState(!1),[V,j]=D.useState(null),[b,S]=D.useState(null),C=D.useRef(null),k=D.useRef(null);D.useEffect(()=>{(async()=>{const X=await(await fetch(`${Su}/apps/${r}/forms/${i}/template`)).json(),q=Array.isArray(X==null?void 0:X.fields)?X.fields.map(P=>({...P,rect:X6(P.rect)})):[];o({fields:q})})()},[r,i]),D.useEffect(()=>{const A=q=>new URLSearchParams(q).toString();async function X(){const q=await fetch(`${Su}/apps/${r}/forms/${i}/page-metrics?${A({page:a,dpi:qc})}`).then(J=>J.json());T(q),d(q.pages||1);const P=await fetch(`${Su}/apps/${r}/forms/${i}/preview-page?${A({page:a,dpi:qc})}`).then(J=>J.blob());m(URL.createObjectURL(P))}return X(),()=>m(null)},[r,i,a]),D.useEffect(()=>{if(!f||!C.current)return;const A=new Image;A.onload=()=>{const X=C.current,q=X.getContext("2d");X.width=A.width,X.height=A.height,q.clearRect(0,0,X.width,X.height),q.drawImage(A,0,0),q.lineWidth=2,s.fields.filter(J=>Number(J.page||0)===Number(a)).forEach(J=>{const[re,se,ve,K]=J.rect,le=J.id===w,ye=J.id.startsWith("ai_field_");if(le?(q.strokeStyle="#e00",q.lineWidth=3):ye?(q.strokeStyle="#00a",q.lineWidth=2):(q.strokeStyle="#0a0",q.lineWidth=2),q.strokeRect(re,se,ve-re,K-se),x&&le){q.fillStyle="#e00",q.fillRect(re-8/2,se-8/2,8,8),q.fillRect(ve-8/2,se-8/2,8,8),q.fillRect(re-8/2,K-8/2,8,8),q.fillRect(ve-8/2,K-8/2,8,8),q.fillRect((re+ve)/2-8/2,se-8/2,8,8),q.fillRect((re+ve)/2-8/2,K-8/2,8,8),q.fillRect(re-8/2,(se+K)/2-8/2,8,8),q.fillRect(ve-8/2,(se+K)/2-8/2,8,8);const wt=ve-re,Nt=K-se;q.fillStyle="#000",q.font="10px Arial",q.fillText(`${Math.round(wt)}${Math.round(Nt)}`,re,K+15)}(le||x)&&(q.fillStyle="#000",q.font="12px Arial",q.fillText(J.label||J.id,re,se-5))});const P=k.current;P&&(q.strokeStyle="#e00",q.strokeRect(P.x0,P.y0,P.x1-P.x0,P.y1-P.y0))},A.src=f},[f,s,a,w,x]);const I=A=>{const X=C.current.getBoundingClientRect(),q=A.clientX-X.left,P=A.clientY-X.top;if(x){const re=s.fields.filter(se=>Number(se.page||0)===Number(a)).find(se=>{const[ve,K,le,ye]=se.rect;return q>=ve&&q<=le&&P>=K&&P<=ye});if(re){O(re.id);const se=8,[ve,K,le,ye]=re.rect;Math.abs(q-ve)<=se/2&&Math.abs(P-K)<=se/2?S("top-left"):Math.abs(q-le)<=se/2&&Math.abs(P-K)<=se/2?S("top-right"):Math.abs(q-ve)<=se/2&&Math.abs(P-ye)<=se/2?S("bottom-left"):Math.abs(q-le)<=se/2&&Math.abs(P-ye)<=se/2?S("bottom-right"):S(null),j(re);return}}const J=s.fields.find(re=>re.page===a&&q>=re.rect[0]&&q<=re.rect[2]&&P>=re.rect[1]&&P<=re.rect[3]);if(J){O(J.id),k.current=null;return}O(null),x||(k.current={x0:q,y0:P,x1:q,y1:P})},N=A=>{const X=C.current.getBoundingClientRect(),q=A.clientX-X.left,P=A.clientY-X.top;if(x&&V&&w){if(b){const J=s.fields.findIndex(re=>re.id===w);if(J!==-1){const re=[...s.fields],[se,ve,K,le]=re[J].rect;switch(b){case"top-left":re[J].rect=[q,P,K,le];break;case"top-right":re[J].rect=[se,P,q,le];break;case"bottom-left":re[J].rect=[q,ve,K,P];break;case"bottom-right":re[J].rect=[se,ve,q,P];break}const[ye,Ne,wt,Nt]=re[J].rect;wt-ye<20&&(re[J].rect[2]=ye+20),Nt-Ne<15&&(re[J].rect[3]=Ne+15),o({...s,fields:re})}}else{const J=s.fields.findIndex(re=>re.id===w);if(J!==-1){const re=[...s.fields],[se,ve,K,le]=re[J].rect,ye=K-se,Ne=le-ve;re[J].rect=[q-ye/2,P-Ne/2,q+ye/2,P+Ne/2],o({...s,fields:re})}}return}!x&&k.current&&(k.current={...k.current,x1:q,y1:P},f&&m(J=>J))},E=()=>{if(x)j(null),S(null);else if(k.current){const A=k.current;if(Math.abs(A.x1-A.x0)>10&&Math.abs(A.y1-A.y0)>10){const X={id:`field_${Date.now()}`,label:`Field ${s.fields.length+1}`,page:a,type:"text",rect:[A.x0,A.y0,A.x1,A.y1],fontSize:11,align:"left",shrink:!0};o({...s,fields:[...s.fields,X]}),O(X.id)}k.current=null}};async function W(){const A={...s,fields:(s.fields||[]).map(P=>({...P,rect:J6(P.rect)}))},X=new FormData;if(X.append("overlay_json",JSON.stringify(A)),!(await fetch(`${Su}/apps/${r}/forms/${i}/template`,{method:"POST",body:X})).ok)return alert("Save failed")}function $(A){o(X=>{const q=X.fields.findIndex(re=>re.id===w);if(q===-1)return X;const P={...X.fields[q],...A},J=X.fields.slice();return J[q]=P,{...X,fields:J}}),Object.prototype.hasOwnProperty.call(A,"id")&&O(A.id||w)}function te(){w&&(o(A=>({...A,fields:A.fields.filter(X=>X.id!==w)})),O(null))}const Z=D.useMemo(()=>s.fields.find(A=>A.id===w)||null,[s,w]),B=()=>{L(!x),x&&(j(null),S(null))},ee=D.useMemo(()=>{const A=s.fields.filter(P=>P.page===a),X=A.filter(P=>P.id.startsWith("ai_field_")),q=A.filter(P=>!P.id.startsWith("ai_field_"));return{total:A.length,ai:X.length,manual:q.length}},[s,a]);return h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 320px",gap:12,padding:12},children:[h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:8},children:[h.jsx("strong",{children:"Mapper"}),h.jsxs("code",{children:[r,"/",i]}),h.jsx("button",{onClick:W,children:"Save"}),h.jsx("button",{onClick:()=>v(!0),style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"600",cursor:"pointer",marginLeft:"8px"},children:" AI Field Detection"}),h.jsx("button",{onClick:B,style:{background:x?"#dc2626":"#3b82f6",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",fontWeight:"600",cursor:"pointer",marginLeft:"8px"},children:x?" Exit Edit Mode":" Edit Fields"}),h.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:6,alignItems:"center"},children:[h.jsx("button",{disabled:a<=0,onClick:()=>l(A=>Math.max(0,A-1)),children:" Prev"}),h.jsxs("div",{children:["Page ",a+1," / ",c]}),h.jsx("button",{disabled:a>=c-1,onClick:()=>l(A=>Math.min(c-1,A+1)),children:"Next "})]})]}),x&&h.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"6px",padding:"8px 12px",marginBottom:"8px",fontSize:"14px"},children:[h.jsx("strong",{children:" Edit Mode Active:"}),x&&V?" Drag fields to reposition":x&&b?" Resize field by dragging handles":" Click and drag fields to move, drag handles to resize"]}),h.jsx("div",{style:{border:"1px solid #ccc",maxHeight:"70vh",overflow:"auto",backgroundColor:"#f9f9f9"},children:h.jsx("canvas",{ref:C,style:{cursor:x?"move":"crosshair",display:"block"},onMouseDown:I,onMouseMove:N,onMouseUp:E})})]}),h.jsxs("div",{style:{border:"1px solid #eee",padding:10,borderRadius:8},children:[h.jsx("div",{style:{fontWeight:700,marginBottom:8},children:"Field"}),!Z&&h.jsx("div",{style:{color:"#666"},children:"Click a box to edit"}),Z&&h.jsxs("div",{style:{display:"grid",gap:8},children:[h.jsxs("label",{children:[h.jsx("div",{children:"ID"}),h.jsx("input",{value:Z.id,onChange:A=>$({id:A.target.value})})]}),h.jsxs("label",{children:[h.jsx("div",{children:"Label"}),h.jsx("input",{value:Z.label||"",onChange:A=>$({label:A.target.value})})]}),h.jsxs("label",{children:[h.jsx("div",{children:"Type"}),h.jsxs("select",{value:Z.type||"text",onChange:A=>$({type:A.target.value}),children:[h.jsx("option",{value:"text",children:"text"}),h.jsx("option",{value:"checkbox",children:"checkbox"})]})]}),h.jsxs("label",{children:[h.jsx("div",{children:"Font Size"}),h.jsx("input",{type:"number",value:Z.fontSize||11,onChange:A=>$({fontSize:Number(A.target.value||11)})})]}),h.jsxs("label",{children:[h.jsx("div",{children:"Align"}),h.jsxs("select",{value:Z.align||"left",onChange:A=>$({align:A.target.value}),children:[h.jsx("option",{children:"left"}),h.jsx("option",{children:"center"}),h.jsx("option",{children:"right"})]})]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:!!Z.shrink,onChange:A=>$({shrink:A.target.checked})}),h.jsx("span",{style:{marginLeft:6},children:"Shrink to fit"})]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:!!Z.uppercase,onChange:A=>$({uppercase:A.target.checked})}),h.jsx("span",{style:{marginLeft:6},children:"Uppercase"})]}),h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:!!Z.bg,onChange:A=>$({bg:A.target.checked})}),h.jsx("span",{style:{marginLeft:6},children:"White-out BG"})]}),h.jsxs("div",{style:{display:"flex",gap:8},children:[h.jsx("button",{onClick:te,style:{color:"#a00"},children:"Delete"}),h.jsx("button",{onClick:()=>$({})||W(),children:"Save"})]})]}),h.jsx("hr",{style:{margin:"12px 0"}}),h.jsxs("div",{children:[h.jsx("div",{style:{marginBottom:"8px"},children:h.jsx("strong",{children:"Field Statistics:"})}),h.jsxs("div",{style:{fontSize:"14px",color:"#666"},children:[h.jsxs("div",{children:[" Total: ",ee.total]}),h.jsxs("div",{children:[" AI Detected: ",ee.ai]}),h.jsxs("div",{children:[" Manual: ",ee.manual]})]})]})]}),_&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:h.jsxs("div",{style:{background:"white",borderRadius:"16px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",position:"relative"},children:[h.jsx("button",{onClick:()=>v(!1),style:{position:"absolute",top:"16px",right:"16px",background:"#f3f4f6",border:"none",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer",fontSize:"18px"},children:""}),h.jsx(Y6,{app:r,form:i,onMappingComplete:A=>{o(A),v(!1),L(!0)}})]})})]})}const D0="avansardar@outlook.com",sf=({children:t})=>{const{user:e,loading:n}=Ft(),r=er();return console.log("ProtectedAdminRoute:",{user:e,loading:n,location:r.pathname}),n?(console.log("ProtectedAdminRoute: Still loading..."),h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})})):!e||e.email!==D0?(console.log("ProtectedAdminRoute: Access denied, redirecting to dashboard",{user:e==null?void 0:e.email,required:D0}),h.jsx(s1,{to:"/dashboard",state:{from:r},replace:!0})):(console.log("ProtectedAdminRoute: Access granted, rendering admin content"),t)};function e3(){return h.jsxs(TP,{children:[h.jsx(Es,{path:"/dashboard/*",element:h.jsx(K6,{})}),h.jsx(Es,{path:"/admin",element:h.jsx(sf,{children:h.jsx(Q6,{})})}),h.jsx(Es,{path:"/admin/mapper/:appId/:formId",element:h.jsx(sf,{children:h.jsx(Z6,{})})}),h.jsx(Es,{path:"/admin/interview/:appId/:formId",element:h.jsx(sf,{children:h.jsx(q6,{})})}),h.jsx(Es,{path:"*",element:h.jsx(s1,{to:"/dashboard",replace:!0})})]})}const Ur={ANIMATING:"animating",SHOWN:"shown",HIDING:"hiding",HIDDEN:"hidden"},sr="fs-loader";function t3({children:t}){const e=dd(),n=w1(),[r,i]=D.useState(!1),[s,o]=D.useState(!1),[a,l]=D.useState(!1),[c,d]=D.useState(null),[f,m]=D.useState("spinner-hidden"),[g,T]=D.useState("loader-content-info-hidden"),[w,O]=D.useState(Ur.ANIMATING),_=(c==null?void 0:c.preloader.title)||"",v=(c==null?void 0:c.preloader.subtitle)||"";D.useEffect(()=>{const b=e.resolvePath("/data/settings.json");fetch(b).then(S=>S.json()).then(S=>{d(S)})},[]),D.useEffect(()=>{if(!c)return;const b=c.preloader.enabled;if(i(b),!b){j();return}c&&a&&s&&x()},[a,s,c]);const x=()=>{n.clearAllWithTag(sr),i(!0),n.schedule(()=>{m("")},100,sr),n.schedule(()=>{T("")},500,sr),n.schedule(()=>{O(Ur.SHOWN),e.addClassToBody("body-with-image")},900,sr),n.schedule(()=>{L()},2500,sr)},L=()=>{let b=0;n.interval(()=>{if(b+=.2,b>=5){V();return}if(document.querySelectorAll("img").length<=2)return;e.didLoadAllImages()&&V()},200,sr)},V=()=>{n.clearAllWithTag(sr),O(Ur.HIDING),n.schedule(()=>{O(Ur.HIDDEN),i(!1)},400,sr)},j=()=>{e.addClassToBody("body-with-image"),n.clearAllWithTag(sr),O(Ur.HIDDEN),i(!1)};return console.log("Preloader loaded"),h.jsxs(h.Fragment,{children:[r&&h.jsx("div",{className:`loader loader-${w===Ur.ANIMATING||w===Ur.SHOWN?"visible":"hidden"}`,children:h.jsxs("div",{className:"loader-content text-white",children:[h.jsx("img",{src:e.resolvePath("/images/svg/pacman.svg"),onLoad:()=>{o(!0)},className:`spinner ${f}`,alt:"loader"}),h.jsxs("div",{className:`loader-content-info ${g}`,children:[h.jsxs("div",{className:"title-wrapper",children:[h.jsx("img",{src:e.resolvePath("/images/svg/logo.svg"),onLoad:()=>{l(!0)},className:"logo me-3",alt:"logo"}),h.jsx("h5",{dangerouslySetInnerHTML:{__html:_}})]}),h.jsx("p",{className:"opacity-50 text-4 text-center",dangerouslySetInnerHTML:{__html:v}})]})]})}),w!==Ur.ANIMATING&&h.jsx(h.Fragment,{children:t})]})}Kx(document.getElementById("root")).render(h.jsx(D.StrictMode,{children:h.jsx(vR,{children:h.jsx(wR,{children:h.jsx(xR,{children:h.jsx(GP,{children:h.jsx(Dj,{children:h.jsx(Oj,{children:h.jsx(t3,{children:h.jsx(e3,{})})})})})})})})}));
