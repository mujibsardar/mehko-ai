# Manual PDF Setup Guide

## Overview
When county PDFs are not directly accessible via URL (403 Forbidden, authentication required, etc.), you need to manually download them and place them in the correct folder structure.

## Folder Structure
```
data/applications/{county_id}/forms/{form_id}/
├── form.pdf                    # The actual PDF file
├── acroform-definition.json    # Form field definitions (auto-generated)
├── meta.json                   # Form metadata (auto-generated)
└── overlay.json                # Form overlay data (auto-generated)
```

## Step-by-Step Process

### 1. Create County Directory Structure
```bash
mkdir -p data/applications/contra_costa_county_mehko/forms
```

### 2. Download PDFs Manually
- Visit the county website
- Download the PDF forms manually
- Save them with descriptive names

### 3. Create Form Directories
For each PDF form, create a directory named after the `formId`:

```bash
# For SOP form
mkdir -p data/applications/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_SOP_ENGLISH

# For Permit Application form  
mkdir -p data/applications/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_PERMIT_APPLICATION_REV
```

### 4. Place PDFs in Correct Locations
```bash
# Copy the downloaded PDFs to the correct locations
cp downloaded_sop.pdf data/applications/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_SOP_ENGLISH/form.pdf
cp downloaded_permit_app.pdf data/applications/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_PERMIT_APPLICATION_REV/form.pdf
```

### 5. Update JSON with Local URLs
Update the county JSON file to use local URLs instead of external ones:

```json
{
  "formId": "CONTRA_COSTA_MEHKO_SOP_ENGLISH",
  "pdfUrl": "https://api.mehko.ai/api/apps/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_SOP_ENGLISH/pdf"
}
```

### 6. Generate Form Definitions (Optional)
The system can auto-generate form field definitions, or you can create them manually.

## Example for Contra Costa County

### Directory Structure:
```
data/applications/contra_costa_county_mehko/
└── forms/
    ├── CONTRA_COSTA_MEHKO_SOP_ENGLISH/
    │   └── form.pdf
    └── CONTRA_COSTA_MEHKO_PERMIT_APPLICATION_REV/
        └── form.pdf
```

### Updated JSON URLs:
```json
{
  "steps": [
    {
      "id": "sop_form",
      "type": "pdf",
      "formId": "CONTRA_COSTA_MEHKO_SOP_ENGLISH",
      "pdfUrl": "https://api.mehko.ai/api/apps/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_SOP_ENGLISH/pdf"
    },
    {
      "id": "permit_application_form", 
      "type": "pdf",
      "formId": "CONTRA_COSTA_MEHKO_PERMIT_APPLICATION_REV",
      "pdfUrl": "https://api.mehko.ai/api/apps/contra_costa_county_mehko/forms/CONTRA_COSTA_MEHKO_PERMIT_APPLICATION_REV/pdf"
    }
  ]
}
```

## Validation After Manual Setup

Run the validation script to ensure everything is correct:

```bash
node scripts/validate-county-data.js data/contra_costa_county_mehko.json
```

## Notes
- The `acroform-definition.json`, `meta.json`, and `overlay.json` files are typically auto-generated by the system
- Make sure PDF filenames are exactly `form.pdf` in each form directory
- The `formId` in the JSON must match the directory name exactly
- Local URLs follow the pattern: `https://api.mehko.ai/api/apps/{county_id}/forms/{form_id}/pdf`
