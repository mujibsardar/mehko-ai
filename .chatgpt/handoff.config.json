{
    "issue": "County cleanup script failed - data still exists in multiple locations",
    "problem": "clear-all-counties.mjs script only deleted local JSON files but left data in data/applications/ directories and Firestore",
    "ask": "Complete the county cleanup by removing ALL county data from: 1) data/applications/ directories, 2) Firestore applications collection, 3) Firestore user collections related to county data",
    "include": [
        {
            "path": "data/applications/",
            "max_lines": 200
        },
        {
            "path": "scripts/clear-all-counties.mjs",
            "max_lines": 100
        },
        {
            "path": "src/firebase/firebase.js",
            "max_lines": 50
        },
        {
            "path": "src/components/admin/Admin.jsx",
            "max_lines": 100
        }
    ],
    "extra": [
        "find data/applications -type d -name '*county*'",
        "ls -la data/applications/",
        "firebase firestore:collections list",
        "grep -r 'applications' src/ --include='*.js' --include='*.jsx'"
    ],
    "context": {
        "current_state": "County data exists in multiple locations despite running clear-all-counties.mjs",
        "target_state": "Complete removal of all county-related data from local files and Firestore",
        "locations_to_clean": [
            "data/applications/*county* directories",
            "Firestore 'applications' collection",
            "Firestore user collections with county data",
            "Any remaining county JSON files"
        ],
        "script_limitation": "clear-all-counties.mjs only handles local JSON files, not directories or Firestore"
    },
    "workflow": [
        "1. Identify all county data locations (local + Firestore)",
        "2. Remove data/applications/*county* directories completely",
        "3. Clear Firestore 'applications' collection",
        "4. Check user collections for county-related data",
        "5. Verify complete cleanup",
        "6. Update clear-all-counties.mjs to handle all locations"
    ],
    "firebase_operations": {
        "collections_to_clear": [
            "applications",
            "users (check for county references)",
            "formData (check for county references)"
        ],
        "queries_needed": [
            "Delete all documents in 'applications' collection",
            "Find users with county-related form data",
            "Remove county-related user data"
        ]
    },
    "local_cleanup": {
        "directories": "Remove entire data/applications/*county* folders",
        "files": "Remove any remaining county JSON files",
        "manifest": "Reset data/manifest.json if needed"
    },
    "verification": [
        "data/applications/ should be empty or contain no county data",
        "Firestore 'applications' collection should be empty",
        "No county references in user collections",
        "clear-all-counties.mjs should work completely"
    ]
}